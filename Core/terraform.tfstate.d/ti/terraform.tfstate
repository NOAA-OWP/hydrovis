{
  "version": 4,
  "terraform_version": "1.0.1",
  "serial": 503,
  "lineage": "0869e516-7524-1435-a74c-07d47d75e412",
  "outputs": {},
  "resources": [
    {
      "module": "module.data-ingest-ec2",
      "mode": "data",
      "type": "aws_ami",
      "name": "linux",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-025b76b777024295e",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-0a876d9af57e76134",
                  "throughput": "0",
                  "volume_size": "12",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-11-19T21:49:21.000Z",
            "description": "add docker for stig",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-amznlinux2-STIGD*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-025b76b777024295e",
            "image_id": "ami-025b76b777024295e",
            "image_location": "526904826677/hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": null,
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-0a876d9af57e76134",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/amzn-linux2-stig-test/1.0.4/24",
              "Name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
              "OS": "Linux",
              "TaskOrderId": "1305L420FNWWJ0136",
              "hydrovis-sys": "admin-security",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydroviz",
              "vpc": "dev"
            },
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-ingest-ec2",
      "mode": "data",
      "type": "template_file",
      "name": "prc_install",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "993671f94560bf3cd5c33dd37d28c40e2adb4fc326be6dd6336895a44a9af070",
            "rendered": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\n# Used for Rsyslog to send relevant logs to Logstash\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=10.26.150.5\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=data_ingest\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\necho \"Installing System Dependencies\"\nsudo yum -y install git postgresql12\n\necho \"Installing HML Ingester\"\naws s3 cp s3://hydrovis-ti-deployment-us-east-1/ingest/owp-hml-ingester.tar.gz /home/ec2-user\ntar -C /home/ec2-user -xzf /home/ec2-user/owp-hml-ingester.tar.gz\n\necho \"Updating HML Ingester Configs\"\nRSCHEME=amqps\nRPORT=5671\nRHOST=b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com\nRPASSWORD=urkZ6DiRqC4jRPjX6sbAnx8Nq\nDBHOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\nDBPASSWORD=urkZ6DiRqC4jRPjX6sbAnx8Nq\n\n# Update configs\n(echo \"$RHOST\"; echo \"$RPASSWORD\"; echo \"$DBHOST\"; echo \"$DBPASSWORD\") | sudo /home/ec2-user/owp-hml-ingester/update_configs.sh hydrovis.ti\n\necho \"Building HML Ingester Dockers\"\n/usr/local/bin/docker-compose -f /home/ec2-user/owp-hml-ingester/docker-compose_hydrovis_ti.yml build\n\necho \"Spinning up HML Ingester Dockers\"\n/usr/local/bin/docker-compose -f /home/ec2-user/owp-hml-ingester/docker-compose_hydrovis_ti.yml up -d\n\necho \"Finished Setup\"\n\n",
            "template": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\n# Used for Rsyslog to send relevant logs to Logstash\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=${logstash_ip}\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=data_ingest\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\necho \"Installing System Dependencies\"\nsudo yum -y install git postgresql12\n\necho \"Installing HML Ingester\"\naws s3 cp s3://${DEPLOYMENT_DATA_BUCKET}/ingest/owp-hml-ingester.tar.gz /home/ec2-user\ntar -C /home/ec2-user -xzf /home/ec2-user/owp-hml-ingester.tar.gz\n\necho \"Updating HML Ingester Configs\"\nRSCHEME=${RSCHEME}\nRPORT=${RPORT}\nRHOST=${RHOST}\nRPASSWORD=${MQINGESTPASSWORD}\nDBHOST=${DBHOST}\nDBPASSWORD=${DBPASSWORD}\n\n# Update configs\n(echo \"$RHOST\"; echo \"$RPASSWORD\"; echo \"$DBHOST\"; echo \"$DBPASSWORD\") | sudo /home/ec2-user/owp-hml-ingester/update_configs.sh hydrovis.${HVLEnvironment}\n\necho \"Building HML Ingester Dockers\"\n/usr/local/bin/docker-compose -f /home/ec2-user/owp-hml-ingester/docker-compose_hydrovis_${HVLEnvironment}.yml build\n\necho \"Spinning up HML Ingester Dockers\"\n/usr/local/bin/docker-compose -f /home/ec2-user/owp-hml-ingester/docker-compose_hydrovis_${HVLEnvironment}.yml up -d\n\necho \"Finished Setup\"\n\n",
            "vars": {
              "DBHOST": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
              "DBPASSWORD": "urkZ6DiRqC4jRPjX6sbAnx8Nq",
              "DEPLOYMENT_DATA_BUCKET": "hydrovis-ti-deployment-us-east-1",
              "HVLEnvironment": "ti",
              "MQINGESTPASSWORD": "urkZ6DiRqC4jRPjX6sbAnx8Nq",
              "RHOST": "b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com",
              "RPORT": "5671",
              "RSCHEME": "amqps",
              "logstash_ip": "10.26.150.5"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "DBPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "MQINGESTPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RHOST",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RPORT",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RSCHEME",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.data-ingest-ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "ingest_prc1",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-025b76b777024295e",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-02496be08a2c6ec58",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "hydrovis-ti-hml-ingest-role",
            "id": "i-02496be08a2c6ec58",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.small",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0fbc70028ea41e5e4",
            "private_dns": "ip-10-26-150-72.ec2.internal",
            "private_ip": "10.26.150.72",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 100,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0d4ae5fbc59198472",
                "volume_size": 30,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0712c2c2742111aa1",
            "tags": {
              "Name": "hv-ti-ing-l-prc-1",
              "OS": "Linux"
            },
            "tags_all": {
              "Name": "hv-ti-ing-l-prc-1",
              "OS": "Linux",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "d1d256c6a174038f25af5570a56f8e6f65d4bdec",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0874e1b42d1981b59",
              "sg-0890e0d212253e91c",
              "sg-0b710d40b356de030"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.iam-roles.aws_iam_instance_profile.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.iam-roles.aws_iam_instance_profile.HydrovisSSMInstanceProfileRole",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.monitoring.aws_elasticsearch_domain.es",
            "module.monitoring.aws_instance.logstash",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.data-ingest-ec2.data.template_file.prc_install",
            "module.monitoring.data.template_file.startup",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.secrets-manager.module.secret.random_password.password",
            "module.data-ingest-ec2.data.aws_ami.linux",
            "module.monitoring.data.aws_ami.linux",
            "module.monitoring.data.template_file.parser_templates",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.monitoring.data.cloudinit_config.startup",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.security-groups.aws_security_group.es-sg",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.data-ingest-ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "ingest_prc2",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-025b76b777024295e",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-0131a57f8b183f372",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1b",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "hydrovis-ti-hml-ingest-role",
            "id": "i-0131a57f8b183f372",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.small",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-072a09767720539b3",
            "private_dns": "ip-10-26-150-190.ec2.internal",
            "private_ip": "10.26.150.190",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 100,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0c798169720d940bc",
                "volume_size": 30,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0d1ea9ca66f139cfc",
            "tags": {
              "Name": "hv-ti-ing-l-prc-2",
              "OS": "Linux"
            },
            "tags_all": {
              "Name": "hv-ti-ing-l-prc-2",
              "OS": "Linux",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "d1d256c6a174038f25af5570a56f8e6f65d4bdec",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0874e1b42d1981b59",
              "sg-0890e0d212253e91c",
              "sg-0b710d40b356de030"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.monitoring.data.template_file.parser_templates",
            "module.monitoring.data.template_file.startup",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.monitoring.aws_instance.logstash",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_instance_profile.hydrovis-hml-ingest-role",
            "module.monitoring.aws_elasticsearch_domain.es",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.data-ingest-ec2.data.aws_ami.linux",
            "module.data-ingest-ec2.data.template_file.prc_install",
            "module.monitoring.data.cloudinit_config.startup",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_instance_profile.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.es-sg",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_route_table.private",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.monitoring.data.aws_ami.linux",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "aws_ami",
      "name": "linux",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-025b76b777024295e",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-0a876d9af57e76134",
                  "throughput": "0",
                  "volume_size": "12",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-11-19T21:49:21.000Z",
            "description": "add docker for stig",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-amznlinux2-STIGD*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-025b76b777024295e",
            "image_id": "ami-025b76b777024295e",
            "image_location": "526904826677/hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": null,
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-0a876d9af57e76134",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/amzn-linux2-stig-test/1.0.4/24",
              "Name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
              "OS": "Linux",
              "TaskOrderId": "1305L420FNWWJ0136",
              "hydrovis-sys": "admin-security",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydroviz",
              "vpc": "dev"
            },
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "cloudinit_config",
      "name": "startup",
      "provider": "provider[\"registry.terraform.io/hashicorp/cloudinit\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "boundary": "MIMEBOUNDARY",
            "gzip": false,
            "id": "962122055",
            "part": [
              {
                "content": "#cloud-config\n{\"write_files\":[{\"content\":\"-----BEGIN OPENSSH PRIVATE KEY-----\\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW\\nQyNTUxOQAAACCuSfpuEIxUW00QYRRbi9UDxPhg9qGMV3kgVuumB4rDFQAAAKCvoIHSr6CB\\n0gAAAAtzc2gtZWQyNTUxOQAAACCuSfpuEIxUW00QYRRbi9UDxPhg9qGMV3kgVuumB4rDFQ\\nAAAEAuLTSnhRk/7tqqFTrONBLjaP1YX0CAss6cUf0Y4SqtiK5J+m4QjFRbTRBhFFuL1QPE\\n+GD2oYxXeSBW66YHisMVAAAAFm5pY2suY2hhZHdpY2tAbm9hYS5nb3YBAgMEBQYH\\n-----END OPENSSH PRIVATE KEY-----\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/home/ec2-user/.ssh/id_ed25519\",\"permissions\":\"0400\"},{\"content\":\"version: \\\"3.5\\\"\\nservices:\\n  wrds_infrastructure:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n    container_name: wrds_infrastructure\\n    restart: always\\n    volumes:\\n      - wrds_apis:/var/www/\\n    networks:\\n      - wrds_nginx\\n    ports:\\n      - \\\"80:80\\\"\\n    environment:\\n      - ENV=aws\\n    external_links:\\n      - wrds_location_api_v3.0\\n      - wrds_rfc_forecast_api_v2.0\\n      - wrds_rfc_forecast_api_v1.1\\nvolumes:\\n  wrds_apis:\\n    name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-infrastructure.yml\",\"permissions\":\"0777\"},{\"content\":\"DB_NAME=wrds_location3\\nDB_USER=location_ro_user\\nDB_PASS=1WsSGw8XcGIfqYplZ3K9hd05T\\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\\nDB_PORT=5432\\nENVIRONMENT=development\\nLOCATION_API_VERSION=v3.0\\nLOCATION_API_STACK=ti\\nALLOWED_GUNICORN_WORKERS=3\\nMODEL_TRACING_API_HOST=http://wrdsmodeltracingapi:4000\\nMODEL_TRACING_API_VERSION=ti\\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\\nDEFAULT_NWM_LOCATION_CROSSWALK_DATASET=2.1-corrected\\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\\n## Logging variables\\nLOCATION_LOGLEVEL=Debug\\nCONSOLE_LOG=True\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/location.env\",\"permissions\":\"0777\"},{\"content\":\"version: '3.5'\\nservices:\\n  wrds_location_api_v3.0:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n      args:\\n        API_HOST: localhost\\n    cpus: \\\"4.0\\\"\\n    mem_limit: 4.5g\\n    container_name: wrds_location_api_v3.0\\n    restart: always\\n    entrypoint:\\n      - /opt/wrds_location_api/location_api/entrypoint.sh\\n    env_file: env.aws\\n    expose:\\n      - \\\"4000\\\"\\n    networks:\\n      wrds_nginx:\\n        aliases:\\n          - wrdslocationapiv3.0\\n    volumes:\\n      - type: volume\\n        source: wrds_apis\\n        target: /var/www/\\nvolumes:\\n  wrds_apis:\\n    external:\\n      name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    external:\\n      name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-location.yml\",\"permissions\":\"0777\"},{\"content\":\"### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\\nDB_NAME=rfcfcst\\nLOCATION_DB_NAME=wrds_location3\\nDB_USER=rfc_fcst_ro_user\\nDB_PASS=0EtLa8gbAB6VWyPBiY3yLfyT9\\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\\nDB_PORT=5432\\nENVIRONMENT=development\\nRFC_FORECAST_API_VERSION=v2.0\\nRFC_FORECAST_API_STACK=ti\\nALLOWED_GUNICORN_WORKERS=3\\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\\n## Logging variables\\nFORECAST_LOGLEVEL=Debug\\nCONSOLE_LOG=True\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/forecast-2.0.env\",\"permissions\":\"0777\"},{\"content\":\"version: '3.5'\\nservices:\\n  wrds_rfc_forecast_api_v2.0:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n      args:\\n        API_HOST: localhost\\n    cpus: \\\"4.0\\\"\\n    mem_limit: 4.0g\\n    container_name: wrds_rfc_forecast_api_v2.0\\n    restart: always\\n    entrypoint:\\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\\n    env_file: env.aws\\n    expose:\\n      - \\\"8000\\\"\\n    networks:\\n      wrds_nginx:\\n        aliases:\\n          - wrdsrfcforecastapiv2.0\\n    volumes:\\n      - type: volume\\n        source: wrds_apis\\n        target: /var/www/\\nvolumes:\\n  wrds_apis:\\n    external:\\n      name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    external:\\n      name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-forecast-2.0.yml\",\"permissions\":\"0777\"},{\"content\":\"### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\\nDB_NAME=rfcfcst\\nLOCATION_DB_NAME=wrds_location3\\nDB_USER=rfc_fcst_ro_user\\nDB_PASS=0EtLa8gbAB6VWyPBiY3yLfyT9\\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\\nDB_PORT=5432\\nENVIRONMENT=development\\nRFC_FORECAST_API_VERSION=v1.1\\nRFC_FORECAST_API_STACK=ti\\nALLOWED_GUNICORN_WORKERS=3\\nLOCATION_API_HOST=http://wrdslocationapiv3:4000\\nLOCATION_API_VERSION=v3\\nLOCATION_API_STACK=ti\\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\\n## Logging variables\\nFORECAST_LOGLEVEL=Debug\\nCONSOLE_LOG=True\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/forecast-1.1.env\",\"permissions\":\"0777\"},{\"content\":\"version: '3.5'\\nservices:\\n  wrds_rfc_forecast_api_v1.1:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n      args:\\n        API_HOST: localhost\\n    cpus: \\\"4.0\\\"\\n    mem_limit: 4.0g\\n    container_name: wrds_rfc_forecast_api_v1.1\\n    restart: always\\n    entrypoint:\\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\\n    env_file: env.aws\\n    expose:\\n      - \\\"8000\\\"\\n    networks:\\n      wrds_nginx:\\n        aliases:\\n          - wrdsrfcforecastapiv1.1\\n    volumes:\\n      - type: volume\\n        source: wrds_apis\\n        target: /var/www/\\nvolumes:\\n  wrds_apis:\\n    external:\\n      name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    external:\\n      name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-forecast-1.1.yml\",\"permissions\":\"0777\"}]}\n",
                "content_type": "text/cloud-config",
                "filename": "cloud-config.yaml",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\n# Used for Rsyslog to send relevant logs to Logstash\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=10.26.150.5\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=data_services\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\necho \"Disabling Vlab Hostkey Requirement\"\n# Disable the need to require VLab's host key for the git clone commands\n# Couldn't seem to figure out how to properly add Vlab to the known_hosts file\nexport GIT_SSH_COMMAND=\"ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -i /home/ec2-user/.ssh/id_ed25519 -o IdentitiesOnly=yes\"\n\n\necho \"Installing System Dependencies\"\nsudo yum -y install git\nsudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n\necho \"Setting up WRDS File Structure\"\nsudo chmod 777 /wrds\ncd /wrds\n\necho \"Cloning WRDS Infrastructure\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/wrds-infrastructure\ncd wrds-infrastructure\ngit checkout 8f7131f9b70ff3f480f252c4bc911cb961ffa762\ngit pull\n\necho \"Building NGINX Docker\"\ncd nginx\nmv ../../docker-compose-infrastructure.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Location API\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/wrds-location-api\ncd wrds-location-api\ngit checkout ce1bfd821c335a69942519c5078a2929c4d397be\n\necho \"Building Location API Docker\"\ncd wrds-location-api\nmv ../../location.env env.aws\nmv ../../docker-compose-location.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V2.0\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/rfc-forecast-api\ncd rfc-forecast-api\ngit checkout a598b16314daea5e1ea880af7eebe798d4fdc04f\n\necho \"Building Forecast API V2.0 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-2.0.env env.aws\nmv ../../docker-compose-forecast-2.0.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V1.1\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/rfc-forecast-api rfc-forecast-api-1.1\ncd rfc-forecast-api-1.1\ngit checkout 19edf9cc9dbbd84e08f5a03622a2f97bfd67df4b\n\necho \"Building Forecast API V1.1 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-1.1.env env.aws\nmv ../../docker-compose-forecast-1.1.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Restarting NGINX Docker\"\nsudo docker restart wrds_infrastructure\n\necho \"Finished Setup\"",
                "content_type": "text/x-shellscript",
                "filename": "startup.sh",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"cloud-config.yaml\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/cloud-config\r\nMime-Version: 1.0\r\n\r\n#cloud-config\n{\"write_files\":[{\"content\":\"-----BEGIN OPENSSH PRIVATE KEY-----\\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW\\nQyNTUxOQAAACCuSfpuEIxUW00QYRRbi9UDxPhg9qGMV3kgVuumB4rDFQAAAKCvoIHSr6CB\\n0gAAAAtzc2gtZWQyNTUxOQAAACCuSfpuEIxUW00QYRRbi9UDxPhg9qGMV3kgVuumB4rDFQ\\nAAAEAuLTSnhRk/7tqqFTrONBLjaP1YX0CAss6cUf0Y4SqtiK5J+m4QjFRbTRBhFFuL1QPE\\n+GD2oYxXeSBW66YHisMVAAAAFm5pY2suY2hhZHdpY2tAbm9hYS5nb3YBAgMEBQYH\\n-----END OPENSSH PRIVATE KEY-----\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/home/ec2-user/.ssh/id_ed25519\",\"permissions\":\"0400\"},{\"content\":\"version: \\\"3.5\\\"\\nservices:\\n  wrds_infrastructure:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n    container_name: wrds_infrastructure\\n    restart: always\\n    volumes:\\n      - wrds_apis:/var/www/\\n    networks:\\n      - wrds_nginx\\n    ports:\\n      - \\\"80:80\\\"\\n    environment:\\n      - ENV=aws\\n    external_links:\\n      - wrds_location_api_v3.0\\n      - wrds_rfc_forecast_api_v2.0\\n      - wrds_rfc_forecast_api_v1.1\\nvolumes:\\n  wrds_apis:\\n    name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-infrastructure.yml\",\"permissions\":\"0777\"},{\"content\":\"DB_NAME=wrds_location3\\nDB_USER=location_ro_user\\nDB_PASS=1WsSGw8XcGIfqYplZ3K9hd05T\\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\\nDB_PORT=5432\\nENVIRONMENT=development\\nLOCATION_API_VERSION=v3.0\\nLOCATION_API_STACK=ti\\nALLOWED_GUNICORN_WORKERS=3\\nMODEL_TRACING_API_HOST=http://wrdsmodeltracingapi:4000\\nMODEL_TRACING_API_VERSION=ti\\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\\nDEFAULT_NWM_LOCATION_CROSSWALK_DATASET=2.1-corrected\\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\\n## Logging variables\\nLOCATION_LOGLEVEL=Debug\\nCONSOLE_LOG=True\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/location.env\",\"permissions\":\"0777\"},{\"content\":\"version: '3.5'\\nservices:\\n  wrds_location_api_v3.0:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n      args:\\n        API_HOST: localhost\\n    cpus: \\\"4.0\\\"\\n    mem_limit: 4.5g\\n    container_name: wrds_location_api_v3.0\\n    restart: always\\n    entrypoint:\\n      - /opt/wrds_location_api/location_api/entrypoint.sh\\n    env_file: env.aws\\n    expose:\\n      - \\\"4000\\\"\\n    networks:\\n      wrds_nginx:\\n        aliases:\\n          - wrdslocationapiv3.0\\n    volumes:\\n      - type: volume\\n        source: wrds_apis\\n        target: /var/www/\\nvolumes:\\n  wrds_apis:\\n    external:\\n      name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    external:\\n      name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-location.yml\",\"permissions\":\"0777\"},{\"content\":\"### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\\nDB_NAME=rfcfcst\\nLOCATION_DB_NAME=wrds_location3\\nDB_USER=rfc_fcst_ro_user\\nDB_PASS=0EtLa8gbAB6VWyPBiY3yLfyT9\\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\\nDB_PORT=5432\\nENVIRONMENT=development\\nRFC_FORECAST_API_VERSION=v2.0\\nRFC_FORECAST_API_STACK=ti\\nALLOWED_GUNICORN_WORKERS=3\\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\\n## Logging variables\\nFORECAST_LOGLEVEL=Debug\\nCONSOLE_LOG=True\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/forecast-2.0.env\",\"permissions\":\"0777\"},{\"content\":\"version: '3.5'\\nservices:\\n  wrds_rfc_forecast_api_v2.0:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n      args:\\n        API_HOST: localhost\\n    cpus: \\\"4.0\\\"\\n    mem_limit: 4.0g\\n    container_name: wrds_rfc_forecast_api_v2.0\\n    restart: always\\n    entrypoint:\\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\\n    env_file: env.aws\\n    expose:\\n      - \\\"8000\\\"\\n    networks:\\n      wrds_nginx:\\n        aliases:\\n          - wrdsrfcforecastapiv2.0\\n    volumes:\\n      - type: volume\\n        source: wrds_apis\\n        target: /var/www/\\nvolumes:\\n  wrds_apis:\\n    external:\\n      name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    external:\\n      name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-forecast-2.0.yml\",\"permissions\":\"0777\"},{\"content\":\"### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\\nDB_NAME=rfcfcst\\nLOCATION_DB_NAME=wrds_location3\\nDB_USER=rfc_fcst_ro_user\\nDB_PASS=0EtLa8gbAB6VWyPBiY3yLfyT9\\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\\nDB_PORT=5432\\nENVIRONMENT=development\\nRFC_FORECAST_API_VERSION=v1.1\\nRFC_FORECAST_API_STACK=ti\\nALLOWED_GUNICORN_WORKERS=3\\nLOCATION_API_HOST=http://wrdslocationapiv3:4000\\nLOCATION_API_VERSION=v3\\nLOCATION_API_STACK=ti\\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\\n## Logging variables\\nFORECAST_LOGLEVEL=Debug\\nCONSOLE_LOG=True\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/forecast-1.1.env\",\"permissions\":\"0777\"},{\"content\":\"version: '3.5'\\nservices:\\n  wrds_rfc_forecast_api_v1.1:\\n    build:\\n      context: .\\n      dockerfile: Dockerfile.aws\\n      args:\\n        API_HOST: localhost\\n    cpus: \\\"4.0\\\"\\n    mem_limit: 4.0g\\n    container_name: wrds_rfc_forecast_api_v1.1\\n    restart: always\\n    entrypoint:\\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\\n    env_file: env.aws\\n    expose:\\n      - \\\"8000\\\"\\n    networks:\\n      wrds_nginx:\\n        aliases:\\n          - wrdsrfcforecastapiv1.1\\n    volumes:\\n      - type: volume\\n        source: wrds_apis\\n        target: /var/www/\\nvolumes:\\n  wrds_apis:\\n    external:\\n      name: wrds_apis\\nnetworks:\\n  wrds_nginx:\\n    external:\\n      name: wrds_nginx\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/wrds/docker-compose-forecast-1.1.yml\",\"permissions\":\"0777\"}]}\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"startup.sh\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\n# Used for Rsyslog to send relevant logs to Logstash\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=10.26.150.5\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=data_services\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\necho \"Disabling Vlab Hostkey Requirement\"\n# Disable the need to require VLab's host key for the git clone commands\n# Couldn't seem to figure out how to properly add Vlab to the known_hosts file\nexport GIT_SSH_COMMAND=\"ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -i /home/ec2-user/.ssh/id_ed25519 -o IdentitiesOnly=yes\"\n\n\necho \"Installing System Dependencies\"\nsudo yum -y install git\nsudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n\necho \"Setting up WRDS File Structure\"\nsudo chmod 777 /wrds\ncd /wrds\n\necho \"Cloning WRDS Infrastructure\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/wrds-infrastructure\ncd wrds-infrastructure\ngit checkout 8f7131f9b70ff3f480f252c4bc911cb961ffa762\ngit pull\n\necho \"Building NGINX Docker\"\ncd nginx\nmv ../../docker-compose-infrastructure.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Location API\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/wrds-location-api\ncd wrds-location-api\ngit checkout ce1bfd821c335a69942519c5078a2929c4d397be\n\necho \"Building Location API Docker\"\ncd wrds-location-api\nmv ../../location.env env.aws\nmv ../../docker-compose-location.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V2.0\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/rfc-forecast-api\ncd rfc-forecast-api\ngit checkout a598b16314daea5e1ea880af7eebe798d4fdc04f\n\necho \"Building Forecast API V2.0 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-2.0.env env.aws\nmv ../../docker-compose-forecast-2.0.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V1.1\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/rfc-forecast-api rfc-forecast-api-1.1\ncd rfc-forecast-api-1.1\ngit checkout 19edf9cc9dbbd84e08f5a03622a2f97bfd67df4b\n\necho \"Building Forecast API V1.1 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-1.1.env env.aws\nmv ../../docker-compose-forecast-1.1.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Restarting NGINX Docker\"\nsudo docker restart wrds_infrastructure\n\necho \"Finished Setup\"\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "docker_compose_forecast_1_1",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "d6e5b7f6409fe0d568dab1fe32512f6ad4c5799d1efeee53013539ea2f7f102b",
            "rendered": "version: '3.5'\nservices:\n  wrds_rfc_forecast_api_v1.1:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n      args:\n        API_HOST: localhost\n    cpus: \"4.0\"\n    mem_limit: 4.0g\n    container_name: wrds_rfc_forecast_api_v1.1\n    restart: always\n    entrypoint:\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\n    env_file: env.aws\n    expose:\n      - \"8000\"\n    networks:\n      wrds_nginx:\n        aliases:\n          - wrdsrfcforecastapiv1.1\n    volumes:\n      - type: volume\n        source: wrds_apis\n        target: /var/www/\nvolumes:\n  wrds_apis:\n    external:\n      name: wrds_apis\nnetworks:\n  wrds_nginx:\n    external:\n      name: wrds_nginx",
            "template": "version: '3.5'\nservices:\n  wrds_rfc_forecast_api_v1.1:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n      args:\n        API_HOST: localhost\n    cpus: \"4.0\"\n    mem_limit: 4.0g\n    container_name: wrds_rfc_forecast_api_v1.1\n    restart: always\n    entrypoint:\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\n    env_file: env.aws\n    expose:\n      - \"8000\"\n    networks:\n      wrds_nginx:\n        aliases:\n          - wrdsrfcforecastapiv1.1\n    volumes:\n      - type: volume\n        source: wrds_apis\n        target: /var/www/\nvolumes:\n  wrds_apis:\n    external:\n      name: wrds_apis\nnetworks:\n  wrds_nginx:\n    external:\n      name: wrds_nginx",
            "vars": {
              "environment": "ti"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "docker_compose_forecast_2_0",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "15d274018124f43f66a20a8c63be9b456f134f32d7c37f5efbb114791b078536",
            "rendered": "version: '3.5'\nservices:\n  wrds_rfc_forecast_api_v2.0:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n      args:\n        API_HOST: localhost\n    cpus: \"4.0\"\n    mem_limit: 4.0g\n    container_name: wrds_rfc_forecast_api_v2.0\n    restart: always\n    entrypoint:\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\n    env_file: env.aws\n    expose:\n      - \"8000\"\n    networks:\n      wrds_nginx:\n        aliases:\n          - wrdsrfcforecastapiv2.0\n    volumes:\n      - type: volume\n        source: wrds_apis\n        target: /var/www/\nvolumes:\n  wrds_apis:\n    external:\n      name: wrds_apis\nnetworks:\n  wrds_nginx:\n    external:\n      name: wrds_nginx",
            "template": "version: '3.5'\nservices:\n  wrds_rfc_forecast_api_v2.0:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n      args:\n        API_HOST: localhost\n    cpus: \"4.0\"\n    mem_limit: 4.0g\n    container_name: wrds_rfc_forecast_api_v2.0\n    restart: always\n    entrypoint:\n      - /opt/wrds_rfc_forecast_api/rfc_forecast_api/entrypoint.sh\n    env_file: env.aws\n    expose:\n      - \"8000\"\n    networks:\n      wrds_nginx:\n        aliases:\n          - wrdsrfcforecastapiv2.0\n    volumes:\n      - type: volume\n        source: wrds_apis\n        target: /var/www/\nvolumes:\n  wrds_apis:\n    external:\n      name: wrds_apis\nnetworks:\n  wrds_nginx:\n    external:\n      name: wrds_nginx",
            "vars": {
              "environment": "ti"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "docker_compose_infrastructure",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "affe1767e046f1b91d91be7aed5b1329bc33c6814035b7565bdaac0cbee26fd1",
            "rendered": "version: \"3.5\"\nservices:\n  wrds_infrastructure:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n    container_name: wrds_infrastructure\n    restart: always\n    volumes:\n      - wrds_apis:/var/www/\n    networks:\n      - wrds_nginx\n    ports:\n      - \"80:80\"\n    environment:\n      - ENV=aws\n    external_links:\n      - wrds_location_api_v3.0\n      - wrds_rfc_forecast_api_v2.0\n      - wrds_rfc_forecast_api_v1.1\nvolumes:\n  wrds_apis:\n    name: wrds_apis\nnetworks:\n  wrds_nginx:\n    name: wrds_nginx",
            "template": "version: \"3.5\"\nservices:\n  wrds_infrastructure:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n    container_name: wrds_infrastructure\n    restart: always\n    volumes:\n      - wrds_apis:/var/www/\n    networks:\n      - wrds_nginx\n    ports:\n      - \"80:80\"\n    environment:\n      - ENV=aws\n    external_links:\n      - wrds_location_api_v3.0\n      - wrds_rfc_forecast_api_v2.0\n      - wrds_rfc_forecast_api_v1.1\nvolumes:\n  wrds_apis:\n    name: wrds_apis\nnetworks:\n  wrds_nginx:\n    name: wrds_nginx",
            "vars": {
              "environment": "ti"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "docker_compose_location",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "6c308b00aab17c2779b190233235fbd7a948999c6ecb5b4e600d9bcc96bccfdf",
            "rendered": "version: '3.5'\nservices:\n  wrds_location_api_v3.0:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n      args:\n        API_HOST: localhost\n    cpus: \"4.0\"\n    mem_limit: 4.5g\n    container_name: wrds_location_api_v3.0\n    restart: always\n    entrypoint:\n      - /opt/wrds_location_api/location_api/entrypoint.sh\n    env_file: env.aws\n    expose:\n      - \"4000\"\n    networks:\n      wrds_nginx:\n        aliases:\n          - wrdslocationapiv3.0\n    volumes:\n      - type: volume\n        source: wrds_apis\n        target: /var/www/\nvolumes:\n  wrds_apis:\n    external:\n      name: wrds_apis\nnetworks:\n  wrds_nginx:\n    external:\n      name: wrds_nginx",
            "template": "version: '3.5'\nservices:\n  wrds_location_api_v3.0:\n    build:\n      context: .\n      dockerfile: Dockerfile.aws\n      args:\n        API_HOST: localhost\n    cpus: \"4.0\"\n    mem_limit: 4.5g\n    container_name: wrds_location_api_v3.0\n    restart: always\n    entrypoint:\n      - /opt/wrds_location_api/location_api/entrypoint.sh\n    env_file: env.aws\n    expose:\n      - \"4000\"\n    networks:\n      wrds_nginx:\n        aliases:\n          - wrdslocationapiv3.0\n    volumes:\n      - type: volume\n        source: wrds_apis\n        target: /var/www/\nvolumes:\n  wrds_apis:\n    external:\n      name: wrds_apis\nnetworks:\n  wrds_nginx:\n    external:\n      name: wrds_nginx",
            "vars": {
              "environment": "ti"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "forecast_1_1_env",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "a6239c2ba74df5586479d01ebf24a2fe2c44d3b85f729efc11d822c1ff6e7c91",
            "rendered": "### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\nDB_NAME=rfcfcst\nLOCATION_DB_NAME=wrds_location3\nDB_USER=rfc_fcst_ro_user\nDB_PASS=0EtLa8gbAB6VWyPBiY3yLfyT9\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\nDB_PORT=5432\nENVIRONMENT=development\nRFC_FORECAST_API_VERSION=v1.1\nRFC_FORECAST_API_STACK=ti\nALLOWED_GUNICORN_WORKERS=3\nLOCATION_API_HOST=http://wrdslocationapiv3:4000\nLOCATION_API_VERSION=v3\nLOCATION_API_STACK=ti\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\n## Logging variables\nFORECAST_LOGLEVEL=Debug\nCONSOLE_LOG=True",
            "template": "### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\nDB_NAME=${db_name}\nLOCATION_DB_NAME=${location_db_name}\nDB_USER=${db_username}\nDB_PASS=${db_password}\nDB_HOST=${db_host}\nDB_PORT=${db_port}\nENVIRONMENT=development\nRFC_FORECAST_API_VERSION=v1.1\nRFC_FORECAST_API_STACK=${environment}\nALLOWED_GUNICORN_WORKERS=3\nLOCATION_API_HOST=http://wrdslocationapiv3:4000\nLOCATION_API_VERSION=v3\nLOCATION_API_STACK=${environment}\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\n## Logging variables\nFORECAST_LOGLEVEL=Debug\nCONSOLE_LOG=True",
            "vars": {
              "db_host": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
              "db_name": "rfcfcst",
              "db_password": "0EtLa8gbAB6VWyPBiY3yLfyT9",
              "db_port": "5432",
              "db_username": "rfc_fcst_ro_user",
              "environment": "ti",
              "location_db_name": "wrds_location3"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "db_password",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "db_username",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "forecast_2_0_env",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "9d29502ab4830143e102642cf4bdbdf56bd60135660be98cf9ed608667d0fab8",
            "rendered": "### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\nDB_NAME=rfcfcst\nLOCATION_DB_NAME=wrds_location3\nDB_USER=rfc_fcst_ro_user\nDB_PASS=0EtLa8gbAB6VWyPBiY3yLfyT9\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\nDB_PORT=5432\nENVIRONMENT=development\nRFC_FORECAST_API_VERSION=v2.0\nRFC_FORECAST_API_STACK=ti\nALLOWED_GUNICORN_WORKERS=3\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\n## Logging variables\nFORECAST_LOGLEVEL=Debug\nCONSOLE_LOG=True",
            "template": "### THIS IS A TEMPLATE ONLY, PLEASE COPY AND PASTE FOR EACH ENVIRONMENT LIKE env.dev, env.stage, env.prod\nDB_NAME=${db_name}\nLOCATION_DB_NAME=${location_db_name}\nDB_USER=${db_username}\nDB_PASS=${db_password}\nDB_HOST=${db_host}\nDB_PORT=${db_port}\nENVIRONMENT=development\nRFC_FORECAST_API_VERSION=v2.0\nRFC_FORECAST_API_STACK=${environment}\nALLOWED_GUNICORN_WORKERS=3\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\n## Logging variables\nFORECAST_LOGLEVEL=Debug\nCONSOLE_LOG=True",
            "vars": {
              "db_host": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
              "db_name": "rfcfcst",
              "db_password": "0EtLa8gbAB6VWyPBiY3yLfyT9",
              "db_port": "5432",
              "db_username": "rfc_fcst_ro_user",
              "environment": "ti",
              "location_db_name": "wrds_location3"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "db_password",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "db_username",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "location_env",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "328fc75fe2be6aa23b9edf798fa1ef7ed43f176c3c048b18f05688cad9c40eb8",
            "rendered": "DB_NAME=wrds_location3\nDB_USER=location_ro_user\nDB_PASS=1WsSGw8XcGIfqYplZ3K9hd05T\nDB_HOST=hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\nDB_PORT=5432\nENVIRONMENT=development\nLOCATION_API_VERSION=v3.0\nLOCATION_API_STACK=ti\nALLOWED_GUNICORN_WORKERS=3\nMODEL_TRACING_API_HOST=http://wrdsmodeltracingapi:4000\nMODEL_TRACING_API_VERSION=ti\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\nDEFAULT_NWM_LOCATION_CROSSWALK_DATASET=2.1-corrected\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\n## Logging variables\nLOCATION_LOGLEVEL=Debug\nCONSOLE_LOG=True",
            "template": "DB_NAME=${db_name}\nDB_USER=${db_username}\nDB_PASS=${db_password}\nDB_HOST=${db_host}\nDB_PORT=${db_port}\nENVIRONMENT=development\nLOCATION_API_VERSION=v3.0\nLOCATION_API_STACK=${environment}\nALLOWED_GUNICORN_WORKERS=3\nMODEL_TRACING_API_HOST=http://wrdsmodeltracingapi:4000\nMODEL_TRACING_API_VERSION=${environment}\nDEFAULT_NWS_USGS_CROSSWALK_DATASET=1.0\nDEFAULT_NWM_LOCATION_CROSSWALK_DATASET=2.1-corrected\nDEFAULT_LOCATION_NWM_CROSSWALK_DATASET=1.1\n## Logging variables\nLOCATION_LOGLEVEL=Debug\nCONSOLE_LOG=True",
            "vars": {
              "db_host": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
              "db_name": "wrds_location3",
              "db_password": "1WsSGw8XcGIfqYplZ3K9hd05T",
              "db_port": "5432",
              "db_username": "location_ro_user",
              "environment": "ti"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "db_password",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "db_username",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "data",
      "type": "template_file",
      "name": "startup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "46007d98525d08221819f8c743e16668c6b31a7ae62702655c66b8948b03a981",
            "rendered": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\n# Used for Rsyslog to send relevant logs to Logstash\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=10.26.150.5\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=data_services\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\necho \"Disabling Vlab Hostkey Requirement\"\n# Disable the need to require VLab's host key for the git clone commands\n# Couldn't seem to figure out how to properly add Vlab to the known_hosts file\nexport GIT_SSH_COMMAND=\"ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -i /home/ec2-user/.ssh/id_ed25519 -o IdentitiesOnly=yes\"\n\n\necho \"Installing System Dependencies\"\nsudo yum -y install git\nsudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n\necho \"Setting up WRDS File Structure\"\nsudo chmod 777 /wrds\ncd /wrds\n\necho \"Cloning WRDS Infrastructure\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/wrds-infrastructure\ncd wrds-infrastructure\ngit checkout 8f7131f9b70ff3f480f252c4bc911cb961ffa762\ngit pull\n\necho \"Building NGINX Docker\"\ncd nginx\nmv ../../docker-compose-infrastructure.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Location API\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/wrds-location-api\ncd wrds-location-api\ngit checkout ce1bfd821c335a69942519c5078a2929c4d397be\n\necho \"Building Location API Docker\"\ncd wrds-location-api\nmv ../../location.env env.aws\nmv ../../docker-compose-location.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V2.0\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/rfc-forecast-api\ncd rfc-forecast-api\ngit checkout a598b16314daea5e1ea880af7eebe798d4fdc04f\n\necho \"Building Forecast API V2.0 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-2.0.env env.aws\nmv ../../docker-compose-forecast-2.0.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V1.1\"\ngit clone ssh://nick.chadwick@vlab.noaa.gov:29418/rfc-forecast-api rfc-forecast-api-1.1\ncd rfc-forecast-api-1.1\ngit checkout 19edf9cc9dbbd84e08f5a03622a2f97bfd67df4b\n\necho \"Building Forecast API V1.1 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-1.1.env env.aws\nmv ../../docker-compose-forecast-1.1.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Restarting NGINX Docker\"\nsudo docker restart wrds_infrastructure\n\necho \"Finished Setup\"",
            "template": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\n# Used for Rsyslog to send relevant logs to Logstash\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=${logstash_ip}\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=data_services\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\necho \"Disabling Vlab Hostkey Requirement\"\n# Disable the need to require VLab's host key for the git clone commands\n# Couldn't seem to figure out how to properly add Vlab to the known_hosts file\nexport GIT_SSH_COMMAND=\"ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -i /home/ec2-user/.ssh/${ssh_key_filename} -o IdentitiesOnly=yes\"\n\n\necho \"Installing System Dependencies\"\nsudo yum -y install git\nsudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n\necho \"Setting up WRDS File Structure\"\nsudo chmod 777 /wrds\ncd /wrds\n\necho \"Cloning WRDS Infrastructure\"\ngit clone ${vlab_repo_prefix}/wrds-infrastructure\ncd wrds-infrastructure\ngit checkout ${infrastructure_commit}\ngit pull\n\necho \"Building NGINX Docker\"\ncd nginx\nmv ../../docker-compose-infrastructure.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Location API\"\ngit clone ${vlab_repo_prefix}/wrds-location-api\ncd wrds-location-api\ngit checkout ${location_api_3_0_commit}\n\necho \"Building Location API Docker\"\ncd wrds-location-api\nmv ../../location.env env.aws\nmv ../../docker-compose-location.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V2.0\"\ngit clone ${vlab_repo_prefix}/rfc-forecast-api\ncd rfc-forecast-api\ngit checkout ${forecast_api_2_0_commit}\n\necho \"Building Forecast API V2.0 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-2.0.env env.aws\nmv ../../docker-compose-forecast-2.0.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Cloning Forecast API V1.1\"\ngit clone ${vlab_repo_prefix}/rfc-forecast-api rfc-forecast-api-1.1\ncd rfc-forecast-api-1.1\ngit checkout ${forecast_api_1_1_commit}\n\necho \"Building Forecast API V1.1 Docker\"\ncd wrds-rfc-forecast-api\nmv ../../forecast-1.1.env env.aws\nmv ../../docker-compose-forecast-1.1.yml docker-compose.yml\nsudo docker-compose up --build -d\ncd ../..\n\necho \"Restarting NGINX Docker\"\nsudo docker restart wrds_infrastructure\n\necho \"Finished Setup\"",
            "vars": {
              "forecast_api_1_1_commit": "19edf9cc9dbbd84e08f5a03622a2f97bfd67df4b",
              "forecast_api_2_0_commit": "a598b16314daea5e1ea880af7eebe798d4fdc04f",
              "infrastructure_commit": "8f7131f9b70ff3f480f252c4bc911cb961ffa762",
              "location_api_3_0_commit": "ce1bfd821c335a69942519c5078a2929c4d397be",
              "logstash_ip": "10.26.150.5",
              "ssh_key_filename": "id_ed25519",
              "vlab_repo_prefix": "ssh://nick.chadwick@vlab.noaa.gov:29418"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.data-services",
      "mode": "managed",
      "type": "aws_instance",
      "name": "data_services",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-025b76b777024295e",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-03f982ae1cdcfe70d",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 2,
            "cpu_threads_per_core": 2,
            "credit_specification": [],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "HydrovisSSMInstanceProfileRole",
            "id": "i-03f982ae1cdcfe70d",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "c5.xlarge",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0f98e943e94a88bc9",
            "private_dns": "ip-10-26-150-90.ec2.internal",
            "private_ip": "10.26.150.90",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 100,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-04aa6e1dbdfbbdf7e",
                "volume_size": 12,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0712c2c2742111aa1",
            "tags": {
              "Name": "hv-ti-useast1a-data-services",
              "OS": "Linux"
            },
            "tags_all": {
              "Name": "hv-ti-useast1a-data-services",
              "OS": "Linux",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "9951f11f0736d9c84a148906b7b2f31b807b9ef9",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0874e1b42d1981b59",
              "sg-0890e0d212253e91c",
              "sg-0bd65ccbb2ce82848"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.monitoring.data.template_file.parser_templates",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.data-services.data.template_file.docker_compose_location",
            "module.iam-roles.aws_iam_instance_profile.HydrovisSSMInstanceProfileRole",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.monitoring.data.cloudinit_config.startup",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.data-services.data.template_file.docker_compose_forecast_2_0",
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.data-services.data.aws_ami.linux",
            "module.data-services.data.template_file.forecast_1_1_env",
            "module.data-services.data.template_file.forecast_2_0_env",
            "module.monitoring.data.aws_ami.linux",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.data-services.data.template_file.docker_compose_forecast_1_1",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.data-services.data.template_file.location_env",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.monitoring.aws_elasticsearch_domain.es",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.data-services.data.cloudinit_config.startup",
            "module.monitoring.aws_instance.logstash",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.data-services.data.template_file.docker_compose_infrastructure",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.monitoring.data.template_file.startup",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.es-sg",
            "module.data-services.data.template_file.startup"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gis-server-cache\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-gis-server-cache-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-gis-server-cache-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-gis-server-cache-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/e553a4c5-4d74-41fa-966a-671c52918199",
            "target_key_id": "e553a4c5-4d74-41fa-966a-671c52918199"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gis-server-cache\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/e553a4c5-4d74-41fa-966a-671c52918199",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1-gis-server-cache bucket encryption",
            "enable_key_rotation": true,
            "id": "e553a4c5-4d74-41fa-966a-671c52918199",
            "is_enabled": true,
            "key_id": "e553a4c5-4d74-41fa-966a-671c52918199",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gis-server-cache\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache",
            "bucket": "hydrovis-ti-egis-us-east-1-gis-server-cache",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1-gis-server-cache.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1-gis-server-cache.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1-gis-server-cache",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/e553a4c5-4d74-41fa-966a-671c52918199",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gis-server-cache\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1-gis-server-cache",
            "id": "hydrovis-ti-egis-us-east-1-gis-server-cache",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gp-server-cache\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-gp-server-cache-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-gp-server-cache-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-gp-server-cache-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/c7236ba9-c9b6-4216-9d1b-f4fa4c15d1ca",
            "target_key_id": "c7236ba9-c9b6-4216-9d1b-f4fa4c15d1ca"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gp-server-cache\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/c7236ba9-c9b6-4216-9d1b-f4fa4c15d1ca",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1-gp-server-cache bucket encryption",
            "enable_key_rotation": true,
            "id": "c7236ba9-c9b6-4216-9d1b-f4fa4c15d1ca",
            "is_enabled": true,
            "key_id": "c7236ba9-c9b6-4216-9d1b-f4fa4c15d1ca",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gp-server-cache\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache",
            "bucket": "hydrovis-ti-egis-us-east-1-gp-server-cache",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1-gp-server-cache.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1-gp-server-cache.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1-gp-server-cache",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/c7236ba9-c9b6-4216-9d1b-f4fa4c15d1ca",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"gp-server-cache\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1-gp-server-cache",
            "id": "hydrovis-ti-egis-us-east-1-gp-server-cache",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"img-server-cache\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-img-server-cache-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-img-server-cache-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-img-server-cache-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/85b5abc2-9ed6-48b7-83e9-ab37b48d3977",
            "target_key_id": "85b5abc2-9ed6-48b7-83e9-ab37b48d3977"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"img-server-cache\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/85b5abc2-9ed6-48b7-83e9-ab37b48d3977",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1-img-server-cache bucket encryption",
            "enable_key_rotation": true,
            "id": "85b5abc2-9ed6-48b7-83e9-ab37b48d3977",
            "is_enabled": true,
            "key_id": "85b5abc2-9ed6-48b7-83e9-ab37b48d3977",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"img-server-cache\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache",
            "bucket": "hydrovis-ti-egis-us-east-1-img-server-cache",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1-img-server-cache.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1-img-server-cache.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1-img-server-cache",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/85b5abc2-9ed6-48b7-83e9-ab37b48d3977",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"img-server-cache\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1-img-server-cache",
            "id": "hydrovis-ti-egis-us-east-1-img-server-cache",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"none\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/edafb271-5f26-4afd-90be-2477c581afd5",
            "target_key_id": "edafb271-5f26-4afd-90be-2477c581afd5"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"none\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/edafb271-5f26-4afd-90be-2477c581afd5",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "edafb271-5f26-4afd-90be-2477c581afd5",
            "is_enabled": true,
            "key_id": "edafb271-5f26-4afd-90be-2477c581afd5",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"none\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1",
            "bucket": "hydrovis-ti-egis-us-east-1",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/edafb271-5f26-4afd-90be-2477c581afd5",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"none\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1",
            "id": "hydrovis-ti-egis-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"prv-alb-logging\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-prv-alb-logging-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-prv-alb-logging-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-prv-alb-logging-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/cbafe675-a308-4e7d-b195-8c92dd0d6fc9",
            "target_key_id": "cbafe675-a308-4e7d-b195-8c92dd0d6fc9"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"prv-alb-logging\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/cbafe675-a308-4e7d-b195-8c92dd0d6fc9",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1-prv-alb-logging bucket encryption",
            "enable_key_rotation": true,
            "id": "cbafe675-a308-4e7d-b195-8c92dd0d6fc9",
            "is_enabled": true,
            "key_id": "cbafe675-a308-4e7d-b195-8c92dd0d6fc9",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"prv-alb-logging\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1-prv-alb-logging",
            "bucket": "hydrovis-ti-egis-us-east-1-prv-alb-logging",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1-prv-alb-logging.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1-prv-alb-logging.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1-prv-alb-logging",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/cbafe675-a308-4e7d-b195-8c92dd0d6fc9",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"prv-alb-logging\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1-prv-alb-logging",
            "id": "hydrovis-ti-egis-us-east-1-prv-alb-logging",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-prv-alb-logging/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-prv-alb-logging/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-prv-alb-logging\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"ptl-content\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-ptl-content-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-ptl-content-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-ptl-content-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/47d729ac-ffd5-4ec7-a4e9-23dc8ade4cbb",
            "target_key_id": "47d729ac-ffd5-4ec7-a4e9-23dc8ade4cbb"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"ptl-content\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/47d729ac-ffd5-4ec7-a4e9-23dc8ade4cbb",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1-ptl-content bucket encryption",
            "enable_key_rotation": true,
            "id": "47d729ac-ffd5-4ec7-a4e9-23dc8ade4cbb",
            "is_enabled": true,
            "key_id": "47d729ac-ffd5-4ec7-a4e9-23dc8ade4cbb",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"ptl-content\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content",
            "bucket": "hydrovis-ti-egis-us-east-1-ptl-content",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1-ptl-content.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1-ptl-content.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1-ptl-content",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/47d729ac-ffd5-4ec7-a4e9-23dc8ade4cbb",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"ptl-content\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1-ptl-content",
            "id": "hydrovis-ti-egis-us-east-1-ptl-content",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"pub-alb-logging\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-pub-alb-logging-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-pub-alb-logging-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-pub-alb-logging-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/0e4d58aa-45e3-4bf9-9551-95d2e8e3b1c1",
            "target_key_id": "0e4d58aa-45e3-4bf9-9551-95d2e8e3b1c1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"pub-alb-logging\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/0e4d58aa-45e3-4bf9-9551-95d2e8e3b1c1",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1-pub-alb-logging bucket encryption",
            "enable_key_rotation": true,
            "id": "0e4d58aa-45e3-4bf9-9551-95d2e8e3b1c1",
            "is_enabled": true,
            "key_id": "0e4d58aa-45e3-4bf9-9551-95d2e8e3b1c1",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"pub-alb-logging\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1-pub-alb-logging",
            "bucket": "hydrovis-ti-egis-us-east-1-pub-alb-logging",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1-pub-alb-logging.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1-pub-alb-logging.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1-pub-alb-logging",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/0e4d58aa-45e3-4bf9-9551-95d2e8e3b1c1",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"pub-alb-logging\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1-pub-alb-logging",
            "id": "hydrovis-ti-egis-us-east-1-pub-alb-logging",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-pub-alb-logging/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-pub-alb-logging/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-pub-alb-logging\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"webgisdr\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1-webgisdr-s3",
            "id": "alias/hydrovis-ti-egis-us-east-1-webgisdr-s3",
            "name": "alias/hydrovis-ti-egis-us-east-1-webgisdr-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/0ffad148-52df-48fe-851c-ab6d65ca9874",
            "target_key_id": "0ffad148-52df-48fe-851c-ab6d65ca9874"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"webgisdr\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/0ffad148-52df-48fe-851c-ab6d65ca9874",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-egis-us-east-1-webgisdr bucket encryption",
            "enable_key_rotation": true,
            "id": "0ffad148-52df-48fe-851c-ab6d65ca9874",
            "is_enabled": true,
            "key_id": "0ffad148-52df-48fe-851c-ab6d65ca9874",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"webgisdr\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-egis-us-east-1-webgisdr",
            "bucket": "hydrovis-ti-egis-us-east-1-webgisdr",
            "bucket_domain_name": "hydrovis-ti-egis-us-east-1-webgisdr.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-egis-us-east-1-webgisdr.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-egis-us-east-1-webgisdr",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/0ffad148-52df-48fe-851c-ab6d65ca9874",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.egis.module.bucket[\"webgisdr\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-egis-us-east-1-webgisdr",
            "id": "hydrovis-ti-egis-us-east-1-webgisdr",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-webgisdr/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-webgisdr/*\",\"arn:aws:s3:::hydrovis-ti-egis-us-east-1-webgisdr\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.egis.module.bucket.aws_kms_key.hydrovis-s3",
            "module.egis.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.egis_license_manager",
      "mode": "data",
      "type": "aws_ami",
      "name": "windows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-0b266e75d54048c9f",
            "block_device_mappings": [
              {
                "device_name": "/dev/sda1",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-04a06950e6c42a4b1",
                  "throughput": "0",
                  "volume_size": "150",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-12-06T21:39:40.000Z",
            "description": "STIG image no encryption for sharing between accounts",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-win2019-STIG*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-0b266e75d54048c9f",
            "image_id": "ami-0b266e75d54048c9f",
            "image_location": "526904826677/hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": "windows",
            "platform_details": "Windows",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/sda1",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-04a06950e6c42a4b1",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/hydrovis-win2019-stig-no-encryption/1.0.5/1",
              "Name": "hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z"
            },
            "usage_operation": "RunInstances:0002",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.egis_license_manager",
      "mode": "data",
      "type": "template_cloudinit_config",
      "name": "licensemanager",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "gzip": false,
            "id": "910452852",
            "part": [
              {
                "content": "\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"LicenseManager\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/LicenseManager/LMDeploy.zip' -LocalFile 'C:\\LicenseManager\\LMDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/LicenseManager/vc_redist.x86.exe' -LocalFile 'C:\\LicenseManager\\vc_redist.x86.exe'\nNew-NetFirewallRule -DisplayName 'ArcGIS License Manager' -Profile 'Any' -Direction Inbound -Action Allow -Protocol TCP -LocalPort 27000-27010, 1066\ncd C:\\LicenseManager\nExpand-Archive -Path \"C:\\LicenseManager\\LMDeploy.zip\"  -DestinationPath \"C:\\LicenseManager\"\nInstall-Module -Name ArcGIS -Force\nStart-Sleep 180\ncd C:\\LicenseManager\n$privateIPAddress = (Invoke-WebRequest -Uri http://169.254.169.254/latest/meta-data/local-ipv4 -UseBasicParsing).Content\n(Get-Content -path C:\\LicenseManager\\LicenseManager_config.json -Raw) -replace 'localhost', $privateIPAddress | Set-Content -Path C:\\LicenseManager\\LicenseManager_configip.json\nStart-Process -FilePath “vcredist_x86.exe” -ArgumentList “/Q” -Wait\ncd C:\\LicenseManager\nstart-process \"cmd.exe\" \"/c C:\\LicenseManager\\setupLM.bat\"\nStart-Sleep 300\nInvoke-ArcGISConfiguration -ConfigurationParametersFile C:\\LicenseManager\\LicenseManager_configip.json -Mode InstallLicense\ncd \"C:\\Program Files (x86)\\Commen Files\\ArcGIS\\LicenseManager\\bin\"\nsoftwareauthorizationls.exe -s ver 10.8 -lif \"C:\\LicenseManager\\ArcGISProAdvanced_ConcurrentUse_1055467.prvs\"\n\n##############################################################################################\n#\tTHIS SECTION CAN BE ENABLED IF AN ADDIITONAL DRIVE IS REQUIRED\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n#  Initialize-Disk -Number 1 -PartitionStyle MBR \t\t\t\t\t\t#\n#  New-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\t\t\t#\n#  Format-Volume -DriveLetter D -FileSystem NTFS\t\t\t\t\t\t#\t\n#  New-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\t\t\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n##############################################################################################\n\n\u003c/powershell\u003e\n",
                "content_type": "text/x-shellscript",
                "filename": "ArcGIS_LM_Setup.ps1",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"ArcGIS_LM_Setup.ps1\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"LicenseManager\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/LicenseManager/LMDeploy.zip' -LocalFile 'C:\\LicenseManager\\LMDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/LicenseManager/vc_redist.x86.exe' -LocalFile 'C:\\LicenseManager\\vc_redist.x86.exe'\nNew-NetFirewallRule -DisplayName 'ArcGIS License Manager' -Profile 'Any' -Direction Inbound -Action Allow -Protocol TCP -LocalPort 27000-27010, 1066\ncd C:\\LicenseManager\nExpand-Archive -Path \"C:\\LicenseManager\\LMDeploy.zip\"  -DestinationPath \"C:\\LicenseManager\"\nInstall-Module -Name ArcGIS -Force\nStart-Sleep 180\ncd C:\\LicenseManager\n$privateIPAddress = (Invoke-WebRequest -Uri http://169.254.169.254/latest/meta-data/local-ipv4 -UseBasicParsing).Content\n(Get-Content -path C:\\LicenseManager\\LicenseManager_config.json -Raw) -replace 'localhost', $privateIPAddress | Set-Content -Path C:\\LicenseManager\\LicenseManager_configip.json\nStart-Process -FilePath “vcredist_x86.exe” -ArgumentList “/Q” -Wait\ncd C:\\LicenseManager\nstart-process \"cmd.exe\" \"/c C:\\LicenseManager\\setupLM.bat\"\nStart-Sleep 300\nInvoke-ArcGISConfiguration -ConfigurationParametersFile C:\\LicenseManager\\LicenseManager_configip.json -Mode InstallLicense\ncd \"C:\\Program Files (x86)\\Commen Files\\ArcGIS\\LicenseManager\\bin\"\nsoftwareauthorizationls.exe -s ver 10.8 -lif \"C:\\LicenseManager\\ArcGISProAdvanced_ConcurrentUse_1055467.prvs\"\n\n##############################################################################################\n#\tTHIS SECTION CAN BE ENABLED IF AN ADDIITONAL DRIVE IS REQUIRED\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n#  Initialize-Disk -Number 1 -PartitionStyle MBR \t\t\t\t\t\t#\n#  New-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\t\t\t#\n#  Format-Volume -DriveLetter D -FileSystem NTFS\t\t\t\t\t\t#\t\n#  New-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\t\t\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n##############################################################################################\n\n\u003c/powershell\u003e\n\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.egis_license_manager",
      "mode": "data",
      "type": "template_file",
      "name": "licensemanager",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "df30f43468879745977376dcdcd78aed1fa15192e33001aeef589c9cf14b8db0",
            "rendered": "\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"LicenseManager\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/LicenseManager/LMDeploy.zip' -LocalFile 'C:\\LicenseManager\\LMDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/LicenseManager/vc_redist.x86.exe' -LocalFile 'C:\\LicenseManager\\vc_redist.x86.exe'\nNew-NetFirewallRule -DisplayName 'ArcGIS License Manager' -Profile 'Any' -Direction Inbound -Action Allow -Protocol TCP -LocalPort 27000-27010, 1066\ncd C:\\LicenseManager\nExpand-Archive -Path \"C:\\LicenseManager\\LMDeploy.zip\"  -DestinationPath \"C:\\LicenseManager\"\nInstall-Module -Name ArcGIS -Force\nStart-Sleep 180\ncd C:\\LicenseManager\n$privateIPAddress = (Invoke-WebRequest -Uri http://169.254.169.254/latest/meta-data/local-ipv4 -UseBasicParsing).Content\n(Get-Content -path C:\\LicenseManager\\LicenseManager_config.json -Raw) -replace 'localhost', $privateIPAddress | Set-Content -Path C:\\LicenseManager\\LicenseManager_configip.json\nStart-Process -FilePath “vcredist_x86.exe” -ArgumentList “/Q” -Wait\ncd C:\\LicenseManager\nstart-process \"cmd.exe\" \"/c C:\\LicenseManager\\setupLM.bat\"\nStart-Sleep 300\nInvoke-ArcGISConfiguration -ConfigurationParametersFile C:\\LicenseManager\\LicenseManager_configip.json -Mode InstallLicense\ncd \"C:\\Program Files (x86)\\Commen Files\\ArcGIS\\LicenseManager\\bin\"\nsoftwareauthorizationls.exe -s ver 10.8 -lif \"C:\\LicenseManager\\ArcGISProAdvanced_ConcurrentUse_1055467.prvs\"\n\n##############################################################################################\n#\tTHIS SECTION CAN BE ENABLED IF AN ADDIITONAL DRIVE IS REQUIRED\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n#  Initialize-Disk -Number 1 -PartitionStyle MBR \t\t\t\t\t\t#\n#  New-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\t\t\t#\n#  Format-Volume -DriveLetter D -FileSystem NTFS\t\t\t\t\t\t#\t\n#  New-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\t\t\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n##############################################################################################\n\n\u003c/powershell\u003e\n",
            "template": "﻿\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"LicenseManager\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-${environment}-egis-${region}' -Key 'software/LicenseManager/LMDeploy.zip' -LocalFile 'C:\\LicenseManager\\LMDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-${environment}-egis-${region}' -Key 'software/LicenseManager/vc_redist.x86.exe' -LocalFile 'C:\\LicenseManager\\vc_redist.x86.exe'\nNew-NetFirewallRule -DisplayName 'ArcGIS License Manager' -Profile 'Any' -Direction Inbound -Action Allow -Protocol TCP -LocalPort 27000-27010, 1066\ncd C:\\LicenseManager\nExpand-Archive -Path \"C:\\LicenseManager\\LMDeploy.zip\"  -DestinationPath \"C:\\LicenseManager\"\nInstall-Module -Name ArcGIS -Force\nStart-Sleep 180\ncd C:\\LicenseManager\n$privateIPAddress = (Invoke-WebRequest -Uri http://169.254.169.254/latest/meta-data/local-ipv4 -UseBasicParsing).Content\n(Get-Content -path C:\\LicenseManager\\LicenseManager_config.json -Raw) -replace 'localhost', $privateIPAddress | Set-Content -Path C:\\LicenseManager\\LicenseManager_configip.json\nStart-Process -FilePath “vcredist_x86.exe” -ArgumentList “/Q” -Wait\ncd C:\\LicenseManager\nstart-process \"cmd.exe\" \"/c C:\\LicenseManager\\setupLM.bat\"\nStart-Sleep 300\nInvoke-ArcGISConfiguration -ConfigurationParametersFile C:\\LicenseManager\\LicenseManager_configip.json -Mode InstallLicense\ncd \"C:\\Program Files (x86)\\Commen Files\\ArcGIS\\LicenseManager\\bin\"\nsoftwareauthorizationls.exe -s ver 10.8 -lif \"C:\\LicenseManager\\ArcGISProAdvanced_ConcurrentUse_1055467.prvs\"\n\n##############################################################################################\n#\tTHIS SECTION CAN BE ENABLED IF AN ADDIITONAL DRIVE IS REQUIRED\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n#  Initialize-Disk -Number 1 -PartitionStyle MBR \t\t\t\t\t\t#\n#  New-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\t\t\t#\n#  Format-Volume -DriveLetter D -FileSystem NTFS\t\t\t\t\t\t#\t\n#  New-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\t\t\t\t\t#\n#\t\t\t\t\t\t\t\t\t\t\t\t#\n##############################################################################################\n\n\u003c/powershell\u003e\n",
            "vars": {
              "environment": "ti",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.egis_license_manager",
      "mode": "managed",
      "type": "aws_instance",
      "name": "license_manager",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0b266e75d54048c9f",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-048b31057d8743261",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 2,
            "credit_specification": [],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "HydrovisESRISSMDeploy",
            "id": "i-048b31057d8743261",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "m5.large",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "hv-ti-ec2-key-pair",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-079357f1a6e8882fb",
            "private_dns": "ip-10-26-150-153.ec2.internal",
            "private_ip": "10.26.150.153",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 600,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0acdd76a5173746c3",
                "volume_size": 200,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0d87b732011535520",
            "tags": {
              "Created by": "nick.chadwick@noaa.gov",
              "Date created": "2021-12-20T20:37:23Z",
              "Name": "hv-ti-egis-ArcGIS-LicenseManager",
              "OS": "Windows",
              "Patch Group": "ESRI Group 1",
              "TaskOrderId": "1305L420FNWWJ0136",
              "VPC": "dev",
              "hydrovis-env": "dev",
              "hydrovis-sys": "undefined",
              "noaa:environment": "dev"
            },
            "tags_all": {
              "Created by": "nick.chadwick@noaa.gov",
              "Date created": "2021-12-20T20:37:23Z",
              "Name": "hv-ti-egis-ArcGIS-LicenseManager",
              "OS": "Windows",
              "Patch Group": "ESRI Group 1",
              "TaskOrderID": "1305L420QNWWJ0057",
              "TaskOrderId": "1305L420FNWWJ0136",
              "VPC": "dev",
              "hydrovis-env": "dev",
              "hydrovis-sys": "undefined",
              "noaa:environment": "dev",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "156acdc55bae0f8d4996cc0ec51563571ba1f1d1",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-042d66db0eac63f5b",
              "sg-0874e1b42d1981b59"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.egis_license_manager.data.aws_ami.windows",
            "module.egis_license_manager.data.template_cloudinit_config.licensemanager",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-web1a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.egis_license_manager.data.template_file.licensemanager",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_instance_profile.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a"
          ]
        }
      ]
    },
    {
      "module": "module.egis_monitor",
      "mode": "data",
      "type": "aws_ami",
      "name": "windows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-0b266e75d54048c9f",
            "block_device_mappings": [
              {
                "device_name": "/dev/sda1",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-04a06950e6c42a4b1",
                  "throughput": "0",
                  "volume_size": "150",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-12-06T21:39:40.000Z",
            "description": "STIG image no encryption for sharing between accounts",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-win2019-STIG*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-0b266e75d54048c9f",
            "image_id": "ami-0b266e75d54048c9f",
            "image_location": "526904826677/hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": "windows",
            "platform_details": "Windows",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/sda1",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-04a06950e6c42a4b1",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/hydrovis-win2019-stig-no-encryption/1.0.5/1",
              "Name": "hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z"
            },
            "usage_operation": "RunInstances:0002",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.egis_monitor",
      "mode": "data",
      "type": "template_cloudinit_config",
      "name": "arcgismonitor",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "gzip": false,
            "id": "2695729121",
            "part": [
              {
                "content": "\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"Monitor\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'installs/software/licenses/10_8_1/ArcGISMonitor_ArcGISServer_1028623.prvc' -LocalFile 'C:\\Monitor\\ArcGISMonitor_ArcGISServer_1028623.prvc'\ncd C:\\Monitor\nExpand-Archive -Path \"C:\\Monitor\\MonitorDeploy.zip\"  -DestinationPath \"C:\\Monitor\"\nInitialize-Disk -Number 1 -PartitionStyle MBR \nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS\nNew-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\n#Copy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\n#Read-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -KeyPrefix 'software/Monitor' -Folder \"C:\\Monitor\" \nstart-process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor.bat\"\nStart-Sleep 1200\nStart-Process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor2.bat\"\n\u003c/powershell\u003e\n",
                "content_type": "text/x-shellscript",
                "filename": "ArcGIS_LM_Setup.ps1",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"ArcGIS_LM_Setup.ps1\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"Monitor\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'installs/software/licenses/10_8_1/ArcGISMonitor_ArcGISServer_1028623.prvc' -LocalFile 'C:\\Monitor\\ArcGISMonitor_ArcGISServer_1028623.prvc'\ncd C:\\Monitor\nExpand-Archive -Path \"C:\\Monitor\\MonitorDeploy.zip\"  -DestinationPath \"C:\\Monitor\"\nInitialize-Disk -Number 1 -PartitionStyle MBR \nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS\nNew-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\n#Copy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\n#Read-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -KeyPrefix 'software/Monitor' -Folder \"C:\\Monitor\" \nstart-process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor.bat\"\nStart-Sleep 1200\nStart-Process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor2.bat\"\n\u003c/powershell\u003e\n\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.egis_monitor",
      "mode": "data",
      "type": "template_file",
      "name": "arcgismonitor",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "88c6527c4df005e2a6fd9ddd4db8e16b35f00ebe6a337edc5a12eb554d36b8f4",
            "rendered": "\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"Monitor\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'installs/software/licenses/10_8_1/ArcGISMonitor_ArcGISServer_1028623.prvc' -LocalFile 'C:\\Monitor\\ArcGISMonitor_ArcGISServer_1028623.prvc'\ncd C:\\Monitor\nExpand-Archive -Path \"C:\\Monitor\\MonitorDeploy.zip\"  -DestinationPath \"C:\\Monitor\"\nInitialize-Disk -Number 1 -PartitionStyle MBR \nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS\nNew-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\n#Copy-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\n#Read-S3Object -Bucket 'hydrovis-ti-egis-us-east-1' -KeyPrefix 'software/Monitor' -Folder \"C:\\Monitor\" \nstart-process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor.bat\"\nStart-Sleep 1200\nStart-Process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor2.bat\"\n\u003c/powershell\u003e\n",
            "template": "﻿\u003cpowershell\u003e\nNew-Item -Path \"C:\\\" -Name \"Monitor\" -ItemType \"directory\"\nCopy-S3Object -Bucket 'hydrovis-${environment}-egis-${region}' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\nCopy-S3Object -Bucket 'hydrovis-${environment}-egis-${region}' -Key 'installs/software/licenses/10_8_1/ArcGISMonitor_ArcGISServer_1028623.prvc' -LocalFile 'C:\\Monitor\\ArcGISMonitor_ArcGISServer_1028623.prvc'\ncd C:\\Monitor\nExpand-Archive -Path \"C:\\Monitor\\MonitorDeploy.zip\"  -DestinationPath \"C:\\Monitor\"\nInitialize-Disk -Number 1 -PartitionStyle MBR \nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS\nNew-Item -Path \"D:\\\" -Name \"Temp\" -ItemType \"directory\"\n#Copy-S3Object -Bucket 'hydrovis-${environment}-egis-${region}' -Key 'software/Monitor/MonitorDeploy.zip' -LocalFile 'C:\\Monitor\\MonitorDeploy.zip'\n#Read-S3Object -Bucket 'hydrovis-${environment}-egis-${region}' -KeyPrefix 'software/Monitor' -Folder \"C:\\Monitor\" \nstart-process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor.bat\"\nStart-Sleep 1200\nStart-Process \"cmd.exe\" \"/c C:\\Monitor\\setupMonitor2.bat\"\n\u003c/powershell\u003e\n",
            "vars": {
              "environment": "ti",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.egis_monitor",
      "mode": "managed",
      "type": "aws_instance",
      "name": "arcgismonitor",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0b266e75d54048c9f",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-0b8402be84d50432c",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 2,
            "cpu_threads_per_core": 2,
            "credit_specification": [],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "HydrovisESRISSMDeploy",
            "id": "i-0b8402be84d50432c",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "m5.xlarge",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "hv-ti-ec2-key-pair",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0c2a0ec4339de0939",
            "private_dns": "ip-10-26-150-139.ec2.internal",
            "private_ip": "10.26.150.139",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 600,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0e7d272735310657b",
                "volume_size": 200,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0d87b732011535520",
            "tags": {
              "Created by": "nick.chadwick@noaa.gov",
              "Date created": "2021-12-20T20:37:22Z",
              "Name": "hv-ti-egis-ArcGIS-Monitor",
              "OS": "Windows",
              "Patch Group": "ESRI Group 1",
              "TaskOrderId": "1305L420FNWWJ0136",
              "VPC": "dev",
              "hydrovis-env": "dev",
              "hydrovis-sys": "undefined",
              "noaa:environment": "dev"
            },
            "tags_all": {
              "Created by": "nick.chadwick@noaa.gov",
              "Date created": "2021-12-20T20:37:22Z",
              "Name": "hv-ti-egis-ArcGIS-Monitor",
              "OS": "Windows",
              "Patch Group": "ESRI Group 1",
              "TaskOrderID": "1305L420QNWWJ0057",
              "TaskOrderId": "1305L420FNWWJ0136",
              "VPC": "dev",
              "hydrovis-env": "dev",
              "hydrovis-sys": "undefined",
              "noaa:environment": "dev",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "6764da667b12388ea38f7e73ef2510204dedce85",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-042d66db0eac63f5b",
              "sg-0874e1b42d1981b59"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.vpc.aws_vpc.main",
            "module.egis_monitor.data.aws_ami.windows",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.egis_monitor.data.template_cloudinit_config.arcgismonitor",
            "module.iam-roles.aws_iam_instance_profile.HydrovisESRISSMDeploy",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-web1a",
            "module.egis_monitor.data.template_file.arcgismonitor"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "data",
      "type": "template_file",
      "name": "HydroVISSSMPolicy-template",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "dbf993ba3e9d544105d4ae3ba69cea31ef6c77e8622761d760e3eb45f7fb490e",
            "rendered": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "template": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-${environment}-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-${environment}-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "vars": {
              "environment": "ti"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "data",
      "type": "template_file",
      "name": "HydrovisESRISSMDeploy-template",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "c0356b1aa612e5a0331ef1e1f758c42245d17d1ab77109343e87da7f6bc1b8d6",
            "rendered": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"ssm0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"ssm1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\":\"logging\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"tag:getResources\",\n        \"tag:getTagKeys\",\n        \"tag:getTagValues\",\n        \"resource-groups:Get*\",\n        \"resource-groups:List*\",\n        \"resource-groups:Search*\",\n        \"cloudformation:DescribeStacks\",\n        \"cloudformation:ListStackResources\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"elasticloadbalancing:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"cloudwatch:ListMetrics\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"cloudwatch:Describe*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\":\"EC2ReadOnlyforLogging\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"autoscaling:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\":[\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\"\n      ],\n      \"Resource\":\"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\": [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:PutObjectAcl\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\"\n      ],\n      \"Resource\" : \"*\" \n    },\t\t\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"devfimnwmsKMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GetPublicKey\",\n        \"kms:Decrypt\",\n        \"kms:UntagResource\",\n        \"kms:ListKeyPolicies\",\n        \"kms:ListRetirableGrants\",\n        \"kms:GetKeyPolicy\",\n        \"kms:ListResourceTags\",\n        \"kms:ListGrants\",\n        \"kms:GetParametersForImport\",\n        \"kms:TagResource\",\n        \"kms:GetKeyRotationStatus\",\n        \"kms:DescribeKey\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:iam::526904826677:role/*\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"SeeAllS3KMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:*\",\n        \"kms:DescribeCustomKeyStores\",\n        \"kms:ListKeys\",\n        \"kms:ListAliases\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PortalContent\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GISServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"ImageServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GPServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"AutoScaling\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachClassicLinkVpc\",\n        \"ec2:CancelSpotInstanceRequests\",\n        \"ec2:CreateFleet\",\n        \"ec2:CreateTags\",\n        \"ec2:DeleteTags\",\n        \"ec2:Describe*\",\n        \"ec2:DetachClassicLinkVpc\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:RequestSpotInstances\",\n        \"ec2:RunInstances\",\n        \"ec2:TerminateInstances\",\n        \"elasticloadbalancing:Register*\",\n        \"elasticloadbalancing:Deregister*\",\n        \"elasticloadbalancing:Describe*\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"sns:Publish\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PackerIAMPassRole\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"iam:PassRole\",\n        \"iam:GetInstanceProfile\"\n      ],\n      \"Resource\" : [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\" : \"PackerDeploy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachVolume\",\n        \"ec2:AuthorizeSecurityGroupIngress\",\n        \"ec2:CopyImage\",\n        \"ec2:CreateImage\",\n        \"ec2:CreateKeypair\",\n        \"ec2:CreateSecurityGroup\",\n        \"ec2:CreateSnapshot\",\n        \"ec2:CreateTags\",\n        \"ec2:CreateVolume\",\n        \"ec2:DeleteKeyPair\",\n        \"ec2:DeleteSecurityGroup\",\n        \"ec2:DeleteSnapshot\",\n        \"ec2:DeleteVolume\",\n        \"ec2:DeregisterImage\",\n        \"ec2:DescribeImageAttribute\",\n        \"ec2:DescribeImages\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeInstanceStatus\",\n        \"ec2:DescribeRegions\",\n        \"ec2:DescribeSecurityGroups\",\n        \"ec2:DescribeSnapshots\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeTags\",\n        \"ec2:DescribeVolumes\",\n        \"ec2:DetachVolume\",\n        \"ec2:GetPasswordData\",\n        \"ec2:ModifyImageAttribute\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:ModifySnapshotAttribute\",\n        \"ec2:RegisterImage\",\n        \"ec2:RunInstances\",\n        \"ec2:StopInstances\",\n        \"ec2:TerminateInstances\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n",
            "template": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"ssm0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"ssm1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\":\"logging\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"tag:getResources\",\n        \"tag:getTagKeys\",\n        \"tag:getTagValues\",\n        \"resource-groups:Get*\",\n        \"resource-groups:List*\",\n        \"resource-groups:Search*\",\n        \"cloudformation:DescribeStacks\",\n        \"cloudformation:ListStackResources\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"elasticloadbalancing:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"cloudwatch:ListMetrics\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"cloudwatch:Describe*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\":\"EC2ReadOnlyforLogging\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"autoscaling:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\":[\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\"\n      ],\n      \"Resource\":\"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\": [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:PutObjectAcl\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\"\n      ],\n      \"Resource\" : \"*\" \n    },\t\t\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"devfimnwmsKMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GetPublicKey\",\n        \"kms:Decrypt\",\n        \"kms:UntagResource\",\n        \"kms:ListKeyPolicies\",\n        \"kms:ListRetirableGrants\",\n        \"kms:GetKeyPolicy\",\n        \"kms:ListResourceTags\",\n        \"kms:ListGrants\",\n        \"kms:GetParametersForImport\",\n        \"kms:TagResource\",\n        \"kms:GetKeyRotationStatus\",\n        \"kms:DescribeKey\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:iam::${account_id}:role/*\",\n        \"arn:aws:kms:${region}:${account_id}:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"SeeAllS3KMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:*\",\n        \"kms:DescribeCustomKeyStores\",\n        \"kms:ListKeys\",\n        \"kms:ListAliases\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PortalContent\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-ptl-content/*\",\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-ptl-content\",\n        \"arn:aws:kms:${region}:${account_id}:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GISServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-gis-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-gis-server-cache\",\n        \"arn:aws:kms:${region}:${account_id}:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"ImageServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-img-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-img-server-cache\",\n        \"arn:aws:kms:${region}:${account_id}:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GPServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-gp-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-${environment}-egis-${region}-gp-server-cache\",\n        \"arn:aws:kms:${region}:${account_id}:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-${environment}-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-${environment}-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"AutoScaling\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachClassicLinkVpc\",\n        \"ec2:CancelSpotInstanceRequests\",\n        \"ec2:CreateFleet\",\n        \"ec2:CreateTags\",\n        \"ec2:DeleteTags\",\n        \"ec2:Describe*\",\n        \"ec2:DetachClassicLinkVpc\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:RequestSpotInstances\",\n        \"ec2:RunInstances\",\n        \"ec2:TerminateInstances\",\n        \"elasticloadbalancing:Register*\",\n        \"elasticloadbalancing:Deregister*\",\n        \"elasticloadbalancing:Describe*\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"sns:Publish\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PackerIAMPassRole\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"iam:PassRole\",\n        \"iam:GetInstanceProfile\"\n      ],\n      \"Resource\" : [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\" : \"PackerDeploy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachVolume\",\n        \"ec2:AuthorizeSecurityGroupIngress\",\n        \"ec2:CopyImage\",\n        \"ec2:CreateImage\",\n        \"ec2:CreateKeypair\",\n        \"ec2:CreateSecurityGroup\",\n        \"ec2:CreateSnapshot\",\n        \"ec2:CreateTags\",\n        \"ec2:CreateVolume\",\n        \"ec2:DeleteKeyPair\",\n        \"ec2:DeleteSecurityGroup\",\n        \"ec2:DeleteSnapshot\",\n        \"ec2:DeleteVolume\",\n        \"ec2:DeregisterImage\",\n        \"ec2:DescribeImageAttribute\",\n        \"ec2:DescribeImages\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeInstanceStatus\",\n        \"ec2:DescribeRegions\",\n        \"ec2:DescribeSecurityGroups\",\n        \"ec2:DescribeSnapshots\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeTags\",\n        \"ec2:DescribeVolumes\",\n        \"ec2:DetachVolume\",\n        \"ec2:GetPasswordData\",\n        \"ec2:ModifyImageAttribute\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:ModifySnapshotAttribute\",\n        \"ec2:RegisterImage\",\n        \"ec2:RunInstances\",\n        \"ec2:StopInstances\",\n        \"ec2:TerminateInstances\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n",
            "vars": {
              "account_id": "526904826677",
              "environment": "ti",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "data",
      "type": "template_file",
      "name": "hydrovis-hml-ingest-role-template",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "dd4a18eee7b94e8499bb36fab8586b59c19d9500216c425aedaa5bbe73d865f6",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:PassRole\",\n        \"secretsmanager:GetSecretValue\",\n        \"rds:DescribeDBInstances\"\n      ],\n      \"Resource\": [\n        \"arn:aws:rds:*:526904826677:db:*\",\n        \"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\n        \"arn:aws:secretsmanager:us-east-1:526904826677:secret:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DeleteNetworkInterface\",\n        \"ec2:AttachNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:DescribeDBInstances\",\n      \"Resource\": \"arn:aws:rds:us-east-1:526904826677:db:*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListAccessPointsForObjectLambda\",\n        \"s3:GetAccessPoint\",\n        \"rds:DeleteInstallationMedia\",\n        \"rds:CreateCustomAvailabilityZone\",\n        \"rds:DescribeDBEngineVersions\",\n        \"rds:CrossRegionCommunication\",\n        \"mq:ListBrokers\",\n        \"rds:DescribeExportTasks\",\n        \"rds:StartExportTask\",\n        \"s3:PutStorageLensConfiguration\",\n        \"rds:DescribeEngineDefaultParameters\",\n        \"rds:DescribeCustomAvailabilityZones\",\n        \"rds:DescribeReservedDBInstancesOfferings\",\n        \"rds:DeleteCustomAvailabilityZone\",\n        \"mq:CreateConfiguration\",\n        \"rds:ImportInstallationMedia\",\n        \"rds:DescribeEngineDefaultClusterParameters\",\n        \"rds:DescribeSourceRegions\",\n        \"rds:DescribeInstallationMedia\",\n        \"rds:CreateDBProxy\",\n        \"rds:DescribeEventCategories\",\n        \"mq:CreateBroker\",\n        \"rds:DescribeEvents\",\n        \"s3:PutAccountPublicAccessBlock\",\n        \"rds:CancelExportTask\",\n        \"s3:ListAccessPoints\",\n        \"s3:ListJobs\",\n        \"mq:DescribeBrokerEngineTypes\",\n        \"mq:DescribeBrokerInstanceOptions\",\n        \"s3:ListMultiRegionAccessPoints\",\n        \"mq:ListConfigurations\",\n        \"rds:DeleteDBInstanceAutomatedBackup\",\n        \"s3:ListStorageLensConfigurations\",\n        \"rds:ModifyCertificates\",\n        \"s3:GetAccountPublicAccessBlock\",\n        \"s3:ListAllMyBuckets\",\n        \"rds:DescribeOrderableDBInstanceOptions\",\n        \"rds:DescribeCertificates\",\n        \"s3:CreateJob\",\n        \"rds:DescribeAccountAttributes\",\n        \"secretsmanager:ListSecrets\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:*\",\n      \"Resource\": [\n        \"arn:aws:rds:*:526904826677:cluster-endpoint:*\",\n        \"arn:aws:rds:us-east-1:526904826677:db:hydrovis-ti-ingest\",\n        \"arn:aws:rds:*:526904826677:og:*\",\n        \"arn:aws:rds:*:526904826677:target-group:*\",\n        \"arn:aws:rds:*:526904826677:pg:*\",\n        \"arn:aws:rds:*:526904826677:es:*\",\n        \"arn:aws:rds:*:526904826677:db-proxy:*\",\n        \"arn:aws:rds:*:526904826677:ri:*\",\n        \"arn:aws:rds:*:526904826677:snapshot:*\",\n        \"arn:aws:rds:*:526904826677:cluster-pg:*\",\n        \"arn:aws:rds:*:526904826677:cluster-snapshot:*\",\n        \"arn:aws:rds:*:526904826677:db-proxy-endpoint:*\",\n        \"arn:aws:rds:us-east-1:526904826677:cluster:*\",\n        \"arn:aws:rds:*:526904826677:subgrp:*\",\n        \"arn:aws:rds:*:526904826677:secgrp:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor4\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": [\n        \"arn:aws:s3-object-lambda:*:526904826677:accesspoint/*\",\n        \"arn:aws:s3:us-west-2:526904826677:async-request/mrap/*/*\",\n        \"arn:aws:s3:*:526904826677:accesspoint/*\",\n        \"arn:aws:s3:*:526904826677:job/*\",\n        \"arn:aws:s3:*:526904826677:storage-lens/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor5\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mq:*\",\n      \"Resource\": [\n        \"arn:aws:mq:us-east-1:526904826677:configuration:*\",\n        \"arn:aws:mq:us-east-1:526904826677:broker:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor6\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3::526904826677:accesspoint/*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:PassRole\",\n        \"secretsmanager:GetSecretValue\",\n        \"rds:DescribeDBInstances\"\n      ],\n      \"Resource\": [\n        \"arn:aws:rds:*:${account_id}:db:*\",\n        \"arn:aws:iam::${account_id}:role/hydrovis-${environment}-hml-ingest-role\",\n        \"arn:aws:secretsmanager:${region}:${account_id}:secret:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DeleteNetworkInterface\",\n        \"ec2:AttachNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:DescribeDBInstances\",\n      \"Resource\": \"arn:aws:rds:${region}:${account_id}:db:*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListAccessPointsForObjectLambda\",\n        \"s3:GetAccessPoint\",\n        \"rds:DeleteInstallationMedia\",\n        \"rds:CreateCustomAvailabilityZone\",\n        \"rds:DescribeDBEngineVersions\",\n        \"rds:CrossRegionCommunication\",\n        \"mq:ListBrokers\",\n        \"rds:DescribeExportTasks\",\n        \"rds:StartExportTask\",\n        \"s3:PutStorageLensConfiguration\",\n        \"rds:DescribeEngineDefaultParameters\",\n        \"rds:DescribeCustomAvailabilityZones\",\n        \"rds:DescribeReservedDBInstancesOfferings\",\n        \"rds:DeleteCustomAvailabilityZone\",\n        \"mq:CreateConfiguration\",\n        \"rds:ImportInstallationMedia\",\n        \"rds:DescribeEngineDefaultClusterParameters\",\n        \"rds:DescribeSourceRegions\",\n        \"rds:DescribeInstallationMedia\",\n        \"rds:CreateDBProxy\",\n        \"rds:DescribeEventCategories\",\n        \"mq:CreateBroker\",\n        \"rds:DescribeEvents\",\n        \"s3:PutAccountPublicAccessBlock\",\n        \"rds:CancelExportTask\",\n        \"s3:ListAccessPoints\",\n        \"s3:ListJobs\",\n        \"mq:DescribeBrokerEngineTypes\",\n        \"mq:DescribeBrokerInstanceOptions\",\n        \"s3:ListMultiRegionAccessPoints\",\n        \"mq:ListConfigurations\",\n        \"rds:DeleteDBInstanceAutomatedBackup\",\n        \"s3:ListStorageLensConfigurations\",\n        \"rds:ModifyCertificates\",\n        \"s3:GetAccountPublicAccessBlock\",\n        \"s3:ListAllMyBuckets\",\n        \"rds:DescribeOrderableDBInstanceOptions\",\n        \"rds:DescribeCertificates\",\n        \"s3:CreateJob\",\n        \"rds:DescribeAccountAttributes\",\n        \"secretsmanager:ListSecrets\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:*\",\n      \"Resource\": [\n        \"arn:aws:rds:*:${account_id}:cluster-endpoint:*\",\n        \"arn:aws:rds:${region}:${account_id}:db:hydrovis-${environment}-ingest\",\n        \"arn:aws:rds:*:${account_id}:og:*\",\n        \"arn:aws:rds:*:${account_id}:target-group:*\",\n        \"arn:aws:rds:*:${account_id}:pg:*\",\n        \"arn:aws:rds:*:${account_id}:es:*\",\n        \"arn:aws:rds:*:${account_id}:db-proxy:*\",\n        \"arn:aws:rds:*:${account_id}:ri:*\",\n        \"arn:aws:rds:*:${account_id}:snapshot:*\",\n        \"arn:aws:rds:*:${account_id}:cluster-pg:*\",\n        \"arn:aws:rds:*:${account_id}:cluster-snapshot:*\",\n        \"arn:aws:rds:*:${account_id}:db-proxy-endpoint:*\",\n        \"arn:aws:rds:${region}:${account_id}:cluster:*\",\n        \"arn:aws:rds:*:${account_id}:subgrp:*\",\n        \"arn:aws:rds:*:${account_id}:secgrp:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor4\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": [\n        \"arn:aws:s3-object-lambda:*:${account_id}:accesspoint/*\",\n        \"arn:aws:s3:us-west-2:${account_id}:async-request/mrap/*/*\",\n        \"arn:aws:s3:*:${account_id}:accesspoint/*\",\n        \"arn:aws:s3:*:${account_id}:job/*\",\n        \"arn:aws:s3:*:${account_id}:storage-lens/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor5\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mq:*\",\n      \"Resource\": [\n        \"arn:aws:mq:${region}:${account_id}:configuration:*\",\n        \"arn:aws:mq:${region}:${account_id}:broker:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor6\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3::${account_id}:accesspoint/*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "vars": {
              "account_id": "526904826677",
              "environment": "ti",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "data",
      "type": "template_file",
      "name": "hydrovis-viz-proc-pipeline-lambda-template",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "09073fa8a7231c19c573e840ed5943a5becd4206fab4692abd25240f7f564536",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:GetPublicKey\",\n        \"cloudwatch:PutDashboard\",\n        \"kms:Decrypt\",\n        \"iam:ListRoleTags\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudtrail:GetTrailStatus\",\n        \"cloudwatch:DeleteInsightRules\",\n        \"kms:ListResourceTags\",\n        \"cloudwatch:StartMetricStreams\",\n        \"kms:GetParametersForImport\",\n        \"iam:PassRole\",\n        \"cloudwatch:DeleteDashboards\",\n        \"sns:Publish\",\n        \"cloudwatch:DescribeAlarmHistory\",\n        \"cloudwatch:UntagResource\",\n        \"cloudwatch:StopMetricStreams\",\n        \"kms:GetKeyRotationStatus\",\n        \"cloudwatch:DisableAlarmActions\",\n        \"cloudtrail:ListTags\",\n        \"cloudwatch:ListTagsForResource\",\n        \"kms:DescribeKey\",\n        \"ssm:GetParametersByPath\",\n        \"cloudwatch:DeleteMetricStream\",\n        \"cloudwatch:SetAlarmState\",\n        \"kms:ListKeyPolicies\",\n        \"cloudwatch:GetDashboard\",\n        \"kms:ListRetirableGrants\",\n        \"cloudwatch:GetInsightRuleReport\",\n        \"kms:GetKeyPolicy\",\n        \"cloudwatch:DisableInsightRules\",\n        \"cloudwatch:EnableInsightRules\",\n        \"cloudwatch:PutCompositeAlarm\",\n        \"kms:ListGrants\",\n        \"cloudwatch:PutMetricStream\",\n        \"cloudwatch:PutInsightRule\",\n        \"cloudwatch:TagResource\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"cloudwatch:EnableAlarmActions\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:GetMetricStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:ssm:us-east-1:526904826677:parameter/*\",\n        \"arn:aws:iam::526904826677:role/*\",\n        \"arn:aws:sns:us-east-1:526904826677:*\",\n        \"arn:aws:cloudtrail:us-east-1:526904826677:trail/*\",\n        \"arn:aws:cloudwatch::526904826677:dashboard/*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:alarm:*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:metric-stream/*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:insight-rule/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:GetLogRecord\",\n        \"cloudwatch:PutMetricData\",\n        \"ec2:DescribeInstances\",\n        \"logs:DescribeSubscriptionFilters\",\n        \"logs:StartQuery\",\n        \"logs:DescribeMetricFilters\",\n        \"logs:ListLogDeliveries\",\n        \"logs:CreateLogStream\",\n        \"cloudwatch:DescribeAlarmsForMetric\",\n        \"cloudwatch:ListDashboards\",\n        \"ec2:DescribeVolumes\",\n        \"logs:GetLogEvents\",\n        \"cloudwatch:PutAnomalyDetector\",\n        \"logs:FilterLogEvents\",\n        \"s3:DeleteObject\",\n        \"logs:DescribeDestinations\",\n        \"cloudwatch:DescribeInsightRules\",\n        \"cloudtrail:GetTrail\",\n        \"ec2:CreateTags\",\n        \"s3:ListJobs\",\n        \"ec2:DeleteNetworkInterface\",\n        \"logs:StopQuery\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"logs:CreateLogGroup\",\n        \"cloudtrail:DescribeTrails\",\n        \"ec2:CreateNetworkInterface\",\n        \"logs:DescribeExportTasks\",\n        \"logs:GetQueryResults\",\n        \"logs:ListTagsLogGroup\",\n        \"cloudwatch:GetMetricData\",\n        \"logs:DescribeLogStreams\",\n        \"s3:ListBucket\",\n        \"cloudwatch:DeleteAnomalyDetector\",\n        \"cloudwatch:ListMetrics\",\n        \"logs:GetLogDelivery\",\n        \"cloudwatch:DescribeAnomalyDetectors\",\n        \"s3:GetEncryptionConfiguration\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeNetworkInterfaceAttribute\",\n        \"cloudwatch:GetMetricWidgetImage\",\n        \"logs:DescribeResourcePolicies\",\n        \"logs:DescribeQueries\",\n        \"logs:DescribeLogGroups\",\n        \"logs:TestMetricFilter\",\n        \"logs:PutLogEvents\",\n        \"s3:ListStorageLensConfigurations\",\n        \"s3:ListAllMyBuckets\",\n        \"cloudwatch:ListMetricStreams\",\n        \"cloudtrail:ListPublicKeys\",\n        \"logs:GetLogGroupFields\",\n        \"logs:PutSubscriptionFilter\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:GetEncryptionConfiguration\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucketVersions\",\n        \"s3:RestoreObject\",\n        \"s3:ListBucket\",\n        \"s3:DeleteObject\",\n        \"s3:GetBucketAcl\",\n        \"s3:ListMultipartUploadParts\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::hydrovis-*-hml-*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*\",\n        \"arn:aws:s3:::hydrovis-*-hml-*/*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*/*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"lambda:*\",\n      \"Resource\": [\n        \"arn:aws:lambda:us-east-1:526904826677:event-source-mapping:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:codesigningconfig:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:function:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:layer:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:layer:*:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:GetPublicKey\",\n        \"cloudwatch:PutDashboard\",\n        \"kms:Decrypt\",\n        \"iam:ListRoleTags\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudtrail:GetTrailStatus\",\n        \"cloudwatch:DeleteInsightRules\",\n        \"kms:ListResourceTags\",\n        \"cloudwatch:StartMetricStreams\",\n        \"kms:GetParametersForImport\",\n        \"iam:PassRole\",\n        \"cloudwatch:DeleteDashboards\",\n        \"sns:Publish\",\n        \"cloudwatch:DescribeAlarmHistory\",\n        \"cloudwatch:UntagResource\",\n        \"cloudwatch:StopMetricStreams\",\n        \"kms:GetKeyRotationStatus\",\n        \"cloudwatch:DisableAlarmActions\",\n        \"cloudtrail:ListTags\",\n        \"cloudwatch:ListTagsForResource\",\n        \"kms:DescribeKey\",\n        \"ssm:GetParametersByPath\",\n        \"cloudwatch:DeleteMetricStream\",\n        \"cloudwatch:SetAlarmState\",\n        \"kms:ListKeyPolicies\",\n        \"cloudwatch:GetDashboard\",\n        \"kms:ListRetirableGrants\",\n        \"cloudwatch:GetInsightRuleReport\",\n        \"kms:GetKeyPolicy\",\n        \"cloudwatch:DisableInsightRules\",\n        \"cloudwatch:EnableInsightRules\",\n        \"cloudwatch:PutCompositeAlarm\",\n        \"kms:ListGrants\",\n        \"cloudwatch:PutMetricStream\",\n        \"cloudwatch:PutInsightRule\",\n        \"cloudwatch:TagResource\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"cloudwatch:EnableAlarmActions\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:GetMetricStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:ssm:${region}:${account_id}:parameter/*\",\n        \"arn:aws:iam::${account_id}:role/*\",\n        \"arn:aws:sns:${region}:${account_id}:*\",\n        \"arn:aws:cloudtrail:${region}:${account_id}:trail/*\",\n        \"arn:aws:cloudwatch::${account_id}:dashboard/*\",\n        \"arn:aws:cloudwatch:${region}:${account_id}:alarm:*\",\n        \"arn:aws:cloudwatch:${region}:${account_id}:metric-stream/*\",\n        \"arn:aws:cloudwatch:${region}:${account_id}:insight-rule/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:GetLogRecord\",\n        \"cloudwatch:PutMetricData\",\n        \"ec2:DescribeInstances\",\n        \"logs:DescribeSubscriptionFilters\",\n        \"logs:StartQuery\",\n        \"logs:DescribeMetricFilters\",\n        \"logs:ListLogDeliveries\",\n        \"logs:CreateLogStream\",\n        \"cloudwatch:DescribeAlarmsForMetric\",\n        \"cloudwatch:ListDashboards\",\n        \"ec2:DescribeVolumes\",\n        \"logs:GetLogEvents\",\n        \"cloudwatch:PutAnomalyDetector\",\n        \"logs:FilterLogEvents\",\n        \"s3:DeleteObject\",\n        \"logs:DescribeDestinations\",\n        \"cloudwatch:DescribeInsightRules\",\n        \"cloudtrail:GetTrail\",\n        \"ec2:CreateTags\",\n        \"s3:ListJobs\",\n        \"ec2:DeleteNetworkInterface\",\n        \"logs:StopQuery\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"logs:CreateLogGroup\",\n        \"cloudtrail:DescribeTrails\",\n        \"ec2:CreateNetworkInterface\",\n        \"logs:DescribeExportTasks\",\n        \"logs:GetQueryResults\",\n        \"logs:ListTagsLogGroup\",\n        \"cloudwatch:GetMetricData\",\n        \"logs:DescribeLogStreams\",\n        \"s3:ListBucket\",\n        \"cloudwatch:DeleteAnomalyDetector\",\n        \"cloudwatch:ListMetrics\",\n        \"logs:GetLogDelivery\",\n        \"cloudwatch:DescribeAnomalyDetectors\",\n        \"s3:GetEncryptionConfiguration\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeNetworkInterfaceAttribute\",\n        \"cloudwatch:GetMetricWidgetImage\",\n        \"logs:DescribeResourcePolicies\",\n        \"logs:DescribeQueries\",\n        \"logs:DescribeLogGroups\",\n        \"logs:TestMetricFilter\",\n        \"logs:PutLogEvents\",\n        \"s3:ListStorageLensConfigurations\",\n        \"s3:ListAllMyBuckets\",\n        \"cloudwatch:ListMetricStreams\",\n        \"cloudtrail:ListPublicKeys\",\n        \"logs:GetLogGroupFields\",\n        \"logs:PutSubscriptionFilter\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:GetEncryptionConfiguration\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucketVersions\",\n        \"s3:RestoreObject\",\n        \"s3:ListBucket\",\n        \"s3:DeleteObject\",\n        \"s3:GetBucketAcl\",\n        \"s3:ListMultipartUploadParts\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::hydrovis-*-hml-*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*\",\n        \"arn:aws:s3:::hydrovis-*-hml-*/*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*/*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"lambda:*\",\n      \"Resource\": [\n        \"arn:aws:lambda:${region}:${account_id}:event-source-mapping:*\",\n        \"arn:aws:lambda:${region}:${account_id}:codesigningconfig:*\",\n        \"arn:aws:lambda:${region}:${account_id}:function:*\",\n        \"arn:aws:lambda:${region}:${account_id}:layer:*\",\n        \"arn:aws:lambda:${region}:${account_id}:layer:*:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "vars": {
              "account_id": "526904826677",
              "environment": "ti",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "HydrovisESRISSMDeploy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:instance-profile/HydrovisESRISSMDeploy",
            "create_date": "2021-12-20T19:31:56Z",
            "id": "HydrovisESRISSMDeploy",
            "name": "HydrovisESRISSMDeploy",
            "name_prefix": null,
            "path": "/",
            "role": "HydrovisESRISSMDeploy",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AIPAXVLPZTM23VVWF5T67"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "HydrovisSSMInstanceProfileRole",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:instance-profile/HydrovisSSMInstanceProfileRole",
            "create_date": "2021-12-20T19:31:56Z",
            "id": "HydrovisSSMInstanceProfileRole",
            "name": "HydrovisSSMInstanceProfileRole",
            "name_prefix": null,
            "path": "/",
            "role": "HydrovisSSMInstanceProfileRole",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AIPAXVLPZTM26FKJAK55D"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "Hydroviz-RnR-EC2-Profile",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:instance-profile/Hydroviz-RnR-EC2-Profile",
            "create_date": "2021-12-20T19:31:57Z",
            "id": "Hydroviz-RnR-EC2-Profile",
            "name": "Hydroviz-RnR-EC2-Profile",
            "name_prefix": null,
            "path": "/",
            "role": "Hydroviz-RnR-EC2-Profile",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AIPAXVLPZTM2UIRFUNCGR"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "hydrovis-hml-ingest-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:instance-profile/hydrovis-ti-hml-ingest-role",
            "create_date": "2021-12-20T19:31:56Z",
            "id": "hydrovis-ti-hml-ingest-role",
            "name": "hydrovis-ti-hml-ingest-role",
            "name_prefix": null,
            "path": "/",
            "role": "hydrovis-ti-hml-ingest-role",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AIPAXVLPZTM2SFTOFFMBS"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "HydrovisESRISSMDeploy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2021-12-20T19:31:54Z",
            "description": "",
            "force_detach_policies": false,
            "id": "HydrovisESRISSMDeploy",
            "inline_policy": [
              {
                "name": "HydrovisESRISSMDeploy",
                "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"ssm0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"ssm1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\":\"logging\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"tag:getResources\",\n        \"tag:getTagKeys\",\n        \"tag:getTagValues\",\n        \"resource-groups:Get*\",\n        \"resource-groups:List*\",\n        \"resource-groups:Search*\",\n        \"cloudformation:DescribeStacks\",\n        \"cloudformation:ListStackResources\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"elasticloadbalancing:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"cloudwatch:ListMetrics\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"cloudwatch:Describe*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\":\"EC2ReadOnlyforLogging\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"autoscaling:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\":[\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\"\n      ],\n      \"Resource\":\"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\": [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:PutObjectAcl\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\"\n      ],\n      \"Resource\" : \"*\" \n    },\t\t\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"devfimnwmsKMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GetPublicKey\",\n        \"kms:Decrypt\",\n        \"kms:UntagResource\",\n        \"kms:ListKeyPolicies\",\n        \"kms:ListRetirableGrants\",\n        \"kms:GetKeyPolicy\",\n        \"kms:ListResourceTags\",\n        \"kms:ListGrants\",\n        \"kms:GetParametersForImport\",\n        \"kms:TagResource\",\n        \"kms:GetKeyRotationStatus\",\n        \"kms:DescribeKey\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:iam::526904826677:role/*\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"SeeAllS3KMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:*\",\n        \"kms:DescribeCustomKeyStores\",\n        \"kms:ListKeys\",\n        \"kms:ListAliases\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PortalContent\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GISServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"ImageServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GPServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"AutoScaling\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachClassicLinkVpc\",\n        \"ec2:CancelSpotInstanceRequests\",\n        \"ec2:CreateFleet\",\n        \"ec2:CreateTags\",\n        \"ec2:DeleteTags\",\n        \"ec2:Describe*\",\n        \"ec2:DetachClassicLinkVpc\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:RequestSpotInstances\",\n        \"ec2:RunInstances\",\n        \"ec2:TerminateInstances\",\n        \"elasticloadbalancing:Register*\",\n        \"elasticloadbalancing:Deregister*\",\n        \"elasticloadbalancing:Describe*\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"sns:Publish\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PackerIAMPassRole\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"iam:PassRole\",\n        \"iam:GetInstanceProfile\"\n      ],\n      \"Resource\" : [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\" : \"PackerDeploy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachVolume\",\n        \"ec2:AuthorizeSecurityGroupIngress\",\n        \"ec2:CopyImage\",\n        \"ec2:CreateImage\",\n        \"ec2:CreateKeypair\",\n        \"ec2:CreateSecurityGroup\",\n        \"ec2:CreateSnapshot\",\n        \"ec2:CreateTags\",\n        \"ec2:CreateVolume\",\n        \"ec2:DeleteKeyPair\",\n        \"ec2:DeleteSecurityGroup\",\n        \"ec2:DeleteSnapshot\",\n        \"ec2:DeleteVolume\",\n        \"ec2:DeregisterImage\",\n        \"ec2:DescribeImageAttribute\",\n        \"ec2:DescribeImages\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeInstanceStatus\",\n        \"ec2:DescribeRegions\",\n        \"ec2:DescribeSecurityGroups\",\n        \"ec2:DescribeSnapshots\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeTags\",\n        \"ec2:DescribeVolumes\",\n        \"ec2:DetachVolume\",\n        \"ec2:GetPasswordData\",\n        \"ec2:ModifyImageAttribute\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:ModifySnapshotAttribute\",\n        \"ec2:RegisterImage\",\n        \"ec2:RunInstances\",\n        \"ec2:StopInstances\",\n        \"ec2:TerminateInstances\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "HydrovisESRISSMDeploy",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AROAXVLPZTM2UM2XS3RWA"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "HydrovisSSMInstanceProfileRole",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/HydrovisSSMInstanceProfileRole",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2021-12-20T19:31:54Z",
            "description": "",
            "force_detach_policies": false,
            "id": "HydrovisSSMInstanceProfileRole",
            "inline_policy": [
              {
                "name": "HydroVISSSMPolicy",
                "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "HydrovisSSMInstanceProfileRole",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AROAXVLPZTM2ZI2OR7AX5"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "Hydroviz-RnR-EC2-Profile",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/Hydroviz-RnR-EC2-Profile",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2021-12-20T19:31:55Z",
            "description": "",
            "force_detach_policies": false,
            "id": "Hydroviz-RnR-EC2-Profile",
            "inline_policy": [
              {
                "name": "HydroVISSSMPolicy",
                "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "Hydroviz-RnR-EC2-Profile",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AROAXVLPZTM23P4I52IJW"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "hydrovis-hml-ingest-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"ec2.amazonaws.com\",\"lambda.amazonaws.com\"]},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2021-12-20T19:31:54Z",
            "description": "",
            "force_detach_policies": false,
            "id": "hydrovis-ti-hml-ingest-role",
            "inline_policy": [
              {
                "name": "HydroVISSSMPolicy",
                "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}"
              },
              {
                "name": "hydrovis-hml-ingest-role",
                "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:PassRole\",\n        \"secretsmanager:GetSecretValue\",\n        \"rds:DescribeDBInstances\"\n      ],\n      \"Resource\": [\n        \"arn:aws:rds:*:526904826677:db:*\",\n        \"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\n        \"arn:aws:secretsmanager:us-east-1:526904826677:secret:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DeleteNetworkInterface\",\n        \"ec2:AttachNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:DescribeDBInstances\",\n      \"Resource\": \"arn:aws:rds:us-east-1:526904826677:db:*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListAccessPointsForObjectLambda\",\n        \"s3:GetAccessPoint\",\n        \"rds:DeleteInstallationMedia\",\n        \"rds:CreateCustomAvailabilityZone\",\n        \"rds:DescribeDBEngineVersions\",\n        \"rds:CrossRegionCommunication\",\n        \"mq:ListBrokers\",\n        \"rds:DescribeExportTasks\",\n        \"rds:StartExportTask\",\n        \"s3:PutStorageLensConfiguration\",\n        \"rds:DescribeEngineDefaultParameters\",\n        \"rds:DescribeCustomAvailabilityZones\",\n        \"rds:DescribeReservedDBInstancesOfferings\",\n        \"rds:DeleteCustomAvailabilityZone\",\n        \"mq:CreateConfiguration\",\n        \"rds:ImportInstallationMedia\",\n        \"rds:DescribeEngineDefaultClusterParameters\",\n        \"rds:DescribeSourceRegions\",\n        \"rds:DescribeInstallationMedia\",\n        \"rds:CreateDBProxy\",\n        \"rds:DescribeEventCategories\",\n        \"mq:CreateBroker\",\n        \"rds:DescribeEvents\",\n        \"s3:PutAccountPublicAccessBlock\",\n        \"rds:CancelExportTask\",\n        \"s3:ListAccessPoints\",\n        \"s3:ListJobs\",\n        \"mq:DescribeBrokerEngineTypes\",\n        \"mq:DescribeBrokerInstanceOptions\",\n        \"s3:ListMultiRegionAccessPoints\",\n        \"mq:ListConfigurations\",\n        \"rds:DeleteDBInstanceAutomatedBackup\",\n        \"s3:ListStorageLensConfigurations\",\n        \"rds:ModifyCertificates\",\n        \"s3:GetAccountPublicAccessBlock\",\n        \"s3:ListAllMyBuckets\",\n        \"rds:DescribeOrderableDBInstanceOptions\",\n        \"rds:DescribeCertificates\",\n        \"s3:CreateJob\",\n        \"rds:DescribeAccountAttributes\",\n        \"secretsmanager:ListSecrets\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:*\",\n      \"Resource\": [\n        \"arn:aws:rds:*:526904826677:cluster-endpoint:*\",\n        \"arn:aws:rds:us-east-1:526904826677:db:hydrovis-ti-ingest\",\n        \"arn:aws:rds:*:526904826677:og:*\",\n        \"arn:aws:rds:*:526904826677:target-group:*\",\n        \"arn:aws:rds:*:526904826677:pg:*\",\n        \"arn:aws:rds:*:526904826677:es:*\",\n        \"arn:aws:rds:*:526904826677:db-proxy:*\",\n        \"arn:aws:rds:*:526904826677:ri:*\",\n        \"arn:aws:rds:*:526904826677:snapshot:*\",\n        \"arn:aws:rds:*:526904826677:cluster-pg:*\",\n        \"arn:aws:rds:*:526904826677:cluster-snapshot:*\",\n        \"arn:aws:rds:*:526904826677:db-proxy-endpoint:*\",\n        \"arn:aws:rds:us-east-1:526904826677:cluster:*\",\n        \"arn:aws:rds:*:526904826677:subgrp:*\",\n        \"arn:aws:rds:*:526904826677:secgrp:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor4\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": [\n        \"arn:aws:s3-object-lambda:*:526904826677:accesspoint/*\",\n        \"arn:aws:s3:us-west-2:526904826677:async-request/mrap/*/*\",\n        \"arn:aws:s3:*:526904826677:accesspoint/*\",\n        \"arn:aws:s3:*:526904826677:job/*\",\n        \"arn:aws:s3:*:526904826677:storage-lens/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor5\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mq:*\",\n      \"Resource\": [\n        \"arn:aws:mq:us-east-1:526904826677:configuration:*\",\n        \"arn:aws:mq:us-east-1:526904826677:broker:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor6\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3::526904826677:accesspoint/*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
            ],
            "max_session_duration": 3600,
            "name": "hydrovis-ti-hml-ingest-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AROAXVLPZTM2RPRB2Y7D5"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "hydrovis-viz-proc-pipeline-lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2021-12-20T19:31:54Z",
            "description": "",
            "force_detach_policies": false,
            "id": "hydrovis-viz-proc-pipeline-lambda",
            "inline_policy": [
              {
                "name": "hydrovis-viz-proc-pipeline-lambda",
                "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:GetPublicKey\",\n        \"cloudwatch:PutDashboard\",\n        \"kms:Decrypt\",\n        \"iam:ListRoleTags\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudtrail:GetTrailStatus\",\n        \"cloudwatch:DeleteInsightRules\",\n        \"kms:ListResourceTags\",\n        \"cloudwatch:StartMetricStreams\",\n        \"kms:GetParametersForImport\",\n        \"iam:PassRole\",\n        \"cloudwatch:DeleteDashboards\",\n        \"sns:Publish\",\n        \"cloudwatch:DescribeAlarmHistory\",\n        \"cloudwatch:UntagResource\",\n        \"cloudwatch:StopMetricStreams\",\n        \"kms:GetKeyRotationStatus\",\n        \"cloudwatch:DisableAlarmActions\",\n        \"cloudtrail:ListTags\",\n        \"cloudwatch:ListTagsForResource\",\n        \"kms:DescribeKey\",\n        \"ssm:GetParametersByPath\",\n        \"cloudwatch:DeleteMetricStream\",\n        \"cloudwatch:SetAlarmState\",\n        \"kms:ListKeyPolicies\",\n        \"cloudwatch:GetDashboard\",\n        \"kms:ListRetirableGrants\",\n        \"cloudwatch:GetInsightRuleReport\",\n        \"kms:GetKeyPolicy\",\n        \"cloudwatch:DisableInsightRules\",\n        \"cloudwatch:EnableInsightRules\",\n        \"cloudwatch:PutCompositeAlarm\",\n        \"kms:ListGrants\",\n        \"cloudwatch:PutMetricStream\",\n        \"cloudwatch:PutInsightRule\",\n        \"cloudwatch:TagResource\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"cloudwatch:EnableAlarmActions\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:GetMetricStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:ssm:us-east-1:526904826677:parameter/*\",\n        \"arn:aws:iam::526904826677:role/*\",\n        \"arn:aws:sns:us-east-1:526904826677:*\",\n        \"arn:aws:cloudtrail:us-east-1:526904826677:trail/*\",\n        \"arn:aws:cloudwatch::526904826677:dashboard/*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:alarm:*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:metric-stream/*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:insight-rule/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:GetLogRecord\",\n        \"cloudwatch:PutMetricData\",\n        \"ec2:DescribeInstances\",\n        \"logs:DescribeSubscriptionFilters\",\n        \"logs:StartQuery\",\n        \"logs:DescribeMetricFilters\",\n        \"logs:ListLogDeliveries\",\n        \"logs:CreateLogStream\",\n        \"cloudwatch:DescribeAlarmsForMetric\",\n        \"cloudwatch:ListDashboards\",\n        \"ec2:DescribeVolumes\",\n        \"logs:GetLogEvents\",\n        \"cloudwatch:PutAnomalyDetector\",\n        \"logs:FilterLogEvents\",\n        \"s3:DeleteObject\",\n        \"logs:DescribeDestinations\",\n        \"cloudwatch:DescribeInsightRules\",\n        \"cloudtrail:GetTrail\",\n        \"ec2:CreateTags\",\n        \"s3:ListJobs\",\n        \"ec2:DeleteNetworkInterface\",\n        \"logs:StopQuery\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"logs:CreateLogGroup\",\n        \"cloudtrail:DescribeTrails\",\n        \"ec2:CreateNetworkInterface\",\n        \"logs:DescribeExportTasks\",\n        \"logs:GetQueryResults\",\n        \"logs:ListTagsLogGroup\",\n        \"cloudwatch:GetMetricData\",\n        \"logs:DescribeLogStreams\",\n        \"s3:ListBucket\",\n        \"cloudwatch:DeleteAnomalyDetector\",\n        \"cloudwatch:ListMetrics\",\n        \"logs:GetLogDelivery\",\n        \"cloudwatch:DescribeAnomalyDetectors\",\n        \"s3:GetEncryptionConfiguration\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeNetworkInterfaceAttribute\",\n        \"cloudwatch:GetMetricWidgetImage\",\n        \"logs:DescribeResourcePolicies\",\n        \"logs:DescribeQueries\",\n        \"logs:DescribeLogGroups\",\n        \"logs:TestMetricFilter\",\n        \"logs:PutLogEvents\",\n        \"s3:ListStorageLensConfigurations\",\n        \"s3:ListAllMyBuckets\",\n        \"cloudwatch:ListMetricStreams\",\n        \"cloudtrail:ListPublicKeys\",\n        \"logs:GetLogGroupFields\",\n        \"logs:PutSubscriptionFilter\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:GetEncryptionConfiguration\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucketVersions\",\n        \"s3:RestoreObject\",\n        \"s3:ListBucket\",\n        \"s3:DeleteObject\",\n        \"s3:GetBucketAcl\",\n        \"s3:ListMultipartUploadParts\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::hydrovis-*-hml-*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*\",\n        \"arn:aws:s3:::hydrovis-*-hml-*/*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*/*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"lambda:*\",\n      \"Resource\": [\n        \"arn:aws:lambda:us-east-1:526904826677:event-source-mapping:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:codesigningconfig:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:function:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:layer:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:layer:*:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "hydrovis-viz-proc-pipeline-lambda",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AROAXVLPZTM2Z6YQMTQ7F"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "HydroVISSSMPolicy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "HydrovisSSMInstanceProfileRole:HydroVISSSMPolicy",
            "name": "HydroVISSSMPolicy",
            "name_prefix": null,
            "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "role": "HydrovisSSMInstanceProfileRole"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.data.template_file.HydroVISSSMPolicy-template"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "HydrovisESRISSMDeploy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "HydrovisESRISSMDeploy:HydrovisESRISSMDeploy",
            "name": "HydrovisESRISSMDeploy",
            "name_prefix": null,
            "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"ssm0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"ssm1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\":\"logging\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"tag:getResources\",\n        \"tag:getTagKeys\",\n        \"tag:getTagValues\",\n        \"resource-groups:Get*\",\n        \"resource-groups:List*\",\n        \"resource-groups:Search*\",\n        \"cloudformation:DescribeStacks\",\n        \"cloudformation:ListStackResources\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"elasticloadbalancing:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"cloudwatch:ListMetrics\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"cloudwatch:Describe*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\":\"EC2ReadOnlyforLogging\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"autoscaling:Describe*\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\":[\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:DescribeLogGroups\",\n        \"logs:DescribeLogStreams\",\n        \"logs:PutLogEvents\"\n      ],\n      \"Resource\":\"*\"\n    },\n    {\n      \"Effect\":\"Allow\",\n      \"Action\": [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:PutObjectAcl\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\"\n      ],\n      \"Resource\" : \"*\" \n    },\t\t\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"devfimnwmsKMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GetPublicKey\",\n        \"kms:Decrypt\",\n        \"kms:UntagResource\",\n        \"kms:ListKeyPolicies\",\n        \"kms:ListRetirableGrants\",\n        \"kms:GetKeyPolicy\",\n        \"kms:ListResourceTags\",\n        \"kms:ListGrants\",\n        \"kms:GetParametersForImport\",\n        \"kms:TagResource\",\n        \"kms:GetKeyRotationStatus\",\n        \"kms:DescribeKey\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:iam::526904826677:role/*\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"SeeAllS3KMS\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:*\",\n        \"kms:DescribeCustomKeyStores\",\n        \"kms:ListKeys\",\n        \"kms:ListAliases\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PortalContent\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:Get*\",\n        \"s3:PutObject\",\n        \"s3:ListBucket\",\n        \"s3:CreateBucket\",\n        \"s3:DeleteObject\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-ptl-content\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GISServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gis-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"ImageServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-img-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"GPServerCache\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetObjectVersion\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache/*\",\n        \"arn:aws:s3:::hydrovis-ti-egis-us-east-1-gp-server-cache\",\n        \"arn:aws:kms:us-east-1:526904826677:key/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging0\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"sessionManagerLogging1\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Sid\" : \"AutoScaling\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachClassicLinkVpc\",\n        \"ec2:CancelSpotInstanceRequests\",\n        \"ec2:CreateFleet\",\n        \"ec2:CreateTags\",\n        \"ec2:DeleteTags\",\n        \"ec2:Describe*\",\n        \"ec2:DetachClassicLinkVpc\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:RequestSpotInstances\",\n        \"ec2:RunInstances\",\n        \"ec2:TerminateInstances\",\n        \"elasticloadbalancing:Register*\",\n        \"elasticloadbalancing:Deregister*\",\n        \"elasticloadbalancing:Describe*\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"sns:Publish\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"PackerIAMPassRole\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"iam:PassRole\",\n        \"iam:GetInstanceProfile\"\n      ],\n      \"Resource\" : [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\" : \"PackerDeploy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2:AttachVolume\",\n        \"ec2:AuthorizeSecurityGroupIngress\",\n        \"ec2:CopyImage\",\n        \"ec2:CreateImage\",\n        \"ec2:CreateKeypair\",\n        \"ec2:CreateSecurityGroup\",\n        \"ec2:CreateSnapshot\",\n        \"ec2:CreateTags\",\n        \"ec2:CreateVolume\",\n        \"ec2:DeleteKeyPair\",\n        \"ec2:DeleteSecurityGroup\",\n        \"ec2:DeleteSnapshot\",\n        \"ec2:DeleteVolume\",\n        \"ec2:DeregisterImage\",\n        \"ec2:DescribeImageAttribute\",\n        \"ec2:DescribeImages\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeInstanceStatus\",\n        \"ec2:DescribeRegions\",\n        \"ec2:DescribeSecurityGroups\",\n        \"ec2:DescribeSnapshots\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeTags\",\n        \"ec2:DescribeVolumes\",\n        \"ec2:DetachVolume\",\n        \"ec2:GetPasswordData\",\n        \"ec2:ModifyImageAttribute\",\n        \"ec2:ModifyInstanceAttribute\",\n        \"ec2:ModifySnapshotAttribute\",\n        \"ec2:RegisterImage\",\n        \"ec2:RunInstances\",\n        \"ec2:StopInstances\",\n        \"ec2:TerminateInstances\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n",
            "role": "HydrovisESRISSMDeploy"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.data.template_file.HydrovisESRISSMDeploy-template"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "Hydroviz-RnR-EC2-Profile-SSM-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "Hydroviz-RnR-EC2-Profile:HydroVISSSMPolicy",
            "name": "HydroVISSSMPolicy",
            "name_prefix": null,
            "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "role": "Hydroviz-RnR-EC2-Profile"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.data.template_file.HydroVISSSMPolicy-template"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "hydrovis-hml-ingest-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "hydrovis-ti-hml-ingest-role:hydrovis-hml-ingest-role",
            "name": "hydrovis-hml-ingest-role",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:PassRole\",\n        \"secretsmanager:GetSecretValue\",\n        \"rds:DescribeDBInstances\"\n      ],\n      \"Resource\": [\n        \"arn:aws:rds:*:526904826677:db:*\",\n        \"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\n        \"arn:aws:secretsmanager:us-east-1:526904826677:secret:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DeleteNetworkInterface\",\n        \"ec2:AttachNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:DescribeDBInstances\",\n      \"Resource\": \"arn:aws:rds:us-east-1:526904826677:db:*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListAccessPointsForObjectLambda\",\n        \"s3:GetAccessPoint\",\n        \"rds:DeleteInstallationMedia\",\n        \"rds:CreateCustomAvailabilityZone\",\n        \"rds:DescribeDBEngineVersions\",\n        \"rds:CrossRegionCommunication\",\n        \"mq:ListBrokers\",\n        \"rds:DescribeExportTasks\",\n        \"rds:StartExportTask\",\n        \"s3:PutStorageLensConfiguration\",\n        \"rds:DescribeEngineDefaultParameters\",\n        \"rds:DescribeCustomAvailabilityZones\",\n        \"rds:DescribeReservedDBInstancesOfferings\",\n        \"rds:DeleteCustomAvailabilityZone\",\n        \"mq:CreateConfiguration\",\n        \"rds:ImportInstallationMedia\",\n        \"rds:DescribeEngineDefaultClusterParameters\",\n        \"rds:DescribeSourceRegions\",\n        \"rds:DescribeInstallationMedia\",\n        \"rds:CreateDBProxy\",\n        \"rds:DescribeEventCategories\",\n        \"mq:CreateBroker\",\n        \"rds:DescribeEvents\",\n        \"s3:PutAccountPublicAccessBlock\",\n        \"rds:CancelExportTask\",\n        \"s3:ListAccessPoints\",\n        \"s3:ListJobs\",\n        \"mq:DescribeBrokerEngineTypes\",\n        \"mq:DescribeBrokerInstanceOptions\",\n        \"s3:ListMultiRegionAccessPoints\",\n        \"mq:ListConfigurations\",\n        \"rds:DeleteDBInstanceAutomatedBackup\",\n        \"s3:ListStorageLensConfigurations\",\n        \"rds:ModifyCertificates\",\n        \"s3:GetAccountPublicAccessBlock\",\n        \"s3:ListAllMyBuckets\",\n        \"rds:DescribeOrderableDBInstanceOptions\",\n        \"rds:DescribeCertificates\",\n        \"s3:CreateJob\",\n        \"rds:DescribeAccountAttributes\",\n        \"secretsmanager:ListSecrets\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"rds:*\",\n      \"Resource\": [\n        \"arn:aws:rds:*:526904826677:cluster-endpoint:*\",\n        \"arn:aws:rds:us-east-1:526904826677:db:hydrovis-ti-ingest\",\n        \"arn:aws:rds:*:526904826677:og:*\",\n        \"arn:aws:rds:*:526904826677:target-group:*\",\n        \"arn:aws:rds:*:526904826677:pg:*\",\n        \"arn:aws:rds:*:526904826677:es:*\",\n        \"arn:aws:rds:*:526904826677:db-proxy:*\",\n        \"arn:aws:rds:*:526904826677:ri:*\",\n        \"arn:aws:rds:*:526904826677:snapshot:*\",\n        \"arn:aws:rds:*:526904826677:cluster-pg:*\",\n        \"arn:aws:rds:*:526904826677:cluster-snapshot:*\",\n        \"arn:aws:rds:*:526904826677:db-proxy-endpoint:*\",\n        \"arn:aws:rds:us-east-1:526904826677:cluster:*\",\n        \"arn:aws:rds:*:526904826677:subgrp:*\",\n        \"arn:aws:rds:*:526904826677:secgrp:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor4\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": [\n        \"arn:aws:s3-object-lambda:*:526904826677:accesspoint/*\",\n        \"arn:aws:s3:us-west-2:526904826677:async-request/mrap/*/*\",\n        \"arn:aws:s3:*:526904826677:accesspoint/*\",\n        \"arn:aws:s3:*:526904826677:job/*\",\n        \"arn:aws:s3:*:526904826677:storage-lens/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor5\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mq:*\",\n      \"Resource\": [\n        \"arn:aws:mq:us-east-1:526904826677:configuration:*\",\n        \"arn:aws:mq:us-east-1:526904826677:broker:*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor6\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3::526904826677:accesspoint/*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "role": "hydrovis-ti-hml-ingest-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.data.template_file.hydrovis-hml-ingest-role-template"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "hydrovis-hml-ingest-role-SSM-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "hydrovis-ti-hml-ingest-role:HydroVISSSMPolicy",
            "name": "HydroVISSSMPolicy",
            "name_prefix": null,
            "policy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [\n    {\n      \"Sid\" : \"AmazonSSMManagedInstanceCore\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssm:DescribeAssociation\",\n        \"ssm:GetDeployablePatchSnapshotForInstance\",\n        \"ssm:GetDocument\",\n        \"ssm:DescribeDocument\",\n        \"ssm:GetManifest\",\n        \"ssm:GetParameter\",\n        \"ssm:GetParameters\",\n        \"ssm:ListAssociations\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:PutInventory\",\n        \"ssm:PutComplianceItems\",\n        \"ssm:PutConfigurePackageResult\",\n        \"ssm:UpdateAssociationStatus\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ec2messages:AcknowledgeMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:SendReply\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Sid\" : \"HydroVISSSMPolicy\",\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"ssmmessages:CreateControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:OpenDataChannel\",\n        \"ssm:DescribeSessions\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ec2:describeInstances\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:TerminateSession\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:StartSession\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\" : \"*\"\n    },\n    {\n      \"Effect\" : \"Allow\",\n      \"Action\" : [\n        \"s3:PutObject\",\n        \"s3:GetEncryptionConfiguration\"\n      ],\n      \"Resource\" : [\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging\",\n        \"arn:aws:s3:::hydrovis-ti-session-manager-logging/*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "role": "hydrovis-ti-hml-ingest-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.data.template_file.HydroVISSSMPolicy-template"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "hydrovis-viz-proc-pipeline-lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "hydrovis-viz-proc-pipeline-lambda:hydrovis-viz-proc-pipeline-lambda",
            "name": "hydrovis-viz-proc-pipeline-lambda",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:GetPublicKey\",\n        \"cloudwatch:PutDashboard\",\n        \"kms:Decrypt\",\n        \"iam:ListRoleTags\",\n        \"cloudwatch:DeleteAlarms\",\n        \"cloudtrail:GetTrailStatus\",\n        \"cloudwatch:DeleteInsightRules\",\n        \"kms:ListResourceTags\",\n        \"cloudwatch:StartMetricStreams\",\n        \"kms:GetParametersForImport\",\n        \"iam:PassRole\",\n        \"cloudwatch:DeleteDashboards\",\n        \"sns:Publish\",\n        \"cloudwatch:DescribeAlarmHistory\",\n        \"cloudwatch:UntagResource\",\n        \"cloudwatch:StopMetricStreams\",\n        \"kms:GetKeyRotationStatus\",\n        \"cloudwatch:DisableAlarmActions\",\n        \"cloudtrail:ListTags\",\n        \"cloudwatch:ListTagsForResource\",\n        \"kms:DescribeKey\",\n        \"ssm:GetParametersByPath\",\n        \"cloudwatch:DeleteMetricStream\",\n        \"cloudwatch:SetAlarmState\",\n        \"kms:ListKeyPolicies\",\n        \"cloudwatch:GetDashboard\",\n        \"kms:ListRetirableGrants\",\n        \"cloudwatch:GetInsightRuleReport\",\n        \"kms:GetKeyPolicy\",\n        \"cloudwatch:DisableInsightRules\",\n        \"cloudwatch:EnableInsightRules\",\n        \"cloudwatch:PutCompositeAlarm\",\n        \"kms:ListGrants\",\n        \"cloudwatch:PutMetricStream\",\n        \"cloudwatch:PutInsightRule\",\n        \"cloudwatch:TagResource\",\n        \"cloudwatch:PutMetricAlarm\",\n        \"cloudwatch:EnableAlarmActions\",\n        \"cloudwatch:DescribeAlarms\",\n        \"cloudwatch:GetMetricStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:ssm:us-east-1:526904826677:parameter/*\",\n        \"arn:aws:iam::526904826677:role/*\",\n        \"arn:aws:sns:us-east-1:526904826677:*\",\n        \"arn:aws:cloudtrail:us-east-1:526904826677:trail/*\",\n        \"arn:aws:cloudwatch::526904826677:dashboard/*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:alarm:*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:metric-stream/*\",\n        \"arn:aws:cloudwatch:us-east-1:526904826677:insight-rule/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:GetLogRecord\",\n        \"cloudwatch:PutMetricData\",\n        \"ec2:DescribeInstances\",\n        \"logs:DescribeSubscriptionFilters\",\n        \"logs:StartQuery\",\n        \"logs:DescribeMetricFilters\",\n        \"logs:ListLogDeliveries\",\n        \"logs:CreateLogStream\",\n        \"cloudwatch:DescribeAlarmsForMetric\",\n        \"cloudwatch:ListDashboards\",\n        \"ec2:DescribeVolumes\",\n        \"logs:GetLogEvents\",\n        \"cloudwatch:PutAnomalyDetector\",\n        \"logs:FilterLogEvents\",\n        \"s3:DeleteObject\",\n        \"logs:DescribeDestinations\",\n        \"cloudwatch:DescribeInsightRules\",\n        \"cloudtrail:GetTrail\",\n        \"ec2:CreateTags\",\n        \"s3:ListJobs\",\n        \"ec2:DeleteNetworkInterface\",\n        \"logs:StopQuery\",\n        \"cloudwatch:GetMetricStatistics\",\n        \"logs:CreateLogGroup\",\n        \"cloudtrail:DescribeTrails\",\n        \"ec2:CreateNetworkInterface\",\n        \"logs:DescribeExportTasks\",\n        \"logs:GetQueryResults\",\n        \"logs:ListTagsLogGroup\",\n        \"cloudwatch:GetMetricData\",\n        \"logs:DescribeLogStreams\",\n        \"s3:ListBucket\",\n        \"cloudwatch:DeleteAnomalyDetector\",\n        \"cloudwatch:ListMetrics\",\n        \"logs:GetLogDelivery\",\n        \"cloudwatch:DescribeAnomalyDetectors\",\n        \"s3:GetEncryptionConfiguration\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeNetworkInterfaceAttribute\",\n        \"cloudwatch:GetMetricWidgetImage\",\n        \"logs:DescribeResourcePolicies\",\n        \"logs:DescribeQueries\",\n        \"logs:DescribeLogGroups\",\n        \"logs:TestMetricFilter\",\n        \"logs:PutLogEvents\",\n        \"s3:ListStorageLensConfigurations\",\n        \"s3:ListAllMyBuckets\",\n        \"cloudwatch:ListMetricStreams\",\n        \"cloudtrail:ListPublicKeys\",\n        \"logs:GetLogGroupFields\",\n        \"logs:PutSubscriptionFilter\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:GetEncryptionConfiguration\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucketVersions\",\n        \"s3:RestoreObject\",\n        \"s3:ListBucket\",\n        \"s3:DeleteObject\",\n        \"s3:GetBucketAcl\",\n        \"s3:ListMultipartUploadParts\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::hydrovis-*-hml-*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*\",\n        \"arn:aws:s3:::hydrovis-*-hml-*/*\",\n        \"arn:aws:s3:::hydrovis-*-fim-*/*\",\n        \"arn:aws:s3:::hydrovis-*-nwm-*/*\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"lambda:*\",\n      \"Resource\": [\n        \"arn:aws:lambda:us-east-1:526904826677:event-source-mapping:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:codesigningconfig:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:function:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:layer:*\",\n        \"arn:aws:lambda:us-east-1:526904826677:layer:*:*\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n          \"ssmmessages:CreateControlChannel\",\n          \"ssmmessages:CreateDataChannel\",\n          \"ssmmessages:OpenControlChannel\",\n          \"ssmmessages:OpenDataChannel\",\n          \"ssm:UpdateInstanceInformation\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"logs:CreateLogStream\",\n            \"logs:PutLogEvents\",\n            \"logs:DescribeLogGroups\",\n            \"logs:DescribeLogStreams\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"s3:GetEncryptionConfiguration\"\n        ],\n        \"Resource\": \"*\"\n    },\n    {\n        \"Effect\": \"Allow\",\n        \"Action\": \"kms:GenerateDataKey\",\n        \"Resource\": \"*\"\n    }\n  ]\n}",
            "role": "hydrovis-viz-proc-pipeline-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.data.template_file.hydrovis-viz-proc-pipeline-lambda-template"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "hydrovis-hml-ingest-role-lambda-execute-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "hydrovis-ti-hml-ingest-role-20211220193156141900000001",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
            "role": "hydrovis-ti-hml-ingest-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.iam-roles",
      "mode": "managed",
      "type": "aws_iam_service_linked_role",
      "name": "autoscaling",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis",
            "aws_service_name": "autoscaling.amazonaws.com",
            "create_date": "2021-03-25T15:32:45Z",
            "custom_suffix": "hvegis",
            "description": "",
            "id": "arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis",
            "name": "AWSServiceRoleForAutoScaling_hvegis",
            "path": "/aws-service-role/autoscaling.amazonaws.com/",
            "unique_id": "AROAXVLPZTM2UYQHRAFG5"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ=="
        }
      ]
    },
    {
      "module": "module.ingest_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "hml_reciever",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:HML_Receiver__ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "HML receiver function that updates PostgreSQL and RabbitMQ about incoming file",
            "environment": [
              {
                "variables": {
                  "DB": "rfcfcst",
                  "DBHOST": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
                  "DBPASSWORD": "urkZ6DiRqC4jRPjX6sbAnx8Nq",
                  "DBPORT": "5432",
                  "DBUSER": "rfc_fcst_user",
                  "FDIRECTORY": "",
                  "FHOST": "",
                  "LOG_FORMAT": "[ELASTICSEARCH %%(levelname)s]:  %%(asctime)s - %%(message)s",
                  "OACCESSKEY": "",
                  "OBUCKET": "",
                  "OHOST": "",
                  "OPORT": "",
                  "OSECRETKEY": "",
                  "RHOST": "b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com",
                  "RPASSWORD": "urkZ6DiRqC4jRPjX6sbAnx8Nq",
                  "RPORT": "5671",
                  "RSCHEME": "amqps",
                  "RUSERNAME": "rfc_fcst_user",
                  "RVIRTUALHOST": "testing_integration"
                }
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "HML_Receiver__ti",
            "handler": "hml_receiver.lambda_function",
            "id": "HML_Receiver__ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:HML_Receiver__ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T20:21:56.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:psycopg2_sqlalchemy_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:pika_ti:1"
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:HML_Receiver__ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role",
            "runtime": "python3.8",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "ingest/lambda/HML_receiver_lambda.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "lKzAf9+yZJUODPVvvIaiKC1VOU8oDrIR5QUxfCRiOfo=",
            "source_code_size": 20261,
            "tags": {
              "Name": "HML_Receiver__ti"
            },
            "tags_all": {
              "Name": "HML_Receiver__ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 300,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": [
              {
                "security_group_ids": [
                  "sg-0bd65ccbb2ce82848"
                ],
                "subnet_ids": [
                  "subnet-0712c2c2742111aa1",
                  "subnet-0d1ea9ca66f139cfc"
                ],
                "vpc_id": "vpc-07a4518f4ecda4131"
              }
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DBPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DBUSER",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "RHOST",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "RPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "RPORT",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "RUSERNAME",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_route_table.private",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole"
          ]
        }
      ]
    },
    {
      "module": "module.ingest_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "backup_bucket_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "HML_Receiver__ti",
            "id": "terraform-20211222154321243500000001",
            "principal": "s3.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:s3:::hydrovis-ti-hml-backup-us-east-1",
            "statement_id": "terraform-20211222154321243500000001",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.ingest_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "primary_bucket_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "HML_Receiver__ti",
            "id": "terraform-20211220211156076800000002",
            "principal": "s3.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:s3:::hydrovis-ti-hml-us-east-1",
            "statement_id": "terraform-20211220211156076800000002",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.vpc.aws_route_table.private",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.ingest_lambda_functions",
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "backup_bucket_notification",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-hml-backup-us-east-1",
            "id": "hydrovis-ti-hml-backup-us-east-1",
            "lambda_function": [
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "",
                "filter_suffix": "",
                "id": "tf-s3-lambda-20211222154321715600000002",
                "lambda_function_arn": "arn:aws:lambda:us-east-1:526904826677:function:HML_Receiver__ti"
              }
            ],
            "queue": [],
            "topic": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ingest_lambda_functions.aws_lambda_permission.backup_bucket_permissions",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_vpc.main",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-ingest.aws_db_instance.ingest"
          ]
        }
      ]
    },
    {
      "module": "module.ingest_lambda_functions",
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "primary_bucket_notification",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-hml-us-east-1",
            "id": "hydrovis-ti-hml-us-east-1",
            "lambda_function": [
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "",
                "filter_suffix": "",
                "id": "tf-s3-lambda-20211220211157974700000008",
                "lambda_function_arn": "arn:aws:lambda:us-east-1:526904826677:function:HML_Receiver__ti"
              }
            ],
            "queue": [],
            "topic": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_vpc.main",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.ingest_lambda_functions.aws_lambda_permission.primary_bucket_permissions",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.rds-ingest.aws_db_subnet_group.ingest"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"egis\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-egis-us-east-1",
            "id": "alias/hydrovis-ti-egis-us-east-1",
            "name": "alias/hydrovis-ti-egis-us-east-1",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
            "target_key_id": "9b69fe62-4a69-4692-a9c0-5a977c0dc104"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"egis\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for egis",
            "enable_key_rotation": true,
            "id": "9b69fe62-4a69-4692-a9c0-5a977c0dc104",
            "is_enabled": true,
            "key_id": "9b69fe62-4a69-4692-a9c0-5a977c0dc104",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"encrypt-ec2\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-encrypt-ec2-us-east-1",
            "id": "alias/hydrovis-ti-encrypt-ec2-us-east-1",
            "name": "alias/hydrovis-ti-encrypt-ec2-us-east-1",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
            "target_key_id": "b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"encrypt-ec2\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for encrypt-ec2",
            "enable_key_rotation": true,
            "id": "b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
            "is_enabled": true,
            "key_id": "b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"rds-ingest\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-rds-ingest-us-east-1",
            "id": "alias/hydrovis-ti-rds-ingest-us-east-1",
            "name": "alias/hydrovis-ti-rds-ingest-us-east-1",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/14e49959-f999-42a7-80f3-028d67449f56",
            "target_key_id": "14e49959-f999-42a7-80f3-028d67449f56"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"rds-ingest\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/14e49959-f999-42a7-80f3-028d67449f56",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for rds-ingest",
            "enable_key_rotation": true,
            "id": "14e49959-f999-42a7-80f3-028d67449f56",
            "is_enabled": true,
            "key_id": "14e49959-f999-42a7-80f3-028d67449f56",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"rds-viz\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-rds-viz-us-east-1",
            "id": "alias/hydrovis-ti-rds-viz-us-east-1",
            "name": "alias/hydrovis-ti-rds-viz-us-east-1",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/3985a2f5-9d17-4e48-83c3-744b43dcb347",
            "target_key_id": "3985a2f5-9d17-4e48-83c3-744b43dcb347"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.kms.module.key[\"rds-viz\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/3985a2f5-9d17-4e48-83c3-744b43dcb347",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for rds-viz",
            "enable_key_rotation": true,
            "id": "3985a2f5-9d17-4e48-83c3-744b43dcb347",
            "is_enabled": true,
            "key_id": "3985a2f5-9d17-4e48-83c3-744b43dcb347",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":\"kms:CreateGrant\",\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling_hvegis\"},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "arcgis_python_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:arcgis_python_api_ti:1",
            "compatible_runtimes": [
              "python3.6",
              "python3.7",
              "python3.8"
            ],
            "created_date": "2021-12-20T20:37:27.351+0000",
            "description": "ArcGIS Python API module",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:arcgis_python_api_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:arcgis_python_api_ti",
            "layer_name": "arcgis_python_api_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/arcgis_python_api.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "B4ITKWGLkfk8w5BAc3XkLC9jfIsdzeReaa96Eh0awgI=",
            "source_code_size": 9805697,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "es_logging",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
            "compatible_runtimes": [
              "python3.6",
              "python3.7",
              "python3.8"
            ],
            "created_date": "2021-12-20T20:37:33.786+0000",
            "description": "Custom logger that formats logs for AWS elasticsearch ingest",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti",
            "layer_name": "es_logging_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/es_logging.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "MwjRKGH9pNI7X0u6COI8fSW7axNwZxj8khb98lOmoA0=",
            "source_code_size": 499,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "mrf_rasterio",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:mrf_rasterio_ti:1",
            "compatible_runtimes": [
              "python3.6"
            ],
            "created_date": "2021-12-20T20:37:35.695+0000",
            "description": "Rasterio python package with MRF enabled",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:mrf_rasterio_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:mrf_rasterio_ti",
            "layer_name": "mrf_rasterio_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/mrf_rasterio.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "FJSy4fgq1fgRnW5nebzsa7LlepX++HZRCFZOu17MTYk=",
            "source_code_size": 36470314,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "multiprocessing",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:multiprocessing_ti:1",
            "compatible_runtimes": [
              "python3.6",
              "python3.7"
            ],
            "created_date": "2021-12-20T20:37:30.193+0000",
            "description": "Multiprocessing python package",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:multiprocessing_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:multiprocessing_ti",
            "layer_name": "multiprocessing_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/multiprocessing.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "JT0NXhOuGteKYIgi+CCyvn6wDPLERMDEKY14zQKNUQM=",
            "source_code_size": 63190,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "pandas",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:pandas_ti:1",
            "compatible_runtimes": [
              "python3.6",
              "python3.7"
            ],
            "created_date": "2021-12-20T20:37:26.162+0000",
            "description": "pandas python package",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:pandas_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:pandas_ti",
            "layer_name": "pandas_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/pandas.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "Jcx5ZJv5Dp/O1AyAKSsJErhbz7+vFLhCNoddkyIXxFM=",
            "source_code_size": 10395124,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "pika",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:pika_ti:1",
            "compatible_runtimes": [
              "python3.6",
              "python3.7",
              "python3.8"
            ],
            "created_date": "2021-12-20T20:37:29.962+0000",
            "description": "Python pika module",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:pika_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:pika_ti",
            "layer_name": "pika_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "ingest/lambda/layers/pika.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "EWTd9H4z+NtFaX2ySEr18tiv9Ux+zD1hEjFOZME2Pl4=",
            "source_code_size": 149446,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "psycopg2_sqlalchemy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:psycopg2_sqlalchemy_ti:1",
            "compatible_runtimes": [
              "python3.6",
              "python3.7",
              "python3.8"
            ],
            "created_date": "2022-01-19T20:21:55.980+0000",
            "description": "psycopg2 and sql alchemy python packages",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:psycopg2_sqlalchemy_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:psycopg2_sqlalchemy_ti",
            "layer_name": "psycopg2_sqlalchemy_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/psycopg2_sqlalchemy.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "mTixeq0bAN1xuCQJ+PwoTlz3dDrKSasBCloRQ3Xag58=",
            "source_code_size": 22650290,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "rasterio",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:rasterio_ti:1",
            "compatible_runtimes": [
              "python3.6"
            ],
            "created_date": "2021-12-20T20:37:31.460+0000",
            "description": "rasterio python package",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:rasterio_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:rasterio_ti",
            "layer_name": "rasterio_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/rasterio.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "JMQAxwvbgAyARxwEmArDYex/J0SSEfDYIil2l0PaSWw=",
            "source_code_size": 35568007,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "viz_lambda_shared_funcs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7",
            "compatible_runtimes": [
              "python3.6",
              "python3.7",
              "python3.8"
            ],
            "created_date": "2022-01-19T20:45:17.832+0000",
            "description": "Helper functions for general viz lambda functionality",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti",
            "layer_name": "viz_lambda_shared_funcs_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/viz_lambda_shared_funcs.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "x1YS2YVDysgFLfVpURBEjPbUHe06H7NwZdjHJ8S8zYI=",
            "source_code_size": 5086,
            "version": "7"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.lambda_layers",
      "mode": "managed",
      "type": "aws_lambda_layer_version",
      "name": "xarray",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:layer:xarray_ti:1",
            "compatible_runtimes": [
              "python3.7"
            ],
            "created_date": "2021-12-20T20:37:37.243+0000",
            "description": "xarray python package",
            "filename": null,
            "id": "arn:aws:lambda:us-east-1:526904826677:layer:xarray_ti:1",
            "layer_arn": "arn:aws:lambda:us-east-1:526904826677:layer:xarray_ti",
            "layer_name": "xarray_ti",
            "license_info": "",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "lambda_layers/xarray.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "4HR/Me7HFLWDF0nqmOL+gdzx81QJ5dX/5FCBVtB9jW8=",
            "source_code_size": 41044431,
            "version": "1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_code",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "e370bafdc55e1f4f6187ac62cd2518789f146f93",
            "output_base64sha256": "c5lnSYXew0tWdsx8s0qXLvRIEKWn4sG0LjmaSzjnBOQ=",
            "output_file_mode": null,
            "output_md5": "1878c94628a27f7efacd52f33c9160bc",
            "output_path": "ELASTICSEARCH/lambda_code.zip",
            "output_sha": "e370bafdc55e1f4f6187ac62cd2518789f146f93",
            "output_size": 6573,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "ELASTICSEARCH/lambda_code",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "aws_ami",
      "name": "linux",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-025b76b777024295e",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-0a876d9af57e76134",
                  "throughput": "0",
                  "volume_size": "12",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-11-19T21:49:21.000Z",
            "description": "add docker for stig",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-amznlinux2-STIGD*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-025b76b777024295e",
            "image_id": "ami-025b76b777024295e",
            "image_location": "526904826677/hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": null,
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-0a876d9af57e76134",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/amzn-linux2-stig-test/1.0.4/24",
              "Name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
              "OS": "Linux",
              "TaskOrderId": "1305L420FNWWJ0136",
              "hydrovis-sys": "admin-security",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydroviz",
              "vpc": "dev"
            },
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "cloudinit_config",
      "name": "startup",
      "provider": "provider[\"registry.terraform.io/hashicorp/cloudinit\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": true,
            "boundary": "MIMEBOUNDARY",
            "gzip": true,
            "id": "2762183496",
            "part": [
              {
                "content": "#cloud-config\n{\"write_files\":[{\"content\":\"filter {\\n    if [hydrovis_application] == \\\"data_ingest\\\" {\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"logger: %{WORD:logger}, .*, level: %{WORD:logger_level} - %{GREEDYDATA:message}\\\"}\\n            overwrite =\\u003e [\\\"message\\\"]\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"%{WORD:logger}\\\\.py.*: %{WORD:logger_level}: %{GREEDYDATA:message}\\\"}\\n            overwrite =\\u003e [\\\"message\\\"]\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"%{WORD:logger}\\\\.sh.*: %{WORD:logger_level}: %{GREEDYDATA:message}\\\"}\\n            overwrite =\\u003e [\\\"message\\\"]\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Waiting for %{WORD:ingest_event} events from RabbitMQ\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Received an %{WORD:ingest_event} event message with id: %{NUMBER:ingest_event_id:int} and url: '%{GREEDYDATA:ingest_file}'\\\"}\\n            add_field =\\u003e { \\\"hml_ingest_process_status_code\\\" =\\u003e 1 }\\n        }\\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Processed file: '%{GREEDYDATA:ingest_file}' - forecasts extracted: %{NUMBER:hml_forecasts:int}\\\"}\\n            add_field =\\u003e { \\\"hml_ingest_process_status_code\\\" =\\u003e 2 }\\n        }\\n\\n        if [ingest_file] {\\n            grok {\\n                match =\\u003e {\\\"ingest_file\\\" =\\u003e \\\"_HML%{GREEDYDATA:wfo}\\\\.\\\"}\\n            }\\n        }\\n            \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Parsing %{WORD:ingest_event} from wfo: %{WORD:wfo}, gage: %{WORD:gage}\\\"}\\n            add_field =\\u003e { \\\"xml_ingest_process_status_code\\\" =\\u003e 1 }\\n        }\\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"\\u003cForecastTimeSeries\\\\( generation_time: %{TIMESTAMP_ISO8601:forecast_generation_time}, issued_time: %{TIMESTAMP_ISO8601:forecast_issued_time}wfo:%{WORD:wfo}, gage: %{WORD:gage}, category: %{WORD:forecast_category}, name: %{WORD:forecast_type} \\\\)\\u003e\\\"}\\n            add_field =\\u003e { \\\"xml_ingest_process_status_code\\\" =\\u003e 2 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Inserting %{WORD:forecast_category} forecasts for gage: %{WORD:gage}\\\"}\\n            add_field =\\u003e { \\\"xml_ingest_process_status_code\\\" =\\u003e 3 }\\n        }\\n                    \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Removing records older than %{TIMESTAMP_ISO8601:ingest_cleaner_threshold} from table %{WORD:ingest_cleaner_table}\\\"}\\n            add_field =\\u003e { \\\"ingest_cleaner_process_status_code\\\" =\\u003e 1 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Removed %{WORD:ingest_records_cleaned:int} records from table %{WORD:ingest_cleaner_table}\\\"}\\n            add_field =\\u003e { \\\"ingest_cleaner_process_status_code\\\" =\\u003e 2 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Getting list of hours from %{GREEDYDATA:hml_s3_bucket}\\\"}\\n            add_field =\\u003e { \\\"ingest_backfill_process_status_code\\\" =\\u003e 1 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Latest time in %{GREEDYDATA:hml_s3_bucket} is %{GREEDYDATA:hml_s3_bucket_latest_date} %{NUMBER:hml_s3_bucket_latest_hour:int} UTC\\\"}\\n            add_field =\\u003e {\\\"hml_s3_bucket_latest_datetime\\\" =\\u003e \\\"%{hml_s3_bucket_latest_date}T%{hml_s3_bucket_latest_hour}\\\"}\\n            add_field =\\u003e { \\\"ingest_backfill_process_status_code\\\" =\\u003e 2 }\\n        }\\n                                        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Found %{NUMBER:hml_records_found:int} for (?\\u003chml_data_year\\u003e[\\\\d.]{4})(?\\u003chml_data_month\\u003e[\\\\d.]{2})(?\\u003chml_data_day\\u003e[\\\\d.]{2})(?\\u003chml_data_hour\\u003e[\\\\d.]{2}) in %{GREEDYDATA:hmml_s3_bucket}\\\"}\\n            add_field =\\u003e {\\\"hml_data_datetime\\\" =\\u003e \\\"%{hml_data_year}-%{hml_data_month}-%{hml_data_day}T%{hml_data_hour}\\\"}\\n            add_field =\\u003e { \\\"ingest_backfill_process_status_code\\\" =\\u003e 3 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Found %{NUMBER:hml_backfill_records_found:int} backfill entries\\\"}\\n            add_field =\\u003e { \\\"ingest_backfill_process_status_code\\\" =\\u003e 4 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Done processing\\\"}\\n            add_field =\\u003e { \\\"ingest_backfill_process_status_code\\\" =\\u003e 5 }\\n        }\\n\\n        mutate {\\n            convert =\\u003e {\\n                \\\"hml_ingest_process_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"xml_ingest_process_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"ingest_cleaner_process_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"ingest_backfill_process_status_code\\\" =\\u003e \\\"integer\\\"\\n            }\\n        }\\n    }\\n}\\n\\n#############\\n## Spin Up ##\\n#############\\n\\nfilter {\\n    if [hydrovis_application] == \\\"data_ingest\\\" and [programname] == \\\"cloud-init\\\" {\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Setting up Rsyslog Configuration\\\"}\\n            add_field =\\u003e { \\\"ingest_spinup_status_code\\\" =\\u003e 1 }\\n        }\\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing System Dependencies\\\"}\\n            add_field =\\u003e { \\\"ingest_spinup_status_code\\\" =\\u003e 2 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing HML Ingester\\\"}\\n            add_field =\\u003e { \\\"ingest_spinup_status_code\\\" =\\u003e 3 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Updating HML Ingester Configs\\\"}\\n            add_field =\\u003e { \\\"ingest_spinup_status_code\\\" =\\u003e 4 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Building HML Ingester Dockers\\\"}\\n            add_field =\\u003e { \\\"ingest_spinup_status_code\\\" =\\u003e 5 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Spinning up HML Ingester Dockers\\\"}\\n            add_field =\\u003e { \\\"ingest_spinup_status_code\\\" =\\u003e 6 }\\n        }  \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Finished Setup\\\"}\\n            add_field =\\u003e { \\\"ingest_spinup_status_code\\\" =\\u003e 7 }\\n        }\\n    }\\n\\n    mutate {\\n        convert =\\u003e {\\n            \\\"ingest_spinup_status_code\\\" =\\u003e \\\"integer\\\"\\n        }\\n    }\\n}\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/parsers/data_ingest_logstash.conf\",\"permissions\":\"0777\"},{\"content\":\"filter {\\n    if [hydrovis_application] == \\\"data_services\\\" { \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e '\\\"GET /api/%{WORD:wrds_api}/(?\\u003cwrds_api_version\\u003e[^/]*)/%{WORD:wrds_api_scheme}/%{GREEDYDATA}\\\\\\\" %{NUMBER:wrds_api_response}'}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"\\\\[%{WORD:logger_level}\\\\] GET /api/\\\"}\\n        }\\n\\n        if [wrds_api_response] =~ /^2/ {\\n            mutate {\\n                add_field =\\u003e { \\\"logger_level\\\" =\\u003e \\\"INFO\\\" }\\n                add_field =\\u003e { \\\"wrds_api_success\\\" =\\u003e \\\"true\\\" }\\n            }\\n        } else if [wrds_api_response] =~ /^3/ {\\n            mutate {\\n                add_field =\\u003e { \\\"logger_level\\\" =\\u003e \\\"WARNING\\\" }\\n                add_field =\\u003e { \\\"wrds_api_success\\\" =\\u003e \\\"redirect\\\" }\\n            }\\n        } else if [wrds_api_response] =~ /^4/ or [wrds_api_response] =~ /^5/ {\\n            mutate {\\n                add_field =\\u003e { \\\"logger_level\\\" =\\u003e \\\"ERROR\\\" }\\n                add_field =\\u003e { \\\"wrds_api_success\\\" =\\u003e \\\"false\\\" }\\n            }\\n        }\\n\\n        mutate {\\n            convert =\\u003e {\\n                \\\"wrds_api_response\\\" =\\u003e \\\"integer\\\"\\n            }\\n        }\\n    }\\n}\\n\\n#############\\n## Spin Up ##\\n#############\\n\\nfilter {\\n    if [hydrovis_application] == \\\"data_services\\\" and [programname] == \\\"cloud-init\\\" {\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Setting up Rsyslog Configuration\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 1 }\\n        }\\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Disabling Vlab Hostkey Requirement\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 2 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing System Dependencies\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 3 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Setting up WRDS File Structure\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 4 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Cloning WRDS Infrastructure\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 5 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Building NGINX Docker\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 6 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Cloning Location API\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 7 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Building Location API Docker\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 8 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Cloning Forecast API V2.0\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 9 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Building Forecast API V2.0 Docker\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 10 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Cloning Forecast API V1.1\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 11 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Building Forecast API V1.1 Docker\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 12 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Restarting NGINX Docker\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 13 }\\n        }  \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Finished Setup\\\"}\\n            add_field =\\u003e { \\\"data_services_spinup_status_code\\\" =\\u003e 14 }\\n        }\\n    }\\n\\n    mutate {\\n        convert =\\u003e {\\n            \\\"data_services_spinup_status_code\\\" =\\u003e \\\"integer\\\"\\n        }\\n    }\\n}\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/parsers/data_services_logstash.conf\",\"permissions\":\"0777\"},{\"content\":\"input {\\n    udp {\\n        port =\\u003e 5001\\n        codec =\\u003e \\\"json\\\"\\n        type =\\u003e \\\"linux_ec2\\\"\\n    }\\n}\\n\\nfilter {\\n    if [hydrovis_application] == \\\"data_ingest\\\" {\\n        mutate {\\n            add_field =\\u003e { \\\"index_name\\\" =\\u003e \\\"hml\\\" }\\n        }\\n    } else if [hydrovis_application] == \\\"data_services\\\" {\\n        mutate {\\n            add_field =\\u003e { \\\"index_name\\\" =\\u003e \\\"data_services\\\" }\\n        }\\n    } else if [hydrovis_application] == \\\"replace_route\\\" {\\n        mutate {\\n            add_field =\\u003e { \\\"index_name\\\" =\\u003e \\\"rnr\\\" }\\n        }\\n    } else {\\n        mutate {\\n            add_field =\\u003e { \\\"index_name\\\" =\\u003e \\\"linux_ec2\\\" }\\n        }\\n    }\\n\\n    if [programname] in [\\\"dhclient\\\", \\\"run-parts(\\\", \\\"systemd\\\", \\\"systemd-logind\\\", \\\"anacron\\\", \\\"CROND\\\", \\\"chronyd\\\", \\\"ec2net\\\", \\\"ec2\\\", \\\"postfix\\\", \\\"sudo\\\", \\\"sshd\\\", \\\"useradd\\\", \\\"crontab\\\", \\\"kernel\\\"] {\\n        drop {}\\n    }\\n\\n    if [logger_level] == \\\"DEBUG\\\" {\\n        drop {}\\n    }\\n}\\n\\noutput {\\n    stdout {}\\n    if [type] == \\\"linux_ec2\\\" {\\n        amazon_es {\\n            hosts =\\u003e [\\\"vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com\\\"]\\n            region =\\u003e \\\"us-east-1\\\"\\n            aws_access_key_id =\\u003e ''\\n            aws_secret_access_key =\\u003e ''\\n            index =\\u003e \\\"%{index_name}-%{+YYYY.MM}\\\"\\n        }\\n    }\\n}\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/parsers/linux_ec2_logstash.conf\",\"permissions\":\"0777\"},{\"content\":\"filter {\\n    if [hydrovis_application] == \\\"replace_route\\\" {\\n        grok {\\n            match =\\u003e {\\\"message\\\" =\\u003e \\\"%{WORD:logger_level}    %{WORD}.py %{SPACE} %{NUMBER}  : %{GREEDYDATA:message}\\\"}\\n            overwrite =\\u003e [\\\"message\\\"]\\n        }\\n\\n        grok {\\n            match =\\u003e {\\\"message\\\" =\\u003e \\\"%{WORD:logger_level} %{WORD}.py %{SPACE} %{NUMBER}  : %{GREEDYDATA:message}\\\"}\\n            overwrite =\\u003e [\\\"message\\\"]\\n        }\\n\\n        mutate {\\n            gsub =\\u003e [ \\\"message\\\", \\\"#01\\\\d\\\", \\\" \\\" ]\\n        }\\n\\n        if [logger_level] in [\\\"FATAL\\\", \\\"ERROR\\\"] {\\n            mutate {\\n                add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 999 }\\n            }\\n        }\\n\\n\\n        ######################\\n        ## Main RnR Process ##\\n        ######################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"BEGINNING run_wrf_hydro\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 1 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Archiving old run instance directories at: '%{GREEDYDATA:run_instance_dir}' to: '%{GREEDYDATA:archive_dir}'\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 2 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Downloaded files for timestamp: %{TIMESTAMP_ISO8601:latest_data_time}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 3 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_get_action_forecasts\\\\(\\\\):   response = \\u003cResponse \\\\[%{NUMBER:forecast_api_response:int}\\\\]\\u003e\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 4 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_get_nonaction_forecasts\\\\(\\\\):  conus_route_link_fpath = %{GREEDYDATA:conus_routelink_path}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 5 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_create_forecast_point_dict\\\\(\\\\):  Original list of lids length = %{NUMBER:total_forecast_points:int}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 6 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Succesfully generated route link file: %{GREEDYDATA:route_link_file}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 7 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"SUCCESSFULLY generated nudging params file: %{GREEDYDATA:nudging_file}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 8 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"LAKEPARM file successfully generated the subset file.  %{GREEDYDATA:lakeparm_file}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 9 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"GWBUCKPARM file successfully generated. %{GREEDYDATA:gwbuckparm_file}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 10 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"HYDRO_RST file successfully generated.  %{GREEDYDATA:hydro_rst_file}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 11 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Successfully generated FORCING file: %{GREEDYDATA:forcing_file}\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 12 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Finished creating %{NUMBER:forcing_file_count:int} FORCING files\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 13 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Beginning WRF-Hydro execution with command: %{GREEDYDATA:wfr_hydro_cmd} in directory: .*/(?\\u003clatest_data_year\\u003e[\\\\d.]{4})(?\\u003clatest_data_month\\u003e[\\\\d.]{2})(?\\u003clatest_data_day\\u003e[\\\\d.]{2})(?\\u003clatest_data_hour\\u003e[\\\\d.]{2})\\\"}\\n            add_field =\\u003e {\\\"latest_data_time\\\" =\\u003e \\\"%{latest_data_year}-%{latest_data_month}-%{latest_data_day} %{latest_data_hour}:00:00\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 14 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Beginning nwm output processing\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 15 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Finished processing nwm output\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 16 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"FINISHED run_wrf_hydro\\\"}\\n            add_field =\\u003e { \\\"rnr_process_status_code\\\" =\\u003e 17 }\\n        }\\n\\n        ####################################\\n        ## NWS LID Data Retrieval Process ##\\n        ####################################\\n\\n        grok {\\n            match =\\u003e {\\\"message\\\" =\\u003e \\\"_get_forecast_map_from_json_forecast\\\\(\\\\):  lid = %{WORD:nws_lid}\\\"}\\n            add_field =\\u003e { \\\"nws_lid_process_status_code\\\" =\\u003e 1 }\\n        }\\n\\n        grok {\\n            match =\\u003e {\\\"message\\\" =\\u003e \\\"No rating curve found for %{WORD:nws_lid}. Attempting to get official flow forecast...\\\"}\\n        }\\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_getStreamFlowInTimeWindowByLidURL\\\\(\\\\)  url = %{GREEDYDATA:streamflow_forecast_api_call}\\\"}\\n            add_field =\\u003e { \\\"nws_lid_process_status_code\\\" =\\u003e 2 }\\n        }\\n\\n        if [streamflow_forecast_api_call] {\\n            grok {\\n                match =\\u003e { \\\"streamflow_forecast_api_call\\\" =\\u003e \\\"/nws_lid/%{WORD:nws_lid}/\\\"}\\n            }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"The latest flow forecast at %{WORD:nws_lid} has no values above 0. Skipping...\\\"}\\n            add_field =\\u003e { \\\"nws_lid_process_status_code\\\" =\\u003e 998 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"There is no flow forecast available at %{WORD:nws_lid} . Skipping...\\\"}\\n            add_field =\\u003e { \\\"nws_lid_process_status_code\\\" =\\u003e 998 }\\n        }\\n\\n        #######################\\n        ## General API Calls ##\\n        #######################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_getAllStageActionDataInWindowURL\\\\(\\\\) endTime =  %{TIMESTAMP_ISO8601:latest_data_time} windowInHours = %{NUMBER:forecast_api_window:int}  original url = %{GREEDYDATA:original_forecast_api_call}  newUrl = %{GREEDYDATA:forecast_api_call}\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Returned lid count = %{NUMBER:rating_curves_found:int} rating curves\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\" _get_rating_curves_map_inner\\\\(\\\\):  request = %{GREEDYDATA:rating_curve_api_call}  response = \\u003cResponse \\\\[%{NUMBER:rating_curve_api_response:int}\\\\]\\u003e\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_create_forecast_point_dict_inner\\\\(\\\\):   request = %{GREEDYDATA:location_metadata_api_call}  response = \\u003cResponse \\\\[%{NUMBER:location_metadata_api_response:int}\\\\]\\u003e\\\"}\\n        }\\n\\n        ##########################\\n        ## Non-action Forecasts ##\\n        ##########################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_get_nonaction_forecasts\\\\(\\\\):  adding downstream_lid = %{WORD:nonaction_nws_lid}\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_get_nonaction_forecasts\\\\(\\\\):   downstream_lid = %{WORD:nonaction_nws_lid} is already in the action_forecast_lids list, so it will not be added\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_get_nonaction_forecast_chunks\\\\(\\\\):  This is a current hour run. URL = %{GREEDYDATA:nonaction_forecast_api_call}\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_get_nonaction_forecast_chunks\\\\(\\\\):  response = \\u003cResponse \\\\[%{NUMBER:forecast_api_response:int}\\\\]\\u003e\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_get_nonaction_forecast_chunks\\\\(\\\\):  %{NUMBER:nonaction_forecasts_found:int} forecasts returned from  %{NUMBER:nonaction_forecasts_searched:int} nws location ids\\\"}\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"\\\\*\\\\*\\\\*\\\\* _get_nonaction_forecasts\\\\(\\\\):  After comparing with action forecast list, ended up with new %{NUMBER:nonaction_nws_lids:int} NWS lids\\\"}\\n        }\\n\\n        #########################\\n        ## Forecast Point Dict ##\\n        #########################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_create_forecast_point_dict_inner\\\\(\\\\):  lid = %{WORD:nws_lid}, is_rfc_defined_fcst_point = %{WORD:defined_fcst_point}\\\"}\\n            add_field =\\u003e { \\\"forecast_point_status_code\\\" =\\u003e 1 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"NWS LID \\\\\\\"%{WORD:nws_lid}\\\\\\\" is not found in %{GREEDYDATA:gages_map_csv}\\\"}\\n            add_field =\\u003e { \\\"lid_in_gages_map\\\" =\\u003e \\\"False\\\" }\\n        }\\n\\n        ###########\\n        ## Other ##\\n        ###########\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"_create_forecast_point_dict\\\\(\\\\):  Total processed lids = %{NUMBER:total_lids_processed:int}\\\"}\\n        }\\n\\n        #####################\\n        ## Field Mutations ##\\n        #####################\\n\\n        mutate {\\n            convert =\\u003e {\\n                \\\"rnr_process_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"nws_lid_process_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"forecast_point_status_code\\\" =\\u003e \\\"integer\\\"\\n            }\\n        }\\n\\n        date {\\n            match =\\u003e [ \\\"latest_data_time\\\", \\\"YYYY-MM-dd HH:mm:ss\\\" ]\\n            target =\\u003e \\\"latest_data_time\\\"\\n        }\\n\\n        if ![nws_lid] {\\n            mutate {\\n                remove_field =\\u003e [\\\"forecast_category\\\"]\\n            }\\n        }\\n    }\\n}\\n\\n#############\\n## Spin Up ##\\n#############\\n\\nfilter {\\n    if [hydrovis_application] == \\\"replace_route\\\" and [programname] == \\\"cloud-init\\\" {\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Setting up Rsyslog Configuration\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 1 }\\n        }\\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Setting up RNR Mount\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 2 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing System Dependencies\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 3 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing Python Dependencies\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 4 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Updating Permissions\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 5 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing WRF-Hydro Files\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 6 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing Replace and Route\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 7 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Installing RNR Dependencies\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 8 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Copying Static Resources\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 9 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Updating Libnetcdf Link\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 10 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Setting up RNR File Structure\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 11 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Copying Rendered Template File to Replace and Route\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 12 }\\n        } \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Setting up RNR Crontab\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 13 }\\n        }  \\n        \\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Finished Setup\\\"}\\n            add_field =\\u003e { \\\"rnr_spinup_status_code\\\" =\\u003e 14 }\\n        } \\n    }\\n\\n    mutate {\\n        convert =\\u003e {\\n            \\\"rnr_spinup_status_code\\\" =\\u003e \\\"integer\\\"\\n        }\\n    }\\n}\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/parsers/rnr_logstash.conf\",\"permissions\":\"0777\"},{\"content\":\"input {\\n    tcp {\\n        port =\\u003e 5000\\n        type =\\u003e \\\"viz\\\"\\n    }\\n}\\n\\nfilter {\\n    ###################\\n    # Message parsers #\\n    ###################\\n    if [type] == \\\"viz\\\" {\\n        json {\\n            source =\\u003e \\\"message\\\"\\n            target =\\u003e \\\"logger_json\\\"\\n            remove_field =\\u003e \\\"message\\\"\\n        }\\n        mutate {\\n            rename =\\u003e { \\\"[logger_json][message]\\\" =\\u003e \\\"message\\\" }\\n        }\\n    }\\n}\\n\\nfilter {\\n\\n    ####################################\\n    # Process/Watcher/Pipeline Parsers #\\n    ####################################\\n\\n    if [type] == \\\"viz\\\" {\\n        grok {\\n            match =\\u003e {\\n                \\\"[logger_json][extra][logger_name]\\\" =\\u003e [\\n                    \\\"processing_pipeline\\\\.utils\\\\.process\\\\.%{GREEDYDATA:process}\\\",\\n                    \\\"processing_pipeline\\\\.watcher\\\\.%{GREEDYDATA:watcher}\\\",\\n                    \\\"processing_pipeline\\\\.manager\\\\.%{GREEDYDATA:pipeline}\\\",\\n                    \\\"processing_pipeline\\\\.launcher\\\\.%{GREEDYDATA:process}\\\",\\n                    \\\"process\\\\.%{GREEDYDATA:process}\\\",\\n                    \\\"watcher\\\\.%{GREEDYDATA:watcher}\\\",\\n                    \\\"manager\\\\.%{GREEDYDATA:pipeline}\\\",\\n                    \\\"launcher\\\\.%{GREEDYDATA:process}\\\"\\n                ]\\n            }\\n        }\\n\\n        grok {\\n            match =\\u003e {\\n                \\\"[logger_json][extra][logger_name]\\\" =\\u003e [\\n                    \\\"processing_pipeline\\\\.watcher\\\\.%{GREEDYDATA:process}\\\",\\n                    \\\"watcher\\\\.%{GREEDYDATA:process}\\\"\\n                ]\\n            }\\n        }\\n\\n        if [host] =~ /ip-10-27-4-...ec2.internal/ {\\n            mutate { add_field =\\u003e { \\\"viz_environment\\\" =\\u003e \\\"Development\\\" } }\\n        }\\n\\n        if [host] =~ /ip-10-26-150-...ec2.internal/ {\\n            mutate { add_field =\\u003e { \\\"viz_environment\\\" =\\u003e \\\"Staging\\\" } }\\n        }\\n\\n        ######################\\n        # Pipeline heartbeat #\\n        ######################\\n\\n        if [process] {\\n            grok {\\n                match =\\u003e { \\\"message\\\" =\\u003e \\\"Heartbeat\\\" }\\n                add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_heartbeat\\\" }\\n            }\\n        }\\n\\n        ##########################\\n        # Process/Watcher parser #\\n        ##########################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Process launched for %{TIMESTAMP_ISO8601:latest_data_time} by the %{GREEDYDATA:watcher} Watcher: %{GREEDYDATA:command}\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 0 }\\n            add_field =\\u003e { \\\"watcher_status_code\\\" =\\u003e 7 }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 4 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e [\\\"process_status\\\", \\\"watcher_status\\\"] }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Process launched for %{TIMESTAMP_ISO8601:latest_data_time} by the %{GREEDYDATA:watcher} Watcher has exited\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 8 }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 10 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n        }\\n\\n        #######################\\n        # Process log parsers #\\n        #######################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Execute function called for %{TIMESTAMP_ISO8601:latest_data_time}[.]\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 1 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n            add_tag =\\u003e [ \\\"processStarted\\\" ]\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Validating workspace for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 2 }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 5 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Executing processing for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 3 }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 6 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Updating data for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 4 }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 7 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Updating portal item for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\"}\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 5 }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 8 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Updating service properties for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 6 }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 9 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Successfully executed processing for %{TIMESTAMP_ISO8601:latest_data_time}[.]\\\" }\\n            add_field =\\u003e { \\\"process_status_code\\\" =\\u003e 7 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"latest_process_time\\\" }\\n            add_tag =\\u003e [ \\\"processFinished\\\" ]\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Processing for %{TIMESTAMP_ISO8601:latest_data_time} failed\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"EGIS Log[:] type=%{GREEDYDATA:egis_type}[,] time=%{GREEDYDATA:egis_time}[,] message=%{GREEDYDATA:egis_message}[,] machine=%{GREEDYDATA:egis_machine}\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"egis_log\\\" }\\n        }\\n\\n        elapsed {\\n            start_tag =\\u003e \\\"processStarted\\\"\\n            end_tag =\\u003e \\\"processFinished\\\"\\n            unique_id_field =\\u003e \\\"process\\\"\\n            timeout =\\u003e 6000\\n        }\\n\\n        #######################\\n        # Watcher log parsers #\\n        #######################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"A Watch for data corresponding to date %{TIMESTAMP_ISO8601:latest_data_time} will now begin.\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 0 }\\n        }\\n\\n         grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Sleeping for %{NUMBER} seconds until data is expected\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 0 }\\n        }\\n\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Attempting to locate/fetch a batch of %{NUMBER} resources for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 1 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"%{NUMBER:resources_fetched} of %{NUMBER:total_resources} resources for %{TIMESTAMP_ISO8601:latest_data_time} now available.\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"download_progress\\\" }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 2 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"All resources for %{TIMESTAMP_ISO8601:latest_data_time} now available.\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"process_status\\\" }\\n            add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 3 }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Polling files for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"watcher_status_code\\\" =\\u003e 1 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"watcher_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"One or more files available for %{TIMESTAMP_ISO8601:latest_data_time}[.]\\\" }\\n            add_field =\\u003e { \\\"watcher_status_code\\\" =\\u003e 2 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"watcher_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Pulling one or more files for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"watcher_status_code\\\" =\\u003e 3 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"watcher_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"All files available for %{TIMESTAMP_ISO8601:latest_data_time}[.]\\\" }\\n            add_field =\\u003e { \\\"watcher_status_code\\\" =\\u003e 4 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"watcher_status\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"latest_available_time\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Pulling all files for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\\\" }\\n            add_field =\\u003e { \\\"watcher_status_code\\\" =\\u003e 5 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"watcher_status\\\" }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Successfully pulled all files for %{TIMESTAMP_ISO8601:latest_data_time}[.]\\\" }\\n            add_field =\\u003e { \\\"watcher_status_code\\\" =\\u003e 6 }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"watcher_status\\\" }\\n        }\\n\\n        grok {\\n          match =\\u003e { \\\"message\\\" =\\u003e \\\"The Watch for %{TIMESTAMP_ISO8601:latest_data_time} expired\\\" }\\n        }\\n\\n        grok {\\n          match =\\u003e { \\\"message\\\" =\\u003e \\\"Process launched for %{TIMESTAMP_ISO8601:latest_data_time} exited with return code 1.\\\" }\\n        }\\n\\n        ##########################################\\n        # ArcGIS Server service recovery parsers #\\n        ##########################################\\n\\n        if [logger_json][extra][logger_name] == 'restart-arcgis-server-monitor' {\\n            mutate { add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"recover_monitor\\\" } }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"Triggering \\\" }\\n              add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"recover_monitor\\\" }\\n        }\\n\\n        #########################\\n        # Configuration parsers #\\n        #########################\\n\\n        grok {\\n            break_on_match =\\u003e false\\n            match =\\u003e {\\n                \\\"process\\\" =\\u003e \\\"(?\\u003cconfiguration\\u003e\\\\b\\\\w{3})_\\\"\\n                \\\"watcher\\\" =\\u003e \\\"(?\\u003cconfiguration\\u003e\\\\b\\\\w{3})_\\\"\\n                \\\"pipeline\\\" =\\u003e \\\"(?\\u003cconfiguration\\u003e\\\\b\\\\w{3})_\\\"\\n            }\\n        }\\n\\n        if ![configuration] {\\n            mutate { add_field =\\u003e { \\\"configuration\\\" =\\u003e \\\"xxx\\\" } }\\n        }\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"%{NUMBER:total_processes} processes are expected to be running.\\\" }\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"total_processes\\\" }\\n        }\\n\\n        if [logger_json][level] == 'ERROR' {\\n            mutate {\\n                add_field =\\u003e { \\\"service_status_code\\\" =\\u003e 999 }\\n                add_tag =\\u003e [\\\"shouldmail\\\"]\\n            }\\n        }\\n\\n        #################\\n        # Email parsers #\\n        #################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"email_group:%{GREEDYDATA:email_group}--email_title:%{GREEDYDATA:email_title}--email_body:%{GREEDYDATA:email_body}\\\" }\\n            add_tag =\\u003e [\\\"shouldmail\\\"]\\n        }\\n\\n        ##########################\\n        # Resource Usage parsers #\\n        ##########################\\n\\n        grok {\\n            match =\\u003e { \\\"message\\\" =\\u003e \\\"%{GREEDYDATA:resource_process} Viz Service %{GREEDYDATA:resource_type} Usage - %{NUMBER:resource_usage} %{GREEDYDATA:resource_unit}\\\"}\\n            add_field =\\u003e { \\\"metric_type\\\" =\\u003e \\\"viz_resource_usage\\\" }\\n        }\\n    }\\n}\\n\\nfilter {\\n    ###############################\\n    # Drop all unnecessary fields #\\n    ###############################\\n    if [type] == \\\"viz\\\" {\\n        mutate {\\n            rename =\\u003e { \\\"[logger_json][@timestamp]\\\" =\\u003e \\\"temp_timestamp\\\" }\\n            rename =\\u003e { \\\"[logger_json][level]\\\" =\\u003e \\\"temp_level\\\" }\\n            remove_field =\\u003e [\\\"logger_json\\\"]\\n        }\\n\\n        mutate {\\n            rename =\\u003e { \\\"temp_timestamp\\\" =\\u003e \\\"[logger_json][@timestamp]\\\" }\\n            rename =\\u003e { \\\"temp_level\\\" =\\u003e \\\"[logger_json][level]\\\" }\\n        }\\n\\n        #########################\\n        # Data type conversions #\\n        #########################\\n\\n        mutate {\\n            convert =\\u003e {\\n                \\\"process_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"watcher_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"total_resources\\\" =\\u003e \\\"integer\\\"\\n                \\\"resources_fetched\\\" =\\u003e \\\"integer\\\"\\n                \\\"service_status_code\\\" =\\u003e \\\"integer\\\"\\n                \\\"total_processes\\\" =\\u003e \\\"integer\\\"\\n            }\\n        }\\n    }\\n}\\n\\nfilter {\\n    #############################\\n    # Drop all unnecessary logs #\\n    #############################\\n    if [type] == \\\"viz\\\" {\\n        if ![metric_type] and [logger_json][level] == 'INFO' {\\n            drop { }\\n        }\\n    }\\n}\\n\\noutput {\\n    stdout {}\\n    if [type] == \\\"viz\\\" {\\n        amazon_es {\\n            hosts =\\u003e [\\\"vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com\\\"]\\n            region =\\u003e \\\"us-east-1\\\"\\n            aws_access_key_id =\\u003e ''\\n            aws_secret_access_key =\\u003e ''\\n            index =\\u003e \\\"nwmviz-%{+YYYY.MM}\\\"\\n        }\\n    }\\n}\\n\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/parsers/viz_logstash.conf\",\"permissions\":\"0777\"}]}\n",
                "content_type": "text/cloud-config",
                "filename": "cloud-config.yaml",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\n\nrpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n\ncd /etc/yum.repos.d/\n\ncat \u003e logstash.repo \u003c\u003c EOF\n[logstash-7.x]\nname=Elastic repository for 7.x packages\nbaseurl=https://artifacts.elastic.co/packages/7.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=1\nautorefresh=1\ntype=rpm-md\nEOF\n\nyum -y install logstash-7.16.1\n\nusermod -a -G logstash ec2-user\n\nexport LS_JAVA_OPTS=\"-Xms1g -Xmx1g -XX:ParallelGCThreads=1\"\n\ncd /etc/logstash/conf.d\n\ncp /parsers/* .\n\n/usr/share/logstash/bin/logstash-plugin install logstash-filter-elapsed\n/usr/share/logstash/bin/logstash-plugin install --version 7.0.1 logstash-output-amazon_es\n\nmkdir ~/kibana_objects\ncd ~/kibana_objects\naws s3 cp --recursive s3://hydrovis-ti-deployment-us-east-1/monitoring/ .\nfor FILE in *; do curl -X POST \"https://vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com/_plugin/kibana/api/saved_objects/_import?overwrite=true\" -H \"kbn-xsrf: true\" --form file=@$FILE; done\n\nservice logstash start\n",
                "content_type": "text/x-shellscript",
                "filename": "startup.sh",
                "merge_type": ""
              }
            ],
            "rendered": "H4sIAAAAAAAA/+x9e3PbtrL4/5rJd8BRfp20/ZmSlbRJqx7fc5z4Ed/j15Wcph7ThwORKwk1CbAAaFnN6Hz2OwAfIilKoizSTmeuJzORRHC5Lyx2F7vgB0YlUGlcTX3oIi9wJfExl22PPIDzCxqwgDqYT/eaZydnh+8vPp0f7Peumw31zfgVuCCMdlGntfui8aJhGOlBLxox7AMifCaI1GOxlNgee0DlL2hIXKDYg72m7bLAMWxGh2TUmmLPbc5vv+KYiiFw45DazCF01EXvBkSmBmjcJTzIdhrOi8YZ8WABy5fpMY0vzQknEiyFimh2b7407RBqs9scElcCR19MihBCZIhuxlOHs3siLOz7LrGxIukW7e0hs+lgiS1CRyCk2YzvUX8jzu7S39Wfh6U9RntmsLv7BtAXZDY9EAKPwGwmv5pNl41GwLvomy+fL3oH3fDrbAe1vt9BLtyDm7tk6R9nyEDffDnuHR4eXB/sX+13I9AzsznLYsHugWvqk2fepBC5nQ+embQKerJ0mGbLn7a+L6ah+1chQYz/aiR8xkQSOkJDxmO8Q7W14B6onCH9n0BDzjzUw4MBkWf/k8G6IkR6YAO5BwdhugIRFN2KJkSOEXEUW88/nb0/7GVGW8TpEnUTpg4KuNtFrzLsj8aqaT57tSAD7DjWkIDrZJAee240oy2fMxuEsITEMhCWzZw0LR2U5U78sQouXYZPBkdby5VkIUMJFWwspEDwIDm2JaQZpghKRmh2Vc2J12iZnijzmcL2Ns+NIg4VcMlspoBkGGV9PDvN8GYyZGqGLpBYLKvK5IW5UNOrUKP1nJoMWWIxFI47aIRHkPw0KrQSxXJ5+Bo0VH+wjyK9uiIe9IETEKb5LRoBBa6XSUsSTxN5dXJ22L/aP7u0TvoXP73d7XRjlbRyo2c7iAgRgFPm3tTImeLwGgbvIBtLGDE+TX5PQMVXZjtIeSeLA+TUhxkyze9CHlQtrOWT6PFCOqECuEwp5iK1KeOh1ob6lfLNiqlYpYL2wGP3inQONuOOQMx1gCM51gvPok5FyNsuYArckmMOYsxcJ5q/Eg9cyM3vZKy6VpZRuXs3m8GVMQacHC0RlyK8omU1Zt0zcqCOaXEMUk8KlwiJ2BCNWcAjIjNriVoAxRtrENh3UHrVjKgbYPtuSFz3GQR8iiUIiZRRRISuIgkRseKy5WpAloMlzLL+xMIYxcJQZz5dfSjDqdC9KHyWQjznfy/H62rJRYVQPSLLayQq+VeFaI9UZJ4VRTxxh+pSKAJlyL/9R7hCqyE6Sp0C5iGcG9N0Wrdffph9tzDIY1SOM6NeF4xy8HTtGMX//KACbdx4hoV6E6GxVFcSimdG6gdNXeYXB09jDUqwrkdr8steTdqQYFOgFvE1BFRqV60OOn+ogc4DRgFFjyV0VAvePy7F2wsklpDH3Gb0HrhMKeaCIdggglLYShgBN5tFcEo7V2vgbLTyloNVkr1LgS3a0plJNf9fpv/UV9T3CUWffBR+zVw16RZ5O0wddONzNuLYU75/NChMGRJKKsvt9SPHI/BRT0yFy0bog85IBmEAtJlmC5/QwH+G2O+EColdV1HSnwoJHjoAH6gD1N7YrKwkIrvUotqo+Hh2ik40PkpBK0P/TZ3of/IdLPPIR+pUpQx+qJOI9wFxnQUiDph9B7xKIn6skwhllmg0rWum422WjooJOSKUiDE4qA8y8CtE+12xmQ8/LK6va9bWcs8sXHFSS0xzp8kmFHiz2wT7tREI4N34Q3On6WM5bnabbR9zAVy0UyuG5bKRkFiMWzajQzUWuEeEIIyKZre5++7du+ZsZ7s9JQH8ntjKmComby3bV2bz+PAKtbFP2nGOTHmH2Cezduy7x79Y9+HmWeS+/7t9+/13+bssYY/Bg1k77c/PTNNszv3RZCwH4TMqYPaqet/QNG+K9mFM8xYlFC/fx1CiWEDzFu39B7X//bq9gFGhJ7h8aqQxyi4950cXZrMoeCwGNOd6YCsnKwNM8gAWgWXsBLgCVtL6pj5aP+/3zk/Ojysjl4NDONhyW5J/aCPGl1/+sT6OHPZ6F73K+DHErlgj/4qimQVWfeX+fcqG/tU8/Az+z+foHxCBB9pD/tXFA/SRCXkHU9SDPwLCwQMqq6fnqXz+x0cuGxBTawSQ0rXPvYM+OiIuoL7kgS0DXnZ/agNiao0EPrhM+9CakhM65FjUR0mt4UAS05wfn5z/FgUB1dPw9imkccpCs4r2L0+qJ+Hdk4ghTUNt0vjpKaQR77ZrSn593dqtno6fn0QkC4TUJpfO7tMLptPq1EBI5xkk02l16pNMrQt9D4TEYelDvWa48+brS8lsgn5+vwZtmZrZ4Nl1ZGiSJ2+coyHUD2RMT+D4adJ8liL5x93dTpohDtgpkn4XysmfX5dTH1KXXUKDBwvs1/GYOBqqpuy4OLpblrhz4MFS0VBGJmPPzUaTsUTmIfUmyatKcctDfyyWHHwX22BxFkioHEtO+Srcqn1YSqFWzWTFkEz8Syi6MZvO2HaJDuN2FOIBNXzMpfg2/C50iORkvhguGxEa/YYptrnSd/XlQ+/i/CD8aI85o9NoENivKcjkc/jBZ0IOyUMEOnBY9EmMo7vUJMdO9EU9ROJB+OUOOAXXbGaKSR3OfPSliOp0GiYS/8Hh+0/HWbHn79cgWCBTNkFIh6lvszlsNbkjmGk5pOBiD//JqAUiL+QxE1Ikcrwxm/e+bXiMEsk4oSMj1l5jMnrj2nJ89/t48rsk3ls2sF8PR38QP2gFwgAspNFpgWiFT8IT0bKZlykhV38cRsoFnutNcm8+YYMnwsI6zWTdwdQicy189WpxpACbg0zdsHS01t8UAt98mWv0zPjmy/+/vr6+bp2dzapZDRJ51JytX2FKSqz6JfoN4v4OhKLau1nLn6JvvvQv9z8czsuyZgg9e+/BBtQ8KynFZnckgsEcTNofU1bn5W7HNCNzpP4tg71ockJLe7R/tX8a3h7lfxeK4TdNMHO6roTj559/XpcXnn99WfiXvo7OMKGoR3so6k9A2evF91cSnxwen5yfn5wfIx5Qa8KHlp6SJf3h9Yyqowxzn9tjoiuQmesovBGhQmJqAwp3MBgnIBCW+fYORWI81HIIn71CkuUHYQ09ul4ZH+qotj1gE+oy7ETNLGGduSSeitA8v7jAf17hicPi/soorKMOzxrpJVC3MCTl9Kb5rWl+19Vrb7hdgvZQuNHai3/Qm5fRbmlSmp/eYQnbdczb8FGVMaGOIj3NBMroUj7YjAYiXCctl9A7a6jWbLSXNfWpUXqQGlOd9JdX+W1BuM0BS0gotnxGqLQcYsuE9gtORoRiNyk5d4kjkAt0FHEgUgLJJHZzkDbq2VrPgrc1sKCv9yWHgetO4+YfcJAWIlJSjLrYslYupQikfPPAegLzxSaVEPjpw4fDfv/o0+npdYpCGjgjZeB9zLEniqiMRlRM4k91dA3s/+vwcr93pqlA0U5zXqRyrC4NBEg9rIWy1Lr4DnzMvYrJ/bmOHpDP7z99+Nc6gltZ+kaTQWDf1UBhLk1dDYkfrw96F1avf7WawlxJvvKrLB63l1ZHYR0uVr9YS48ueh+Ur1gwH4eM29XPx04dflOS+tXrS9jEN/cVEiosmwVUhhX+acLL7maXoK4On+k9jKKqyc+9I+Oj0joED2AHeqtOt33bzPMwdXISnAx56PxbtufMVHQVe9PTLmp9n1SzpV3IVb0v6XEr21/SA1d0wKSHFTXBlGtyyTvAuYg6T9zMyP6WdLrkkFZBdh7BWXd3t7tbdi+xhLrU4V3O1YVOPBQl5jZuCSmBfB0eYjKT5winyKgO9zpcu6OT85P+x8ODugLv5d5acT5hRXbi/HMfnZ4coAMsMeqB5ATusbtBrmKrzMWKqCjx5z3sW0POPOt3kQqRkijBJY4OBnS+jE6E5RKn7CIVDa8zz1FM4TlDPFye7IDfA9INZ+lzRmJCWmhfSvB8PVYyNAIVCQ2JTbCLhi6bJK3orVYrX7Ibf6wqUu1LDtg7ctnkhF4RDz4T6rDJ++kpcT71TkOJIBRwNx+fCn2jQtfKROw2dt1qZbX6VI1VeDz2mA1kNleBzTCxHRHRzkm5vebkjSoEeDUGFK5iWb1BWOaVDo2xQJShe+wGIBAesHtAuy3UvyO+T+gor2rbCu3nn+uIza7GwAERTUmO4ntMXN2YX0D785BZxlQfa1/d1VUmH7DrlrLO1eWp9l23L/EI9nWuSq0XJzS0APPJD9RRhgHtoXIZSjTRAE7oR32awB4qzuyFo0J3HbE4LVRgaOJrBWYGIQqTT4u3rDFIlZ0fIQNOwdHLlQ4+0sSGa4Gl14JM93F6kRB14IX0Wpt9vlpwCaXAkzWWwx+BMhw51qVvSzO6XO524e4S+dv6s485ypeR7kb1kZYHEmt93pj+YhCbMqGsm8eoESaZk2q1ss7dE2W6saNr6Rw2oeF6amU9u+TWQh/vqfLxG+Cnlh7scsDOVAXccgwoB9YKE9pEyB0kGCISTYjrIsokGoBiCDhPSKRljwN6Nyf1akyEpkGZHw5U6iNfVEjTQp96p/kZUQCwVotakop69pGeloYEzQLNzB1hEs1sHi83+nye1QAEYG6P49OL6ESg2DIh4tSy6Jjm98k/tHbK7Q8lcGQzz8dcWQid5opsWeLShZMIqAMOCvxwDIVJEeXR/Ax3iHT8666ks5yBTWqAL9VSgg6ILcvZ16de0Qrj5R1EhMWHtuXAkFBwrKEdw5gPXrxWNnbLYfV05QRxdsM0k5KaZPkwzWYYHcgo/M4ftDPCo8gbssV9WVJVGEColdybzQstth0uU7WMcl3IMfBl6vR0G7JXTGI3zseFvqxY3IhVv1rJoMV92PWTKzuxNIvPAqlNUgmnpaLGzfVpuDVnvZQLCtcAKTVzSvaRzr84BUzJqskNKkqn7yCzeX19fW2cnRmOgz5+7HpeV7fW5ionJeYjkCkEF2EtT9P87SZi3QbFXlyfz5ebjzcp/sVnNy4UeT5Pr22+AvKv1murZsezddimaTjvoTMVTleF99ffSbuWhFr7Z1MkXE7lmNFaSKi1azY5BOhyXtRcFeK1NsmmeD/f/z3acNv6+fpjU+j3QvOnzV4vNIHVEFBrd2yagPNeLYpfb0ss86fa9ihfykY9ECzgdnXI19oHm8zaUzKgIG1niE4Jvatsvaq15zW3Yj3q0IH1JNTa7RorT0/pPAcHXYHnK7cupEay+iZ1vV2vOdl8iNumKsL9K2x1XY904fq7TYfr2kdW3NeqnrddN6u0V3az7s4v5bpV78mfq/tUl0a8L9FZ9AaPiAz0cs0duX46/eg01r8LRvPCCI1+CuFEr9bFcGGHTr5ZFy0Lvwohz9YF51y/5yijrzepJ9/eREBvM8oznxvL47m5FJZydalgonqY9mc1K4G3L4kPLqGALtdKammCYp3wylSXFKQMstzSLze5jX/ToWWKcTeLAEIg86Iry49INc1WIIkrTLMVXTXNViZhFv08M5s7m8GdhFzNw4t+3hyehykeLcKLR2wO0MUBLcKwPMWPuPPxXNmC/vWULt65MqPyNevzEg4/XjYVcEknjpiQ4ZF6xDc6u8brd8YPRqvVAvt1Sy2TnGJ36VF7Sxb9e/KnBfSecEbDM8hS1vMA7sFlfvT7bDPc3hqdH3frxK4v8UiXq67AbJX1RqEFjy32GDCXA8ASbdSHGR0GoMS7RalYYctBjNAmxxt6IDmx9ft1MsDibPN4OdCtSgnyK2HkqqznZZ6fW7/nC0WmKq6bLFNuNJjqffhCe4oiirr53jpdUD9b5GOxYFan+3fLAYlwKpPkWA4kOvOjTIptUz27ydMZ7g1k0TabtzVs6dUsfV37CA9EglONxH+qQlidknqzzirEgtmiDjEpDXfZKB+nrIRQhfAPdbMLoGFAwwIAG7vuJjpw07qtRqyd+gQSQ5N4lNmPi+7pS8xD7az+jZe/YpdEabYJ43fCxzZsxNzwXzUsfl3FzPnxiSbOtjqtO2LnnS7PxfM3VfD87VfP8ySZrBj5bMwuuQSvZnZJZ+BrYLbPuMQuIhK8R/G8ApaXNAerWV5ySf8aWB4RokyLD1yS6CSR59D2klZhNesXjub56lifaa8Om3OzTYxP76vUaCI2hxaRGQON+nTLuz/xjkct/s/lI8SEhpi4+WihKt/g+KSPTtnopnurtxn2MrELjIgI37B7s3OrTwcquq5Vaec2fjt4wZD4pDA9CttjQgtHhVdKB8LLFEADc9loBcPAxb4AZ2HnQnm+Gb1YdIqzdwB1isfPtSh7Q0DJHwFYJE/QPI+b3yUhHrBgvk3yNrM1tGlsFQehzxFb7YdP14qv3SKb8bAU3omaT3XZYNm+Lt3IMEEDGBHa2lZnHmeCVi8ly08P2cb6uwD+3HzEZ/MJsBl1BAqoJG7IXSIQPPhgb5BoeF7uVKJjmWZm3WcA7SGoWzEaaBBsmOIbj0tUavRanpKrddS4zxvqYmZZmqPgzNLMjKqzk0GPYq6e0kn77NbT2olOubN05Wv4kp4KuFzHwTL7rvsVMKwOnazjoJpLFpbJzc8urGfurs6Tb5mjy2eza+DTBQXEOPIYh4hX8970OuKE1fwqmXB7Rn5dBqFesQW+PZeOlUyYPSPPlOV6ft3aartpNZ82hxaRmfCjIAqtWGFxIoTnUtQtE+FPoKiZzIkf6I2dx/GtGo5tmcbegmPlT3SZh2zl3BF48AnfMFlR+75suN0aNu2Gncv6DSGo09p8p3JNgL3P7eOTPuoDvweeZEc52Owe+HSDmHtNGJ460Xxp3RLa20OvePjOHQNze0SEITRi8TsNXm1YRbNMFSP6rAjsykqaLQ7c4UQRp8xdUSXL1ihvqghpuWd63DYS8zreDDjgO4tRK8uk8A2jq7iY50+6WDDNifiMRDvTpqevmubANCdf3sy+s4rbR+MytargJbVz2wNcUWP2t5sMqKVtoEtUKotHGtOHh4eadD8XZcftz2KWtEsLhDkkKR8kGRoA4oE+n3HruDD31BWzZcEwzd/x8kq/Y2GpzVnUh0dt4Cy+XQEVJfzNphizwHU8TNw1PbsrJnHaBBwqUKWmfjUqAep51oizwO9ms+nzCzPDCL9JIl0oGqYvJMMGzJkWjVK/L0nMl+PqIwoB4/Yx9KmoZWEdnGomXfowqgideBbM0K/kT73QqxW+eKjeO4nwN9BCIs0K9LbIkpsDSkofgLFs3t6TP63s00p2MKxmb0pWL9EBZ772owNKQXEG8ynSKJbtWggHrWtXeGQ7xz+Tt1pkOzokeL6VXFvU7bWAQ8O2CDN+t/gCvOITBDJdL5u9HKcAxQWq5sitYst62jOkLQOasGQrX0ofFaubnsK2LxGey7GhL7XF0RxbnaixOuZbc3Muh17+xoXcfPlbV6+npRBOOwZrb6zE/Kw0Pi4blTM95QyP9hhTFvY2PE1jmZdzcn50seDkhK+yW0H7Jq+1W8Dw/15ol8gq90I7OvHuyZ8l3mSnZLBhD6haXMv0gN7OGi8ahnF2cnb4/uLT+cF+7/pF40PYFWocEOEzQVQo0UVYSmyPPaDyF52VUlZ4r6kD+MBviXFzft8Vx1QMgRuH1GYOoaMuejcgMjVg6kMXSXiQ7QdDjMF1hc2JL180zogHxq+hXe2iTmv3ReNF4+Xf2gNC2wMsxo0G9z1kGMTTTaljKX3Rbbcxl2SIbSla4GIhid2yWfv48tj41+G1Ef0UnvXWaNgOaoO029PAa3HwmWg57UbDxhL9F0pYpi6gv/8dHV4cNW7iX413rYfbhib8MISJNAClsVOd83nXekA+tu/wCERjgAUE3N1biWQ8uv2u9aBQaoz8kT0G+26voz7ewXT1/cVEAsUDF5y9TgMHknEYchDjvU5D19Fw3zM8p6FIa0wDDxnT8EVjrotSlHbetjqNhlIvjznIwMg4Ti6jWPMaDXjQgjjtW/+9/+u+dXF51d9rGr95ojNCxm/eg/7vt+4l5th1wT3+cDXmgB2x12nORRHDbStNbTmNhu2jRJW/R61Gox0I3hZjzGE+WOlEgrDvBiNCFwkJ7bYRVdVsDMcwokUevWvttjpzuKFNNBLr1mh4dw7h6D/tOzLAFFts8DvYUigaF37DE4HEG2T7yDA42AEX5B6QeNNttxOrJ4nhgO+yqZpyRmKs2nML2UathlK6o5PTQ0Qo+v4X5DBkB9xFxm/o8qJ/hZqx7lRqW9tWyKWIrDb2SVvge3BiAttWOD//kbxucU/yAJrI+IiadwNqPAg+7KLoN2PIuKdtyt4//58iRtFBodGIU5SJ2mlrs2CwDONF438DAAD//+okJeGhpgAA"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "template_file",
      "name": "LambdaforElasticsearch-template",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "23fb457e719f3235d8ae17a967b59cd653ccfac226985e1b190a0a467678348d",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"es:DescribeReservedElasticsearchInstanceOfferings\",\n        \"es:DeletePackage\",\n        \"es:ListElasticsearchInstanceTypeDetails\",\n        \"es:ListDomainsForPackage\",\n        \"es:CreateElasticsearchServiceRole\",\n        \"es:UpdatePackage\",\n        \"es:RejectInboundCrossClusterSearchConnection\",\n        \"es:GetPackageVersionHistory\",\n        \"es:PurchaseReservedElasticsearchInstanceOffering\",\n        \"es:DeleteElasticsearchServiceRole\",\n        \"es:AcceptInboundCrossClusterSearchConnection\",\n        \"es:DescribeInboundCrossClusterSearchConnections\",\n        \"es:DescribeReservedElasticsearchInstances\",\n        \"es:ListDomainNames\",\n        \"es:CreatePackage\",\n        \"es:DescribePackages\",\n        \"es:DeleteInboundCrossClusterSearchConnection\",\n        \"es:ListElasticsearchInstanceTypes\",\n        \"es:DescribeOutboundCrossClusterSearchConnections\",\n        \"es:ListElasticsearchVersions\",\n        \"es:DescribeElasticsearchInstanceTypeLimits\",\n        \"es:DeleteOutboundCrossClusterSearchConnection\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"arn:aws:es:us-east-1:526904826677:domain/monitoring-hydrovis\"\n    }\n  ]\n}",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"es:DescribeReservedElasticsearchInstanceOfferings\",\n        \"es:DeletePackage\",\n        \"es:ListElasticsearchInstanceTypeDetails\",\n        \"es:ListDomainsForPackage\",\n        \"es:CreateElasticsearchServiceRole\",\n        \"es:UpdatePackage\",\n        \"es:RejectInboundCrossClusterSearchConnection\",\n        \"es:GetPackageVersionHistory\",\n        \"es:PurchaseReservedElasticsearchInstanceOffering\",\n        \"es:DeleteElasticsearchServiceRole\",\n        \"es:AcceptInboundCrossClusterSearchConnection\",\n        \"es:DescribeInboundCrossClusterSearchConnections\",\n        \"es:DescribeReservedElasticsearchInstances\",\n        \"es:ListDomainNames\",\n        \"es:CreatePackage\",\n        \"es:DescribePackages\",\n        \"es:DeleteInboundCrossClusterSearchConnection\",\n        \"es:ListElasticsearchInstanceTypes\",\n        \"es:DescribeOutboundCrossClusterSearchConnections\",\n        \"es:ListElasticsearchVersions\",\n        \"es:DescribeElasticsearchInstanceTypeLimits\",\n        \"es:DeleteOutboundCrossClusterSearchConnection\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"arn:aws:es:${region}:${account_id}:domain/monitoring-hydrovis\"\n    }\n  ]\n}",
            "vars": {
              "account_id": "526904826677",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "template_file",
      "name": "lambda_code_index_template",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "7f6e61ee6573441138595702f476f13332f8c528f8063a70c88bacc1714370ed",
            "rendered": "const viz_js = require(\"viz_js\");\n\n// v1.1.2\nvar https = require('https');\nvar zlib = require('zlib');\nvar crypto = require('crypto');\n\nvar endpoint = 'vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com';\n\n// Set this to true if you want to debug why data isn't making it to\n// your Elasticsearch cluster. This will enable logging of failed items\n// to CloudWatch Logs.\nvar logFailedResponses = true;\n\nexports.handler = function(input, context) {\n    // decode input from base64\n    var zippedInput = new Buffer.from(input.awslogs.data, 'base64');\n\n    // decompress the input\n    zlib.gunzip(zippedInput, function(error, buffer) {\n        if (error) { context.fail(error); return; }\n\n        // parse the input from JSON\n        var awslogsData = JSON.parse(buffer.toString('utf8'));\n\n        // transform the input to Elasticsearch documents\n        var elasticsearchBulkData = transform(awslogsData);\n\n        // skip control messages\n        if (!elasticsearchBulkData) {\n            console.log('Received a control message');\n            context.succeed('Control message handled successfully');\n            return;\n        }\n\n        // post documents to the Amazon Elasticsearch Service\n        post(elasticsearchBulkData, function(error, success, statusCode, failedItems) {\n            console.log('Response: ' + JSON.stringify({\n                \"statusCode\": statusCode\n            }));\n\n            if (error) {\n                logFailure(error, failedItems);\n                context.fail(JSON.stringify(error));\n            } else {\n                console.log('Success: ' + JSON.stringify(success));\n                context.succeed('Success');\n            }\n        });\n    });\n};\n\nfunction transform(payload) {\n    if (payload.messageType === 'CONTROL_MESSAGE') {\n        return null;\n    }\n\n    var bulkRequestBody = '';\n\n    payload.logEvents.forEach(function(logEvent) {\n        var timestamp = new Date(1 * logEvent.timestamp);\n\n        // index name format: cwl-YYYY.MM\n        var indexName = [\n            'cwl' + payload.logGroup.toLowerCase().split('/').join('-') + '-' + timestamp.getUTCFullYear(),              // year\n            ('0' + (timestamp.getUTCMonth() + 1)).slice(-2)  // month\n        ].join('.');\n\n        var source = buildSource(logEvent.message, logEvent.extractedFields);\n        source['@id'] = logEvent.id;\n        source['@timestamp'] = new Date(1 * logEvent.timestamp).toISOString();\n        source['@message'] = logEvent.message;\n        source['@owner'] = payload.owner;\n        source['@log_group'] = payload.logGroup;\n        source['@log_stream'] = payload.logStream;\n\n        source = viz_js.parse_viz_logs(source, payload.logGroup, logEvent.message)\n\n        var action = { \"index\": {} };\n        action.index._index = indexName;\n        action.index._type = payload.logGroup;\n        action.index._id = logEvent.id;\n\n        bulkRequestBody += [\n            JSON.stringify(action),\n            JSON.stringify(source),\n        ].join('\\n') + '\\n';\n    });\n    return bulkRequestBody;\n}\n\nfunction buildSource(message, extractedFields) {\n    if (extractedFields) {\n        var source = {};\n\n        for (var key in extractedFields) {\n            if (extractedFields.hasOwnProperty(key) \u0026\u0026 extractedFields[key]) {\n                var value = extractedFields[key];\n\n                if (isNumeric(value)) {\n                    source[key] = 1 * value;\n                    continue;\n                }\n\n                var jsonSubString = extractJson(value);\n                if (jsonSubString !== null) {\n                    source['$' + key] = JSON.parse(jsonSubString);\n                }\n\n                source[key] = value;\n            }\n        }\n        return source;\n    }\n\n    var jsonSubString = extractJson(message);\n    if (jsonSubString !== null) {\n        return JSON.parse(jsonSubString);\n    }\n\n    return {};\n}\n\nfunction extractJson(message) {\n    var jsonStart = message.indexOf('{');\n    if (jsonStart \u003c 0) return null;\n    var jsonSubString = message.substring(jsonStart);\n    return isValidJson(jsonSubString) ? jsonSubString : null;\n}\n\nfunction isValidJson(message) {\n    try {\n        JSON.parse(message);\n    } catch (e) { return false; }\n    return true;\n}\n\nfunction isNumeric(n) {\n    return !isNaN(parseFloat(n)) \u0026\u0026 isFinite(n);\n}\n\nfunction post(body, callback) {\n    var requestParams = buildRequest(endpoint, body);\n\n    var request = https.request(requestParams, function(response) {\n        var responseBody = '';\n        response.on('data', function(chunk) {\n            responseBody += chunk;\n        });\n\n        response.on('end', function() {\n            var info = JSON.parse(responseBody);\n            var failedItems;\n            var success;\n            var error;\n\n            if (response.statusCode \u003e= 200 \u0026\u0026 response.statusCode \u003c 299) {\n                failedItems = info.items.filter(function(x) {\n                    return x.index.status \u003e= 300;\n                });\n\n                success = {\n                    \"attemptedItems\": info.items.length,\n                    \"successfulItems\": info.items.length - failedItems.length,\n                    \"failedItems\": failedItems.length\n                };\n            }\n\n            if (response.statusCode !== 200 || info.errors === true) {\n                // prevents logging of failed entries, but allows logging\n                // of other errors such as access restrictions\n                delete info.items;\n                error = {\n                    statusCode: response.statusCode,\n                    responseBody: info\n                };\n            }\n\n            callback(error, success, response.statusCode, failedItems);\n        });\n    }).on('error', function(e) {\n        callback(e);\n    });\n    request.end(requestParams.body);\n}\n\nfunction buildRequest(endpoint, body) {\n    var endpointParts = endpoint.match(/^([^\\.]+)\\.?([^\\.]*)\\.?([^\\.]*)\\.amazonaws\\.com$/);\n    var region = endpointParts[2];\n    var service = endpointParts[3];\n    var datetime = (new Date()).toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n    var date = datetime.substr(0, 8);\n    var kDate = hmac('AWS4' + process.env.AWS_SECRET_ACCESS_KEY, date);\n    var kRegion = hmac(kDate, region);\n    var kService = hmac(kRegion, service);\n    var kSigning = hmac(kService, 'aws4_request');\n\n    var request = {\n        host: endpoint,\n        method: 'POST',\n        path: '/_bulk',\n        body: body,\n        headers: {\n            'Content-Type': 'application/json',\n            'Host': endpoint,\n            'Content-Length': Buffer.byteLength(body),\n            'X-Amz-Security-Token': process.env.AWS_SESSION_TOKEN,\n            'X-Amz-Date': datetime\n        }\n    };\n\n    var canonicalHeaders = Object.keys(request.headers)\n        .sort(function(a, b) { return a.toLowerCase() \u003c b.toLowerCase() ? -1 : 1; })\n        .map(function(k) { return k.toLowerCase() + ':' + request.headers[k]; })\n        .join('\\n');\n\n    var signedHeaders = Object.keys(request.headers)\n        .map(function(k) { return k.toLowerCase(); })\n        .sort()\n        .join(';');\n\n    var canonicalString = [\n        request.method,\n        request.path, '',\n        canonicalHeaders, '',\n        signedHeaders,\n        hash(request.body, 'hex'),\n    ].join('\\n');\n\n    var credentialString = [ date, region, service, 'aws4_request' ].join('/');\n\n    var stringToSign = [\n        'AWS4-HMAC-SHA256',\n        datetime,\n        credentialString,\n        hash(canonicalString, 'hex')\n    ] .join('\\n');\n\n    request.headers.Authorization = [\n        'AWS4-HMAC-SHA256 Credential=' + process.env.AWS_ACCESS_KEY_ID + '/' + credentialString,\n        'SignedHeaders=' + signedHeaders,\n        'Signature=' + hmac(kSigning, stringToSign, 'hex')\n    ].join(', ');\n\n    return request;\n}\n\nfunction hmac(key, str, encoding) {\n    return crypto.createHmac('sha256', key).update(str, 'utf8').digest(encoding);\n}\n\nfunction hash(str, encoding) {\n    return crypto.createHash('sha256').update(str, 'utf8').digest(encoding);\n}\n\nfunction logFailure(error, failedItems) {\n    if (logFailedResponses) {\n        console.log('Error: ' + JSON.stringify(error, null, 2));\n\n        if (failedItems \u0026\u0026 failedItems.length \u003e 0) {\n            console.log(\"Failed Items: \" +\n                JSON.stringify(failedItems, null, 2));\n        }\n    }\n}\n",
            "template": "const viz_js = require(\"viz_js\");\n\n// v1.1.2\nvar https = require('https');\nvar zlib = require('zlib');\nvar crypto = require('crypto');\n\nvar endpoint = '${es_endpoint}';\n\n// Set this to true if you want to debug why data isn't making it to\n// your Elasticsearch cluster. This will enable logging of failed items\n// to CloudWatch Logs.\nvar logFailedResponses = true;\n\nexports.handler = function(input, context) {\n    // decode input from base64\n    var zippedInput = new Buffer.from(input.awslogs.data, 'base64');\n\n    // decompress the input\n    zlib.gunzip(zippedInput, function(error, buffer) {\n        if (error) { context.fail(error); return; }\n\n        // parse the input from JSON\n        var awslogsData = JSON.parse(buffer.toString('utf8'));\n\n        // transform the input to Elasticsearch documents\n        var elasticsearchBulkData = transform(awslogsData);\n\n        // skip control messages\n        if (!elasticsearchBulkData) {\n            console.log('Received a control message');\n            context.succeed('Control message handled successfully');\n            return;\n        }\n\n        // post documents to the Amazon Elasticsearch Service\n        post(elasticsearchBulkData, function(error, success, statusCode, failedItems) {\n            console.log('Response: ' + JSON.stringify({\n                \"statusCode\": statusCode\n            }));\n\n            if (error) {\n                logFailure(error, failedItems);\n                context.fail(JSON.stringify(error));\n            } else {\n                console.log('Success: ' + JSON.stringify(success));\n                context.succeed('Success');\n            }\n        });\n    });\n};\n\nfunction transform(payload) {\n    if (payload.messageType === 'CONTROL_MESSAGE') {\n        return null;\n    }\n\n    var bulkRequestBody = '';\n\n    payload.logEvents.forEach(function(logEvent) {\n        var timestamp = new Date(1 * logEvent.timestamp);\n\n        // index name format: cwl-YYYY.MM\n        var indexName = [\n            'cwl' + payload.logGroup.toLowerCase().split('/').join('-') + '-' + timestamp.getUTCFullYear(),              // year\n            ('0' + (timestamp.getUTCMonth() + 1)).slice(-2)  // month\n        ].join('.');\n\n        var source = buildSource(logEvent.message, logEvent.extractedFields);\n        source['@id'] = logEvent.id;\n        source['@timestamp'] = new Date(1 * logEvent.timestamp).toISOString();\n        source['@message'] = logEvent.message;\n        source['@owner'] = payload.owner;\n        source['@log_group'] = payload.logGroup;\n        source['@log_stream'] = payload.logStream;\n\n        source = viz_js.parse_viz_logs(source, payload.logGroup, logEvent.message)\n\n        var action = { \"index\": {} };\n        action.index._index = indexName;\n        action.index._type = payload.logGroup;\n        action.index._id = logEvent.id;\n\n        bulkRequestBody += [\n            JSON.stringify(action),\n            JSON.stringify(source),\n        ].join('\\n') + '\\n';\n    });\n    return bulkRequestBody;\n}\n\nfunction buildSource(message, extractedFields) {\n    if (extractedFields) {\n        var source = {};\n\n        for (var key in extractedFields) {\n            if (extractedFields.hasOwnProperty(key) \u0026\u0026 extractedFields[key]) {\n                var value = extractedFields[key];\n\n                if (isNumeric(value)) {\n                    source[key] = 1 * value;\n                    continue;\n                }\n\n                var jsonSubString = extractJson(value);\n                if (jsonSubString !== null) {\n                    source['$' + key] = JSON.parse(jsonSubString);\n                }\n\n                source[key] = value;\n            }\n        }\n        return source;\n    }\n\n    var jsonSubString = extractJson(message);\n    if (jsonSubString !== null) {\n        return JSON.parse(jsonSubString);\n    }\n\n    return {};\n}\n\nfunction extractJson(message) {\n    var jsonStart = message.indexOf('{');\n    if (jsonStart \u003c 0) return null;\n    var jsonSubString = message.substring(jsonStart);\n    return isValidJson(jsonSubString) ? jsonSubString : null;\n}\n\nfunction isValidJson(message) {\n    try {\n        JSON.parse(message);\n    } catch (e) { return false; }\n    return true;\n}\n\nfunction isNumeric(n) {\n    return !isNaN(parseFloat(n)) \u0026\u0026 isFinite(n);\n}\n\nfunction post(body, callback) {\n    var requestParams = buildRequest(endpoint, body);\n\n    var request = https.request(requestParams, function(response) {\n        var responseBody = '';\n        response.on('data', function(chunk) {\n            responseBody += chunk;\n        });\n\n        response.on('end', function() {\n            var info = JSON.parse(responseBody);\n            var failedItems;\n            var success;\n            var error;\n\n            if (response.statusCode \u003e= 200 \u0026\u0026 response.statusCode \u003c 299) {\n                failedItems = info.items.filter(function(x) {\n                    return x.index.status \u003e= 300;\n                });\n\n                success = {\n                    \"attemptedItems\": info.items.length,\n                    \"successfulItems\": info.items.length - failedItems.length,\n                    \"failedItems\": failedItems.length\n                };\n            }\n\n            if (response.statusCode !== 200 || info.errors === true) {\n                // prevents logging of failed entries, but allows logging\n                // of other errors such as access restrictions\n                delete info.items;\n                error = {\n                    statusCode: response.statusCode,\n                    responseBody: info\n                };\n            }\n\n            callback(error, success, response.statusCode, failedItems);\n        });\n    }).on('error', function(e) {\n        callback(e);\n    });\n    request.end(requestParams.body);\n}\n\nfunction buildRequest(endpoint, body) {\n    var endpointParts = endpoint.match(/^([^\\.]+)\\.?([^\\.]*)\\.?([^\\.]*)\\.amazonaws\\.com$/);\n    var region = endpointParts[2];\n    var service = endpointParts[3];\n    var datetime = (new Date()).toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n    var date = datetime.substr(0, 8);\n    var kDate = hmac('AWS4' + process.env.AWS_SECRET_ACCESS_KEY, date);\n    var kRegion = hmac(kDate, region);\n    var kService = hmac(kRegion, service);\n    var kSigning = hmac(kService, 'aws4_request');\n\n    var request = {\n        host: endpoint,\n        method: 'POST',\n        path: '/_bulk',\n        body: body,\n        headers: {\n            'Content-Type': 'application/json',\n            'Host': endpoint,\n            'Content-Length': Buffer.byteLength(body),\n            'X-Amz-Security-Token': process.env.AWS_SESSION_TOKEN,\n            'X-Amz-Date': datetime\n        }\n    };\n\n    var canonicalHeaders = Object.keys(request.headers)\n        .sort(function(a, b) { return a.toLowerCase() \u003c b.toLowerCase() ? -1 : 1; })\n        .map(function(k) { return k.toLowerCase() + ':' + request.headers[k]; })\n        .join('\\n');\n\n    var signedHeaders = Object.keys(request.headers)\n        .map(function(k) { return k.toLowerCase(); })\n        .sort()\n        .join(';');\n\n    var canonicalString = [\n        request.method,\n        request.path, '',\n        canonicalHeaders, '',\n        signedHeaders,\n        hash(request.body, 'hex'),\n    ].join('\\n');\n\n    var credentialString = [ date, region, service, 'aws4_request' ].join('/');\n\n    var stringToSign = [\n        'AWS4-HMAC-SHA256',\n        datetime,\n        credentialString,\n        hash(canonicalString, 'hex')\n    ] .join('\\n');\n\n    request.headers.Authorization = [\n        'AWS4-HMAC-SHA256 Credential=' + process.env.AWS_ACCESS_KEY_ID + '/' + credentialString,\n        'SignedHeaders=' + signedHeaders,\n        'Signature=' + hmac(kSigning, stringToSign, 'hex')\n    ].join(', ');\n\n    return request;\n}\n\nfunction hmac(key, str, encoding) {\n    return crypto.createHmac('sha256', key).update(str, 'utf8').digest(encoding);\n}\n\nfunction hash(str, encoding) {\n    return crypto.createHash('sha256').update(str, 'utf8').digest(encoding);\n}\n\nfunction logFailure(error, failedItems) {\n    if (logFailedResponses) {\n        console.log('Error: ' + JSON.stringify(error, null, 2));\n\n        if (failedItems \u0026\u0026 failedItems.length \u003e 0) {\n            console.log(\"Failed Items: \" +\n                JSON.stringify(failedItems, null, 2));\n        }\n    }\n}\n",
            "vars": {
              "es_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "template_file",
      "name": "parser_templates",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "index_key": "data_ingest_logstash.conf.template",
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "60892eec0e4b48ae036d211632a596f40f39fa00cf2cff7d18e75d56dec4f912",
            "rendered": "filter {\n    if [hydrovis_application] == \"data_ingest\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"logger: %{WORD:logger}, .*, level: %{WORD:logger_level} - %{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%{WORD:logger}\\.py.*: %{WORD:logger_level}: %{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%{WORD:logger}\\.sh.*: %{WORD:logger_level}: %{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Waiting for %{WORD:ingest_event} events from RabbitMQ\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Received an %{WORD:ingest_event} event message with id: %{NUMBER:ingest_event_id:int} and url: '%{GREEDYDATA:ingest_file}'\"}\n            add_field =\u003e { \"hml_ingest_process_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Processed file: '%{GREEDYDATA:ingest_file}' - forecasts extracted: %{NUMBER:hml_forecasts:int}\"}\n            add_field =\u003e { \"hml_ingest_process_status_code\" =\u003e 2 }\n        }\n\n        if [ingest_file] {\n            grok {\n                match =\u003e {\"ingest_file\" =\u003e \"_HML%{GREEDYDATA:wfo}\\.\"}\n            }\n        }\n            \n        grok {\n            match =\u003e { \"message\" =\u003e \"Parsing %{WORD:ingest_event} from wfo: %{WORD:wfo}, gage: %{WORD:gage}\"}\n            add_field =\u003e { \"xml_ingest_process_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"\u003cForecastTimeSeries\\( generation_time: %{TIMESTAMP_ISO8601:forecast_generation_time}, issued_time: %{TIMESTAMP_ISO8601:forecast_issued_time}wfo:%{WORD:wfo}, gage: %{WORD:gage}, category: %{WORD:forecast_category}, name: %{WORD:forecast_type} \\)\u003e\"}\n            add_field =\u003e { \"xml_ingest_process_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Inserting %{WORD:forecast_category} forecasts for gage: %{WORD:gage}\"}\n            add_field =\u003e { \"xml_ingest_process_status_code\" =\u003e 3 }\n        }\n                    \n        grok {\n            match =\u003e { \"message\" =\u003e \"Removing records older than %{TIMESTAMP_ISO8601:ingest_cleaner_threshold} from table %{WORD:ingest_cleaner_table}\"}\n            add_field =\u003e { \"ingest_cleaner_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Removed %{WORD:ingest_records_cleaned:int} records from table %{WORD:ingest_cleaner_table}\"}\n            add_field =\u003e { \"ingest_cleaner_process_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Getting list of hours from %{GREEDYDATA:hml_s3_bucket}\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Latest time in %{GREEDYDATA:hml_s3_bucket} is %{GREEDYDATA:hml_s3_bucket_latest_date} %{NUMBER:hml_s3_bucket_latest_hour:int} UTC\"}\n            add_field =\u003e {\"hml_s3_bucket_latest_datetime\" =\u003e \"%{hml_s3_bucket_latest_date}T%{hml_s3_bucket_latest_hour}\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 2 }\n        }\n                                        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Found %{NUMBER:hml_records_found:int} for (?\u003chml_data_year\u003e[\\d.]{4})(?\u003chml_data_month\u003e[\\d.]{2})(?\u003chml_data_day\u003e[\\d.]{2})(?\u003chml_data_hour\u003e[\\d.]{2}) in %{GREEDYDATA:hmml_s3_bucket}\"}\n            add_field =\u003e {\"hml_data_datetime\" =\u003e \"%{hml_data_year}-%{hml_data_month}-%{hml_data_day}T%{hml_data_hour}\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 3 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Found %{NUMBER:hml_backfill_records_found:int} backfill entries\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 4 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Done processing\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 5 }\n        }\n\n        mutate {\n            convert =\u003e {\n                \"hml_ingest_process_status_code\" =\u003e \"integer\"\n                \"xml_ingest_process_status_code\" =\u003e \"integer\"\n                \"ingest_cleaner_process_status_code\" =\u003e \"integer\"\n                \"ingest_backfill_process_status_code\" =\u003e \"integer\"\n            }\n        }\n    }\n}\n\n#############\n## Spin Up ##\n#############\n\nfilter {\n    if [hydrovis_application] == \"data_ingest\" and [programname] == \"cloud-init\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up Rsyslog Configuration\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing System Dependencies\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 2 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing HML Ingester\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 3 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating HML Ingester Configs\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 4 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building HML Ingester Dockers\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 5 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Spinning up HML Ingester Dockers\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 6 }\n        }  \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished Setup\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 7 }\n        }\n    }\n\n    mutate {\n        convert =\u003e {\n            \"ingest_spinup_status_code\" =\u003e \"integer\"\n        }\n    }\n}",
            "template": "filter {\n    if [hydrovis_application] == \"data_ingest\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"logger: %%{WORD:logger}, .*, level: %%{WORD:logger_level} - %%{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%%{WORD:logger}\\.py.*: %%{WORD:logger_level}: %%{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%%{WORD:logger}\\.sh.*: %%{WORD:logger_level}: %%{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Waiting for %%{WORD:ingest_event} events from RabbitMQ\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Received an %%{WORD:ingest_event} event message with id: %%{NUMBER:ingest_event_id:int} and url: '%%{GREEDYDATA:ingest_file}'\"}\n            add_field =\u003e { \"hml_ingest_process_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Processed file: '%%{GREEDYDATA:ingest_file}' - forecasts extracted: %%{NUMBER:hml_forecasts:int}\"}\n            add_field =\u003e { \"hml_ingest_process_status_code\" =\u003e 2 }\n        }\n\n        if [ingest_file] {\n            grok {\n                match =\u003e {\"ingest_file\" =\u003e \"_HML%%{GREEDYDATA:wfo}\\.\"}\n            }\n        }\n            \n        grok {\n            match =\u003e { \"message\" =\u003e \"Parsing %%{WORD:ingest_event} from wfo: %%{WORD:wfo}, gage: %%{WORD:gage}\"}\n            add_field =\u003e { \"xml_ingest_process_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"\u003cForecastTimeSeries\\( generation_time: %%{TIMESTAMP_ISO8601:forecast_generation_time}, issued_time: %%{TIMESTAMP_ISO8601:forecast_issued_time}wfo:%%{WORD:wfo}, gage: %%{WORD:gage}, category: %%{WORD:forecast_category}, name: %%{WORD:forecast_type} \\)\u003e\"}\n            add_field =\u003e { \"xml_ingest_process_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Inserting %%{WORD:forecast_category} forecasts for gage: %%{WORD:gage}\"}\n            add_field =\u003e { \"xml_ingest_process_status_code\" =\u003e 3 }\n        }\n                    \n        grok {\n            match =\u003e { \"message\" =\u003e \"Removing records older than %%{TIMESTAMP_ISO8601:ingest_cleaner_threshold} from table %%{WORD:ingest_cleaner_table}\"}\n            add_field =\u003e { \"ingest_cleaner_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Removed %%{WORD:ingest_records_cleaned:int} records from table %%{WORD:ingest_cleaner_table}\"}\n            add_field =\u003e { \"ingest_cleaner_process_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Getting list of hours from %%{GREEDYDATA:hml_s3_bucket}\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Latest time in %%{GREEDYDATA:hml_s3_bucket} is %%{GREEDYDATA:hml_s3_bucket_latest_date} %%{NUMBER:hml_s3_bucket_latest_hour:int} UTC\"}\n            add_field =\u003e {\"hml_s3_bucket_latest_datetime\" =\u003e \"%%{hml_s3_bucket_latest_date}T%%{hml_s3_bucket_latest_hour}\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 2 }\n        }\n                                        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Found %%{NUMBER:hml_records_found:int} for (?\u003chml_data_year\u003e[\\d.]{4})(?\u003chml_data_month\u003e[\\d.]{2})(?\u003chml_data_day\u003e[\\d.]{2})(?\u003chml_data_hour\u003e[\\d.]{2}) in %%{GREEDYDATA:hmml_s3_bucket}\"}\n            add_field =\u003e {\"hml_data_datetime\" =\u003e \"%%{hml_data_year}-%%{hml_data_month}-%%{hml_data_day}T%%{hml_data_hour}\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 3 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Found %%{NUMBER:hml_backfill_records_found:int} backfill entries\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 4 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Done processing\"}\n            add_field =\u003e { \"ingest_backfill_process_status_code\" =\u003e 5 }\n        }\n\n        mutate {\n            convert =\u003e {\n                \"hml_ingest_process_status_code\" =\u003e \"integer\"\n                \"xml_ingest_process_status_code\" =\u003e \"integer\"\n                \"ingest_cleaner_process_status_code\" =\u003e \"integer\"\n                \"ingest_backfill_process_status_code\" =\u003e \"integer\"\n            }\n        }\n    }\n}\n\n#############\n## Spin Up ##\n#############\n\nfilter {\n    if [hydrovis_application] == \"data_ingest\" and [programname] == \"cloud-init\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up Rsyslog Configuration\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing System Dependencies\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 2 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing HML Ingester\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 3 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating HML Ingester Configs\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 4 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building HML Ingester Dockers\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 5 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Spinning up HML Ingester Dockers\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 6 }\n        }  \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished Setup\"}\n            add_field =\u003e { \"ingest_spinup_status_code\" =\u003e 7 }\n        }\n    }\n\n    mutate {\n        convert =\u003e {\n            \"ingest_spinup_status_code\" =\u003e \"integer\"\n        }\n    }\n}",
            "vars": {
              "es_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com",
              "parser_name": "data_ingest_logstash.conf",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "data_services_logstash.conf.template",
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "cc1852c7f41767f8718e0bb2117d8272c588451c1816dce66ee421027299dd9f",
            "rendered": "filter {\n    if [hydrovis_application] == \"data_services\" { \n        grok {\n            match =\u003e { \"message\" =\u003e '\"GET /api/%{WORD:wrds_api}/(?\u003cwrds_api_version\u003e[^/]*)/%{WORD:wrds_api_scheme}/%{GREEDYDATA}\\\" %{NUMBER:wrds_api_response}'}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"\\[%{WORD:logger_level}\\] GET /api/\"}\n        }\n\n        if [wrds_api_response] =~ /^2/ {\n            mutate {\n                add_field =\u003e { \"logger_level\" =\u003e \"INFO\" }\n                add_field =\u003e { \"wrds_api_success\" =\u003e \"true\" }\n            }\n        } else if [wrds_api_response] =~ /^3/ {\n            mutate {\n                add_field =\u003e { \"logger_level\" =\u003e \"WARNING\" }\n                add_field =\u003e { \"wrds_api_success\" =\u003e \"redirect\" }\n            }\n        } else if [wrds_api_response] =~ /^4/ or [wrds_api_response] =~ /^5/ {\n            mutate {\n                add_field =\u003e { \"logger_level\" =\u003e \"ERROR\" }\n                add_field =\u003e { \"wrds_api_success\" =\u003e \"false\" }\n            }\n        }\n\n        mutate {\n            convert =\u003e {\n                \"wrds_api_response\" =\u003e \"integer\"\n            }\n        }\n    }\n}\n\n#############\n## Spin Up ##\n#############\n\nfilter {\n    if [hydrovis_application] == \"data_services\" and [programname] == \"cloud-init\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up Rsyslog Configuration\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Disabling Vlab Hostkey Requirement\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 2 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing System Dependencies\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 3 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up WRDS File Structure\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 4 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning WRDS Infrastructure\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 5 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building NGINX Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 6 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning Location API\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 7 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building Location API Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 8 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning Forecast API V2.0\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 9 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building Forecast API V2.0 Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 10 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning Forecast API V1.1\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 11 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building Forecast API V1.1 Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 12 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Restarting NGINX Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 13 }\n        }  \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished Setup\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 14 }\n        }\n    }\n\n    mutate {\n        convert =\u003e {\n            \"data_services_spinup_status_code\" =\u003e \"integer\"\n        }\n    }\n}",
            "template": "filter {\n    if [hydrovis_application] == \"data_services\" { \n        grok {\n            match =\u003e { \"message\" =\u003e '\"GET /api/%%{WORD:wrds_api}/(?\u003cwrds_api_version\u003e[^/]*)/%%{WORD:wrds_api_scheme}/%%{GREEDYDATA}\\\" %%{NUMBER:wrds_api_response}'}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"\\[%%{WORD:logger_level}\\] GET /api/\"}\n        }\n\n        if [wrds_api_response] =~ /^2/ {\n            mutate {\n                add_field =\u003e { \"logger_level\" =\u003e \"INFO\" }\n                add_field =\u003e { \"wrds_api_success\" =\u003e \"true\" }\n            }\n        } else if [wrds_api_response] =~ /^3/ {\n            mutate {\n                add_field =\u003e { \"logger_level\" =\u003e \"WARNING\" }\n                add_field =\u003e { \"wrds_api_success\" =\u003e \"redirect\" }\n            }\n        } else if [wrds_api_response] =~ /^4/ or [wrds_api_response] =~ /^5/ {\n            mutate {\n                add_field =\u003e { \"logger_level\" =\u003e \"ERROR\" }\n                add_field =\u003e { \"wrds_api_success\" =\u003e \"false\" }\n            }\n        }\n\n        mutate {\n            convert =\u003e {\n                \"wrds_api_response\" =\u003e \"integer\"\n            }\n        }\n    }\n}\n\n#############\n## Spin Up ##\n#############\n\nfilter {\n    if [hydrovis_application] == \"data_services\" and [programname] == \"cloud-init\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up Rsyslog Configuration\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Disabling Vlab Hostkey Requirement\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 2 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing System Dependencies\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 3 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up WRDS File Structure\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 4 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning WRDS Infrastructure\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 5 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building NGINX Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 6 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning Location API\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 7 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building Location API Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 8 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning Forecast API V2.0\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 9 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building Forecast API V2.0 Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 10 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Cloning Forecast API V1.1\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 11 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Building Forecast API V1.1 Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 12 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Restarting NGINX Docker\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 13 }\n        }  \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished Setup\"}\n            add_field =\u003e { \"data_services_spinup_status_code\" =\u003e 14 }\n        }\n    }\n\n    mutate {\n        convert =\u003e {\n            \"data_services_spinup_status_code\" =\u003e \"integer\"\n        }\n    }\n}",
            "vars": {
              "es_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com",
              "parser_name": "data_services_logstash.conf",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "linux_ec2_logstash.conf.template",
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "689414586065954077ffe61fcda8264371e5f994b6c7fad3fd6748a80bb566d4",
            "rendered": "input {\n    udp {\n        port =\u003e 5001\n        codec =\u003e \"json\"\n        type =\u003e \"linux_ec2\"\n    }\n}\n\nfilter {\n    if [hydrovis_application] == \"data_ingest\" {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"hml\" }\n        }\n    } else if [hydrovis_application] == \"data_services\" {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"data_services\" }\n        }\n    } else if [hydrovis_application] == \"replace_route\" {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"rnr\" }\n        }\n    } else {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"linux_ec2\" }\n        }\n    }\n\n    if [programname] in [\"dhclient\", \"run-parts(\", \"systemd\", \"systemd-logind\", \"anacron\", \"CROND\", \"chronyd\", \"ec2net\", \"ec2\", \"postfix\", \"sudo\", \"sshd\", \"useradd\", \"crontab\", \"kernel\"] {\n        drop {}\n    }\n\n    if [logger_level] == \"DEBUG\" {\n        drop {}\n    }\n}\n\noutput {\n    stdout {}\n    if [type] == \"linux_ec2\" {\n        amazon_es {\n            hosts =\u003e [\"vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com\"]\n            region =\u003e \"us-east-1\"\n            aws_access_key_id =\u003e ''\n            aws_secret_access_key =\u003e ''\n            index =\u003e \"%{index_name}-%{+YYYY.MM}\"\n        }\n    }\n}",
            "template": "input {\n    udp {\n        port =\u003e 5001\n        codec =\u003e \"json\"\n        type =\u003e \"linux_ec2\"\n    }\n}\n\nfilter {\n    if [hydrovis_application] == \"data_ingest\" {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"hml\" }\n        }\n    } else if [hydrovis_application] == \"data_services\" {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"data_services\" }\n        }\n    } else if [hydrovis_application] == \"replace_route\" {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"rnr\" }\n        }\n    } else {\n        mutate {\n            add_field =\u003e { \"index_name\" =\u003e \"linux_ec2\" }\n        }\n    }\n\n    if [programname] in [\"dhclient\", \"run-parts(\", \"systemd\", \"systemd-logind\", \"anacron\", \"CROND\", \"chronyd\", \"ec2net\", \"ec2\", \"postfix\", \"sudo\", \"sshd\", \"useradd\", \"crontab\", \"kernel\"] {\n        drop {}\n    }\n\n    if [logger_level] == \"DEBUG\" {\n        drop {}\n    }\n}\n\noutput {\n    stdout {}\n    if [type] == \"linux_ec2\" {\n        amazon_es {\n            hosts =\u003e [\"${es_endpoint}\"]\n            region =\u003e \"${region}\"\n            aws_access_key_id =\u003e ''\n            aws_secret_access_key =\u003e ''\n            index =\u003e \"%%{index_name}-%%{+YYYY.MM}\"\n        }\n    }\n}",
            "vars": {
              "es_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com",
              "parser_name": "linux_ec2_logstash.conf",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "rnr_logstash.conf.template",
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "66396ba65513f2675d37b883b9194d007a0ba3437bac678f61f04d7201241b4b",
            "rendered": "filter {\n    if [hydrovis_application] == \"replace_route\" {\n        grok {\n            match =\u003e {\"message\" =\u003e \"%{WORD:logger_level}    %{WORD}.py %{SPACE} %{NUMBER}  : %{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e {\"message\" =\u003e \"%{WORD:logger_level} %{WORD}.py %{SPACE} %{NUMBER}  : %{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        mutate {\n            gsub =\u003e [ \"message\", \"#01\\d\", \" \" ]\n        }\n\n        if [logger_level] in [\"FATAL\", \"ERROR\"] {\n            mutate {\n                add_field =\u003e { \"rnr_process_status_code\" =\u003e 999 }\n            }\n        }\n\n\n        ######################\n        ## Main RnR Process ##\n        ######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"BEGINNING run_wrf_hydro\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Archiving old run instance directories at: '%{GREEDYDATA:run_instance_dir}' to: '%{GREEDYDATA:archive_dir}'\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Downloaded files for timestamp: %{TIMESTAMP_ISO8601:latest_data_time}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 3 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_action_forecasts\\(\\):   response = \u003cResponse \\[%{NUMBER:forecast_api_response:int}\\]\u003e\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 4 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecasts\\(\\):  conus_route_link_fpath = %{GREEDYDATA:conus_routelink_path}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 5 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict\\(\\):  Original list of lids length = %{NUMBER:total_forecast_points:int}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 6 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Succesfully generated route link file: %{GREEDYDATA:route_link_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 7 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"SUCCESSFULLY generated nudging params file: %{GREEDYDATA:nudging_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 8 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"LAKEPARM file successfully generated the subset file.  %{GREEDYDATA:lakeparm_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 9 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"GWBUCKPARM file successfully generated. %{GREEDYDATA:gwbuckparm_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 10 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"HYDRO_RST file successfully generated.  %{GREEDYDATA:hydro_rst_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 11 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Successfully generated FORCING file: %{GREEDYDATA:forcing_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 12 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished creating %{NUMBER:forcing_file_count:int} FORCING files\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 13 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Beginning WRF-Hydro execution with command: %{GREEDYDATA:wfr_hydro_cmd} in directory: .*/(?\u003clatest_data_year\u003e[\\d.]{4})(?\u003clatest_data_month\u003e[\\d.]{2})(?\u003clatest_data_day\u003e[\\d.]{2})(?\u003clatest_data_hour\u003e[\\d.]{2})\"}\n            add_field =\u003e {\"latest_data_time\" =\u003e \"%{latest_data_year}-%{latest_data_month}-%{latest_data_day} %{latest_data_hour}:00:00\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 14 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Beginning nwm output processing\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 15 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished processing nwm output\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 16 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"FINISHED run_wrf_hydro\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 17 }\n        }\n\n        ####################################\n        ## NWS LID Data Retrieval Process ##\n        ####################################\n\n        grok {\n            match =\u003e {\"message\" =\u003e \"_get_forecast_map_from_json_forecast\\(\\):  lid = %{WORD:nws_lid}\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e {\"message\" =\u003e \"No rating curve found for %{WORD:nws_lid}. Attempting to get official flow forecast...\"}\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"_getStreamFlowInTimeWindowByLidURL\\(\\)  url = %{GREEDYDATA:streamflow_forecast_api_call}\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 2 }\n        }\n\n        if [streamflow_forecast_api_call] {\n            grok {\n                match =\u003e { \"streamflow_forecast_api_call\" =\u003e \"/nws_lid/%{WORD:nws_lid}/\"}\n            }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"The latest flow forecast at %{WORD:nws_lid} has no values above 0. Skipping...\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 998 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"There is no flow forecast available at %{WORD:nws_lid} . Skipping...\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 998 }\n        }\n\n        #######################\n        ## General API Calls ##\n        #######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_getAllStageActionDataInWindowURL\\(\\) endTime =  %{TIMESTAMP_ISO8601:latest_data_time} windowInHours = %{NUMBER:forecast_api_window:int}  original url = %{GREEDYDATA:original_forecast_api_call}  newUrl = %{GREEDYDATA:forecast_api_call}\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Returned lid count = %{NUMBER:rating_curves_found:int} rating curves\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \" _get_rating_curves_map_inner\\(\\):  request = %{GREEDYDATA:rating_curve_api_call}  response = \u003cResponse \\[%{NUMBER:rating_curve_api_response:int}\\]\u003e\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict_inner\\(\\):   request = %{GREEDYDATA:location_metadata_api_call}  response = \u003cResponse \\[%{NUMBER:location_metadata_api_response:int}\\]\u003e\"}\n        }\n\n        ##########################\n        ## Non-action Forecasts ##\n        ##########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecasts\\(\\):  adding downstream_lid = %{WORD:nonaction_nws_lid}\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecasts\\(\\):   downstream_lid = %{WORD:nonaction_nws_lid} is already in the action_forecast_lids list, so it will not be added\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecast_chunks\\(\\):  This is a current hour run. URL = %{GREEDYDATA:nonaction_forecast_api_call}\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecast_chunks\\(\\):  response = \u003cResponse \\[%{NUMBER:forecast_api_response:int}\\]\u003e\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecast_chunks\\(\\):  %{NUMBER:nonaction_forecasts_found:int} forecasts returned from  %{NUMBER:nonaction_forecasts_searched:int} nws location ids\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"\\*\\*\\*\\* _get_nonaction_forecasts\\(\\):  After comparing with action forecast list, ended up with new %{NUMBER:nonaction_nws_lids:int} NWS lids\"}\n        }\n\n        #########################\n        ## Forecast Point Dict ##\n        #########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict_inner\\(\\):  lid = %{WORD:nws_lid}, is_rfc_defined_fcst_point = %{WORD:defined_fcst_point}\"}\n            add_field =\u003e { \"forecast_point_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"NWS LID \\\"%{WORD:nws_lid}\\\" is not found in %{GREEDYDATA:gages_map_csv}\"}\n            add_field =\u003e { \"lid_in_gages_map\" =\u003e \"False\" }\n        }\n\n        ###########\n        ## Other ##\n        ###########\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict\\(\\):  Total processed lids = %{NUMBER:total_lids_processed:int}\"}\n        }\n\n        #####################\n        ## Field Mutations ##\n        #####################\n\n        mutate {\n            convert =\u003e {\n                \"rnr_process_status_code\" =\u003e \"integer\"\n                \"nws_lid_process_status_code\" =\u003e \"integer\"\n                \"forecast_point_status_code\" =\u003e \"integer\"\n            }\n        }\n\n        date {\n            match =\u003e [ \"latest_data_time\", \"YYYY-MM-dd HH:mm:ss\" ]\n            target =\u003e \"latest_data_time\"\n        }\n\n        if ![nws_lid] {\n            mutate {\n                remove_field =\u003e [\"forecast_category\"]\n            }\n        }\n    }\n}\n\n#############\n## Spin Up ##\n#############\n\nfilter {\n    if [hydrovis_application] == \"replace_route\" and [programname] == \"cloud-init\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up Rsyslog Configuration\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up RNR Mount\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 2 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing System Dependencies\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 3 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing Python Dependencies\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 4 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating Permissions\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 5 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing WRF-Hydro Files\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 6 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing Replace and Route\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 7 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing RNR Dependencies\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 8 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Copying Static Resources\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 9 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating Libnetcdf Link\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 10 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up RNR File Structure\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 11 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Copying Rendered Template File to Replace and Route\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 12 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up RNR Crontab\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 13 }\n        }  \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished Setup\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 14 }\n        } \n    }\n\n    mutate {\n        convert =\u003e {\n            \"rnr_spinup_status_code\" =\u003e \"integer\"\n        }\n    }\n}",
            "template": "filter {\n    if [hydrovis_application] == \"replace_route\" {\n        grok {\n            match =\u003e {\"message\" =\u003e \"%%{WORD:logger_level}    %%{WORD}.py %%{SPACE} %%{NUMBER}  : %%{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        grok {\n            match =\u003e {\"message\" =\u003e \"%%{WORD:logger_level} %%{WORD}.py %%{SPACE} %%{NUMBER}  : %%{GREEDYDATA:message}\"}\n            overwrite =\u003e [\"message\"]\n        }\n\n        mutate {\n            gsub =\u003e [ \"message\", \"#01\\d\", \" \" ]\n        }\n\n        if [logger_level] in [\"FATAL\", \"ERROR\"] {\n            mutate {\n                add_field =\u003e { \"rnr_process_status_code\" =\u003e 999 }\n            }\n        }\n\n\n        ######################\n        ## Main RnR Process ##\n        ######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"BEGINNING run_wrf_hydro\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Archiving old run instance directories at: '%%{GREEDYDATA:run_instance_dir}' to: '%%{GREEDYDATA:archive_dir}'\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Downloaded files for timestamp: %%{TIMESTAMP_ISO8601:latest_data_time}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 3 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_action_forecasts\\(\\):   response = \u003cResponse \\[%%{NUMBER:forecast_api_response:int}\\]\u003e\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 4 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecasts\\(\\):  conus_route_link_fpath = %%{GREEDYDATA:conus_routelink_path}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 5 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict\\(\\):  Original list of lids length = %%{NUMBER:total_forecast_points:int}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 6 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Succesfully generated route link file: %%{GREEDYDATA:route_link_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 7 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"SUCCESSFULLY generated nudging params file: %%{GREEDYDATA:nudging_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 8 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"LAKEPARM file successfully generated the subset file.  %%{GREEDYDATA:lakeparm_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 9 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"GWBUCKPARM file successfully generated. %%{GREEDYDATA:gwbuckparm_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 10 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"HYDRO_RST file successfully generated.  %%{GREEDYDATA:hydro_rst_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 11 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Successfully generated FORCING file: %%{GREEDYDATA:forcing_file}\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 12 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished creating %%{NUMBER:forcing_file_count:int} FORCING files\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 13 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Beginning WRF-Hydro execution with command: %%{GREEDYDATA:wfr_hydro_cmd} in directory: .*/(?\u003clatest_data_year\u003e[\\d.]{4})(?\u003clatest_data_month\u003e[\\d.]{2})(?\u003clatest_data_day\u003e[\\d.]{2})(?\u003clatest_data_hour\u003e[\\d.]{2})\"}\n            add_field =\u003e {\"latest_data_time\" =\u003e \"%%{latest_data_year}-%%{latest_data_month}-%%{latest_data_day} %%{latest_data_hour}:00:00\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 14 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Beginning nwm output processing\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 15 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished processing nwm output\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 16 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"FINISHED run_wrf_hydro\"}\n            add_field =\u003e { \"rnr_process_status_code\" =\u003e 17 }\n        }\n\n        ####################################\n        ## NWS LID Data Retrieval Process ##\n        ####################################\n\n        grok {\n            match =\u003e {\"message\" =\u003e \"_get_forecast_map_from_json_forecast\\(\\):  lid = %%{WORD:nws_lid}\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e {\"message\" =\u003e \"No rating curve found for %%{WORD:nws_lid}. Attempting to get official flow forecast...\"}\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"_getStreamFlowInTimeWindowByLidURL\\(\\)  url = %%{GREEDYDATA:streamflow_forecast_api_call}\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 2 }\n        }\n\n        if [streamflow_forecast_api_call] {\n            grok {\n                match =\u003e { \"streamflow_forecast_api_call\" =\u003e \"/nws_lid/%%{WORD:nws_lid}/\"}\n            }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"The latest flow forecast at %%{WORD:nws_lid} has no values above 0. Skipping...\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 998 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"There is no flow forecast available at %%{WORD:nws_lid} . Skipping...\"}\n            add_field =\u003e { \"nws_lid_process_status_code\" =\u003e 998 }\n        }\n\n        #######################\n        ## General API Calls ##\n        #######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_getAllStageActionDataInWindowURL\\(\\) endTime =  %%{TIMESTAMP_ISO8601:latest_data_time} windowInHours = %%{NUMBER:forecast_api_window:int}  original url = %%{GREEDYDATA:original_forecast_api_call}  newUrl = %%{GREEDYDATA:forecast_api_call}\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Returned lid count = %%{NUMBER:rating_curves_found:int} rating curves\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \" _get_rating_curves_map_inner\\(\\):  request = %%{GREEDYDATA:rating_curve_api_call}  response = \u003cResponse \\[%%{NUMBER:rating_curve_api_response:int}\\]\u003e\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict_inner\\(\\):   request = %%{GREEDYDATA:location_metadata_api_call}  response = \u003cResponse \\[%%{NUMBER:location_metadata_api_response:int}\\]\u003e\"}\n        }\n\n        ##########################\n        ## Non-action Forecasts ##\n        ##########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecasts\\(\\):  adding downstream_lid = %%{WORD:nonaction_nws_lid}\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecasts\\(\\):   downstream_lid = %%{WORD:nonaction_nws_lid} is already in the action_forecast_lids list, so it will not be added\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecast_chunks\\(\\):  This is a current hour run. URL = %%{GREEDYDATA:nonaction_forecast_api_call}\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecast_chunks\\(\\):  response = \u003cResponse \\[%%{NUMBER:forecast_api_response:int}\\]\u003e\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_get_nonaction_forecast_chunks\\(\\):  %%{NUMBER:nonaction_forecasts_found:int} forecasts returned from  %%{NUMBER:nonaction_forecasts_searched:int} nws location ids\"}\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"\\*\\*\\*\\* _get_nonaction_forecasts\\(\\):  After comparing with action forecast list, ended up with new %%{NUMBER:nonaction_nws_lids:int} NWS lids\"}\n        }\n\n        #########################\n        ## Forecast Point Dict ##\n        #########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict_inner\\(\\):  lid = %%{WORD:nws_lid}, is_rfc_defined_fcst_point = %%{WORD:defined_fcst_point}\"}\n            add_field =\u003e { \"forecast_point_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"NWS LID \\\"%%{WORD:nws_lid}\\\" is not found in %%{GREEDYDATA:gages_map_csv}\"}\n            add_field =\u003e { \"lid_in_gages_map\" =\u003e \"False\" }\n        }\n\n        ###########\n        ## Other ##\n        ###########\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"_create_forecast_point_dict\\(\\):  Total processed lids = %%{NUMBER:total_lids_processed:int}\"}\n        }\n\n        #####################\n        ## Field Mutations ##\n        #####################\n\n        mutate {\n            convert =\u003e {\n                \"rnr_process_status_code\" =\u003e \"integer\"\n                \"nws_lid_process_status_code\" =\u003e \"integer\"\n                \"forecast_point_status_code\" =\u003e \"integer\"\n            }\n        }\n\n        date {\n            match =\u003e [ \"latest_data_time\", \"YYYY-MM-dd HH:mm:ss\" ]\n            target =\u003e \"latest_data_time\"\n        }\n\n        if ![nws_lid] {\n            mutate {\n                remove_field =\u003e [\"forecast_category\"]\n            }\n        }\n    }\n}\n\n#############\n## Spin Up ##\n#############\n\nfilter {\n    if [hydrovis_application] == \"replace_route\" and [programname] == \"cloud-init\" {\n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up Rsyslog Configuration\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 1 }\n        }\n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up RNR Mount\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 2 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing System Dependencies\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 3 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing Python Dependencies\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 4 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating Permissions\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 5 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing WRF-Hydro Files\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 6 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing Replace and Route\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 7 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Installing RNR Dependencies\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 8 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Copying Static Resources\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 9 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating Libnetcdf Link\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 10 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up RNR File Structure\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 11 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Copying Rendered Template File to Replace and Route\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 12 }\n        } \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Setting up RNR Crontab\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 13 }\n        }  \n        \n        grok {\n            match =\u003e { \"message\" =\u003e \"Finished Setup\"}\n            add_field =\u003e { \"rnr_spinup_status_code\" =\u003e 14 }\n        } \n    }\n\n    mutate {\n        convert =\u003e {\n            \"rnr_spinup_status_code\" =\u003e \"integer\"\n        }\n    }\n}",
            "vars": {
              "es_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com",
              "parser_name": "rnr_logstash.conf",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "viz_logstash.conf.template",
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "a28b9d1b6b04674c4d3afbf319a31c164cd5be52c4eda3fe559291554156f476",
            "rendered": "input {\n    tcp {\n        port =\u003e 5000\n        type =\u003e \"viz\"\n    }\n}\n\nfilter {\n    ###################\n    # Message parsers #\n    ###################\n    if [type] == \"viz\" {\n        json {\n            source =\u003e \"message\"\n            target =\u003e \"logger_json\"\n            remove_field =\u003e \"message\"\n        }\n        mutate {\n            rename =\u003e { \"[logger_json][message]\" =\u003e \"message\" }\n        }\n    }\n}\n\nfilter {\n\n    ####################################\n    # Process/Watcher/Pipeline Parsers #\n    ####################################\n\n    if [type] == \"viz\" {\n        grok {\n            match =\u003e {\n                \"[logger_json][extra][logger_name]\" =\u003e [\n                    \"processing_pipeline\\.utils\\.process\\.%{GREEDYDATA:process}\",\n                    \"processing_pipeline\\.watcher\\.%{GREEDYDATA:watcher}\",\n                    \"processing_pipeline\\.manager\\.%{GREEDYDATA:pipeline}\",\n                    \"processing_pipeline\\.launcher\\.%{GREEDYDATA:process}\",\n                    \"process\\.%{GREEDYDATA:process}\",\n                    \"watcher\\.%{GREEDYDATA:watcher}\",\n                    \"manager\\.%{GREEDYDATA:pipeline}\",\n                    \"launcher\\.%{GREEDYDATA:process}\"\n                ]\n            }\n        }\n\n        grok {\n            match =\u003e {\n                \"[logger_json][extra][logger_name]\" =\u003e [\n                    \"processing_pipeline\\.watcher\\.%{GREEDYDATA:process}\",\n                    \"watcher\\.%{GREEDYDATA:process}\"\n                ]\n            }\n        }\n\n        if [host] =~ /ip-10-27-4-...ec2.internal/ {\n            mutate { add_field =\u003e { \"viz_environment\" =\u003e \"Development\" } }\n        }\n\n        if [host] =~ /ip-10-26-150-...ec2.internal/ {\n            mutate { add_field =\u003e { \"viz_environment\" =\u003e \"Staging\" } }\n        }\n\n        ######################\n        # Pipeline heartbeat #\n        ######################\n\n        if [process] {\n            grok {\n                match =\u003e { \"message\" =\u003e \"Heartbeat\" }\n                add_field =\u003e { \"metric_type\" =\u003e \"process_heartbeat\" }\n            }\n        }\n\n        ##########################\n        # Process/Watcher parser #\n        ##########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Process launched for %{TIMESTAMP_ISO8601:latest_data_time} by the %{GREEDYDATA:watcher} Watcher: %{GREEDYDATA:command}\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 0 }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 7 }\n            add_field =\u003e { \"service_status_code\" =\u003e 4 }\n            add_field =\u003e { \"metric_type\" =\u003e [\"process_status\", \"watcher_status\"] }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Process launched for %{TIMESTAMP_ISO8601:latest_data_time} by the %{GREEDYDATA:watcher} Watcher has exited\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 8 }\n            add_field =\u003e { \"service_status_code\" =\u003e 10 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        #######################\n        # Process log parsers #\n        #######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Execute function called for %{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 1 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_tag =\u003e [ \"processStarted\" ]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Validating workspace for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 2 }\n            add_field =\u003e { \"service_status_code\" =\u003e 5 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Executing processing for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 3 }\n            add_field =\u003e { \"service_status_code\" =\u003e 6 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating data for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 4 }\n            add_field =\u003e { \"service_status_code\" =\u003e 7 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating portal item for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\"}\n            add_field =\u003e { \"process_status_code\" =\u003e 5 }\n            add_field =\u003e { \"service_status_code\" =\u003e 8 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating service properties for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 6 }\n            add_field =\u003e { \"service_status_code\" =\u003e 9 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Successfully executed processing for %{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 7 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"latest_process_time\" }\n            add_tag =\u003e [ \"processFinished\" ]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Processing for %{TIMESTAMP_ISO8601:latest_data_time} failed\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"EGIS Log[:] type=%{GREEDYDATA:egis_type}[,] time=%{GREEDYDATA:egis_time}[,] message=%{GREEDYDATA:egis_message}[,] machine=%{GREEDYDATA:egis_machine}\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"egis_log\" }\n        }\n\n        elapsed {\n            start_tag =\u003e \"processStarted\"\n            end_tag =\u003e \"processFinished\"\n            unique_id_field =\u003e \"process\"\n            timeout =\u003e 6000\n        }\n\n        #######################\n        # Watcher log parsers #\n        #######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"A Watch for data corresponding to date %{TIMESTAMP_ISO8601:latest_data_time} will now begin.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 0 }\n        }\n\n         grok {\n            match =\u003e { \"message\" =\u003e \"Sleeping for %{NUMBER} seconds until data is expected\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 0 }\n        }\n\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Attempting to locate/fetch a batch of %{NUMBER} resources for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%{NUMBER:resources_fetched} of %{NUMBER:total_resources} resources for %{TIMESTAMP_ISO8601:latest_data_time} now available.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"download_progress\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"All resources for %{TIMESTAMP_ISO8601:latest_data_time} now available.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 3 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Polling files for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 1 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"One or more files available for %{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 2 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Pulling one or more files for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 3 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"All files available for %{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 4 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"latest_available_time\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Pulling all files for %{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 5 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Successfully pulled all files for %{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 6 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n          match =\u003e { \"message\" =\u003e \"The Watch for %{TIMESTAMP_ISO8601:latest_data_time} expired\" }\n        }\n\n        grok {\n          match =\u003e { \"message\" =\u003e \"Process launched for %{TIMESTAMP_ISO8601:latest_data_time} exited with return code 1.\" }\n        }\n\n        ##########################################\n        # ArcGIS Server service recovery parsers #\n        ##########################################\n\n        if [logger_json][extra][logger_name] == 'restart-arcgis-server-monitor' {\n            mutate { add_field =\u003e { \"metric_type\" =\u003e \"recover_monitor\" } }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Triggering \" }\n              add_field =\u003e { \"metric_type\" =\u003e \"recover_monitor\" }\n        }\n\n        #########################\n        # Configuration parsers #\n        #########################\n\n        grok {\n            break_on_match =\u003e false\n            match =\u003e {\n                \"process\" =\u003e \"(?\u003cconfiguration\u003e\\b\\w{3})_\"\n                \"watcher\" =\u003e \"(?\u003cconfiguration\u003e\\b\\w{3})_\"\n                \"pipeline\" =\u003e \"(?\u003cconfiguration\u003e\\b\\w{3})_\"\n            }\n        }\n\n        if ![configuration] {\n            mutate { add_field =\u003e { \"configuration\" =\u003e \"xxx\" } }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%{NUMBER:total_processes} processes are expected to be running.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"total_processes\" }\n        }\n\n        if [logger_json][level] == 'ERROR' {\n            mutate {\n                add_field =\u003e { \"service_status_code\" =\u003e 999 }\n                add_tag =\u003e [\"shouldmail\"]\n            }\n        }\n\n        #################\n        # Email parsers #\n        #################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"email_group:%{GREEDYDATA:email_group}--email_title:%{GREEDYDATA:email_title}--email_body:%{GREEDYDATA:email_body}\" }\n            add_tag =\u003e [\"shouldmail\"]\n        }\n\n        ##########################\n        # Resource Usage parsers #\n        ##########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%{GREEDYDATA:resource_process} Viz Service %{GREEDYDATA:resource_type} Usage - %{NUMBER:resource_usage} %{GREEDYDATA:resource_unit}\"}\n            add_field =\u003e { \"metric_type\" =\u003e \"viz_resource_usage\" }\n        }\n    }\n}\n\nfilter {\n    ###############################\n    # Drop all unnecessary fields #\n    ###############################\n    if [type] == \"viz\" {\n        mutate {\n            rename =\u003e { \"[logger_json][@timestamp]\" =\u003e \"temp_timestamp\" }\n            rename =\u003e { \"[logger_json][level]\" =\u003e \"temp_level\" }\n            remove_field =\u003e [\"logger_json\"]\n        }\n\n        mutate {\n            rename =\u003e { \"temp_timestamp\" =\u003e \"[logger_json][@timestamp]\" }\n            rename =\u003e { \"temp_level\" =\u003e \"[logger_json][level]\" }\n        }\n\n        #########################\n        # Data type conversions #\n        #########################\n\n        mutate {\n            convert =\u003e {\n                \"process_status_code\" =\u003e \"integer\"\n                \"watcher_status_code\" =\u003e \"integer\"\n                \"total_resources\" =\u003e \"integer\"\n                \"resources_fetched\" =\u003e \"integer\"\n                \"service_status_code\" =\u003e \"integer\"\n                \"total_processes\" =\u003e \"integer\"\n            }\n        }\n    }\n}\n\nfilter {\n    #############################\n    # Drop all unnecessary logs #\n    #############################\n    if [type] == \"viz\" {\n        if ![metric_type] and [logger_json][level] == 'INFO' {\n            drop { }\n        }\n    }\n}\n\noutput {\n    stdout {}\n    if [type] == \"viz\" {\n        amazon_es {\n            hosts =\u003e [\"vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com\"]\n            region =\u003e \"us-east-1\"\n            aws_access_key_id =\u003e ''\n            aws_secret_access_key =\u003e ''\n            index =\u003e \"nwmviz-%{+YYYY.MM}\"\n        }\n    }\n}\n\n",
            "template": "input {\n    tcp {\n        port =\u003e 5000\n        type =\u003e \"viz\"\n    }\n}\n\nfilter {\n    ###################\n    # Message parsers #\n    ###################\n    if [type] == \"viz\" {\n        json {\n            source =\u003e \"message\"\n            target =\u003e \"logger_json\"\n            remove_field =\u003e \"message\"\n        }\n        mutate {\n            rename =\u003e { \"[logger_json][message]\" =\u003e \"message\" }\n        }\n    }\n}\n\nfilter {\n\n    ####################################\n    # Process/Watcher/Pipeline Parsers #\n    ####################################\n\n    if [type] == \"viz\" {\n        grok {\n            match =\u003e {\n                \"[logger_json][extra][logger_name]\" =\u003e [\n                    \"processing_pipeline\\.utils\\.process\\.%%{GREEDYDATA:process}\",\n                    \"processing_pipeline\\.watcher\\.%%{GREEDYDATA:watcher}\",\n                    \"processing_pipeline\\.manager\\.%%{GREEDYDATA:pipeline}\",\n                    \"processing_pipeline\\.launcher\\.%%{GREEDYDATA:process}\",\n                    \"process\\.%%{GREEDYDATA:process}\",\n                    \"watcher\\.%%{GREEDYDATA:watcher}\",\n                    \"manager\\.%%{GREEDYDATA:pipeline}\",\n                    \"launcher\\.%%{GREEDYDATA:process}\"\n                ]\n            }\n        }\n\n        grok {\n            match =\u003e {\n                \"[logger_json][extra][logger_name]\" =\u003e [\n                    \"processing_pipeline\\.watcher\\.%%{GREEDYDATA:process}\",\n                    \"watcher\\.%%{GREEDYDATA:process}\"\n                ]\n            }\n        }\n\n        if [host] =~ /ip-10-27-4-...ec2.internal/ {\n            mutate { add_field =\u003e { \"viz_environment\" =\u003e \"Development\" } }\n        }\n\n        if [host] =~ /ip-10-26-150-...ec2.internal/ {\n            mutate { add_field =\u003e { \"viz_environment\" =\u003e \"Staging\" } }\n        }\n\n        ######################\n        # Pipeline heartbeat #\n        ######################\n\n        if [process] {\n            grok {\n                match =\u003e { \"message\" =\u003e \"Heartbeat\" }\n                add_field =\u003e { \"metric_type\" =\u003e \"process_heartbeat\" }\n            }\n        }\n\n        ##########################\n        # Process/Watcher parser #\n        ##########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Process launched for %%{TIMESTAMP_ISO8601:latest_data_time} by the %%{GREEDYDATA:watcher} Watcher: %%{GREEDYDATA:command}\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 0 }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 7 }\n            add_field =\u003e { \"service_status_code\" =\u003e 4 }\n            add_field =\u003e { \"metric_type\" =\u003e [\"process_status\", \"watcher_status\"] }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Process launched for %%{TIMESTAMP_ISO8601:latest_data_time} by the %%{GREEDYDATA:watcher} Watcher has exited\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 8 }\n            add_field =\u003e { \"service_status_code\" =\u003e 10 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        #######################\n        # Process log parsers #\n        #######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Execute function called for %%{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 1 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_tag =\u003e [ \"processStarted\" ]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Validating workspace for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 2 }\n            add_field =\u003e { \"service_status_code\" =\u003e 5 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Executing processing for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 3 }\n            add_field =\u003e { \"service_status_code\" =\u003e 6 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating data for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 4 }\n            add_field =\u003e { \"service_status_code\" =\u003e 7 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating portal item for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\"}\n            add_field =\u003e { \"process_status_code\" =\u003e 5 }\n            add_field =\u003e { \"service_status_code\" =\u003e 8 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Updating service properties for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 6 }\n            add_field =\u003e { \"service_status_code\" =\u003e 9 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Successfully executed processing for %%{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"process_status_code\" =\u003e 7 }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"latest_process_time\" }\n            add_tag =\u003e [ \"processFinished\" ]\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Processing for %%{TIMESTAMP_ISO8601:latest_data_time} failed\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"EGIS Log[:] type=%%{GREEDYDATA:egis_type}[,] time=%%{GREEDYDATA:egis_time}[,] message=%%{GREEDYDATA:egis_message}[,] machine=%%{GREEDYDATA:egis_machine}\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"egis_log\" }\n        }\n\n        elapsed {\n            start_tag =\u003e \"processStarted\"\n            end_tag =\u003e \"processFinished\"\n            unique_id_field =\u003e \"process\"\n            timeout =\u003e 6000\n        }\n\n        #######################\n        # Watcher log parsers #\n        #######################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"A Watch for data corresponding to date %%{TIMESTAMP_ISO8601:latest_data_time} will now begin.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 0 }\n        }\n\n         grok {\n            match =\u003e { \"message\" =\u003e \"Sleeping for %%{NUMBER} seconds until data is expected\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 0 }\n        }\n\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Attempting to locate/fetch a batch of %%{NUMBER} resources for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 1 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%%{NUMBER:resources_fetched} of %%{NUMBER:total_resources} resources for %%{TIMESTAMP_ISO8601:latest_data_time} now available.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"download_progress\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 2 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"All resources for %%{TIMESTAMP_ISO8601:latest_data_time} now available.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"process_status\" }\n            add_field =\u003e { \"service_status_code\" =\u003e 3 }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Polling files for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 1 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"One or more files available for %%{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 2 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Pulling one or more files for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 3 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"All files available for %%{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 4 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"latest_available_time\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Pulling all files for %%{TIMESTAMP_ISO8601:latest_data_time}[.][.][.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 5 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Successfully pulled all files for %%{TIMESTAMP_ISO8601:latest_data_time}[.]\" }\n            add_field =\u003e { \"watcher_status_code\" =\u003e 6 }\n            add_field =\u003e { \"metric_type\" =\u003e \"watcher_status\" }\n        }\n\n        grok {\n          match =\u003e { \"message\" =\u003e \"The Watch for %%{TIMESTAMP_ISO8601:latest_data_time} expired\" }\n        }\n\n        grok {\n          match =\u003e { \"message\" =\u003e \"Process launched for %%{TIMESTAMP_ISO8601:latest_data_time} exited with return code 1.\" }\n        }\n\n        ##########################################\n        # ArcGIS Server service recovery parsers #\n        ##########################################\n\n        if [logger_json][extra][logger_name] == 'restart-arcgis-server-monitor' {\n            mutate { add_field =\u003e { \"metric_type\" =\u003e \"recover_monitor\" } }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"Triggering \" }\n              add_field =\u003e { \"metric_type\" =\u003e \"recover_monitor\" }\n        }\n\n        #########################\n        # Configuration parsers #\n        #########################\n\n        grok {\n            break_on_match =\u003e false\n            match =\u003e {\n                \"process\" =\u003e \"(?\u003cconfiguration\u003e\\b\\w{3})_\"\n                \"watcher\" =\u003e \"(?\u003cconfiguration\u003e\\b\\w{3})_\"\n                \"pipeline\" =\u003e \"(?\u003cconfiguration\u003e\\b\\w{3})_\"\n            }\n        }\n\n        if ![configuration] {\n            mutate { add_field =\u003e { \"configuration\" =\u003e \"xxx\" } }\n        }\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%%{NUMBER:total_processes} processes are expected to be running.\" }\n            add_field =\u003e { \"metric_type\" =\u003e \"total_processes\" }\n        }\n\n        if [logger_json][level] == 'ERROR' {\n            mutate {\n                add_field =\u003e { \"service_status_code\" =\u003e 999 }\n                add_tag =\u003e [\"shouldmail\"]\n            }\n        }\n\n        #################\n        # Email parsers #\n        #################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"email_group:%%{GREEDYDATA:email_group}--email_title:%%{GREEDYDATA:email_title}--email_body:%%{GREEDYDATA:email_body}\" }\n            add_tag =\u003e [\"shouldmail\"]\n        }\n\n        ##########################\n        # Resource Usage parsers #\n        ##########################\n\n        grok {\n            match =\u003e { \"message\" =\u003e \"%%{GREEDYDATA:resource_process} Viz Service %%{GREEDYDATA:resource_type} Usage - %%{NUMBER:resource_usage} %%{GREEDYDATA:resource_unit}\"}\n            add_field =\u003e { \"metric_type\" =\u003e \"viz_resource_usage\" }\n        }\n    }\n}\n\nfilter {\n    ###############################\n    # Drop all unnecessary fields #\n    ###############################\n    if [type] == \"viz\" {\n        mutate {\n            rename =\u003e { \"[logger_json][@timestamp]\" =\u003e \"temp_timestamp\" }\n            rename =\u003e { \"[logger_json][level]\" =\u003e \"temp_level\" }\n            remove_field =\u003e [\"logger_json\"]\n        }\n\n        mutate {\n            rename =\u003e { \"temp_timestamp\" =\u003e \"[logger_json][@timestamp]\" }\n            rename =\u003e { \"temp_level\" =\u003e \"[logger_json][level]\" }\n        }\n\n        #########################\n        # Data type conversions #\n        #########################\n\n        mutate {\n            convert =\u003e {\n                \"process_status_code\" =\u003e \"integer\"\n                \"watcher_status_code\" =\u003e \"integer\"\n                \"total_resources\" =\u003e \"integer\"\n                \"resources_fetched\" =\u003e \"integer\"\n                \"service_status_code\" =\u003e \"integer\"\n                \"total_processes\" =\u003e \"integer\"\n            }\n        }\n    }\n}\n\nfilter {\n    #############################\n    # Drop all unnecessary logs #\n    #############################\n    if [type] == \"viz\" {\n        if ![metric_type] and [logger_json][level] == 'INFO' {\n            drop { }\n        }\n    }\n}\n\noutput {\n    stdout {}\n    if [type] == \"viz\" {\n        amazon_es {\n            hosts =\u003e [\"${es_endpoint}\"]\n            region =\u003e \"${region}\"\n            aws_access_key_id =\u003e ''\n            aws_secret_access_key =\u003e ''\n            index =\u003e \"nwmviz-%%{+YYYY.MM}\"\n        }\n    }\n}\n\n",
            "vars": {
              "es_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com",
              "parser_name": "viz_logstash.conf",
              "region": "us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "template_file",
      "name": "startup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "a15e26d7c36548764e4c8515caa49a11247a7e974cd6a32c38167388b7f6aeaa",
            "rendered": "#!/bin/bash\n\nrpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n\ncd /etc/yum.repos.d/\n\ncat \u003e logstash.repo \u003c\u003c EOF\n[logstash-7.x]\nname=Elastic repository for 7.x packages\nbaseurl=https://artifacts.elastic.co/packages/7.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=1\nautorefresh=1\ntype=rpm-md\nEOF\n\nyum -y install logstash-7.16.1\n\nusermod -a -G logstash ec2-user\n\nexport LS_JAVA_OPTS=\"-Xms1g -Xmx1g -XX:ParallelGCThreads=1\"\n\ncd /etc/logstash/conf.d\n\ncp /parsers/* .\n\n/usr/share/logstash/bin/logstash-plugin install logstash-filter-elapsed\n/usr/share/logstash/bin/logstash-plugin install --version 7.0.1 logstash-output-amazon_es\n\nmkdir ~/kibana_objects\ncd ~/kibana_objects\naws s3 cp --recursive s3://hydrovis-ti-deployment-us-east-1/monitoring/ .\nfor FILE in *; do curl -X POST \"https://vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com/_plugin/kibana/api/saved_objects/_import?overwrite=true\" -H \"kbn-xsrf: true\" --form file=@$FILE; done\n\nservice logstash start\n",
            "template": "#!/bin/bash\n\nrpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n\ncd /etc/yum.repos.d/\n\ncat \u003e logstash.repo \u003c\u003c EOF\n[logstash-7.x]\nname=Elastic repository for 7.x packages\nbaseurl=https://artifacts.elastic.co/packages/7.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=1\nautorefresh=1\ntype=rpm-md\nEOF\n\nyum -y install logstash-7.16.1\n\nusermod -a -G logstash ec2-user\n\nexport LS_JAVA_OPTS=\"-Xms1g -Xmx1g -XX:ParallelGCThreads=1\"\n\ncd /etc/logstash/conf.d\n\ncp /parsers/* .\n\n/usr/share/logstash/bin/logstash-plugin install logstash-filter-elapsed\n/usr/share/logstash/bin/logstash-plugin install --version 7.0.1 logstash-output-amazon_es\n\nmkdir ~/kibana_objects\ncd ~/kibana_objects\naws s3 cp --recursive s3://${deployment_bucket}/monitoring/ .\nfor FILE in *; do curl -X POST \"https://${es_endpoint}/_plugin/kibana/api/saved_objects/_import?overwrite=true\" -H \"kbn-xsrf: true\" --form file=@$FILE; done\n\nservice logstash start\n",
            "vars": {
              "deployment_bucket": "hydrovis-ti-deployment-us-east-1",
              "es_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "es_loggroup",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/OpenSearchService/domains/monitoring-hydrovis/application-logs",
            "id": "/aws/OpenSearchService/domains/monitoring-hydrovis/application-logs",
            "kms_key_id": "",
            "name": "/aws/OpenSearchService/domains/monitoring-hydrovis/application-logs",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "loggroup",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "HML_Receiver__ti",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/HML_Receiver__ti",
            "id": "/aws/lambda/HML_Receiver__ti",
            "kms_key_id": "",
            "name": "/aws/lambda/HML_Receiver__ti",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "viz_db_ingest_ti",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_db_ingest_ti",
            "id": "/aws/lambda/viz_db_ingest_ti",
            "kms_key_id": "",
            "name": "/aws/lambda/viz_db_ingest_ti",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_vpc.main",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "viz_db_postprocess_ti",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_db_postprocess_ti",
            "id": "/aws/lambda/viz_db_postprocess_ti",
            "kms_key_id": "",
            "name": "/aws/lambda/viz_db_postprocess_ti",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis"
          ]
        },
        {
          "index_key": "viz_huc_inundation_processing_ti",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_huc_inundation_processing_ti",
            "id": "/aws/lambda/viz_huc_inundation_processing_ti",
            "kms_key_id": "",
            "name": "/aws/lambda/viz_huc_inundation_processing_ti",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_route_table.private",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows"
          ]
        },
        {
          "index_key": "viz_inundation_parent_ti",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_inundation_parent_ti",
            "id": "/aws/lambda/viz_inundation_parent_ti",
            "kms_key_id": "",
            "name": "/aws/lambda/viz_inundation_parent_ti",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_vpc.main",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.secrets-manager.module.secret.random_password.password",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.mq-ingest.aws_mq_broker.ingest"
          ]
        },
        {
          "index_key": "viz_max_flows_ti",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_max_flows_ti",
            "id": "/aws/lambda/viz_max_flows_ti",
            "kms_key_id": "",
            "name": "/aws/lambda/viz_max_flows_ti",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_vpc.main",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_route_table.private",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest"
          ]
        },
        {
          "index_key": "viz_optimize_rasters_ti",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_optimize_rasters_ti",
            "id": "/aws/lambda/viz_optimize_rasters_ti",
            "kms_key_id": "",
            "name": "/aws/lambda/viz_optimize_rasters_ti",
            "name_prefix": null,
            "retention_in_days": 0,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_log_resource_policy",
      "name": "es_loggroup",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "es_loggroup",
            "policy_document": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"es.amazonaws.com\"},\"Action\":[\"logs:PutLogEvents\",\"logs:PutLogEventsBatch\",\"logs:CreateLogStream\"],\"Resource\":\"arn:aws:logs:*\"}]}",
            "policy_name": "es_loggroup"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_log_subscription_filter",
      "name": "logfilter",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "HML_Receiver__ti",
          "schema_version": 0,
          "attributes": {
            "destination_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "distribution": "ByLogStream",
            "filter_pattern": "?ELASTICSEARCH ?ERROR ?REPORT",
            "id": "cwlsf-2105077509",
            "log_group_name": "/aws/lambda/HML_Receiver__ti",
            "name": "HML_Receiver__ti_logfilter",
            "role_arn": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.monitoring.aws_cloudwatch_log_group.loggroup",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.monitoring.aws_lambda_permission.allow_cloudwatch",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.monitoring.data.archive_file.lambda_code",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.security-groups.aws_security_group.es-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy"
          ]
        },
        {
          "index_key": "viz_db_ingest_ti",
          "schema_version": 0,
          "attributes": {
            "destination_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "distribution": "ByLogStream",
            "filter_pattern": "?ELASTICSEARCH ?ERROR ?REPORT",
            "id": "cwlsf-1787333929",
            "log_group_name": "/aws/lambda/viz_db_ingest_ti",
            "name": "viz_db_ingest_ti_logfilter",
            "role_arn": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.monitoring.aws_cloudwatch_log_group.loggroup",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.monitoring.aws_lambda_permission.allow_cloudwatch",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.monitoring.data.archive_file.lambda_code",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_route_table.private",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "viz_db_postprocess_ti",
          "schema_version": 0,
          "attributes": {
            "destination_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "distribution": "ByLogStream",
            "filter_pattern": "?ELASTICSEARCH ?ERROR ?REPORT",
            "id": "cwlsf-2608545211",
            "log_group_name": "/aws/lambda/viz_db_postprocess_ti",
            "name": "viz_db_postprocess_ti_logfilter",
            "role_arn": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.monitoring.aws_cloudwatch_log_group.loggroup",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.es-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.monitoring.aws_lambda_permission.allow_cloudwatch",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.monitoring.data.archive_file.lambda_code",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a"
          ]
        },
        {
          "index_key": "viz_huc_inundation_processing_ti",
          "schema_version": 0,
          "attributes": {
            "destination_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "distribution": "ByLogStream",
            "filter_pattern": "?ELASTICSEARCH ?ERROR ?REPORT",
            "id": "cwlsf-3239506307",
            "log_group_name": "/aws/lambda/viz_huc_inundation_processing_ti",
            "name": "viz_huc_inundation_processing_ti_logfilter",
            "role_arn": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.security-groups.aws_security_group.es-sg",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_vpc.main",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.monitoring.data.archive_file.lambda_code",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.monitoring.aws_lambda_permission.allow_cloudwatch",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.monitoring.aws_cloudwatch_log_group.loggroup",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.vpc.aws_route_table.private"
          ]
        },
        {
          "index_key": "viz_inundation_parent_ti",
          "schema_version": 0,
          "attributes": {
            "destination_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "distribution": "ByLogStream",
            "filter_pattern": "?ELASTICSEARCH ?ERROR ?REPORT",
            "id": "cwlsf-8498167",
            "log_group_name": "/aws/lambda/viz_inundation_parent_ti",
            "name": "viz_inundation_parent_ti_logfilter",
            "role_arn": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.secrets-manager.module.secret.random_password.password",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.monitoring.aws_cloudwatch_log_group.loggroup",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.monitoring.aws_lambda_permission.allow_cloudwatch",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.monitoring.data.archive_file.lambda_code",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_route_table.private"
          ]
        },
        {
          "index_key": "viz_max_flows_ti",
          "schema_version": 0,
          "attributes": {
            "destination_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "distribution": "ByLogStream",
            "filter_pattern": "?ELASTICSEARCH ?ERROR ?REPORT",
            "id": "cwlsf-1002062364",
            "log_group_name": "/aws/lambda/viz_max_flows_ti",
            "name": "viz_max_flows_ti_logfilter",
            "role_arn": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_route_table.private",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.monitoring.aws_cloudwatch_log_group.loggroup",
            "module.monitoring.aws_lambda_permission.allow_cloudwatch",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.monitoring.data.archive_file.lambda_code",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3"
          ]
        },
        {
          "index_key": "viz_optimize_rasters_ti",
          "schema_version": 0,
          "attributes": {
            "destination_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "distribution": "ByLogStream",
            "filter_pattern": "?ELASTICSEARCH ?ERROR ?REPORT",
            "id": "cwlsf-600549688",
            "log_group_name": "/aws/lambda/viz_optimize_rasters_ti",
            "name": "viz_optimize_rasters_ti_logfilter",
            "role_arn": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.monitoring.aws_cloudwatch_log_group.loggroup",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.monitoring.aws_lambda_permission.allow_cloudwatch",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_route_table.private",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.monitoring.data.archive_file.lambda_code",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_elasticsearch_domain",
      "name": "es",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_policies": "{\"Statement\":[{\"Action\":\"es:*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:es:us-east-1:526904826677:domain/monitoring-hydrovis/*\"}],\"Version\":\"2012-10-17\"}",
            "advanced_options": {
              "override_main_response_version": "false",
              "rest.action.multi.allow_explicit_index": "true"
            },
            "advanced_security_options": [
              {
                "enabled": false,
                "internal_user_database_enabled": false,
                "master_user_options": []
              }
            ],
            "arn": "arn:aws:es:us-east-1:526904826677:domain/monitoring-hydrovis",
            "cluster_config": [
              {
                "dedicated_master_count": 0,
                "dedicated_master_enabled": false,
                "dedicated_master_type": "",
                "instance_count": 2,
                "instance_type": "r5.large.elasticsearch",
                "warm_count": 0,
                "warm_enabled": false,
                "warm_type": "",
                "zone_awareness_config": [
                  {
                    "availability_zone_count": 2
                  }
                ],
                "zone_awareness_enabled": true
              }
            ],
            "cognito_options": [
              {
                "enabled": false,
                "identity_pool_id": "",
                "role_arn": "",
                "user_pool_id": ""
              }
            ],
            "domain_endpoint_options": [
              {
                "custom_endpoint": "",
                "custom_endpoint_certificate_arn": "",
                "custom_endpoint_enabled": false,
                "enforce_https": false,
                "tls_security_policy": "Policy-Min-TLS-1-0-2019-07"
              }
            ],
            "domain_id": "526904826677/monitoring-hydrovis",
            "domain_name": "monitoring-hydrovis",
            "ebs_options": [
              {
                "ebs_enabled": true,
                "iops": 0,
                "volume_size": 100,
                "volume_type": "gp2"
              }
            ],
            "elasticsearch_version": "7.10",
            "encrypt_at_rest": [
              {
                "enabled": false,
                "kms_key_id": ""
              }
            ],
            "endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com",
            "id": "arn:aws:es:us-east-1:526904826677:domain/monitoring-hydrovis",
            "kibana_endpoint": "vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com/_plugin/kibana/",
            "log_publishing_options": [
              {
                "cloudwatch_log_group_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/OpenSearchService/domains/monitoring-hydrovis/application-logs",
                "enabled": true,
                "log_type": "ES_APPLICATION_LOGS"
              }
            ],
            "node_to_node_encryption": [
              {
                "enabled": false
              }
            ],
            "snapshot_options": [
              {
                "automated_snapshot_start_hour": 23
              }
            ],
            "tags": {
              "Domain": "monitoring-hydrovis",
              "name": "monitoring-hydrovis"
            },
            "tags_all": {
              "Domain": "monitoring-hydrovis",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "name": "monitoring-hydrovis",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_options": [
              {
                "availability_zones": [
                  "us-east-1a",
                  "us-east-1b"
                ],
                "security_group_ids": [
                  "sg-0819bb099e848af6d"
                ],
                "subnet_ids": [
                  "subnet-0712c2c2742111aa1",
                  "subnet-0d1ea9ca66f139cfc"
                ],
                "vpc_id": "vpc-07a4518f4ecda4131"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsidXBkYXRlIjozNjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "LambdaforElasticsearch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/LambdaforElasticsearch",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2021-12-20T20:37:20Z",
            "description": "",
            "force_detach_policies": false,
            "id": "LambdaforElasticsearch",
            "inline_policy": [
              {
                "name": "LambdaforElasticsearch",
                "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"es:DescribeReservedElasticsearchInstanceOfferings\",\n        \"es:DeletePackage\",\n        \"es:ListElasticsearchInstanceTypeDetails\",\n        \"es:ListDomainsForPackage\",\n        \"es:CreateElasticsearchServiceRole\",\n        \"es:UpdatePackage\",\n        \"es:RejectInboundCrossClusterSearchConnection\",\n        \"es:GetPackageVersionHistory\",\n        \"es:PurchaseReservedElasticsearchInstanceOffering\",\n        \"es:DeleteElasticsearchServiceRole\",\n        \"es:AcceptInboundCrossClusterSearchConnection\",\n        \"es:DescribeInboundCrossClusterSearchConnections\",\n        \"es:DescribeReservedElasticsearchInstances\",\n        \"es:ListDomainNames\",\n        \"es:CreatePackage\",\n        \"es:DescribePackages\",\n        \"es:DeleteInboundCrossClusterSearchConnection\",\n        \"es:ListElasticsearchInstanceTypes\",\n        \"es:DescribeOutboundCrossClusterSearchConnections\",\n        \"es:ListElasticsearchVersions\",\n        \"es:DescribeElasticsearchInstanceTypeLimits\",\n        \"es:DeleteOutboundCrossClusterSearchConnection\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"arn:aws:es:us-east-1:526904826677:domain/monitoring-hydrovis\"\n    }\n  ]\n}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
            ],
            "max_session_duration": 3600,
            "name": "LambdaforElasticsearch",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "unique_id": "AROAXVLPZTM2VJWLHXHSJ"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "LambdaforElasticsearch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "LambdaforElasticsearch:LambdaforElasticsearch",
            "name": "LambdaforElasticsearch",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"es:DescribeReservedElasticsearchInstanceOfferings\",\n        \"es:DeletePackage\",\n        \"es:ListElasticsearchInstanceTypeDetails\",\n        \"es:ListDomainsForPackage\",\n        \"es:CreateElasticsearchServiceRole\",\n        \"es:UpdatePackage\",\n        \"es:RejectInboundCrossClusterSearchConnection\",\n        \"es:GetPackageVersionHistory\",\n        \"es:PurchaseReservedElasticsearchInstanceOffering\",\n        \"es:DeleteElasticsearchServiceRole\",\n        \"es:AcceptInboundCrossClusterSearchConnection\",\n        \"es:DescribeInboundCrossClusterSearchConnections\",\n        \"es:DescribeReservedElasticsearchInstances\",\n        \"es:ListDomainNames\",\n        \"es:CreatePackage\",\n        \"es:DescribePackages\",\n        \"es:DeleteInboundCrossClusterSearchConnection\",\n        \"es:ListElasticsearchInstanceTypes\",\n        \"es:DescribeOutboundCrossClusterSearchConnections\",\n        \"es:ListElasticsearchVersions\",\n        \"es:DescribeElasticsearchInstanceTypeLimits\",\n        \"es:DeleteOutboundCrossClusterSearchConnection\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"arn:aws:es:us-east-1:526904826677:domain/monitoring-hydrovis\"\n    }\n  ]\n}",
            "role": "LambdaforElasticsearch"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.monitoring.data.template_file.LambdaforElasticsearch-template"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "AWSLambdaVPCAccessExecutionRole",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "LambdaforElasticsearch-20211220203730739700000002",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole",
            "role": "LambdaforElasticsearch"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.monitoring.aws_iam_role.LambdaforElasticsearch"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_iam_service_linked_role",
      "name": "es",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::526904826677:role/aws-service-role/es.amazonaws.com/AWSServiceRoleForAmazonElasticsearchService",
            "aws_service_name": "es.amazonaws.com",
            "create_date": "2021-12-20T20:56:32Z",
            "custom_suffix": "",
            "description": "",
            "id": "arn:aws:iam::526904826677:role/aws-service-role/es.amazonaws.com/AWSServiceRoleForAmazonElasticsearchService",
            "name": "AWSServiceRoleForAmazonElasticsearchService",
            "path": "/aws-service-role/es.amazonaws.com/",
            "unique_id": "AROAXVLPZTM2SWOOQO3DK"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_instance",
      "name": "logstash",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-025b76b777024295e",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-0ec1626e10b041d36",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": true,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "HydrovisSSMInstanceProfileRole",
            "id": "i-0ec1626e10b041d36",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t3.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0906e2281b4eb7eec",
            "private_dns": "ip-10-26-150-5.ec2.internal",
            "private_ip": "10.26.150.5",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0e18ed8cadae66b13",
                "volume_size": 12,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0bce7b6e5f96548cf",
            "tags": {
              "Name": "hv-ti-logstash",
              "OS": "Linux"
            },
            "tags_all": {
              "Name": "hv-ti-logstash",
              "OS": "Linux",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "61d29e584c5d63becebbf55240a22e00d96b1a6e",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0819bb099e848af6d",
              "sg-0874e1b42d1981b59"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.monitoring.data.template_file.startup",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.monitoring.aws_elasticsearch_domain.es",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.monitoring.data.template_file.parser_templates",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.monitoring.data.aws_ami.linux",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_instance_profile.HydrovisSSMInstanceProfileRole",
            "module.monitoring.data.cloudinit_config.startup",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.es-sg"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "CWLogsToElasticsearch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "CloudWatch Logs to Amazon ES streaming",
            "environment": [],
            "file_system_config": [],
            "filename": "ELASTICSEARCH/lambda_code.zip",
            "function_name": "CWLogsToElasticsearch",
            "handler": "index.handler",
            "id": "CWLogsToElasticsearch",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T20:26:30.708+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:CWLogsToElasticsearch:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/LambdaforElasticsearch",
            "runtime": "nodejs12.x",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "c5lnSYXew0tWdsx8s0qXLvRIEKWn4sG0LjmaSzjnBOQ=",
            "source_code_size": 6573,
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 300,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": [
              {
                "security_group_ids": [
                  "sg-0819bb099e848af6d"
                ],
                "subnet_ids": [
                  "subnet-0712c2c2742111aa1",
                  "subnet-0d1ea9ca66f139cfc"
                ],
                "vpc_id": "vpc-07a4518f4ecda4131"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.monitoring.data.archive_file.lambda_code",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_cloudwatch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "HML_Receiver__ti",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "CWLogsToElasticsearch",
            "id": "terraform-20211220211156098800000003",
            "principal": "logs.us-east-1.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/HML_Receiver__ti:*",
            "statement_id": "terraform-20211220211156098800000003",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.security-groups.aws_security_group.es-sg",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_vpc.main",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.monitoring.data.archive_file.lambda_code",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3"
          ]
        },
        {
          "index_key": "viz_db_ingest_ti",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "CWLogsToElasticsearch",
            "id": "terraform-2022011920263026160000000a",
            "principal": "logs.us-east-1.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_db_ingest_ti:*",
            "statement_id": "terraform-2022011920263026160000000a",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.security-groups.aws_security_group.es-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.monitoring.data.archive_file.lambda_code",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.rasterio"
          ]
        },
        {
          "index_key": "viz_db_postprocess_ti",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "CWLogsToElasticsearch",
            "id": "terraform-2022011920263026290000000b",
            "principal": "logs.us-east-1.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_db_postprocess_ti:*",
            "statement_id": "terraform-2022011920263026290000000b",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.monitoring.data.archive_file.lambda_code",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.vpc.aws_vpc.main",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.security-groups.aws_security_group.es-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b"
          ]
        },
        {
          "index_key": "viz_huc_inundation_processing_ti",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "CWLogsToElasticsearch",
            "id": "terraform-20211220211157974300000007",
            "principal": "logs.us-east-1.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_huc_inundation_processing_ti:*",
            "statement_id": "terraform-20211220211157974300000007",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.es-sg",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.monitoring.data.archive_file.lambda_code",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis"
          ]
        },
        {
          "index_key": "viz_inundation_parent_ti",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "CWLogsToElasticsearch",
            "id": "terraform-20211220211156099500000004",
            "principal": "logs.us-east-1.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_inundation_parent_ti:*",
            "statement_id": "terraform-20211220211156099500000004",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.monitoring.data.archive_file.lambda_code",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.secrets-manager.module.secret.random_password.password",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.security-groups.aws_security_group.egis-overlord"
          ]
        },
        {
          "index_key": "viz_max_flows_ti",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "CWLogsToElasticsearch",
            "id": "terraform-20211220211157380000000006",
            "principal": "logs.us-east-1.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_max_flows_ti:*",
            "statement_id": "terraform-20211220211157380000000006",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.security-groups.aws_security_group.es-sg",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.monitoring.data.archive_file.lambda_code",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_route_table.private",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a"
          ]
        },
        {
          "index_key": "viz_optimize_rasters_ti",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "CWLogsToElasticsearch",
            "id": "terraform-20211220211157378600000005",
            "principal": "logs.us-east-1.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:logs:us-east-1:526904826677:log-group:/aws/lambda/viz_optimize_rasters_ti:*",
            "statement_id": "terraform-20211220211157378600000005",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.monitoring.data.archive_file.lambda_code",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.pika",
            "module.monitoring.aws_lambda_function.CWLogsToElasticsearch",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.ingest_lambda_functions.aws_lambda_function.hml_reciever",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_vpc.main",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.monitoring.aws_iam_role.LambdaforElasticsearch",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "local_file",
      "name": "lambda_code_index",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "const viz_js = require(\"viz_js\");\n\n// v1.1.2\nvar https = require('https');\nvar zlib = require('zlib');\nvar crypto = require('crypto');\n\nvar endpoint = 'vpc-monitoring-hydrovis-wg3lcthkjhwjtim6obc2fgqipu.us-east-1.es.amazonaws.com';\n\n// Set this to true if you want to debug why data isn't making it to\n// your Elasticsearch cluster. This will enable logging of failed items\n// to CloudWatch Logs.\nvar logFailedResponses = true;\n\nexports.handler = function(input, context) {\n    // decode input from base64\n    var zippedInput = new Buffer.from(input.awslogs.data, 'base64');\n\n    // decompress the input\n    zlib.gunzip(zippedInput, function(error, buffer) {\n        if (error) { context.fail(error); return; }\n\n        // parse the input from JSON\n        var awslogsData = JSON.parse(buffer.toString('utf8'));\n\n        // transform the input to Elasticsearch documents\n        var elasticsearchBulkData = transform(awslogsData);\n\n        // skip control messages\n        if (!elasticsearchBulkData) {\n            console.log('Received a control message');\n            context.succeed('Control message handled successfully');\n            return;\n        }\n\n        // post documents to the Amazon Elasticsearch Service\n        post(elasticsearchBulkData, function(error, success, statusCode, failedItems) {\n            console.log('Response: ' + JSON.stringify({\n                \"statusCode\": statusCode\n            }));\n\n            if (error) {\n                logFailure(error, failedItems);\n                context.fail(JSON.stringify(error));\n            } else {\n                console.log('Success: ' + JSON.stringify(success));\n                context.succeed('Success');\n            }\n        });\n    });\n};\n\nfunction transform(payload) {\n    if (payload.messageType === 'CONTROL_MESSAGE') {\n        return null;\n    }\n\n    var bulkRequestBody = '';\n\n    payload.logEvents.forEach(function(logEvent) {\n        var timestamp = new Date(1 * logEvent.timestamp);\n\n        // index name format: cwl-YYYY.MM\n        var indexName = [\n            'cwl' + payload.logGroup.toLowerCase().split('/').join('-') + '-' + timestamp.getUTCFullYear(),              // year\n            ('0' + (timestamp.getUTCMonth() + 1)).slice(-2)  // month\n        ].join('.');\n\n        var source = buildSource(logEvent.message, logEvent.extractedFields);\n        source['@id'] = logEvent.id;\n        source['@timestamp'] = new Date(1 * logEvent.timestamp).toISOString();\n        source['@message'] = logEvent.message;\n        source['@owner'] = payload.owner;\n        source['@log_group'] = payload.logGroup;\n        source['@log_stream'] = payload.logStream;\n\n        source = viz_js.parse_viz_logs(source, payload.logGroup, logEvent.message)\n\n        var action = { \"index\": {} };\n        action.index._index = indexName;\n        action.index._type = payload.logGroup;\n        action.index._id = logEvent.id;\n\n        bulkRequestBody += [\n            JSON.stringify(action),\n            JSON.stringify(source),\n        ].join('\\n') + '\\n';\n    });\n    return bulkRequestBody;\n}\n\nfunction buildSource(message, extractedFields) {\n    if (extractedFields) {\n        var source = {};\n\n        for (var key in extractedFields) {\n            if (extractedFields.hasOwnProperty(key) \u0026\u0026 extractedFields[key]) {\n                var value = extractedFields[key];\n\n                if (isNumeric(value)) {\n                    source[key] = 1 * value;\n                    continue;\n                }\n\n                var jsonSubString = extractJson(value);\n                if (jsonSubString !== null) {\n                    source['$' + key] = JSON.parse(jsonSubString);\n                }\n\n                source[key] = value;\n            }\n        }\n        return source;\n    }\n\n    var jsonSubString = extractJson(message);\n    if (jsonSubString !== null) {\n        return JSON.parse(jsonSubString);\n    }\n\n    return {};\n}\n\nfunction extractJson(message) {\n    var jsonStart = message.indexOf('{');\n    if (jsonStart \u003c 0) return null;\n    var jsonSubString = message.substring(jsonStart);\n    return isValidJson(jsonSubString) ? jsonSubString : null;\n}\n\nfunction isValidJson(message) {\n    try {\n        JSON.parse(message);\n    } catch (e) { return false; }\n    return true;\n}\n\nfunction isNumeric(n) {\n    return !isNaN(parseFloat(n)) \u0026\u0026 isFinite(n);\n}\n\nfunction post(body, callback) {\n    var requestParams = buildRequest(endpoint, body);\n\n    var request = https.request(requestParams, function(response) {\n        var responseBody = '';\n        response.on('data', function(chunk) {\n            responseBody += chunk;\n        });\n\n        response.on('end', function() {\n            var info = JSON.parse(responseBody);\n            var failedItems;\n            var success;\n            var error;\n\n            if (response.statusCode \u003e= 200 \u0026\u0026 response.statusCode \u003c 299) {\n                failedItems = info.items.filter(function(x) {\n                    return x.index.status \u003e= 300;\n                });\n\n                success = {\n                    \"attemptedItems\": info.items.length,\n                    \"successfulItems\": info.items.length - failedItems.length,\n                    \"failedItems\": failedItems.length\n                };\n            }\n\n            if (response.statusCode !== 200 || info.errors === true) {\n                // prevents logging of failed entries, but allows logging\n                // of other errors such as access restrictions\n                delete info.items;\n                error = {\n                    statusCode: response.statusCode,\n                    responseBody: info\n                };\n            }\n\n            callback(error, success, response.statusCode, failedItems);\n        });\n    }).on('error', function(e) {\n        callback(e);\n    });\n    request.end(requestParams.body);\n}\n\nfunction buildRequest(endpoint, body) {\n    var endpointParts = endpoint.match(/^([^\\.]+)\\.?([^\\.]*)\\.?([^\\.]*)\\.amazonaws\\.com$/);\n    var region = endpointParts[2];\n    var service = endpointParts[3];\n    var datetime = (new Date()).toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n    var date = datetime.substr(0, 8);\n    var kDate = hmac('AWS4' + process.env.AWS_SECRET_ACCESS_KEY, date);\n    var kRegion = hmac(kDate, region);\n    var kService = hmac(kRegion, service);\n    var kSigning = hmac(kService, 'aws4_request');\n\n    var request = {\n        host: endpoint,\n        method: 'POST',\n        path: '/_bulk',\n        body: body,\n        headers: {\n            'Content-Type': 'application/json',\n            'Host': endpoint,\n            'Content-Length': Buffer.byteLength(body),\n            'X-Amz-Security-Token': process.env.AWS_SESSION_TOKEN,\n            'X-Amz-Date': datetime\n        }\n    };\n\n    var canonicalHeaders = Object.keys(request.headers)\n        .sort(function(a, b) { return a.toLowerCase() \u003c b.toLowerCase() ? -1 : 1; })\n        .map(function(k) { return k.toLowerCase() + ':' + request.headers[k]; })\n        .join('\\n');\n\n    var signedHeaders = Object.keys(request.headers)\n        .map(function(k) { return k.toLowerCase(); })\n        .sort()\n        .join(';');\n\n    var canonicalString = [\n        request.method,\n        request.path, '',\n        canonicalHeaders, '',\n        signedHeaders,\n        hash(request.body, 'hex'),\n    ].join('\\n');\n\n    var credentialString = [ date, region, service, 'aws4_request' ].join('/');\n\n    var stringToSign = [\n        'AWS4-HMAC-SHA256',\n        datetime,\n        credentialString,\n        hash(canonicalString, 'hex')\n    ] .join('\\n');\n\n    request.headers.Authorization = [\n        'AWS4-HMAC-SHA256 Credential=' + process.env.AWS_ACCESS_KEY_ID + '/' + credentialString,\n        'SignedHeaders=' + signedHeaders,\n        'Signature=' + hmac(kSigning, stringToSign, 'hex')\n    ].join(', ');\n\n    return request;\n}\n\nfunction hmac(key, str, encoding) {\n    return crypto.createHmac('sha256', key).update(str, 'utf8').digest(encoding);\n}\n\nfunction hash(str, encoding) {\n    return crypto.createHash('sha256').update(str, 'utf8').digest(encoding);\n}\n\nfunction logFailure(error, failedItems) {\n    if (logFailedResponses) {\n        console.log('Error: ' + JSON.stringify(error, null, 2));\n\n        if (failedItems \u0026\u0026 failedItems.length \u003e 0) {\n            console.log(\"Failed Items: \" +\n                JSON.stringify(failedItems, null, 2));\n        }\n    }\n}\n",
            "content_base64": null,
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "ELASTICSEARCH/lambda_code/index.js",
            "id": "96c5e05dbfb9c5933839f8f34d9ccda86b597354",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.monitoring.aws_elasticsearch_domain.es",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.monitoring.data.template_file.lambda_code_index_template",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_main_route_table_association.main_private"
          ]
        }
      ]
    },
    {
      "module": "module.mq-ingest",
      "mode": "managed",
      "type": "aws_mq_broker",
      "name": "ingest",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "apply_immediately": true,
            "arn": "arn:aws:mq:us-east-1:526904826677:broker:hydrovis-ti-dataingest-rabbitmq-b224ef:b-f983c38b-7a9b-40b7-836c-2a87ec24b303",
            "authentication_strategy": "simple",
            "auto_minor_version_upgrade": true,
            "broker_name": "hydrovis-ti-dataingest-rabbitmq-b224ef",
            "configuration": [],
            "deployment_mode": "SINGLE_INSTANCE",
            "encryption_options": [
              {
                "kms_key_id": "",
                "use_aws_owned_key": true
              }
            ],
            "engine_type": "RabbitMQ",
            "engine_version": "3.8.23",
            "host_instance_type": "mq.t3.micro",
            "id": "b-f983c38b-7a9b-40b7-836c-2a87ec24b303",
            "instances": [
              {
                "console_url": "https://b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com",
                "endpoints": [
                  "amqps://b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com:5671"
                ],
                "ip_address": ""
              }
            ],
            "ldap_server_metadata": [],
            "logs": [
              {
                "audit": "",
                "general": true
              }
            ],
            "maintenance_window_start_time": [
              {
                "day_of_week": "THURSDAY",
                "time_of_day": "21:00",
                "time_zone": "UTC"
              }
            ],
            "publicly_accessible": false,
            "security_groups": [
              "sg-0b710d40b356de030"
            ],
            "storage_type": "ebs",
            "subnet_ids": [
              "subnet-0712c2c2742111aa1"
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "user": []
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "broker_name"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "user"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "data",
      "type": "aws_ami",
      "name": "linux",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-025b76b777024295e",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-0a876d9af57e76134",
                  "throughput": "0",
                  "volume_size": "12",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-11-19T21:49:21.000Z",
            "description": "add docker for stig",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-amznlinux2-STIGD*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-025b76b777024295e",
            "image_id": "ami-025b76b777024295e",
            "image_location": "526904826677/hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": null,
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-0a876d9af57e76134",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/amzn-linux2-stig-test/1.0.4/24",
              "Name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
              "OS": "Linux",
              "TaskOrderId": "1305L420FNWWJ0136",
              "hydrovis-sys": "admin-security",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydroviz",
              "vpc": "dev"
            },
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "data",
      "type": "cloudinit_config",
      "name": "startup",
      "provider": "provider[\"registry.terraform.io/hashicorp/cloudinit\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": true,
            "boundary": "MIMEBOUNDARY",
            "gzip": true,
            "id": "691989015",
            "part": [
              {
                "content": "#!/bin/bash\n\necho \"---- SETTING UP INGEST DB ----\"\n\nFORECASTDB=\"rfcfcst\"\nLOCATIONDB=\"wrds_location3\"\nDBHOST=\"hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\"\nDBPORT=5432\nDBUSERNAME=\"postgres\"\nDBPASSWORD=\"V4qCVyLf7UAhIOipBTDNVQ9Er\"\nDEPLOYMENT_BUCKET=\"hydrovis-ti-deployment-us-east-1\"\nINGESTDBUSERS=\"rfc_fcst, rfc_fcst_ro\"\nLOCATIONDBUSERS=\"rfc_fcst_ro, location_ro_user_grp\"\n\n### install postgresql ###\nsudo yum install -y postgresql12\n\n### Constants ###\nHOME=\"/home/ec2-user\"\nPGPASS=\"${HOME}/.pgpass\"\nHML_S3_PREFIX=\"ingest/database\"\nPOSTGIS_SCRIPT=\"postgis_setup.sql\"\nUSERS_SCRIPT=\"ingest_users.sql\"\nBASE_SCRIPT=\"${FORECASTDB}_base.sql.gz\"\nLOCATION_S3_PREFIX=\"location/database\"\nLOCATION_DUMP=\"wrds_location3.dump\"\nDOWNLOAD_DIRECTORY=\"${HOME}/postgres_data\"\nPOSTGIS_FILE=\"${DOWNLOAD_DIRECTORY}/${POSTGIS_SCRIPT}\"\nBASE_FILE=\"${DOWNLOAD_DIRECTORY}/${BASE_SCRIPT}\"\nUSERS_FILE=\"/deploy_files/${USERS_SCRIPT}\"\nLOCATION_FILE=\"${DOWNLOAD_DIRECTORY}/${LOCATION_DUMP}\"\nDROP_DATABASE=0\nREMOVE_BASE_FILE=0\nREMOVE_USERS_FILE=0\nREMOVE_DIRECTORY=0\n\nexport PGPASSWORD=${DBPASSWORD}\n\n### Create/validate pgpass file ###\nfunction create_pgpass()\n{\n  local FOUND=0\n  local DBPASSLINE=\"${DBHOST}:*:*:${DBUSERNAME}:${DBPASSWORD}\"\n  ### Check to see if file is present, and if so, validate it ###\n  if [ -f \"${DBPASS}\" ]\n  then\n    while IFS= read -r LINE\n    do\n      if [ \"${LINE}\" = \"${DBPASSLINE}\" ]\n      then\n        FOUND=1\n        break \n      fi\n    done \u003c \"${DBPASS}\"\n    if [ ${FOUND} -eq 0 ]\n    then\n      echo \"Appending line to ${DBPASS}\"\n      echo \"${DBPASSLINE}\" \u003e\u003e \"${DBPASS}\"\n    else\n      echo \"Matching entry found in ${DBPASS}. No need to modify.\"\n    fi\n  else\n    echo \"Creating new ${DBPASS}...\"\n    echo \"${DBPASSLINE}\" \u003e \"${DBPASS}\"\n  fi\n\n  chmod 600 \"${DBPASS}\"\n}\n\n# Create PGPASS\ncreate_pgpass\n\n# Download database contents\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT} ${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${BASE_SCRIPT}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${BASE_SCRIPT} ${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${LOCATION_S3_PREFIX}/${LOCATION_DUMP}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${LOCATION_S3_PREFIX}/${LOCATION_DUMP} ${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\nREMOVE_USERS_FILE=1\n\n# Uncompress\ngzip -d \"${BASE_FILE}\"\nBASE_FILE=\"${BASE_FILE/.gz}\"\n\n# Setting up DB\necho \"Setting up postgis..\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${FORECASTDB}\" -f \"${POSTGIS_FILE}\"\n\n# Update users\necho \"Creating users...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT}  -d \"${FORECASTDB}\" -f \"${USERS_FILE}\"\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT}  -d \"${FORECASTDB}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE ${FORECASTDB} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE ${FORECASTDB} to ${INGESTDBUSERS};\n            COMMENT ON DATABASE ${FORECASTDB} IS \n            'database for storing river forecasts';\"\n\n# Create table schemas for HML Ingest\necho \"Setting up HML ingest on ${PGHOST}...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${FORECASTDB}\" -f \"${BASE_FILE}\"\n\n# Dump WRDS Location\necho \"Setting up WRDS Location on ${PGHOST}...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -d \"${FORECASTDB}\" -c \"\\c\" -c \"create database ${LOCATIONDB};\"\npg_restore -h \"${DBHOST}\" -p ${DBPORT} -d \"${LOCATIONDB}\" -U ${DBUSERNAME} -v ${LOCATION_FILE}\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${LOCATIONDB}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE ${LOCATIONDB} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE ${LOCATIONDB} to ${LOCATIONDBUSERS};\n            COMMENT ON DATABASE ${LOCATIONDB} IS \n            'database for storing location metadata';\"\n\nDROP_DATABASE=0\n\n\n\n",
                "content_type": "text/x-shellscript",
                "filename": "ingest_postgresql_setup.sh",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\n\necho \"---- SETTING UP RABBITMQ ----\"\n\nMQINGESTENDPOINT=\"amqps://b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com:5671\"\nMQUSERNAME=\"rabbit_admin\"\nMQPASSWORD=\"RoepAxEwk93zHWj64EikbuSdM\"\nRFC_FCST_USER=\"rfc_fcst_user\"\nRFC_FCST_USER_PASSWORD=\"urkZ6DiRqC4jRPjX6sbAnx8Nq\"\nMQVHOST=\"testing_integration\"\n\n### Get RabbitMQ Endpoint ###\nRSCHEME=\"${MQINGESTENDPOINT/:*}\"\nRPORT=\"${MQINGESTENDPOINT##*:}\"\nRHOST=$(echo ${MQINGESTENDPOINT} | cut -d : -f 2 | tr -d \"/\")\n\necho \"Adding ${MQVHOST} vhost to ${RHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     \"https://${RHOST}/api/vhosts/${MQVHOST}\"\n\necho \"Removing default vhost to ${RHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X DELETE \"https://${RHOST}/api/vhosts/%2f\"\n\necho \"Adding ${RFC_FCST_USER} to ${RHOST}\"\ncurl --trace-ascii /dev/stdout -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"password\":\"'\"${RFC_FCST_USER_PASSWORD}\"'\",\"tags\":\"none\"}' \\\n     \"https://${RHOST}/api/users/${RFC_FCST_USER}\"\n\necho \"Adding hml_event_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"dl.hml\",\"x-dead-letter-routing-key\":\"dl_hml_event_queue\"}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/hml_event_queue\"\n\necho \"Adding xml_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"dl.hml\",\"x-dead-letter-routing-key\":\"dl_xml_queue\"}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/xml_queue\"\n\necho \"Adding dl_xml_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"hml\",\"x-dead-letter-routing-key\":\"xml_queue\",\"x-message-ttl\":60000}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/dl_xml_queue\"\n\necho \"Adding dl_hml_event_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"hml\",\"x-dead-letter-routing-key\":\"hml_event_queue\",\"x-message-ttl\":900000}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/dl_hml_event_queue\"\n\necho \"Adding dl.hml exchange for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"internal\": false,\"arguments\":{}}' \\\n     \"https://${RHOST}/api/exchanges/${MQVHOST}/dl.hml\"\n\necho \"Adding hml exchange for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"internal\": false,\"arguments\":{}}' \\\n     \"https://${RHOST}/api/exchanges/${MQVHOST}/hml\"\n\necho \"Binding dl.hml exchange to dl_hml_event_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"dl_hml_event_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/dl.hml/q/dl_hml_event_queue\"\n\necho \"Binding dl.hml exchange to dl_xml_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"dl_xml_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/dl.hml/q/dl_xml_queue\"\n\necho \"Binding hml exchange to hml_event_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"hml_event_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/hml/q/hml_event_queue\"\n\necho \"Binding hml exchange to xml_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"xml_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/hml/q/xml_queue\"\n\necho \"Updating permissions for ${RFC_FCST_USER}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"configure\":\".*\",\"write\":\".*\",\"read\":\".*\"}' \\\n     \"https://${RHOST}/api/permissions/${MQVHOST}/${RFC_FCST_USER}\"\n",
                "content_type": "text/x-shellscript",
                "filename": "rabbitmq_setup.sh",
                "merge_type": ""
              },
              {
                "content": "#!/bin/bash\n\necho \"---- SETTING UP VIZ DB ----\"\n\nDBNAME=\"vizprocessing\"\nDBHOST=\"hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com\"\nDBPORT=5432\nDBUSERNAME=\"postgres\"\nDBPASSWORD=\"Qno8ZJOzpLvP439BmckSwBipr\"\nDEPLOYMENT_BUCKET=\"hydrovis-ti-deployment-us-east-1\"\nDBUSERS=\"viz_proc_admin_rw_user\"\nHOME=\"/home/ec2-user\"\n\n### install postgresql ###\nsudo yum install -y postgresql12\n\n### Constants ###\nDBPASS=\"${HOME}/.pgpass\"\nHML_S3_PREFIX=\"ingest/database\"\nPOSTGIS_SCRIPT=\"postgis_setup.sql\"\nSETUP_SCRIPT=\"viz_setup.sql\"\nSERVICES_CSV=\"viz/db_pipeline/services.csv\"\nCONUS_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels.csv\"\nHI_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels_hi.csv\"\nPRVI_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels_prvi.csv\"\nCONUS_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v21_recurrence_flows.csv\"\nHI_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v20_recurrence_flows_hawaii.csv\"\nPRVI_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v21_recurrence_flows_prvi.csv\"\nDOWNLOAD_DIRECTORY=\"${HOME}/postgres_data\"\nPOSTGIS_FILE=\"${DOWNLOAD_DIRECTORY}/${POSTGIS_SCRIPT}\"\nSETUP_FILE=\"/deploy_files/${SETUP_SCRIPT}\"\nDROP_DATABASE=0\nREMOVE_BASE_FILE=0\nREMOVE_SETUP_FILE=0\nREMOVE_DIRECTORY=0\n\nexport PGPASSWORD=${DBPASSWORD}\n\n### Create/validate DBpass file ###\nfunction create_pgpass()\n{\n  local FOUND=0\n  local DBPASSLINE=\"${DBHOST}:*:*:${DBUSERNAME}:${DBPASSWORD}\"\n  ### Check to see if file is present, and if so, validate it ###\n  if [ -f \"${DBPASS}\" ]\n  then\n    while IFS= read -r LINE\n    do\n      if [ \"${LINE}\" = \"${DBPASSLINE}\" ]\n      then\n        FOUND=1\n        break \n      fi\n    done \u003c \"${DBPASS}\"\n    if [ ${FOUND} -eq 0 ]\n    then\n      echo \"Appending line to ${DBPASS}\"\n      echo \"${DBPASSLINE}\" \u003e\u003e \"${DBPASS}\"\n    else\n      echo \"Matching entry found in ${DBPASS}. No need to modify.\"\n    fi\n  else\n    echo \"Creating new ${DBPASS}...\"\n    echo \"${DBPASSLINE}\" \u003e \"${DBPASS}\"\n  fi\n\n  chmod 600 \"${DBPASS}\"\n}\n\n# Create DBPASS\ncreate_pgpass\n\n# Download database contents\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT} ${DOWNLOAD_DIRECTORY}/\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${SERVICES_CSV} \"${HOME}/services.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${CONUS_CH_CSV} \"${HOME}/nwm_v21_web_mercator_channels.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HI_CH_CSV} \"${HOME}/nwm_v21_web_mercator_channels_hi.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${PRVI_CH_CSV} \"${HOME}/nwm_v21_web_mercator_channels_prvi.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${CONUS_RF_CSV} \"${HOME}/nwm_v21_recurrence_flows.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HI_RF_CSV} \"${HOME}/nwm_v20_recurrence_flows_hawaii.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${PRVI_RF_CSV} \"${HOME}/nwm_v21_recurrence_flows_prvi.csv\"\n\n# Setting up DB\necho \"Setting up postgis..\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${DBNAME}\" -f \"${POSTGIS_FILE}\"\n\n# Update users\necho \"Setting up DB...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${DBNAME}\" -f \"${SETUP_FILE}\"\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${DBNAME}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE ${DBNAME} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE ${DBNAME} to ${DBUSERS};\n            COMMENT ON DATABASE ${DBNAME} IS \n            'database for visualizatoin services';\"\n\nDROP_DATABASE=0\n\n",
                "content_type": "text/x-shellscript",
                "filename": "viz_postgresql_setup.sh",
                "merge_type": ""
              },
              {
                "content": "#cloud-config\n{\"write_files\":[{\"content\":\"-- ROLES\\n\\nCREATE ROLE nwm_viz_ro;\\nALTER ROLE nwm_viz_ro WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD 'SCx5stbA6pQs16c80YM7eD09H';\\nCOMMENT ON ROLE rfc_fcst IS 'Read-write group role for the Viz databases';\\n\\nCREATE ROLE rfc_fcst;\\nALTER ROLE rfc_fcst WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS ENCRYPTED PASSWORD 'U5m9XQRB6emGUdAThpsVEf8FV';\\nCOMMENT ON ROLE rfc_fcst IS 'Read-write group role for the RFC Forecast databases';\\n\\nCREATE ROLE rfc_fcst_ro_user;\\nALTER ROLE rfc_fcst_ro_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '0EtLa8gbAB6VWyPBiY3yLfyT9';\\nCOMMENT ON ROLE rfc_fcst_ro_user IS 'Read-only user role for the RFC Forecast databases';\\n\\nCREATE ROLE rfc_fcst_user;\\nALTER ROLE rfc_fcst_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS ENCRYPTED PASSWORD 'urkZ6DiRqC4jRPjX6sbAnx8Nq';\\nCOMMENT ON ROLE rfc_fcst_user IS 'Read-write user role for the RFC Forecast databases';\\n\\nCREATE ROLE location_ro_user;\\nALTER ROLE location_ro_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '1WsSGw8XcGIfqYplZ3K9hd05T';\\nCOMMENT ON ROLE location_ro_user IS 'Read-only user role for the Location databases';\\n\\nCREATE ROLE wrds_svc_rw_user;\\nALTER ROLE wrds_svc_rw_user WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\\nCOMMENT ON ROLE wrds_svc_rw_user IS 'Read-write user role for the Location databases';\\n\\n-- GROUPS\\n\\nCREATE ROLE rfc_fcst_ro;\\nALTER ROLE rfc_fcst_ro WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\\nCOMMENT ON ROLE rfc_fcst_ro IS 'Read-only group role for the RFC Forecast databases';\\n\\nCREATE ROLE location_ro_user_grp;\\nALTER ROLE location_ro_user_grp WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\\nCOMMENT ON ROLE location_ro_user_grp IS 'Read-only group role for the Location databases';\\n\\nCREATE ROLE nwm_ro_user_grp;\\nALTER ROLE nwm_ro_user_grp WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\\nCOMMENT ON ROLE nwm_ro_user_grp IS 'Read-only group role for the Location databases';\\n\\n-- GROUP ASSIGNMENT\\n\\nGRANT rfc_fcst_ro TO rfc_fcst_ro_user ;\\nGRANT rfc_fcst TO rfc_fcst_user ;\\nGRANT rfc_fcst_ro TO nwm_viz_ro ;\\nGRANT location_ro_user_grp TO location_ro_user ;\\n\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/deploy_files/ingest_users.sql\",\"permissions\":\"0400\"},{\"content\":\"-- ROLES\\n\\nCREATE ROLE viz_proc_admin_rw_user;\\nALTER ROLE viz_proc_admin_rw_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD 'QLQW31ZxL0CuE78Rm1lvjYTWg';\\n\\n-- Create the schemas\\nCREATE SCHEMA admin;\\nCREATE SCHEMA ingest;\\nCREATE SCHEMA derived;\\nCREATE SCHEMA cache;\\nCREATE SCHEMA publish;\\n\\n-- Create the ingest status table\\nCREATE TABLE admin.ingest_status (\\n        target character varying(100) NOT NULL,\\n        reference_time timestamp without time zone,\\n        status character varying(25),\\n        update_time timestamp without time zone,\\n        files_processed integer,\\n        records_imported bigint,\\n        insert_time_minutes double precision\\n);\\nALTER TABLE admin.ingest_status OWNER TO viz_proc_admin_rw_user;\\n\\n-- Create the publish status table\\nCREATE TABLE admin.publish_status (\\n        service character varying(100) NOT NULL,\\n        reference_time timestamp without time zone,\\n        pp_complete_time timestamp without time zone,\\n        publish_action character varying(100)\\n);\\nALTER TABLE admin.publish_status OWNER TO viz_proc_admin_rw_user;\\n\\n-- Create the service table\\nCREATE TABLE IF NOT EXISTS admin.services\\n(\\n    service text COLLATE pg_catalog.\\\"default\\\",\\n    folder text COLLATE pg_catalog.\\\"default\\\",\\n    configuration text COLLATE pg_catalog.\\\"default\\\",\\n    data_sources text COLLATE pg_catalog.\\\"default\\\",\\n    ingest_table text COLLATE pg_catalog.\\\"default\\\",\\n    postprocess_parents text COLLATE pg_catalog.\\\"default\\\",\\n    name text COLLATE pg_catalog.\\\"default\\\",\\n    summary text COLLATE pg_catalog.\\\"default\\\",\\n    description text COLLATE pg_catalog.\\\"default\\\",\\n    tags text COLLATE pg_catalog.\\\"default\\\",\\n    credits text COLLATE pg_catalog.\\\"default\\\",\\n    run boolean,\\n    feature_service boolean\\n);\\nALTER TABLE admin.services OWNER TO viz_proc_admin_rw_user;\\n\\n\\\\copy admin.services from /home/ec2-user/services.csv delimiter ',' csv header;\\n\\n-- Create the nwm data tables\\n    \\n-------- CONUS tables --------\\nCREATE TABLE ingest.nwm_channel_rt_ana (\\n    feature_id integer,\\n    forecast_hour integer,\\n    streamflow double precision\\n);\\nALTER TABLE ingest.nwm_channel_rt_ana OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE ingest.nwm_channel_rt_mrf_mem1 (\\n    feature_id integer,\\n    forecast_hour integer,\\n    streamflow double precision\\n);\\nALTER TABLE ingest.nwm_channel_rt_mrf_mem1 OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE ingest.nwm_channel_rt_srf (\\n    feature_id integer,\\n    forecast_hour integer,\\n    streamflow double precision\\n);\\nALTER TABLE ingest.nwm_channel_rt_srf OWNER TO viz_proc_admin_rw_user;\\n\\n-------- HI tables --------\\nCREATE TABLE ingest.nwm_channel_rt_ana_hi (\\n    feature_id integer,\\n    forecast_hour integer,\\n    streamflow double precision\\n);\\nALTER TABLE ingest.nwm_channel_rt_ana_hi OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE ingest.nwm_channel_rt_srf_hi (\\n    feature_id integer,\\n    forecast_hour integer,\\n    streamflow double precision\\n);\\nALTER TABLE ingest.nwm_channel_rt_srf_hi OWNER TO viz_proc_admin_rw_user;\\n\\n-------- PRVI tables --------\\nCREATE TABLE ingest.nwm_channel_rt_ana_prvi (\\n    feature_id integer,\\n    forecast_hour integer,\\n    streamflow double precision\\n);\\nALTER TABLE ingest.nwm_channel_rt_ana_prvi OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE ingest.nwm_channel_rt_srf_prvi (\\n    feature_id integer,\\n    forecast_hour integer,\\n    streamflow double precision\\n);\\nALTER TABLE ingest.nwm_channel_rt_srf_prvi OWNER TO viz_proc_admin_rw_user;\\n\\n-- Create the recurrence flows tables\\nCREATE TABLE derived.recurrence_flows_conus (\\n    feature_id integer NOT NULL,\\n    rf_1_5 double precision,\\n    rf_2_0 double precision,\\n    rf_3_0 double precision,\\n    rf_4_0 double precision,\\n    rf_5_0 double precision,\\n    rf_10_0 double precision,\\n    rf_2_0_17c double precision,\\n    rf_5_0_17c double precision,\\n    rf_10_0_17c double precision,\\n    rf_25_0_17c double precision,\\n    rf_50_0_17c double precision,\\n    rf_100_0_17c double precision\\n);\\nALTER TABLE derived.recurrence_flows_conus OWNER TO viz_proc_admin_rw_user;\\n\\n\\\\copy derived.recurrence_flows_conus from /home/ec2-user/nwm_v21_recurrence_flows.csv delimiter ',' csv header;\\nCREATE INDEX idx_rf_featureid ON derived.recurrence_flows_conus (feature_id);\\nALTER TABLE derived.recurrence_flows_conus ADD COLUMN bankfull DOUBLE PRECISION; \\nUPDATE derived.recurrence_flows_conus SET bankfull = rf_2_0_17c;\\n\\nCREATE TABLE derived.recurrence_flows_hi (\\n    feature_id integer NOT NULL,\\n    rf_2_0 double precision,\\n    rf_5_0 double precision,\\n    rf_10_0 double precision,\\n    rf_25_0 double precision,\\n    rf_50_0 double precision,\\n    rf_100_0 double precision,\\n    rf_500_0 double precision,\\n    huc6 text\\n);\\nALTER TABLE derived.recurrence_flows_hi OWNER TO viz_proc_admin_rw_user;\\n\\n\\\\copy derived.recurrence_flows_hi from /home/ec2-user/nwm_v20_recurrence_flows_hawaii.csv delimiter ',' csv header;\\nCREATE INDEX idx_rf_hi_featureid ON derived.recurrence_flows_hi (feature_id);\\nALTER TABLE derived.recurrence_flows_hi ADD COLUMN bankfull DOUBLE PRECISION; \\nUPDATE derived.recurrence_flows_hi SET bankfull = rf_2_0;\\n\\nCREATE TABLE derived.recurrence_flows_prvi (\\n    feature_id integer NOT NULL,\\n    rf_2_0 double precision,\\n    rf_5_0 double precision,\\n    rf_10_0 double precision,\\n    rf_25_0 double precision,\\n    rf_50_0 double precision,\\n    rf_100_0 double precision,\\n    rf_500_0 double precision,\\n    huc6 text\\n);\\nALTER TABLE derived.recurrence_flows_prvi OWNER TO viz_proc_admin_rw_user;\\n\\n\\\\copy derived.recurrence_flows_prvi from /home/ec2-user/nwm_v21_recurrence_flows_prvi.csv delimiter ',' csv header;\\nCREATE INDEX idx_rf_prvi_featureid ON derived.recurrence_flows_prvi USING btree (feature_id);\\nALTER TABLE derived.recurrence_flows_prvi ADD COLUMN bankfull DOUBLE PRECISION; \\nUPDATE derived.recurrence_flows_prvi SET bankfull = rf_2_0;\\n\\n-- Create the channels tables\\nCREATE TABLE derived.channels_conus\\n(\\n    feature_id integer PRIMARY KEY,\\n    strm_order bigint,\\n    name character varying(100),\\n    huc6 text,\\n    nwm_vers double precision,\\n    geom geometry\\n);\\nALTER TABLE derived.channels_conus OWNER TO viz_proc_admin_rw_user;\\n\\n\\\\copy derived.channels_conus from /home/ec2-user/nwm_v21_web_mercator_channels.csv delimiter ',' csv header;\\nCREATE INDEX idx_ch_featureid ON derived.channels_conus USING btree (feature_id);\\n\\nCREATE TABLE derived.channels_hi\\n(\\n    feature_id integer PRIMARY KEY,\\n    strm_order bigint,\\n    name character varying(100),\\n    huc6 text,\\n    nwm_vers double precision,\\n    geom geometry\\n);\\nALTER TABLE derived.channels_hi OWNER TO viz_proc_admin_rw_user;\\n\\n\\\\copy derived.channels_hi from /home/ec2-user/nwm_v21_web_mercator_channels_hi.csv delimiter ',' csv header;\\nCREATE INDEX idx_ch_hi_featureid ON derived.channels_hi USING btree (feature_id);\\n\\nCREATE TABLE derived.channels_prvi\\n(\\n    feature_id integer PRIMARY KEY,\\n    strm_order bigint,\\n    name character varying(100),\\n    huc6 text,\\n    nwm_vers double precision,\\n    geom geometry\\n);\\nALTER TABLE derived.channels_prvi OWNER TO viz_proc_admin_rw_user;\\n\\n\\\\copy derived.channels_prvi from /home/ec2-user/nwm_v21_web_mercator_channels_prvi.csv delimiter ',' csv header;\\nCREATE INDEX idx_ch_prvi_featureid ON derived.channels_prvi USING btree (feature_id);\\n\\n-- Create the FIM channels tables\\nCREATE TABLE derived.fim_channels_conus\\n(\\n    hydro_id integer PRIMARY KEY,\\n    huc6 text,\\n    fim_vers double precision,\\n    geom geometry\\n);\\nALTER TABLE derived.fim_channels_conus OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE derived.fim_channels_hi\\n(\\n    hydro_id integer PRIMARY KEY,\\n    huc6 text,\\n    fim_vers double precision,\\n    geom geometry\\n);\\nALTER TABLE derived.fim_channels_hi OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE derived.fim_channels_prvi\\n(\\n    hydro_id integer PRIMARY KEY,\\n    huc6 text,\\n    fim_vers double precision,\\n    geom geometry\\n);\\nALTER TABLE derived.fim_channels_prvi OWNER TO viz_proc_admin_rw_user;\\n\\n-- Create the max flows tables.\\nCREATE TABLE cache.max_flows_ana (\\n    feature_id integer,\\n    maxflow_1hour double precision\\n);\\nALTER TABLE cache.max_flows_ana OWNER TO viz_proc_admin_rw_user;\\n    \\nCREATE TABLE cache.max_flows_ana_hi (\\n    feature_id integer,\\n    maxflow_1hour double precision\\n);\\nALTER TABLE cache.max_flows_ana_hi OWNER TO viz_proc_admin_rw_user;\\n    \\nCREATE TABLE cache.max_flows_ana_prvi (\\n    feature_id integer,\\n    maxflow_1hour double precision\\n);\\nALTER TABLE cache.max_flows_ana_prvi OWNER TO viz_proc_admin_rw_user;\\n    \\nCREATE TABLE cache.max_flows_mrf (\\n    feature_id integer,\\n    maxflow_3day double precision,\\n    maxflow_5day double precision,\\n    maxflow_10day double precision\\n);\\nALTER TABLE cache.max_flows_mrf OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE cache.max_flows_srf (\\n    feature_id integer,\\n    maxflow_18hour double precision\\n);\\nALTER TABLE cache.max_flows_srf OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE cache.max_flows_srf_hi (\\n    feature_id integer,\\n    maxflow_48hour double precision\\n);\\nALTER TABLE cache.max_flows_srf_hi OWNER TO viz_proc_admin_rw_user;\\n\\nCREATE TABLE cache.max_flows_srf_prvi(\\n    feature_id integer,\\n    maxflow_48hour double precision\\n);\\nALTER TABLE cache.max_flows_srf_prvi OWNER TO viz_proc_admin_rw_user;\\n\\n-- Grant Schemas to User\\n\\nGRANT ALL ON ALL TABLES IN SCHEMA admin TO viz_proc_admin_rw_user;\\nGRANT ALL ON ALL TABLES IN SCHEMA ingest TO viz_proc_admin_rw_user;\\nGRANT ALL ON ALL TABLES IN SCHEMA derived TO viz_proc_admin_rw_user;\\nGRANT ALL ON ALL TABLES IN SCHEMA cache TO viz_proc_admin_rw_user;\\nGRANT ALL ON ALL TABLES IN SCHEMA publish TO viz_proc_admin_rw_user;\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/deploy_files/viz_setup.sql\",\"permissions\":\"0400\"}]}\n",
                "content_type": "text/cloud-config",
                "filename": "cloud-config.yaml",
                "merge_type": ""
              }
            ],
            "rendered": "H4sIAAAAAAAA/+x8a3PbOLL2d1bNf8DL5C3PTJmSfI2jHG+VLrStM7qFkpx41lssiIREJLwZBOXb6r+fAngRSVESJdub7Oz6gx0RQKP7wdPdANhKw7Epsqk0fHRRFVi+SbELCS1b+AHpn8DY8W0dksdzsdPqyPXeqNusKTeiwD5J14h42LGr4KBU+UX4RZCkZKdfhEh2E3uu42HK+0JKoWZYyKafwASbyIYWOhexPUUeVV3Ho1OCvDtT9RD13ZJniAs5QwJtb4KIJNuao2N7WgUfxpgmOnAjKHqg5QfJM5BpehrBLv1F6GALLen77v+Vx9guj6FnCALSDAeIkiRJYCAPh63uJRj1Qat7KQ+GoFkHrEUUhIueIjdqg2Gzfi6SiTbRPCoK7V6jNmz1uuzhPdE91XQ0yMw9EoVm/ao3GJ6LxqNOnBn2JIqlwNqSdjx7enSRa39/OCr5noSgR6WDEtG9ErTgk2PDe6+kORYT0u8pw/OT46NDoVkfDWSlW+vI52KEF+9RGwy+9JTmuXh9fNe4fmxPPoxqRquH3fqw2b3+/FEmotCU++3eTUfuDtX6qPGHnFFMR67pPLLFkWJ9RCEAIZh3wM1Wmd37IPqXSpwkCJl+KnH2QYSIShzV9xBRp8QVBeHdu3cA2x6FpgkWiw/evXsneL7ugEffitulx0SXg8NgcMNhrTb1+JirHkOlbDgWKiPtUGIziUL/kmFzLr5/Zu3zcsmdutDzROGq01YHR2pfkS9aXyMSlnVI4Rh6SBT6vcHwsjVQBw2l1R+GcGMv4uadKQrc1rhDSGM2rRe012sDOW5+/7ygz1xlc7BOpenTAr2kPhFmCY3ibs1Rp58lW0n3LVcUmr0v3Xav1lSbLUVuDHvKzcL0CECViVwYeNFqy6zT8tB5+f1zGoZ5aNT6MQm75xFKwYhyQDKVOb9Xfv+cRHCesHC9/BQQc1FoKr2+2qwNa2zi84qgyJ3etawuNI0fJXSJny2QqggCenAdQkHAGu5R758X7jUPeUcQpKg8gybWIUUgoBSPaJyJE9/W2KIAjXdUg/ZffxOeBcCdwQQXLFCeV+LPwRztVjcwm8eNefX36u9V9ily+nk1pY0oAMD1MZD2HVAHeAgBPAkUwR5wCfKQTfcBtHX23HP2Qaw0plxXwBr+DqQJECPZcxH8QwCAGsgWAADg3mDyWheDc0AQ1IFEAFOUt+kO/xNKEd8/s5a5CM4X4sIn/wg7xmLZTwDDQfx5TBD8DsKPExxOYSPwP0n1hHhC5lSjbnMOJHQHKuEciRmCwF5zXWSznAFMbCMGVEZW1DGj8t/+tjQrMj2UGtKBVDOYaGRT8ggmLGcCbC9mKIGuA2yEdDav5eh48lgKZHH7YoGBOE4tJs5G9wkZpXBIvpoZLSdYEADQDMvRwWmlkmplDA75G5JcSJGUNTede9t0oA6i0AO0IMd6YaKMOjA9vaNqufz+eSm3MD9NhdicYMLNgvce8I6A5r5IFMiPFcuh4EB4qRHJ6PYSC5Jy3k795dyyHEG3sKKIuG2MWY7LB4yCI1tzLBa+PGH6hF0g6YzF8chsGoo/lEvTpznbWoABotyPfBc06yFmiWdhNmeGu2zTIRlgEXdFII2Cj3HgFYHkBv7YU4bzUJ9EQhfDCJpMqoEiI5eHW74tEDJOHuwVdlVitRYLOBM6sAldRCzssY1wpMslgTZvip3dRDNkJnu+qoK3PI5JtKYBUZGve3/IoNHrduXGEPS6IEriIDUKXCi9DuiP6u1W41OcK9jPpVLrDgsI4CE/tZWdpwU1eh3G9DUiWgOQGrEXAzZxCPCoQxiKBM8QYU+QBj3q7X0SEwGXwrGJgKcZyIIeH3bVaYMW3zcuU5S1BXtK4LB80r/ksO+8GivZknQrFv59ywVflOYAtMPN5bJuqebd1cvRSAPirRb8DRLTgpiLONOszz+JgjtVCWLAo6W5lu1ODOW6pFQB0iwhPcDiB/pNjsaF3SYxaje3SQrgbpM52xVynKSQYo4THWSAhShkPbjrZHf2gvCyqwYCx2NMrbuf5IZBqdXrrWHnc3TB0PkcxCi52+z3Wt3huQitO9erlstjafLx7Eg7OhtLH+DHsXRcGX+Qzo5ONekQnn1A2uHx+KhyVLLuEncJqXuE6snphwNR6HxeXCAEYKhQt7DNWhaXCIqD3NqDfP/949HT1Zdvp8cy/j72B3pHFJSLhnrRGAx5yk6c84PTdqpVXQj0yfc/T5tYuWscf1P6376eeuOa/XDWvWPzXgeXJBR5zKFUbFM0JZwM4SXBJaJA4cp2PgPZ1l0H28HpRRk0ruQO3wNksStXf5+LgsLvTnKa3737vcra+dzvf+Xrs9xrDv4JNJ8yj6yyaHkI/gko4Q5aFn+LlrWm820YG85tmYOZ4Xg0cB8lcHpB84kJJJ/3Sp7nFrjPgXQFxHCvLVHGNui6Jg4vAr55ji0C6Svoj4ZhPACiQSnnRzRPGbq4zGdnx+tIHzHSVEGWM+NRC02gb9K3VbQpt+WhvF7J/384EZdwTNFonqeeRAnUkAQ9DWNQ1tGs7FHdYSv1yghLOth7FtnR6N4hulgV98SMfuriPL4n7osUTj2xKtqOjcT53vqF4vu/ctbeLB6GZapohmyq3vnIR4D/DvYPySV+E4IF5kOfOqqOTESRWJ1A00P7ou4Ttp0Rq5T4aF+EZOqzaOuJ1WfxQdIR1CUTUYqIhB40A9pTJFZF3SwZlinuZ3oQx2euL31Hj7yTmjFZnG9CMsAkQflyVkQG1AfL/M+BMzZ2FyAXgzMQJgX/O6O4GcIFBKyfhTwPTpFEqSlWTyuVSmUHVFOrsgzsX8jnN8ObddUlkD9Wdkd5QxwIXAhE+v5kCLO9ELGhKVZB2CGJ+UZAIqsymPCgsZxk/pNASCJQx3YuFaiz0hPfEqHeIANR6Czqyuy4D7ZDZBwYnAIEhbwo361zmvVQZbLBjwUpEbNfHZ7lyB0Bk0XlZ2PP21AnAGYTabLY/Dx0eW2uBHgssyTvPik0O3sEeMOQqzn2BE99wpJz6XdxX7wnmMYfCIJ68O9NtieMSJq/bMuLrmxm+OnnKw25bv2ZqAtp1oMLlRl+comjIc/D9jS/+mOGn6RFnzerAvlsO2d//m/vyW3P+sdHH+uW9n1wX8furlUgcV0HXw3iaMGtkUruw4uf/OKL1y7xCEx8m2KOgTwc9eMOzM5Uo3LdasgDtTG45o1lfay62EUmtlHZQ2SGNeSVNG8mCo1edzRQG1eLvtCnhkMwhRTPEK++KOuI4BnSgw/2vaXODg8YsN+QRpEeP7lHY9VCRIPUISqLnDYyw2muWm85h2rgYJq+cv22E7lkhpPAKRfbz0WQ5hOCbA2pE9O591Y2xNC94iyVpQbVgPcQJwF8U6MSEL59+U/gJvnVPEkX2qosJyH0FctymvX/luX8tyzn364sJ3j41y7LKSY9mXXnIA5k6XRbTFQyKSdEFcizBYFobSk8TrDF5CfScOEZFmlhG4yCVJUzSX4uLQzPCrkbsucW6BRWPAHMv6hQKDggbFcklNLrhaUEmfkX6faHlgdldCtc4hCO2K28IRocZpviJQ3RwPXlDDPs+dDET5A62AZRpMqvZXjRsVgzHV+XgqN86RFa5o4H4qScVefhZB/hObguCDZ9YvXvz9EVhFgVJQkovbY8uLVv7YYi14Yy/wy4J+InlTifbu1aeygr2efgS2t4BVrdK1lpDUG3F4zmnaIPzTpo9y5bXdDt1W9YilTag2iRW70uaLc6rSE4PgFyt6Hc9IdyE0RbMrA3aDyceHRcO3U/ewen2lnlpvMBNSsfr/Y+3dqJBeczRkUNbK33FAR1iZsMpsTxXUAcM1hraiBwjZ9i1/CYrLThkaS02bH8QkZ3e8tm55k4OrE+fv2s1E+RdTnSa0PD9a7lydnF9QtNVC4a4CIsaCtia/Qtj3ybo9a3XvCKTNvwbDqu1U+vvzz26/jm6LE9eRx+XIdGrFyMimObjzwsvxCTNYC8BI08y1fW2qy1PG12QIbd7c5+4ydterb1rblw8MUbXN6ffdUuW5O7G9f88+iPj4ZeORnmIbKk3CYuxGWQa/Dg39XxZlp0YZbGI9u6c1zIMWdJ9sY1XmWPJIFLpTfqL0X3hPes9PnXNCkpNr04L4heed9RW89a1uM1zcqVv9G+IuxjaXalWZnG17QoK3pnYyLqgdpg0LrssknY42Cfl6TDsLccyz9lO6Z65XcJZSX2J3GX3GUa9pbjBtdc3BedexsRsSpG1+LV+H58X3QhNcRq5iJt6YuE+2Jiuy1WxcpxpSLO94vsvPLv69MMyO/z1kH5c/vzl6ODPx/alYYvfzhTrANz9u1m+GUaL3lUNW/ENfOxbbzsswa4wp+yTwP8lh6Hl6xLzzWoGWjpqeuPTewZObqENfkehdT3gpr+ePCwVm/LgVqlcBnDfr/e2tGJgUIyRRRoBiRQo4iAGSSP2J7+elCp/Aa6vSHojtrt/cUAgiYoOL9SbCHAfnkUWi64x9RwfMqfgCfHRolB4bzLsxye/Jbo5vOT5zaCOUnV8CUW0gGv10Ukpa/msLSDLdchFOlgjKfYpoke2PYQoXxW1cK2T5EHdMcfmwi4BGmYMf3W/i3m6Wpce1+6rL23munZ9QtXdvMChh1zVjA81731ErquqjmWa6LtFijSG4a33blKrkI3Y/T28EbY5OHauuDYyF9bg+EgnDA6I9/aIcCxAPRAQaPXbrPx7lTVIIWmMy3dimHx8q0YGj1xTB2RLQZEb8CDZFN8HEtLquf4REPeFsNCxgZf/yk+zHU8GrqZ6kKCbLrNpDa0tpnM8y0LksdtwEDBW/TtIKRwuo0VGkE63spu4ttg7DgmgnZEDwSpT5AaEStsXeUBESELcf/2VnPcx+zICXEskH4Znrq1BjoysYWZT+7t7wH2xEBQz/Un+97ivAscygtMYp2CH8BvbcNGED3N+F34f06w7Ux4O6wSqkIbRkEtgghnw3n0TTbVcHySafMoQdCamM59gdi9WoUiMBewxiIT1ULWwY82KdbjlezyyORHm8RUKJYIQk5etXYlpGrgH21tqMXrLd9PYFOoxVaL2Feud19Gl8x+uNGxHq+4lD+DXbEe22/OFq/CAH8VFieVlPnhSam09OJMc+zFRnjZ/OzGl0zUA/Vkyc5F66FaWdN6tLb1eG3rydrWg8ra5kO1oh580NaL39CDTbGhy+FmKSebpRxUVvVZ5tOGhd1iw7NBUt4GaN175HUbopCarW5T/gqw/qCSiRpyD+ug191I1wVRt8Sj1myyPeeo0wVjaH+f+KYJmr0RG9lX5EZr0Op1P4Fbe9RvMg03SBvIw4WY8wTPluPPSknrMkmO9633r5f5yPrRJ+tHc9KuHb6m3fC1U34g2ILgBZPfJnYbeA2115YybMtwAxckOaPEDgw38KvR28D53N6C1+vT6n+ZvQm61+A2F7RN4I7raLblNhtXkN1cqdGg1b0EY0oQ2onrXMhrsZ0LW8339H4rqsVav8+KK7Z4oogvwnIcoa+0OjXlBvwh3yz2k5bqEB2R9C0rv/7Jv/rLki0awZYZkeWL2LB9ihyL/0KUPK4maNqYXZiZkbCOkivr9raipGbkszGjyBoablpYA/9VVnW3RJocvvV6hqWS2y7pqgya1OUFS8riwF9lUXfNIWkB2y/sTglEM9YkkLRGa5c3HakvWp2C0XqCLXVFxOZfpFpPguxSMmmvsJTLSm1/65ErKxG5fhLrdrmbyxWU8uCfxLgd73Us+JC60Cll7OfvuEsWfAg3MUWu/i34wDqrB/wWa/PlQt4cmy0J3mZsUrbIFeor6FuMWwVVLnRV+BpKF+RMAbWtAu8aIo2PdPi4ivlRn5MCfQ4qeZ02W24VfCmx1uAiL1diRc92XKOir082abqNExy/QNmdImyeHEbMf4nC20RN/o0GMAj/E07qgJGHyKKarNZus/0E+8PnG4BWN1VutHaGzTLC6qGXCQlTxwulcCRfKCMqplktZZcKuPS3r/PL3/4xX/oChST9IvxfAAAA///2L7mm1GIAAA=="
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "data",
      "type": "template_file",
      "name": "ingest_postgresql_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "8d49bd8201188ce186682e8644b62f0cd537b147368a68a499bf68f9d4fded77",
            "rendered": "#!/bin/bash\n\necho \"---- SETTING UP INGEST DB ----\"\n\nFORECASTDB=\"rfcfcst\"\nLOCATIONDB=\"wrds_location3\"\nDBHOST=\"hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com\"\nDBPORT=5432\nDBUSERNAME=\"postgres\"\nDBPASSWORD=\"V4qCVyLf7UAhIOipBTDNVQ9Er\"\nDEPLOYMENT_BUCKET=\"hydrovis-ti-deployment-us-east-1\"\nINGESTDBUSERS=\"rfc_fcst, rfc_fcst_ro\"\nLOCATIONDBUSERS=\"rfc_fcst_ro, location_ro_user_grp\"\n\n### install postgresql ###\nsudo yum install -y postgresql12\n\n### Constants ###\nHOME=\"/home/ec2-user\"\nPGPASS=\"${HOME}/.pgpass\"\nHML_S3_PREFIX=\"ingest/database\"\nPOSTGIS_SCRIPT=\"postgis_setup.sql\"\nUSERS_SCRIPT=\"ingest_users.sql\"\nBASE_SCRIPT=\"${FORECASTDB}_base.sql.gz\"\nLOCATION_S3_PREFIX=\"location/database\"\nLOCATION_DUMP=\"wrds_location3.dump\"\nDOWNLOAD_DIRECTORY=\"${HOME}/postgres_data\"\nPOSTGIS_FILE=\"${DOWNLOAD_DIRECTORY}/${POSTGIS_SCRIPT}\"\nBASE_FILE=\"${DOWNLOAD_DIRECTORY}/${BASE_SCRIPT}\"\nUSERS_FILE=\"/deploy_files/${USERS_SCRIPT}\"\nLOCATION_FILE=\"${DOWNLOAD_DIRECTORY}/${LOCATION_DUMP}\"\nDROP_DATABASE=0\nREMOVE_BASE_FILE=0\nREMOVE_USERS_FILE=0\nREMOVE_DIRECTORY=0\n\nexport PGPASSWORD=${DBPASSWORD}\n\n### Create/validate pgpass file ###\nfunction create_pgpass()\n{\n  local FOUND=0\n  local DBPASSLINE=\"${DBHOST}:*:*:${DBUSERNAME}:${DBPASSWORD}\"\n  ### Check to see if file is present, and if so, validate it ###\n  if [ -f \"${DBPASS}\" ]\n  then\n    while IFS= read -r LINE\n    do\n      if [ \"${LINE}\" = \"${DBPASSLINE}\" ]\n      then\n        FOUND=1\n        break \n      fi\n    done \u003c \"${DBPASS}\"\n    if [ ${FOUND} -eq 0 ]\n    then\n      echo \"Appending line to ${DBPASS}\"\n      echo \"${DBPASSLINE}\" \u003e\u003e \"${DBPASS}\"\n    else\n      echo \"Matching entry found in ${DBPASS}. No need to modify.\"\n    fi\n  else\n    echo \"Creating new ${DBPASS}...\"\n    echo \"${DBPASSLINE}\" \u003e \"${DBPASS}\"\n  fi\n\n  chmod 600 \"${DBPASS}\"\n}\n\n# Create PGPASS\ncreate_pgpass\n\n# Download database contents\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT} ${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${BASE_SCRIPT}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${BASE_SCRIPT} ${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${LOCATION_S3_PREFIX}/${LOCATION_DUMP}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${LOCATION_S3_PREFIX}/${LOCATION_DUMP} ${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\nREMOVE_USERS_FILE=1\n\n# Uncompress\ngzip -d \"${BASE_FILE}\"\nBASE_FILE=\"${BASE_FILE/.gz}\"\n\n# Setting up DB\necho \"Setting up postgis..\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${FORECASTDB}\" -f \"${POSTGIS_FILE}\"\n\n# Update users\necho \"Creating users...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT}  -d \"${FORECASTDB}\" -f \"${USERS_FILE}\"\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT}  -d \"${FORECASTDB}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE ${FORECASTDB} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE ${FORECASTDB} to ${INGESTDBUSERS};\n            COMMENT ON DATABASE ${FORECASTDB} IS \n            'database for storing river forecasts';\"\n\n# Create table schemas for HML Ingest\necho \"Setting up HML ingest on ${PGHOST}...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${FORECASTDB}\" -f \"${BASE_FILE}\"\n\n# Dump WRDS Location\necho \"Setting up WRDS Location on ${PGHOST}...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -d \"${FORECASTDB}\" -c \"\\c\" -c \"create database ${LOCATIONDB};\"\npg_restore -h \"${DBHOST}\" -p ${DBPORT} -d \"${LOCATIONDB}\" -U ${DBUSERNAME} -v ${LOCATION_FILE}\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${LOCATIONDB}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE ${LOCATIONDB} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE ${LOCATIONDB} to ${LOCATIONDBUSERS};\n            COMMENT ON DATABASE ${LOCATIONDB} IS \n            'database for storing location metadata';\"\n\nDROP_DATABASE=0\n\n\n\n",
            "template": "#!/bin/bash\n\necho \"---- SETTING UP INGEST DB ----\"\n\nFORECASTDB=\"${FORECASTDB}\"\nLOCATIONDB=\"${LOCATIONDB}\"\nDBHOST=\"${DBHOST}\"\nDBPORT=${DBPORT}\nDBUSERNAME=\"${DBUSERNAME}\"\nDBPASSWORD=\"${DBPASSWORD}\"\nDEPLOYMENT_BUCKET=\"${DEPLOYMENT_BUCKET}\"\nINGESTDBUSERS=\"${INGESTDBUSERS}\"\nLOCATIONDBUSERS=\"${LOCATIONDBUSERS}\"\n\n### install postgresql ###\nsudo yum install -y postgresql12\n\n### Constants ###\nHOME=\"/home/ec2-user\"\nPGPASS=\"$${HOME}/.pgpass\"\nHML_S3_PREFIX=\"ingest/database\"\nPOSTGIS_SCRIPT=\"postgis_setup.sql\"\nUSERS_SCRIPT=\"ingest_users.sql\"\nBASE_SCRIPT=\"$${FORECASTDB}_base.sql.gz\"\nLOCATION_S3_PREFIX=\"location/database\"\nLOCATION_DUMP=\"wrds_location3.dump\"\nDOWNLOAD_DIRECTORY=\"$${HOME}/postgres_data\"\nPOSTGIS_FILE=\"$${DOWNLOAD_DIRECTORY}/$${POSTGIS_SCRIPT}\"\nBASE_FILE=\"$${DOWNLOAD_DIRECTORY}/$${BASE_SCRIPT}\"\nUSERS_FILE=\"/deploy_files/$${USERS_SCRIPT}\"\nLOCATION_FILE=\"$${DOWNLOAD_DIRECTORY}/$${LOCATION_DUMP}\"\nDROP_DATABASE=0\nREMOVE_BASE_FILE=0\nREMOVE_USERS_FILE=0\nREMOVE_DIRECTORY=0\n\nexport PGPASSWORD=$${DBPASSWORD}\n\n### Create/validate pgpass file ###\nfunction create_pgpass()\n{\n  local FOUND=0\n  local DBPASSLINE=\"$${DBHOST}:*:*:$${DBUSERNAME}:$${DBPASSWORD}\"\n  ### Check to see if file is present, and if so, validate it ###\n  if [ -f \"$${DBPASS}\" ]\n  then\n    while IFS= read -r LINE\n    do\n      if [ \"$${LINE}\" = \"$${DBPASSLINE}\" ]\n      then\n        FOUND=1\n        break \n      fi\n    done \u003c \"$${DBPASS}\"\n    if [ $${FOUND} -eq 0 ]\n    then\n      echo \"Appending line to $${DBPASS}\"\n      echo \"$${DBPASSLINE}\" \u003e\u003e \"$${DBPASS}\"\n    else\n      echo \"Matching entry found in $${DBPASS}. No need to modify.\"\n    fi\n  else\n    echo \"Creating new $${DBPASS}...\"\n    echo \"$${DBPASSLINE}\" \u003e \"$${DBPASS}\"\n  fi\n\n  chmod 600 \"$${DBPASS}\"\n}\n\n# Create PGPASS\ncreate_pgpass\n\n# Download database contents\necho \"Downloading s3://$${DEPLOYMENT_BUCKET}/$${HML_S3_PREFIX}/$${POSTGIS_SCRIPT}...\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${HML_S3_PREFIX}/$${POSTGIS_SCRIPT} $${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\necho \"Downloading s3://$${DEPLOYMENT_BUCKET}/$${HML_S3_PREFIX}/$${BASE_SCRIPT}...\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${HML_S3_PREFIX}/$${BASE_SCRIPT} $${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\necho \"Downloading s3://$${DEPLOYMENT_BUCKET}/$${LOCATION_S3_PREFIX}/$${LOCATION_DUMP}...\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${LOCATION_S3_PREFIX}/$${LOCATION_DUMP} $${DOWNLOAD_DIRECTORY}/\nREMOVE_BASE_FILE=1\n\nREMOVE_USERS_FILE=1\n\n# Uncompress\ngzip -d \"$${BASE_FILE}\"\nBASE_FILE=\"$${BASE_FILE/.gz}\"\n\n# Setting up DB\necho \"Setting up postgis..\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT} -d \"$${FORECASTDB}\" -f \"$${POSTGIS_FILE}\"\n\n# Update users\necho \"Creating users...\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT}  -d \"$${FORECASTDB}\" -f \"$${USERS_FILE}\"\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT}  -d \"$${FORECASTDB}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE $${FORECASTDB} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE $${FORECASTDB} to $${INGESTDBUSERS};\n            COMMENT ON DATABASE $${FORECASTDB} IS \n            'database for storing river forecasts';\"\n\n# Create table schemas for HML Ingest\necho \"Setting up HML ingest on $${PGHOST}...\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT} -d \"$${FORECASTDB}\" -f \"$${BASE_FILE}\"\n\n# Dump WRDS Location\necho \"Setting up WRDS Location on $${PGHOST}...\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -d \"$${FORECASTDB}\" -c \"\\c\" -c \"create database $${LOCATIONDB};\"\npg_restore -h \"$${DBHOST}\" -p $${DBPORT} -d \"$${LOCATIONDB}\" -U $${DBUSERNAME} -v $${LOCATION_FILE}\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT} -d \"$${LOCATIONDB}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE $${LOCATIONDB} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE $${LOCATIONDB} to $${LOCATIONDBUSERS};\n            COMMENT ON DATABASE $${LOCATIONDB} IS \n            'database for storing location metadata';\"\n\nDROP_DATABASE=0\n\n\n\n",
            "vars": {
              "DBHOST": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
              "DBPASSWORD": "V4qCVyLf7UAhIOipBTDNVQ9Er",
              "DBPORT": "5432",
              "DBUSERNAME": "postgres",
              "DEPLOYMENT_BUCKET": "hydrovis-ti-deployment-us-east-1",
              "FORECASTDB": "rfcfcst",
              "INGESTDBUSERS": "rfc_fcst, rfc_fcst_ro",
              "LOCATIONDB": "wrds_location3",
              "LOCATIONDBUSERS": "rfc_fcst_ro, location_ro_user_grp"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "DBPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "DBUSERNAME",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "data",
      "type": "template_file",
      "name": "ingest_users",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "3b8d47606671b19d68ba0cf75d7e998d0c27e285a50b8c5806e348cbdea33e55",
            "rendered": "-- ROLES\n\nCREATE ROLE nwm_viz_ro;\nALTER ROLE nwm_viz_ro WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD 'SCx5stbA6pQs16c80YM7eD09H';\nCOMMENT ON ROLE rfc_fcst IS 'Read-write group role for the Viz databases';\n\nCREATE ROLE rfc_fcst;\nALTER ROLE rfc_fcst WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS ENCRYPTED PASSWORD 'U5m9XQRB6emGUdAThpsVEf8FV';\nCOMMENT ON ROLE rfc_fcst IS 'Read-write group role for the RFC Forecast databases';\n\nCREATE ROLE rfc_fcst_ro_user;\nALTER ROLE rfc_fcst_ro_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '0EtLa8gbAB6VWyPBiY3yLfyT9';\nCOMMENT ON ROLE rfc_fcst_ro_user IS 'Read-only user role for the RFC Forecast databases';\n\nCREATE ROLE rfc_fcst_user;\nALTER ROLE rfc_fcst_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS ENCRYPTED PASSWORD 'urkZ6DiRqC4jRPjX6sbAnx8Nq';\nCOMMENT ON ROLE rfc_fcst_user IS 'Read-write user role for the RFC Forecast databases';\n\nCREATE ROLE location_ro_user;\nALTER ROLE location_ro_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '1WsSGw8XcGIfqYplZ3K9hd05T';\nCOMMENT ON ROLE location_ro_user IS 'Read-only user role for the Location databases';\n\nCREATE ROLE wrds_svc_rw_user;\nALTER ROLE wrds_svc_rw_user WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE wrds_svc_rw_user IS 'Read-write user role for the Location databases';\n\n-- GROUPS\n\nCREATE ROLE rfc_fcst_ro;\nALTER ROLE rfc_fcst_ro WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE rfc_fcst_ro IS 'Read-only group role for the RFC Forecast databases';\n\nCREATE ROLE location_ro_user_grp;\nALTER ROLE location_ro_user_grp WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE location_ro_user_grp IS 'Read-only group role for the Location databases';\n\nCREATE ROLE nwm_ro_user_grp;\nALTER ROLE nwm_ro_user_grp WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE nwm_ro_user_grp IS 'Read-only group role for the Location databases';\n\n-- GROUP ASSIGNMENT\n\nGRANT rfc_fcst_ro TO rfc_fcst_ro_user ;\nGRANT rfc_fcst TO rfc_fcst_user ;\nGRANT rfc_fcst_ro TO nwm_viz_ro ;\nGRANT location_ro_user_grp TO location_ro_user ;\n\n",
            "template": "-- ROLES\n\nCREATE ROLE nwm_viz_ro;\nALTER ROLE nwm_viz_ro WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '${NWM_VIZ_RO}';\nCOMMENT ON ROLE rfc_fcst IS 'Read-write group role for the Viz databases';\n\nCREATE ROLE rfc_fcst;\nALTER ROLE rfc_fcst WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS ENCRYPTED PASSWORD '${RFC_FCST}';\nCOMMENT ON ROLE rfc_fcst IS 'Read-write group role for the RFC Forecast databases';\n\nCREATE ROLE rfc_fcst_ro_user;\nALTER ROLE rfc_fcst_ro_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '${RFC_FCST_RO_USER}';\nCOMMENT ON ROLE rfc_fcst_ro_user IS 'Read-only user role for the RFC Forecast databases';\n\nCREATE ROLE rfc_fcst_user;\nALTER ROLE rfc_fcst_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS ENCRYPTED PASSWORD '${RFC_FCST_USER}';\nCOMMENT ON ROLE rfc_fcst_user IS 'Read-write user role for the RFC Forecast databases';\n\nCREATE ROLE location_ro_user;\nALTER ROLE location_ro_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '${LOCATION_RO_USER}';\nCOMMENT ON ROLE location_ro_user IS 'Read-only user role for the Location databases';\n\nCREATE ROLE wrds_svc_rw_user;\nALTER ROLE wrds_svc_rw_user WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE wrds_svc_rw_user IS 'Read-write user role for the Location databases';\n\n-- GROUPS\n\nCREATE ROLE rfc_fcst_ro;\nALTER ROLE rfc_fcst_ro WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE rfc_fcst_ro IS 'Read-only group role for the RFC Forecast databases';\n\nCREATE ROLE location_ro_user_grp;\nALTER ROLE location_ro_user_grp WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE location_ro_user_grp IS 'Read-only group role for the Location databases';\n\nCREATE ROLE nwm_ro_user_grp;\nALTER ROLE nwm_ro_user_grp WITH INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOBYPASSRLS;\nCOMMENT ON ROLE nwm_ro_user_grp IS 'Read-only group role for the Location databases';\n\n-- GROUP ASSIGNMENT\n\nGRANT rfc_fcst_ro TO rfc_fcst_ro_user ;\nGRANT rfc_fcst TO rfc_fcst_user ;\nGRANT rfc_fcst_ro TO nwm_viz_ro ;\nGRANT location_ro_user_grp TO location_ro_user ;\n\n",
            "vars": {
              "LOCATION_RO_USER": "1WsSGw8XcGIfqYplZ3K9hd05T",
              "NWM_VIZ_RO": "SCx5stbA6pQs16c80YM7eD09H",
              "RFC_FCST": "U5m9XQRB6emGUdAThpsVEf8FV",
              "RFC_FCST_RO_USER": "0EtLa8gbAB6VWyPBiY3yLfyT9",
              "RFC_FCST_USER": "urkZ6DiRqC4jRPjX6sbAnx8Nq"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "LOCATION_RO_USER",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "NWM_VIZ_RO",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RFC_FCST",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RFC_FCST_RO_USER",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RFC_FCST_USER",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "data",
      "type": "template_file",
      "name": "rabbitmq_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "8231aaefef59d04fb7b6127a21dc832c65d009b651c54cde31d24b94bc8cc19e",
            "rendered": "#!/bin/bash\n\necho \"---- SETTING UP RABBITMQ ----\"\n\nMQINGESTENDPOINT=\"amqps://b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com:5671\"\nMQUSERNAME=\"rabbit_admin\"\nMQPASSWORD=\"RoepAxEwk93zHWj64EikbuSdM\"\nRFC_FCST_USER=\"rfc_fcst_user\"\nRFC_FCST_USER_PASSWORD=\"urkZ6DiRqC4jRPjX6sbAnx8Nq\"\nMQVHOST=\"testing_integration\"\n\n### Get RabbitMQ Endpoint ###\nRSCHEME=\"${MQINGESTENDPOINT/:*}\"\nRPORT=\"${MQINGESTENDPOINT##*:}\"\nRHOST=$(echo ${MQINGESTENDPOINT} | cut -d : -f 2 | tr -d \"/\")\n\necho \"Adding ${MQVHOST} vhost to ${RHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     \"https://${RHOST}/api/vhosts/${MQVHOST}\"\n\necho \"Removing default vhost to ${RHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X DELETE \"https://${RHOST}/api/vhosts/%2f\"\n\necho \"Adding ${RFC_FCST_USER} to ${RHOST}\"\ncurl --trace-ascii /dev/stdout -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"password\":\"'\"${RFC_FCST_USER_PASSWORD}\"'\",\"tags\":\"none\"}' \\\n     \"https://${RHOST}/api/users/${RFC_FCST_USER}\"\n\necho \"Adding hml_event_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"dl.hml\",\"x-dead-letter-routing-key\":\"dl_hml_event_queue\"}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/hml_event_queue\"\n\necho \"Adding xml_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"dl.hml\",\"x-dead-letter-routing-key\":\"dl_xml_queue\"}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/xml_queue\"\n\necho \"Adding dl_xml_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"hml\",\"x-dead-letter-routing-key\":\"xml_queue\",\"x-message-ttl\":60000}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/dl_xml_queue\"\n\necho \"Adding dl_hml_event_queue queues for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"hml\",\"x-dead-letter-routing-key\":\"hml_event_queue\",\"x-message-ttl\":900000}}' \\\n     \"https://${RHOST}/api/queues/${MQVHOST}/dl_hml_event_queue\"\n\necho \"Adding dl.hml exchange for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"internal\": false,\"arguments\":{}}' \\\n     \"https://${RHOST}/api/exchanges/${MQVHOST}/dl.hml\"\n\necho \"Adding hml exchange for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"internal\": false,\"arguments\":{}}' \\\n     \"https://${RHOST}/api/exchanges/${MQVHOST}/hml\"\n\necho \"Binding dl.hml exchange to dl_hml_event_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"dl_hml_event_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/dl.hml/q/dl_hml_event_queue\"\n\necho \"Binding dl.hml exchange to dl_xml_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"dl_xml_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/dl.hml/q/dl_xml_queue\"\n\necho \"Binding hml exchange to hml_event_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"hml_event_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/hml/q/hml_event_queue\"\n\necho \"Binding hml exchange to xml_queue queue for ${MQVHOST}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"xml_queue\", \"arguments\":{}}' \\\n     \"https://${RHOST}/api/bindings/${MQVHOST}/e/hml/q/xml_queue\"\n\necho \"Updating permissions for ${RFC_FCST_USER}\"\ncurl -u ${MQUSERNAME}:${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"configure\":\".*\",\"write\":\".*\",\"read\":\".*\"}' \\\n     \"https://${RHOST}/api/permissions/${MQVHOST}/${RFC_FCST_USER}\"\n",
            "template": "#!/bin/bash\n\necho \"---- SETTING UP RABBITMQ ----\"\n\nMQINGESTENDPOINT=\"${MQINGESTENDPOINT}\"\nMQUSERNAME=\"${MQUSERNAME}\"\nMQPASSWORD=\"${MQPASSWORD}\"\nRFC_FCST_USER=\"${RFC_FCST_USER}\"\nRFC_FCST_USER_PASSWORD=\"${RFC_FCST_USER_PASSWORD}\"\nMQVHOST=\"${MQVHOST}\"\n\n### Get RabbitMQ Endpoint ###\nRSCHEME=\"$${MQINGESTENDPOINT/:*}\"\nRPORT=\"$${MQINGESTENDPOINT##*:}\"\nRHOST=$(echo $${MQINGESTENDPOINT} | cut -d : -f 2 | tr -d \"/\")\n\necho \"Adding $${MQVHOST} vhost to $${RHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     \"https://$${RHOST}/api/vhosts/$${MQVHOST}\"\n\necho \"Removing default vhost to $${RHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X DELETE \"https://$${RHOST}/api/vhosts/%2f\"\n\necho \"Adding $${RFC_FCST_USER} to $${RHOST}\"\ncurl --trace-ascii /dev/stdout -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"password\":\"'\"$${RFC_FCST_USER_PASSWORD}\"'\",\"tags\":\"none\"}' \\\n     \"https://$${RHOST}/api/users/$${RFC_FCST_USER}\"\n\necho \"Adding hml_event_queue queues for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"dl.hml\",\"x-dead-letter-routing-key\":\"dl_hml_event_queue\"}}' \\\n     \"https://$${RHOST}/api/queues/$${MQVHOST}/hml_event_queue\"\n\necho \"Adding xml_queue queues for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"dl.hml\",\"x-dead-letter-routing-key\":\"dl_xml_queue\"}}' \\\n     \"https://$${RHOST}/api/queues/$${MQVHOST}/xml_queue\"\n\necho \"Adding dl_xml_queue queues for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"hml\",\"x-dead-letter-routing-key\":\"xml_queue\",\"x-message-ttl\":60000}}' \\\n     \"https://$${RHOST}/api/queues/$${MQVHOST}/dl_xml_queue\"\n\necho \"Adding dl_hml_event_queue queues for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"arguments\":{\"x-dead-letter-exchange\":\"hml\",\"x-dead-letter-routing-key\":\"hml_event_queue\",\"x-message-ttl\":900000}}' \\\n     \"https://$${RHOST}/api/queues/$${MQVHOST}/dl_hml_event_queue\"\n\necho \"Adding dl.hml exchange for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"internal\": false,\"arguments\":{}}' \\\n     \"https://$${RHOST}/api/exchanges/$${MQVHOST}/dl.hml\"\n\necho \"Adding hml exchange for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"auto_delete\":false,\"durable\":true,\"internal\": false,\"arguments\":{}}' \\\n     \"https://$${RHOST}/api/exchanges/$${MQVHOST}/hml\"\n\necho \"Binding dl.hml exchange to dl_hml_event_queue queue for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"dl_hml_event_queue\", \"arguments\":{}}' \\\n     \"https://$${RHOST}/api/bindings/$${MQVHOST}/e/dl.hml/q/dl_hml_event_queue\"\n\necho \"Binding dl.hml exchange to dl_xml_queue queue for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"dl_xml_queue\", \"arguments\":{}}' \\\n     \"https://$${RHOST}/api/bindings/$${MQVHOST}/e/dl.hml/q/dl_xml_queue\"\n\necho \"Binding hml exchange to hml_event_queue queue for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"hml_event_queue\", \"arguments\":{}}' \\\n     \"https://$${RHOST}/api/bindings/$${MQVHOST}/e/hml/q/hml_event_queue\"\n\necho \"Binding hml exchange to xml_queue queue for $${MQVHOST}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X POST \\\n     -d '{\"routing_key\":\"xml_queue\", \"arguments\":{}}' \\\n     \"https://$${RHOST}/api/bindings/$${MQVHOST}/e/hml/q/xml_queue\"\n\necho \"Updating permissions for $${RFC_FCST_USER}\"\ncurl -u $${MQUSERNAME}:$${MQPASSWORD} -H \"content-type:application/json\" -X PUT \\\n     -d '{\"configure\":\".*\",\"write\":\".*\",\"read\":\".*\"}' \\\n     \"https://$${RHOST}/api/permissions/$${MQVHOST}/$${RFC_FCST_USER}\"\n",
            "vars": {
              "MQINGESTENDPOINT": "amqps://b-f983c38b-7a9b-40b7-836c-2a87ec24b303.mq.us-east-1.amazonaws.com:5671",
              "MQPASSWORD": "RoepAxEwk93zHWj64EikbuSdM",
              "MQUSERNAME": "rabbit_admin",
              "MQVHOST": "testing_integration",
              "RFC_FCST_USER": "rfc_fcst_user",
              "RFC_FCST_USER_PASSWORD": "urkZ6DiRqC4jRPjX6sbAnx8Nq"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "MQINGESTENDPOINT",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "MQPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "MQUSERNAME",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RFC_FCST_USER",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "RFC_FCST_USER_PASSWORD",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "data",
      "type": "template_file",
      "name": "viz_postgresql_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "b9f82e1adb9957b4456913da2fa7c80148d5790fbbc220beb6d5d8bb4a0555e1",
            "rendered": "#!/bin/bash\n\necho \"---- SETTING UP VIZ DB ----\"\n\nDBNAME=\"vizprocessing\"\nDBHOST=\"hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com\"\nDBPORT=5432\nDBUSERNAME=\"postgres\"\nDBPASSWORD=\"Qno8ZJOzpLvP439BmckSwBipr\"\nDEPLOYMENT_BUCKET=\"hydrovis-ti-deployment-us-east-1\"\nDBUSERS=\"viz_proc_admin_rw_user\"\nHOME=\"/home/ec2-user\"\n\n### install postgresql ###\nsudo yum install -y postgresql12\n\n### Constants ###\nDBPASS=\"${HOME}/.pgpass\"\nHML_S3_PREFIX=\"ingest/database\"\nPOSTGIS_SCRIPT=\"postgis_setup.sql\"\nSETUP_SCRIPT=\"viz_setup.sql\"\nSERVICES_CSV=\"viz/db_pipeline/services.csv\"\nCONUS_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels.csv\"\nHI_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels_hi.csv\"\nPRVI_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels_prvi.csv\"\nCONUS_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v21_recurrence_flows.csv\"\nHI_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v20_recurrence_flows_hawaii.csv\"\nPRVI_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v21_recurrence_flows_prvi.csv\"\nDOWNLOAD_DIRECTORY=\"${HOME}/postgres_data\"\nPOSTGIS_FILE=\"${DOWNLOAD_DIRECTORY}/${POSTGIS_SCRIPT}\"\nSETUP_FILE=\"/deploy_files/${SETUP_SCRIPT}\"\nDROP_DATABASE=0\nREMOVE_BASE_FILE=0\nREMOVE_SETUP_FILE=0\nREMOVE_DIRECTORY=0\n\nexport PGPASSWORD=${DBPASSWORD}\n\n### Create/validate DBpass file ###\nfunction create_pgpass()\n{\n  local FOUND=0\n  local DBPASSLINE=\"${DBHOST}:*:*:${DBUSERNAME}:${DBPASSWORD}\"\n  ### Check to see if file is present, and if so, validate it ###\n  if [ -f \"${DBPASS}\" ]\n  then\n    while IFS= read -r LINE\n    do\n      if [ \"${LINE}\" = \"${DBPASSLINE}\" ]\n      then\n        FOUND=1\n        break \n      fi\n    done \u003c \"${DBPASS}\"\n    if [ ${FOUND} -eq 0 ]\n    then\n      echo \"Appending line to ${DBPASS}\"\n      echo \"${DBPASSLINE}\" \u003e\u003e \"${DBPASS}\"\n    else\n      echo \"Matching entry found in ${DBPASS}. No need to modify.\"\n    fi\n  else\n    echo \"Creating new ${DBPASS}...\"\n    echo \"${DBPASSLINE}\" \u003e \"${DBPASS}\"\n  fi\n\n  chmod 600 \"${DBPASS}\"\n}\n\n# Create DBPASS\ncreate_pgpass\n\n# Download database contents\necho \"Downloading s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT}...\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HML_S3_PREFIX}/${POSTGIS_SCRIPT} ${DOWNLOAD_DIRECTORY}/\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${SERVICES_CSV} \"${HOME}/services.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${CONUS_CH_CSV} \"${HOME}/nwm_v21_web_mercator_channels.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HI_CH_CSV} \"${HOME}/nwm_v21_web_mercator_channels_hi.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${PRVI_CH_CSV} \"${HOME}/nwm_v21_web_mercator_channels_prvi.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${CONUS_RF_CSV} \"${HOME}/nwm_v21_recurrence_flows.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${HI_RF_CSV} \"${HOME}/nwm_v20_recurrence_flows_hawaii.csv\"\naws s3 cp s3://${DEPLOYMENT_BUCKET}/${PRVI_RF_CSV} \"${HOME}/nwm_v21_recurrence_flows_prvi.csv\"\n\n# Setting up DB\necho \"Setting up postgis..\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${DBNAME}\" -f \"${POSTGIS_FILE}\"\n\n# Update users\necho \"Setting up DB...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${DBNAME}\" -f \"${SETUP_FILE}\"\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"${DBHOST}\" -U \"${DBUSERNAME}\" -p ${DBPORT} -d \"${DBNAME}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE ${DBNAME} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE ${DBNAME} to ${DBUSERS};\n            COMMENT ON DATABASE ${DBNAME} IS \n            'database for visualizatoin services';\"\n\nDROP_DATABASE=0\n\n",
            "template": "#!/bin/bash\n\necho \"---- SETTING UP VIZ DB ----\"\n\nDBNAME=\"${DBNAME}\"\nDBHOST=\"${DBHOST}\"\nDBPORT=${DBPORT}\nDBUSERNAME=\"${DBUSERNAME}\"\nDBPASSWORD=\"${DBPASSWORD}\"\nDEPLOYMENT_BUCKET=\"${DEPLOYMENT_BUCKET}\"\nDBUSERS=\"${DBUSERS}\"\nHOME=\"${HOME}\"\n\n### install postgresql ###\nsudo yum install -y postgresql12\n\n### Constants ###\nDBPASS=\"$${HOME}/.pgpass\"\nHML_S3_PREFIX=\"ingest/database\"\nPOSTGIS_SCRIPT=\"postgis_setup.sql\"\nSETUP_SCRIPT=\"viz_setup.sql\"\nSERVICES_CSV=\"viz/db_pipeline/services.csv\"\nCONUS_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels.csv\"\nHI_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels_hi.csv\"\nPRVI_CH_CSV=\"viz/authoritative_data/derived_data/nwm_v21_projected/nwm_v21_web_mercator_channels_prvi.csv\"\nCONUS_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v21_recurrence_flows.csv\"\nHI_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v20_recurrence_flows_hawaii.csv\"\nPRVI_RF_CSV=\"viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v21_recurrence_flows_prvi.csv\"\nDOWNLOAD_DIRECTORY=\"$${HOME}/postgres_data\"\nPOSTGIS_FILE=\"$${DOWNLOAD_DIRECTORY}/$${POSTGIS_SCRIPT}\"\nSETUP_FILE=\"/deploy_files/$${SETUP_SCRIPT}\"\nDROP_DATABASE=0\nREMOVE_BASE_FILE=0\nREMOVE_SETUP_FILE=0\nREMOVE_DIRECTORY=0\n\nexport PGPASSWORD=$${DBPASSWORD}\n\n### Create/validate DBpass file ###\nfunction create_pgpass()\n{\n  local FOUND=0\n  local DBPASSLINE=\"$${DBHOST}:*:*:$${DBUSERNAME}:$${DBPASSWORD}\"\n  ### Check to see if file is present, and if so, validate it ###\n  if [ -f \"$${DBPASS}\" ]\n  then\n    while IFS= read -r LINE\n    do\n      if [ \"$${LINE}\" = \"$${DBPASSLINE}\" ]\n      then\n        FOUND=1\n        break \n      fi\n    done \u003c \"$${DBPASS}\"\n    if [ $${FOUND} -eq 0 ]\n    then\n      echo \"Appending line to $${DBPASS}\"\n      echo \"$${DBPASSLINE}\" \u003e\u003e \"$${DBPASS}\"\n    else\n      echo \"Matching entry found in $${DBPASS}. No need to modify.\"\n    fi\n  else\n    echo \"Creating new $${DBPASS}...\"\n    echo \"$${DBPASSLINE}\" \u003e \"$${DBPASS}\"\n  fi\n\n  chmod 600 \"$${DBPASS}\"\n}\n\n# Create DBPASS\ncreate_pgpass\n\n# Download database contents\necho \"Downloading s3://$${DEPLOYMENT_BUCKET}/$${HML_S3_PREFIX}/$${POSTGIS_SCRIPT}...\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${HML_S3_PREFIX}/$${POSTGIS_SCRIPT} $${DOWNLOAD_DIRECTORY}/\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${SERVICES_CSV} \"$${HOME}/services.csv\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${CONUS_CH_CSV} \"$${HOME}/nwm_v21_web_mercator_channels.csv\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${HI_CH_CSV} \"$${HOME}/nwm_v21_web_mercator_channels_hi.csv\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${PRVI_CH_CSV} \"$${HOME}/nwm_v21_web_mercator_channels_prvi.csv\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${CONUS_RF_CSV} \"$${HOME}/nwm_v21_recurrence_flows.csv\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${HI_RF_CSV} \"$${HOME}/nwm_v20_recurrence_flows_hawaii.csv\"\naws s3 cp s3://$${DEPLOYMENT_BUCKET}/$${PRVI_RF_CSV} \"$${HOME}/nwm_v21_recurrence_flows_prvi.csv\"\n\n# Setting up DB\necho \"Setting up postgis..\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT} -d \"$${DBNAME}\" -f \"$${POSTGIS_FILE}\"\n\n# Update users\necho \"Setting up DB...\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT} -d \"$${DBNAME}\" -f \"$${SETUP_FILE}\"\n\n# Updating permissions\necho \"Granting database level permissions...\"\npsql -h \"$${DBHOST}\" -U \"$${DBUSERNAME}\" -p $${DBPORT} -d \"$${DBNAME}\" \\\n    -tAc \"REVOKE CONNECT ON DATABASE $${DBNAME} FROM PUBLIC;\n            GRANT CONNECT ON DATABASE $${DBNAME} to $${DBUSERS};\n            COMMENT ON DATABASE $${DBNAME} IS \n            'database for visualizatoin services';\"\n\nDROP_DATABASE=0\n\n",
            "vars": {
              "DBHOST": "hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
              "DBNAME": "vizprocessing",
              "DBPASSWORD": "Qno8ZJOzpLvP439BmckSwBipr",
              "DBPORT": "5432",
              "DBUSERNAME": "postgres",
              "DBUSERS": "viz_proc_admin_rw_user",
              "DEPLOYMENT_BUCKET": "hydrovis-ti-deployment-us-east-1",
              "HOME": "/home/ec2-user"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "DBPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "DBUSERNAME",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "data",
      "type": "template_file",
      "name": "viz_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "4b20eb411de7bed98603075c5d6af746805d11af91b3b3f35cb8a95280652ea1",
            "rendered": "-- ROLES\n\nCREATE ROLE viz_proc_admin_rw_user;\nALTER ROLE viz_proc_admin_rw_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD 'QLQW31ZxL0CuE78Rm1lvjYTWg';\n\n-- Create the schemas\nCREATE SCHEMA admin;\nCREATE SCHEMA ingest;\nCREATE SCHEMA derived;\nCREATE SCHEMA cache;\nCREATE SCHEMA publish;\n\n-- Create the ingest status table\nCREATE TABLE admin.ingest_status (\n        target character varying(100) NOT NULL,\n        reference_time timestamp without time zone,\n        status character varying(25),\n        update_time timestamp without time zone,\n        files_processed integer,\n        records_imported bigint,\n        insert_time_minutes double precision\n);\nALTER TABLE admin.ingest_status OWNER TO viz_proc_admin_rw_user;\n\n-- Create the publish status table\nCREATE TABLE admin.publish_status (\n        service character varying(100) NOT NULL,\n        reference_time timestamp without time zone,\n        pp_complete_time timestamp without time zone,\n        publish_action character varying(100)\n);\nALTER TABLE admin.publish_status OWNER TO viz_proc_admin_rw_user;\n\n-- Create the service table\nCREATE TABLE IF NOT EXISTS admin.services\n(\n    service text COLLATE pg_catalog.\"default\",\n    folder text COLLATE pg_catalog.\"default\",\n    configuration text COLLATE pg_catalog.\"default\",\n    data_sources text COLLATE pg_catalog.\"default\",\n    ingest_table text COLLATE pg_catalog.\"default\",\n    postprocess_parents text COLLATE pg_catalog.\"default\",\n    name text COLLATE pg_catalog.\"default\",\n    summary text COLLATE pg_catalog.\"default\",\n    description text COLLATE pg_catalog.\"default\",\n    tags text COLLATE pg_catalog.\"default\",\n    credits text COLLATE pg_catalog.\"default\",\n    run boolean,\n    feature_service boolean\n);\nALTER TABLE admin.services OWNER TO viz_proc_admin_rw_user;\n\n\\copy admin.services from /home/ec2-user/services.csv delimiter ',' csv header;\n\n-- Create the nwm data tables\n    \n-------- CONUS tables --------\nCREATE TABLE ingest.nwm_channel_rt_ana (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_ana OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_mrf_mem1 (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_mrf_mem1 OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_srf (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_srf OWNER TO viz_proc_admin_rw_user;\n\n-------- HI tables --------\nCREATE TABLE ingest.nwm_channel_rt_ana_hi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_ana_hi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_srf_hi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_srf_hi OWNER TO viz_proc_admin_rw_user;\n\n-------- PRVI tables --------\nCREATE TABLE ingest.nwm_channel_rt_ana_prvi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_ana_prvi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_srf_prvi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_srf_prvi OWNER TO viz_proc_admin_rw_user;\n\n-- Create the recurrence flows tables\nCREATE TABLE derived.recurrence_flows_conus (\n    feature_id integer NOT NULL,\n    rf_1_5 double precision,\n    rf_2_0 double precision,\n    rf_3_0 double precision,\n    rf_4_0 double precision,\n    rf_5_0 double precision,\n    rf_10_0 double precision,\n    rf_2_0_17c double precision,\n    rf_5_0_17c double precision,\n    rf_10_0_17c double precision,\n    rf_25_0_17c double precision,\n    rf_50_0_17c double precision,\n    rf_100_0_17c double precision\n);\nALTER TABLE derived.recurrence_flows_conus OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.recurrence_flows_conus from /home/ec2-user/nwm_v21_recurrence_flows.csv delimiter ',' csv header;\nCREATE INDEX idx_rf_featureid ON derived.recurrence_flows_conus (feature_id);\nALTER TABLE derived.recurrence_flows_conus ADD COLUMN bankfull DOUBLE PRECISION; \nUPDATE derived.recurrence_flows_conus SET bankfull = rf_2_0_17c;\n\nCREATE TABLE derived.recurrence_flows_hi (\n    feature_id integer NOT NULL,\n    rf_2_0 double precision,\n    rf_5_0 double precision,\n    rf_10_0 double precision,\n    rf_25_0 double precision,\n    rf_50_0 double precision,\n    rf_100_0 double precision,\n    rf_500_0 double precision,\n    huc6 text\n);\nALTER TABLE derived.recurrence_flows_hi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.recurrence_flows_hi from /home/ec2-user/nwm_v20_recurrence_flows_hawaii.csv delimiter ',' csv header;\nCREATE INDEX idx_rf_hi_featureid ON derived.recurrence_flows_hi (feature_id);\nALTER TABLE derived.recurrence_flows_hi ADD COLUMN bankfull DOUBLE PRECISION; \nUPDATE derived.recurrence_flows_hi SET bankfull = rf_2_0;\n\nCREATE TABLE derived.recurrence_flows_prvi (\n    feature_id integer NOT NULL,\n    rf_2_0 double precision,\n    rf_5_0 double precision,\n    rf_10_0 double precision,\n    rf_25_0 double precision,\n    rf_50_0 double precision,\n    rf_100_0 double precision,\n    rf_500_0 double precision,\n    huc6 text\n);\nALTER TABLE derived.recurrence_flows_prvi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.recurrence_flows_prvi from /home/ec2-user/nwm_v21_recurrence_flows_prvi.csv delimiter ',' csv header;\nCREATE INDEX idx_rf_prvi_featureid ON derived.recurrence_flows_prvi USING btree (feature_id);\nALTER TABLE derived.recurrence_flows_prvi ADD COLUMN bankfull DOUBLE PRECISION; \nUPDATE derived.recurrence_flows_prvi SET bankfull = rf_2_0;\n\n-- Create the channels tables\nCREATE TABLE derived.channels_conus\n(\n    feature_id integer PRIMARY KEY,\n    strm_order bigint,\n    name character varying(100),\n    huc6 text,\n    nwm_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.channels_conus OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.channels_conus from /home/ec2-user/nwm_v21_web_mercator_channels.csv delimiter ',' csv header;\nCREATE INDEX idx_ch_featureid ON derived.channels_conus USING btree (feature_id);\n\nCREATE TABLE derived.channels_hi\n(\n    feature_id integer PRIMARY KEY,\n    strm_order bigint,\n    name character varying(100),\n    huc6 text,\n    nwm_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.channels_hi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.channels_hi from /home/ec2-user/nwm_v21_web_mercator_channels_hi.csv delimiter ',' csv header;\nCREATE INDEX idx_ch_hi_featureid ON derived.channels_hi USING btree (feature_id);\n\nCREATE TABLE derived.channels_prvi\n(\n    feature_id integer PRIMARY KEY,\n    strm_order bigint,\n    name character varying(100),\n    huc6 text,\n    nwm_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.channels_prvi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.channels_prvi from /home/ec2-user/nwm_v21_web_mercator_channels_prvi.csv delimiter ',' csv header;\nCREATE INDEX idx_ch_prvi_featureid ON derived.channels_prvi USING btree (feature_id);\n\n-- Create the FIM channels tables\nCREATE TABLE derived.fim_channels_conus\n(\n    hydro_id integer PRIMARY KEY,\n    huc6 text,\n    fim_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.fim_channels_conus OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE derived.fim_channels_hi\n(\n    hydro_id integer PRIMARY KEY,\n    huc6 text,\n    fim_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.fim_channels_hi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE derived.fim_channels_prvi\n(\n    hydro_id integer PRIMARY KEY,\n    huc6 text,\n    fim_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.fim_channels_prvi OWNER TO viz_proc_admin_rw_user;\n\n-- Create the max flows tables.\nCREATE TABLE cache.max_flows_ana (\n    feature_id integer,\n    maxflow_1hour double precision\n);\nALTER TABLE cache.max_flows_ana OWNER TO viz_proc_admin_rw_user;\n    \nCREATE TABLE cache.max_flows_ana_hi (\n    feature_id integer,\n    maxflow_1hour double precision\n);\nALTER TABLE cache.max_flows_ana_hi OWNER TO viz_proc_admin_rw_user;\n    \nCREATE TABLE cache.max_flows_ana_prvi (\n    feature_id integer,\n    maxflow_1hour double precision\n);\nALTER TABLE cache.max_flows_ana_prvi OWNER TO viz_proc_admin_rw_user;\n    \nCREATE TABLE cache.max_flows_mrf (\n    feature_id integer,\n    maxflow_3day double precision,\n    maxflow_5day double precision,\n    maxflow_10day double precision\n);\nALTER TABLE cache.max_flows_mrf OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE cache.max_flows_srf (\n    feature_id integer,\n    maxflow_18hour double precision\n);\nALTER TABLE cache.max_flows_srf OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE cache.max_flows_srf_hi (\n    feature_id integer,\n    maxflow_48hour double precision\n);\nALTER TABLE cache.max_flows_srf_hi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE cache.max_flows_srf_prvi(\n    feature_id integer,\n    maxflow_48hour double precision\n);\nALTER TABLE cache.max_flows_srf_prvi OWNER TO viz_proc_admin_rw_user;\n\n-- Grant Schemas to User\n\nGRANT ALL ON ALL TABLES IN SCHEMA admin TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA ingest TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA derived TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA cache TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA publish TO viz_proc_admin_rw_user;",
            "template": "-- ROLES\n\nCREATE ROLE viz_proc_admin_rw_user;\nALTER ROLE viz_proc_admin_rw_user WITH INHERIT NOCREATEROLE NOCREATEDB LOGIN NOBYPASSRLS CONNECTION LIMIT 45 ENCRYPTED PASSWORD '${VIZ_PROC_ADMIN_RW_PASS}';\n\n-- Create the schemas\nCREATE SCHEMA admin;\nCREATE SCHEMA ingest;\nCREATE SCHEMA derived;\nCREATE SCHEMA cache;\nCREATE SCHEMA publish;\n\n-- Create the ingest status table\nCREATE TABLE admin.ingest_status (\n        target character varying(100) NOT NULL,\n        reference_time timestamp without time zone,\n        status character varying(25),\n        update_time timestamp without time zone,\n        files_processed integer,\n        records_imported bigint,\n        insert_time_minutes double precision\n);\nALTER TABLE admin.ingest_status OWNER TO viz_proc_admin_rw_user;\n\n-- Create the publish status table\nCREATE TABLE admin.publish_status (\n        service character varying(100) NOT NULL,\n        reference_time timestamp without time zone,\n        pp_complete_time timestamp without time zone,\n        publish_action character varying(100)\n);\nALTER TABLE admin.publish_status OWNER TO viz_proc_admin_rw_user;\n\n-- Create the service table\nCREATE TABLE IF NOT EXISTS admin.services\n(\n    service text COLLATE pg_catalog.\"default\",\n    folder text COLLATE pg_catalog.\"default\",\n    configuration text COLLATE pg_catalog.\"default\",\n    data_sources text COLLATE pg_catalog.\"default\",\n    ingest_table text COLLATE pg_catalog.\"default\",\n    postprocess_parents text COLLATE pg_catalog.\"default\",\n    name text COLLATE pg_catalog.\"default\",\n    summary text COLLATE pg_catalog.\"default\",\n    description text COLLATE pg_catalog.\"default\",\n    tags text COLLATE pg_catalog.\"default\",\n    credits text COLLATE pg_catalog.\"default\",\n    run boolean,\n    feature_service boolean\n);\nALTER TABLE admin.services OWNER TO viz_proc_admin_rw_user;\n\n\\copy admin.services from ${HOME}/services.csv delimiter ',' csv header;\n\n-- Create the nwm data tables\n    \n-------- CONUS tables --------\nCREATE TABLE ingest.nwm_channel_rt_ana (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_ana OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_mrf_mem1 (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_mrf_mem1 OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_srf (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_srf OWNER TO viz_proc_admin_rw_user;\n\n-------- HI tables --------\nCREATE TABLE ingest.nwm_channel_rt_ana_hi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_ana_hi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_srf_hi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_srf_hi OWNER TO viz_proc_admin_rw_user;\n\n-------- PRVI tables --------\nCREATE TABLE ingest.nwm_channel_rt_ana_prvi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_ana_prvi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE ingest.nwm_channel_rt_srf_prvi (\n    feature_id integer,\n    forecast_hour integer,\n    streamflow double precision\n);\nALTER TABLE ingest.nwm_channel_rt_srf_prvi OWNER TO viz_proc_admin_rw_user;\n\n-- Create the recurrence flows tables\nCREATE TABLE derived.recurrence_flows_conus (\n    feature_id integer NOT NULL,\n    rf_1_5 double precision,\n    rf_2_0 double precision,\n    rf_3_0 double precision,\n    rf_4_0 double precision,\n    rf_5_0 double precision,\n    rf_10_0 double precision,\n    rf_2_0_17c double precision,\n    rf_5_0_17c double precision,\n    rf_10_0_17c double precision,\n    rf_25_0_17c double precision,\n    rf_50_0_17c double precision,\n    rf_100_0_17c double precision\n);\nALTER TABLE derived.recurrence_flows_conus OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.recurrence_flows_conus from ${HOME}/nwm_v21_recurrence_flows.csv delimiter ',' csv header;\nCREATE INDEX idx_rf_featureid ON derived.recurrence_flows_conus (feature_id);\nALTER TABLE derived.recurrence_flows_conus ADD COLUMN bankfull DOUBLE PRECISION; \nUPDATE derived.recurrence_flows_conus SET bankfull = ${RECURR_FLOW_CONUS};\n\nCREATE TABLE derived.recurrence_flows_hi (\n    feature_id integer NOT NULL,\n    rf_2_0 double precision,\n    rf_5_0 double precision,\n    rf_10_0 double precision,\n    rf_25_0 double precision,\n    rf_50_0 double precision,\n    rf_100_0 double precision,\n    rf_500_0 double precision,\n    huc6 text\n);\nALTER TABLE derived.recurrence_flows_hi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.recurrence_flows_hi from ${HOME}/nwm_v20_recurrence_flows_hawaii.csv delimiter ',' csv header;\nCREATE INDEX idx_rf_hi_featureid ON derived.recurrence_flows_hi (feature_id);\nALTER TABLE derived.recurrence_flows_hi ADD COLUMN bankfull DOUBLE PRECISION; \nUPDATE derived.recurrence_flows_hi SET bankfull = ${RECURR_FLOW_HI};\n\nCREATE TABLE derived.recurrence_flows_prvi (\n    feature_id integer NOT NULL,\n    rf_2_0 double precision,\n    rf_5_0 double precision,\n    rf_10_0 double precision,\n    rf_25_0 double precision,\n    rf_50_0 double precision,\n    rf_100_0 double precision,\n    rf_500_0 double precision,\n    huc6 text\n);\nALTER TABLE derived.recurrence_flows_prvi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.recurrence_flows_prvi from ${HOME}/nwm_v21_recurrence_flows_prvi.csv delimiter ',' csv header;\nCREATE INDEX idx_rf_prvi_featureid ON derived.recurrence_flows_prvi USING btree (feature_id);\nALTER TABLE derived.recurrence_flows_prvi ADD COLUMN bankfull DOUBLE PRECISION; \nUPDATE derived.recurrence_flows_prvi SET bankfull = ${RECURR_FLOW_PRVI};\n\n-- Create the channels tables\nCREATE TABLE derived.channels_conus\n(\n    feature_id integer PRIMARY KEY,\n    strm_order bigint,\n    name character varying(100),\n    huc6 text,\n    nwm_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.channels_conus OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.channels_conus from ${HOME}/nwm_v21_web_mercator_channels.csv delimiter ',' csv header;\nCREATE INDEX idx_ch_featureid ON derived.channels_conus USING btree (feature_id);\n\nCREATE TABLE derived.channels_hi\n(\n    feature_id integer PRIMARY KEY,\n    strm_order bigint,\n    name character varying(100),\n    huc6 text,\n    nwm_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.channels_hi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.channels_hi from ${HOME}/nwm_v21_web_mercator_channels_hi.csv delimiter ',' csv header;\nCREATE INDEX idx_ch_hi_featureid ON derived.channels_hi USING btree (feature_id);\n\nCREATE TABLE derived.channels_prvi\n(\n    feature_id integer PRIMARY KEY,\n    strm_order bigint,\n    name character varying(100),\n    huc6 text,\n    nwm_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.channels_prvi OWNER TO viz_proc_admin_rw_user;\n\n\\copy derived.channels_prvi from ${HOME}/nwm_v21_web_mercator_channels_prvi.csv delimiter ',' csv header;\nCREATE INDEX idx_ch_prvi_featureid ON derived.channels_prvi USING btree (feature_id);\n\n-- Create the FIM channels tables\nCREATE TABLE derived.fim_channels_conus\n(\n    hydro_id integer PRIMARY KEY,\n    huc6 text,\n    fim_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.fim_channels_conus OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE derived.fim_channels_hi\n(\n    hydro_id integer PRIMARY KEY,\n    huc6 text,\n    fim_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.fim_channels_hi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE derived.fim_channels_prvi\n(\n    hydro_id integer PRIMARY KEY,\n    huc6 text,\n    fim_vers double precision,\n    geom geometry\n);\nALTER TABLE derived.fim_channels_prvi OWNER TO viz_proc_admin_rw_user;\n\n-- Create the max flows tables.\nCREATE TABLE cache.max_flows_ana (\n    feature_id integer,\n    maxflow_1hour double precision\n);\nALTER TABLE cache.max_flows_ana OWNER TO viz_proc_admin_rw_user;\n    \nCREATE TABLE cache.max_flows_ana_hi (\n    feature_id integer,\n    maxflow_1hour double precision\n);\nALTER TABLE cache.max_flows_ana_hi OWNER TO viz_proc_admin_rw_user;\n    \nCREATE TABLE cache.max_flows_ana_prvi (\n    feature_id integer,\n    maxflow_1hour double precision\n);\nALTER TABLE cache.max_flows_ana_prvi OWNER TO viz_proc_admin_rw_user;\n    \nCREATE TABLE cache.max_flows_mrf (\n    feature_id integer,\n    maxflow_3day double precision,\n    maxflow_5day double precision,\n    maxflow_10day double precision\n);\nALTER TABLE cache.max_flows_mrf OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE cache.max_flows_srf (\n    feature_id integer,\n    maxflow_18hour double precision\n);\nALTER TABLE cache.max_flows_srf OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE cache.max_flows_srf_hi (\n    feature_id integer,\n    maxflow_48hour double precision\n);\nALTER TABLE cache.max_flows_srf_hi OWNER TO viz_proc_admin_rw_user;\n\nCREATE TABLE cache.max_flows_srf_prvi(\n    feature_id integer,\n    maxflow_48hour double precision\n);\nALTER TABLE cache.max_flows_srf_prvi OWNER TO viz_proc_admin_rw_user;\n\n-- Grant Schemas to User\n\nGRANT ALL ON ALL TABLES IN SCHEMA admin TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA ingest TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA derived TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA cache TO viz_proc_admin_rw_user;\nGRANT ALL ON ALL TABLES IN SCHEMA publish TO viz_proc_admin_rw_user;",
            "vars": {
              "HOME": "/home/ec2-user",
              "RECURR_FLOW_CONUS": "rf_2_0_17c",
              "RECURR_FLOW_HI": "rf_2_0",
              "RECURR_FLOW_PRVI": "rf_2_0",
              "VIZ_PROC_ADMIN_RW_PASS": "QLQW31ZxL0CuE78Rm1lvjYTWg"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "VIZ_PROC_ADMIN_RW_PASS",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.rds-bastion",
      "mode": "managed",
      "type": "aws_instance",
      "name": "rds-bastion",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-025b76b777024295e",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-09743dc26f8b2b3e4",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 1,
            "credit_specification": [],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "hydrovis-ti-hml-ingest-role",
            "id": "i-09743dc26f8b2b3e4",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "m1.small",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0abff922696a4cd90",
            "private_dns": "ip-10-26-150-71.ec2.internal",
            "private_ip": "10.26.150.71",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 100,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-09aa0ea04a7d907a8",
                "volume_size": 12,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0712c2c2742111aa1",
            "tags": {
              "Name": "hv-ti-us-east-1a-rds-l-dba-1",
              "OS": "Linux"
            },
            "tags_all": {
              "Name": "hv-ti-us-east-1a-rds-l-dba-1",
              "OS": "Linux",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "80cdbb566924bf64099fcc03630cba4673ae6f03",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0874e1b42d1981b59",
              "sg-0890e0d212253e91c",
              "sg-0b710d40b356de030"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.rds-bastion.data.template_file.ingest_users",
            "module.rds-bastion.data.template_file.viz_setup",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.rds-bastion.data.template_file.rabbitmq_setup",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_route_table.private",
            "module.rds-bastion.data.template_file.ingest_postgresql_setup",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.mq-ingest.aws_mq_broker.ingest",
            "module.rds-bastion.data.aws_ami.linux",
            "module.rds-bastion.data.template_file.viz_postgresql_setup",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_vpc.main",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.security-groups.aws_security_group.hv-rabbitmq",
            "module.iam-roles.aws_iam_instance_profile.hydrovis-hml-ingest-role",
            "module.rds-bastion.data.cloudinit_config.startup",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.kms.module.key.aws_kms_key.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.rds-ingest",
      "mode": "managed",
      "type": "aws_db_instance",
      "name": "ingest",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "address": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
            "allocated_storage": 100,
            "allow_major_version_upgrade": null,
            "apply_immediately": null,
            "arn": "arn:aws:rds:us-east-1:526904826677:db:hydrovis-ti-ingest",
            "auto_minor_version_upgrade": true,
            "availability_zone": "us-east-1a",
            "backup_retention_period": 7,
            "backup_window": "03:31-04:01",
            "ca_cert_identifier": "rds-ca-2019",
            "character_set_name": null,
            "copy_tags_to_snapshot": true,
            "db_subnet_group_name": "rds_ingest_ti",
            "delete_automated_backups": true,
            "deletion_protection": false,
            "domain": "",
            "domain_iam_role_name": "",
            "enabled_cloudwatch_logs_exports": [],
            "endpoint": "hydrovis-ti-ingest.c4vzypepnkx3.us-east-1.rds.amazonaws.com:5432",
            "engine": "postgres",
            "engine_version": "12.7",
            "final_snapshot_identifier": null,
            "hosted_zone_id": "Z2R2ITUGPM61AM",
            "iam_database_authentication_enabled": false,
            "id": "hydrovis-ti-ingest",
            "identifier": "hydrovis-ti-ingest",
            "identifier_prefix": null,
            "instance_class": "db.r6g.large",
            "iops": 0,
            "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/14e49959-f999-42a7-80f3-028d67449f56",
            "latest_restorable_time": "2022-01-19T22:24:30Z",
            "license_model": "postgresql-license",
            "maintenance_window": "tue:05:09-tue:05:39",
            "max_allocated_storage": 0,
            "monitoring_interval": 0,
            "monitoring_role_arn": "",
            "multi_az": false,
            "name": "rfcfcst",
            "option_group_name": "default:postgres-12",
            "parameter_group_name": "default.postgres12",
            "password": "V4qCVyLf7UAhIOipBTDNVQ9Er",
            "performance_insights_enabled": true,
            "performance_insights_kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/2892e25e-b55a-452e-906b-c8024ac6ac31",
            "performance_insights_retention_period": 7,
            "port": 5432,
            "publicly_accessible": false,
            "replicas": [],
            "replicate_source_db": "",
            "resource_id": "db-EURDGEIXUM4L3BJ6BGYEO42QPY",
            "restore_to_point_in_time": [],
            "s3_import": [],
            "security_group_names": [],
            "skip_final_snapshot": true,
            "snapshot_identifier": null,
            "status": "available",
            "storage_encrypted": true,
            "storage_type": "gp2",
            "tags": {
              "hydrovis-ti-data-ingest-rdsdbtag": "hydrovis-ti-data-ingest-rdsdbtag"
            },
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "hydrovis-ti-data-ingest-rdsdbtag": "hydrovis-ti-data-ingest-rdsdbtag",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "timezone": "",
            "username": "postgres",
            "vpc_security_group_ids": [
              "sg-0890e0d212253e91c"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "password"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "username"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoyNDAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NDgwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.rds-ingest",
      "mode": "managed",
      "type": "aws_db_subnet_group",
      "name": "ingest",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:rds:us-east-1:526904826677:subgrp:rds_ingest_ti",
            "description": "Managed by Terraform",
            "id": "rds_ingest_ti",
            "name": "rds_ingest_ti",
            "name_prefix": null,
            "subnet_ids": [
              "subnet-0712c2c2742111aa1",
              "subnet-0d1ea9ca66f139cfc"
            ],
            "tags": {
              "Name": "My DB subnet group"
            },
            "tags_all": {
              "Name": "My DB subnet group",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a"
          ]
        }
      ]
    },
    {
      "module": "module.rds-viz",
      "mode": "managed",
      "type": "aws_db_instance",
      "name": "viz-processing",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "address": "hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
            "allocated_storage": 100,
            "allow_major_version_upgrade": null,
            "apply_immediately": null,
            "arn": "arn:aws:rds:us-east-1:526904826677:db:hydrovis-ti-viz-processing",
            "auto_minor_version_upgrade": true,
            "availability_zone": "us-east-1a",
            "backup_retention_period": 7,
            "backup_window": "03:18-03:48",
            "ca_cert_identifier": "rds-ca-2019",
            "character_set_name": null,
            "copy_tags_to_snapshot": true,
            "db_subnet_group_name": "rds_viz-processing_ti",
            "delete_automated_backups": true,
            "deletion_protection": false,
            "domain": "",
            "domain_iam_role_name": "",
            "enabled_cloudwatch_logs_exports": [],
            "endpoint": "hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com:5432",
            "engine": "postgres",
            "engine_version": "12.7",
            "final_snapshot_identifier": null,
            "hosted_zone_id": "Z2R2ITUGPM61AM",
            "iam_database_authentication_enabled": false,
            "id": "hydrovis-ti-viz-processing",
            "identifier": "hydrovis-ti-viz-processing",
            "identifier_prefix": null,
            "instance_class": "db.r6g.large",
            "iops": 0,
            "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/3985a2f5-9d17-4e48-83c3-744b43dcb347",
            "latest_restorable_time": "2022-01-19T22:19:45Z",
            "license_model": "postgresql-license",
            "maintenance_window": "mon:06:54-mon:07:24",
            "max_allocated_storage": 0,
            "monitoring_interval": 0,
            "monitoring_role_arn": "",
            "multi_az": false,
            "name": "vizprocessing",
            "option_group_name": "default:postgres-12",
            "parameter_group_name": "default.postgres12",
            "password": "Qno8ZJOzpLvP439BmckSwBipr",
            "performance_insights_enabled": true,
            "performance_insights_kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/2892e25e-b55a-452e-906b-c8024ac6ac31",
            "performance_insights_retention_period": 7,
            "port": 5432,
            "publicly_accessible": false,
            "replicas": [],
            "replicate_source_db": "",
            "resource_id": "db-Z7ZW35O4J5UOMA456BSIJXULY4",
            "restore_to_point_in_time": [],
            "s3_import": [],
            "security_group_names": [],
            "skip_final_snapshot": true,
            "snapshot_identifier": null,
            "status": "available",
            "storage_encrypted": true,
            "storage_type": "gp2",
            "tags": {
              "hydrovis-ti-viz-processing-rdsdbtag": "hydrovis-ti-viz-processing-rdsdbtag"
            },
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "hydrovis-ti-viz-processing-rdsdbtag": "hydrovis-ti-viz-processing-rdsdbtag",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "timezone": "",
            "username": "postgres",
            "vpc_security_group_ids": [
              "sg-0890e0d212253e91c"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "username"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "password"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoyNDAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NDgwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_vpc.main",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a"
          ]
        }
      ]
    },
    {
      "module": "module.rds-viz",
      "mode": "managed",
      "type": "aws_db_subnet_group",
      "name": "viz-processing",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:rds:us-east-1:526904826677:subgrp:rds_viz-processing_ti",
            "description": "Managed by Terraform",
            "id": "rds_viz-processing_ti",
            "name": "rds_viz-processing_ti",
            "name_prefix": null,
            "subnet_ids": [
              "subnet-01225cab59721c507",
              "subnet-0bce7b6e5f96548cf"
            ],
            "tags": {
              "Name": "Viz Processing Subnet Group"
            },
            "tags_all": {
              "Name": "Viz Processing Subnet Group",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.rnr_ec2",
      "mode": "data",
      "type": "aws_ami",
      "name": "linux",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-025b76b777024295e",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-0a876d9af57e76134",
                  "throughput": "0",
                  "volume_size": "12",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-11-19T21:49:21.000Z",
            "description": "add docker for stig",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-amznlinux2-STIGD*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-025b76b777024295e",
            "image_id": "ami-025b76b777024295e",
            "image_location": "526904826677/hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": null,
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-0a876d9af57e76134",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/amzn-linux2-stig-test/1.0.4/24",
              "Name": "hydrovis-amznlinux2-STIGD 2021-11-19T21-28-46.236Z",
              "OS": "Linux",
              "TaskOrderId": "1305L420FNWWJ0136",
              "hydrovis-sys": "admin-security",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydroviz",
              "vpc": "dev"
            },
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.rnr_ec2",
      "mode": "data",
      "type": "cloudinit_config",
      "name": "startup",
      "provider": "provider[\"registry.terraform.io/hashicorp/cloudinit\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "boundary": "MIMEBOUNDARY",
            "gzip": false,
            "id": "1912154609",
            "part": [
              {
                "content": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=10.26.150.5\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=replace_route\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\n\necho \"Setting up RNR Mount\"\ncd\nsudo mkdir /rnr\nsudo file -s /dev/sdf\nsudo lsblk -f\nsudo mkfs -t xfs /dev/sdf\nsudo mount /dev/sdf /rnr\n#--------------------------------------------------\n#change the /etc/fstab file to make sure the volume mounts after a reboot\n#extract the UUID to be included in the /etc/fstab line\nblock_output=`sudo blkid | grep xfs | grep -v LABEL`\n# output example from block_output\n#/dev/nvme1n1: UUID=\"bb4ee817-111a-4cb6-b540-a40c1d34a8fa\" TYPE=\"xfs\"\nuuid_part=`echo $block_output | cut -d ' ' -f2 | sed 's/\\\"//g'`\n#Example fstab line to add to the end:\n#UUID=bb4ee817-111a-4cb6-b540-a40c1d34a8fa     /rnr        xfs    defaults,nofail   0   2\nexport line_to_add=\"$uuid_part        /rnr    xfs     defaults,nofail        0       2\"\necho $line_to_add \u003e\u003e \"/etc/fstab\"\n\n#-----------------------------------------------------\n\necho \"Installing System Dependencies\"\nsudo amazon-linux-extras install epel -y\nsudo yum-config-manager --enable epel\nsudo yum -y install git python3-devel openmpi-devel hdf5-devel  gcc-c++ cmake3 curl-devel make\nsudo yum -y install m4\n\necho \"Installing Python Dependencies\"\nsudo git clone https://github.com/Unidata/netcdf-c.git /opt/netcdf-c\ncd /opt/netcdf-c\nsudo cmake3 .\nsudo make install\nsudo git clone https://github.com/Unidata/netcdf-fortran.git /opt/netcdf-fortran\ncd /opt/netcdf-fortran\nsudo cmake3 .\nsudo make install\n\necho \"Updating Permissions\"\ncd\nsudo chown ssm-user: /rnr\n\necho \"Installing WRF-Hydro Files\"\ncd /rnr\naws s3 cp s3://hydrovis-ti-deployment-us-east-1/rnr/wrf_hydro.tgz .\ntar -zxvf wrf_hydro.tgz\n\necho \"Installing Replace and Route\"\ncd /rnr\nsudo aws s3 cp s3://hydrovis-ti-deployment-us-east-1/rnr/owp-viz-replace-route.tgz .\ntar -zxvf owp-viz-replace-route.tgz\n#git clone https://vlab.ncep.noaa.gov/code-review/a/owp-viz-replace-route\n\necho \"Installing RNR Dependencies\"\ncd /rnr/owp-viz-replace-route\n#sudo git checkout python-timeslicegen\nbash install.sh -s\n\necho \"Copying Static Resources\"\ncd /rnr\nsudo aws s3 cp  s3://hydrovis-ti-deployment-us-east-1/rnr/rnr_static.tgz  .\ntar -zxvf rnr_static.tgz\nsudo chown root static\nsudo chgrp root static\nsudo mkdir /rnr/owp-viz-replace-route/RESOURCES\nsudo cp -r static /rnr/owp-viz-replace-route/RESOURCES/\nsudo rm rnr_static.tgz\n\necho \"Updating Libnetcdf Link\"\n#Make sure that libnetcdf.so is available to the wrf_hydro executable, which is expecting libnetcdf.so.18\n#Note: version 18 will point to the generic name which already points to a different specific name, such as libnetcdf.so.19.\ncd /usr/local/lib64\nsudo ln -s libnetcdf.so libnetcdf.so.18\n\necho \"Setting up RNR File Structure\"\nsudo mkdir /rnr/share\nsudo mkdir /rnr/share/log\nsudo mkdir /rnr/share/.archive\nsudo mkdir /rnr/share/Run\n\necho \"Copying Rendered Template File to Replace and Route\"\nsudo cp /deploy_files/conus.ini /rnr/owp-viz-replace-route/configs/conus.ini\nsudo cp /deploy_files/.env.devel /rnr/owp-viz-replace-route/.env.devel\n\necho \"Setting up RNR Crontab\"\nsudo crontab -l -u ec2-user \u003e /tmp/mycrontab\necho '10 * * * * cd /rnr/owp-viz-replace-route \u0026\u0026 sudo ./run.sh' \u003e\u003e /tmp/mycrontab\nsudo crontab -u ec2-user /tmp/mycrontab\n\necho \"Finished Setup\"\n",
                "content_type": "text/x-shellscript",
                "filename": "install.sh",
                "merge_type": ""
              },
              {
                "content": "#cloud-config\n{\"write_files\":[{\"content\":\"[PATHS]\\n# The list of URLs to use when looking for nwm data.  The list\\n# assumes order based precendence.  The object store link should\\n# be defined before the nomads link.  These are extended with:\\n# nwm.YYYYMMDD/analysis_assim/nwm.tHHz.analysis_assim.type.tm00.conus.nc\\n# or /YYYY/YYYYMMDDHHMM.type_DOMAIN1.comp\\n\\nURLS = https://nwcal-dstore.nwc.nws.noaa.gov/nwm/2.1/\\n       https://nomads.ncep.noaa.gov/pub/data/nccf/com/nwm/prod\\n\\nWRDS_API_HOST_URL = http://10.26.150.90\\n\\nWRDS_RFC_FORECAST_API = /api/rfc_forecast/v2.0/forecast\\nWRDS_LOCATION_API = /api/location/v3.0\\n\\nFCST_API_BASE_URL = ${WRDS_API_HOST_URL}${WRDS_RFC_FORECAST_API}\\n\\n#v2.0\\nWRDS_RFC_FORECAST_STAGE_ACTION_URL = ${FCST_API_BASE_URL}/stage/nws_lid/all/?returnNewestForecast=true\\u0026minForecastStatus=action\\n\\n#v 2.0\\nWRDS_RFC_FORECAST_STREAMFLOW_ACTION_URL = ${FCST_API_BASE_URL}/streamflow/nws_lid/all/?returnNewestForecast=true\\u0026minForecastStatus=action\\n\\n# v2.0\\nWRDS_RFC_FORECAST_STREAMFLOW_BASE_URL = ${FCST_API_BASE_URL}/streamflow/nws_lid\\n\\nWRDS_LOCATION_BASE_URL = ${WRDS_API_HOST_URL}${WRDS_LOCATION_API}\\n\\nWRDS_LOCATION_ACTION_FLOW_URL = ${WRDS_LOCATION_BASE_URL}/threshold/flow/action/all\\nWRDS_LOCATION_RATING_BASE_URL = ${WRDS_LOCATION_BASE_URL}/rating_curve\\n\\n\\n# Location and name of the Resource file.  If not prefaced with'/',\\n# the path is relative to the current working directory\\nRESOURCES_PATH = RESOURCES\\n\\n# the host root share directory\\nSHARE_PATH = /rnr/share\\n\\n# Location to place the log file.  If not prefaced with '/', the path is\\n# relative to the current working directory.  If specifying the file name,\\n# end the name with .log\\nLOG_PATH =  ${SHARE_PATH}/log/replace_and_route-dynamic-run-NWMv2.1.log\\n\\n# Run directory, where the watermodel will be run\\nRUN_PATH = ${SHARE_PATH}/Run\\n\\n# Archive directory.  Base directory for archiving.  wrf_hydro run instances\\n# will be archived at ARCHIVES/Run and processed output will be archived at\\n# ARCHIVES/processed_output\\nARCHIVES_PATH = ${SHARE_PATH}/.archive\\n\\n# location of the timeslice generator config file.  It is unlikely it\\n# will need to be changed.\\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\\n\\n# Suffix for processed output files.  Processed output files are\\n# named by:\\n# ${SHARE_PATH}/nwc.YYYYMMDD/medium_range/wrf_hydro_tHH.medium_range.channel_rt.fXXX.${OUTPUT_SET_ID}.nc\\n# OUTPUT_SET_ID may be any combination of lower or uppercase letters, numbers,\\n# underscores, or dashes\\nOUTPUT_SET_ID = conus\\n\\n[DURATIONS]\\n# How long to archive run instances in the directory specified by ARCHIVES.\\n# This value is in days.\\nARCHIVE_INSTANCES_FOR = 1\\n\\n# How long to archive processed NWM data for  in the directory specified by\\n# ARCHIVES.  This value is in days.\\nARCHIVE_OUTPUT_FOR = 0\\n\\n# How many hours to look back in time to find a reference time with the required\\n# files.  This affects how execution instances are named and can cause a failure\\n# if a reference time that has already been processed is used.  Value is in hours.\\nREFERENCE_TIME_LOOKBACK = 1\\n\\n[OBJECT_STORE]\\n# These settings are used to configure where the processed files should\\n# be stored and accessible for distribution\\n\\n# host name with protocol \\nHOST=%(OSTORE_HOST)s\\n\\n# port number to connect to\\nPORT=%(OSTORE_PORT)s\\n\\n# bucket where processed files should be uploaded and stored\\nBUCKET=%(OSTORE_BUCKET)s\\n\\n# access and secret object store keys.  Should be set via environment variables\\nACCESS_KEY=%(OSTORE_ACCESSKEY)s\\nSECRET_KEY=%(OSTORE_SECRETKEY)s\\n\\n[REPLACE_AND_ROUTE_RESOURCES]\\n# Files in this section are expected to exist in the\\n# RESOURCES/static/wrf_hydro_support directory\\n\\n# Name of the water body file.  The feature_id order is maintained.\\nWATERBODY_FILE = domain_waterbodies.csv\\n\\n# Master Waterbody file.  This file is subsetted to generate a LAKEPARM.nc\\n# wrf_hydro input file.\\n# MASTER_WATERBODY_FILE = master_lakeparm.nc\\n\\n[WRF_HYDRO_RESOURCES]\\n# The names of files required by wrf_hydro\\n# The files here are found in RESOURCES/static/wrf_hydro\\n\\n# Name of the hydro.namelist file to use\\n# should be placed in each execution directory\\nHYDRO_NAMELIST_FILE = hydro.namelist\\n\\n# Name of the namelist.hrldas file to use\\n# should be placed in each execution directory\\nNAMELIST_HRLDAS_FILE = namelist.hrldas\\n\\n# Path to the pre-compiled wrf_hydro executable to use\\n# This path should be fully specified.\\n# WRF_HYDRO_EXE_PATH = /rnr/wrf_hydro/bin/wrf_hydro_NoahMP.exe\\n\\nWRF_HYDRO_EXE_PATH = /rnr/wrf_hydro_nwm_public/trunk/NDHMS/Run/wrf_hydro_NoahMP.exe\\n\\n# Tells how many days of FORCING files to create.  This must be an integer.\\nDAYS_OF_FORCINGS = 5\\n\\n# Tell how often a HYDRO_RST file should be written by the wrf_hydro\\n# executable.  This must be specified in hours as an integer\\nRESTART_WRITE_FREQUENCY = 24\\n\\n[WRF_HYDRO_DOMAIN]\\n# The files here are placed in the common Run/RESOURCES/DOMAIN directory\\n\\n# land surface model gridded input data file needed by wrf_hydro\\n# should be placed in RESOURCES/static/wrf_hydro\\nGEO_STATIC_FILE = geo_em_CONUS.nc\\n\\n# Name of the full domain file to use\\n# the high-resolution routing terrain input data file\\n# should be placed in RESOURCES/static/wrf_hydro\\nGEO_FINEGRID_FILE = Fulldom_hires_netcdf_250m.nc\\n\\n# Name of the hydro table 2D file to use\\n# the spatial hydro parameters file\\n# should be placed in RESOURCES/static/wrf_hydro\\nSPATIAL_HYDRO_TABLE_FILE = hydro2dtbl_CONUS_FullRouting.nc\\n\\n# Name of the soil properties file to use\\n# spatial terrain properties file used in namelist.hrldas\\n# should be placed in RESOURCES/static/wrf_hydro\\nSPATIAL_PROPERTIES_FILE = soilproperties_CONUS_FullRouting.nc\\n\\n# Name of the spatial weights file to use\\n# user defined mapping file to use\\n# should be placed in RESOURCES/static/wrf_hydro\\nUSER_DEFINED_MAP_FILE = spatialweights_CONUS_FullRouting.nc\\n\\n# Name of the wrf input file to use\\n# should be placed in RESOURCES/static/wrf_hydro\\nHRLDAS_SETUP_FILE = wrfinput_CONUS.nc\\n\\n[WRF_HYDRO_TABLES]\\n# The files here are placed in the common Run/RESOURCES/TABLES directory\\n\\n# CHANPARM.TBL file needed by each wrf_hydro execution\\n# should be placed in RESOURCES/static/wrf_hydro\\nCHANPARM_TABLE = CHANPARM.TBL\\n\\n# GENPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nGENPARM_TABLE = GENPARM.TBL\\n\\n# HYDRO.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nHYDRO_TABLE = HYDRO.TBL\\n\\n# LAKEPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nLAKEPARM_TABLE = LAKEPARM.TBL\\n\\n# MPTABLE.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nMPTABLE_TABLE = MPTABLE.TBL\\n\\n# SOILPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nSOILPARM_TABLE = SOILPARM.TBL\\n\\n# URBPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nURBPARM_TABLE = URBPARM.TBL\\n\\n# VEGPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nVEGPARM_TABLE = VEGPARM.TBL\\n\\n[DEFAULT]\\n# Default values for configuration file parameters\\n# Override parameters in the sections above.  Do not alter\\n# the default values.\\nURLS = http://localhost/nwm\\nRESOURCES_PATH = RESOURCES\\nLOG_PATH = LOGS\\nSHARE_PATH = OUTPUT\\nRUN_PATH = RUNS\\nARCHIVES_PATH = ARCHIVES\\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\\nTHRESHOLD_CSV_FILEPATH = RESOURCES/static/wrf_hydro_support/nwm_ahps_thresholds.csv\\nARCHIVE_INSTANCES_FOR = 30\\nARCHIVE_OUTPUT_FOR = 60\\nREFERENCE_TIME_LOOKBACK = 6\\nOUTPUT_SET_ID = DRAFT\\nDAYS_OF_FORCINGS = 5\\nRESTART_WRITE_FREQUENCY = 24\\n# How long to wait on the object store to respond before timing out.\\n# Specified in seconds.\\nCONNECTION_TIMEOUT = 60\\nWATERBODY_FILE = conus2.0/waterbodies.csv\\nMASTER_WATERBODY_FILE = master_lakeparm.nc\\n#AHPS_POINTS_MAPPING_FILE = conus2.0/gages_map.csv\\nHYDRO_NAMELIST_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/hydro.namelist\\nNAMELIST_HRLDAS_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/namelist.hrldas\\nWRF_HYDRO_EXE_PATH =\\nLAKEPARM_FILE = ${RUN_WRF_HYDRO_RESOURCES:MASTER_WATERBODY_FILE}\\nROUTELINK_FILE =\\nGEO_STATIC_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/geo_em.nc\\nGWBUCKPARM_FILE =\\nNUDGING_PARAMS_FILE =\\nGEO_FINEGRID_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/Fulldom.nc\\nSPATIAL_HYDRO_TABLE_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO_TBL_2D.nc\\nSPATIAL_PROPERTIES_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/soil_properties.nc\\nUSER_DEFINED_MAP_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/spatialweights.nc\\nHRLDAS_SETUP_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/wrfinput.nc\\nCHANPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/CHANPARM.TBL\\nGENPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/GENPARM.TBL\\nHYDRO_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO.TBL\\nLAKEPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/LAKEPARM.TBL\\nMPTABLE_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/MPTABLE.TBL\\nSOILPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/SOILPARM.TBL\\nURBPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/URBPARM.TBL\\nVEGPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/VEGPARM.TBL\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/deploy_files/conus.ini\",\"permissions\":\"0400\"},{\"content\":\"##  Object Store Environment Variables\\n# ---------------------------------------------------------\\nOSTORE_HOST=\\nOSTORE_PORT=\\nOSTORE_BUCKET=hydrovis-ti-rnr-us-east-1\\nOSTORE_ACCESSKEY=\\nOSTORE_SECRETKEY=\\nLD_LIBRARY_PATH=/usr/local/lib64\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/deploy_files/.env.devel\",\"permissions\":\"0400\"}]}\n",
                "content_type": "text/cloud-config",
                "filename": "cloud-config.yaml",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"install.sh\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=10.26.150.5\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=replace_route\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\n\necho \"Setting up RNR Mount\"\ncd\nsudo mkdir /rnr\nsudo file -s /dev/sdf\nsudo lsblk -f\nsudo mkfs -t xfs /dev/sdf\nsudo mount /dev/sdf /rnr\n#--------------------------------------------------\n#change the /etc/fstab file to make sure the volume mounts after a reboot\n#extract the UUID to be included in the /etc/fstab line\nblock_output=`sudo blkid | grep xfs | grep -v LABEL`\n# output example from block_output\n#/dev/nvme1n1: UUID=\"bb4ee817-111a-4cb6-b540-a40c1d34a8fa\" TYPE=\"xfs\"\nuuid_part=`echo $block_output | cut -d ' ' -f2 | sed 's/\\\"//g'`\n#Example fstab line to add to the end:\n#UUID=bb4ee817-111a-4cb6-b540-a40c1d34a8fa     /rnr        xfs    defaults,nofail   0   2\nexport line_to_add=\"$uuid_part        /rnr    xfs     defaults,nofail        0       2\"\necho $line_to_add \u003e\u003e \"/etc/fstab\"\n\n#-----------------------------------------------------\n\necho \"Installing System Dependencies\"\nsudo amazon-linux-extras install epel -y\nsudo yum-config-manager --enable epel\nsudo yum -y install git python3-devel openmpi-devel hdf5-devel  gcc-c++ cmake3 curl-devel make\nsudo yum -y install m4\n\necho \"Installing Python Dependencies\"\nsudo git clone https://github.com/Unidata/netcdf-c.git /opt/netcdf-c\ncd /opt/netcdf-c\nsudo cmake3 .\nsudo make install\nsudo git clone https://github.com/Unidata/netcdf-fortran.git /opt/netcdf-fortran\ncd /opt/netcdf-fortran\nsudo cmake3 .\nsudo make install\n\necho \"Updating Permissions\"\ncd\nsudo chown ssm-user: /rnr\n\necho \"Installing WRF-Hydro Files\"\ncd /rnr\naws s3 cp s3://hydrovis-ti-deployment-us-east-1/rnr/wrf_hydro.tgz .\ntar -zxvf wrf_hydro.tgz\n\necho \"Installing Replace and Route\"\ncd /rnr\nsudo aws s3 cp s3://hydrovis-ti-deployment-us-east-1/rnr/owp-viz-replace-route.tgz .\ntar -zxvf owp-viz-replace-route.tgz\n#git clone https://vlab.ncep.noaa.gov/code-review/a/owp-viz-replace-route\n\necho \"Installing RNR Dependencies\"\ncd /rnr/owp-viz-replace-route\n#sudo git checkout python-timeslicegen\nbash install.sh -s\n\necho \"Copying Static Resources\"\ncd /rnr\nsudo aws s3 cp  s3://hydrovis-ti-deployment-us-east-1/rnr/rnr_static.tgz  .\ntar -zxvf rnr_static.tgz\nsudo chown root static\nsudo chgrp root static\nsudo mkdir /rnr/owp-viz-replace-route/RESOURCES\nsudo cp -r static /rnr/owp-viz-replace-route/RESOURCES/\nsudo rm rnr_static.tgz\n\necho \"Updating Libnetcdf Link\"\n#Make sure that libnetcdf.so is available to the wrf_hydro executable, which is expecting libnetcdf.so.18\n#Note: version 18 will point to the generic name which already points to a different specific name, such as libnetcdf.so.19.\ncd /usr/local/lib64\nsudo ln -s libnetcdf.so libnetcdf.so.18\n\necho \"Setting up RNR File Structure\"\nsudo mkdir /rnr/share\nsudo mkdir /rnr/share/log\nsudo mkdir /rnr/share/.archive\nsudo mkdir /rnr/share/Run\n\necho \"Copying Rendered Template File to Replace and Route\"\nsudo cp /deploy_files/conus.ini /rnr/owp-viz-replace-route/configs/conus.ini\nsudo cp /deploy_files/.env.devel /rnr/owp-viz-replace-route/.env.devel\n\necho \"Setting up RNR Crontab\"\nsudo crontab -l -u ec2-user \u003e /tmp/mycrontab\necho '10 * * * * cd /rnr/owp-viz-replace-route \u0026\u0026 sudo ./run.sh' \u003e\u003e /tmp/mycrontab\nsudo crontab -u ec2-user /tmp/mycrontab\n\necho \"Finished Setup\"\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"cloud-config.yaml\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/cloud-config\r\nMime-Version: 1.0\r\n\r\n#cloud-config\n{\"write_files\":[{\"content\":\"[PATHS]\\n# The list of URLs to use when looking for nwm data.  The list\\n# assumes order based precendence.  The object store link should\\n# be defined before the nomads link.  These are extended with:\\n# nwm.YYYYMMDD/analysis_assim/nwm.tHHz.analysis_assim.type.tm00.conus.nc\\n# or /YYYY/YYYYMMDDHHMM.type_DOMAIN1.comp\\n\\nURLS = https://nwcal-dstore.nwc.nws.noaa.gov/nwm/2.1/\\n       https://nomads.ncep.noaa.gov/pub/data/nccf/com/nwm/prod\\n\\nWRDS_API_HOST_URL = http://10.26.150.90\\n\\nWRDS_RFC_FORECAST_API = /api/rfc_forecast/v2.0/forecast\\nWRDS_LOCATION_API = /api/location/v3.0\\n\\nFCST_API_BASE_URL = ${WRDS_API_HOST_URL}${WRDS_RFC_FORECAST_API}\\n\\n#v2.0\\nWRDS_RFC_FORECAST_STAGE_ACTION_URL = ${FCST_API_BASE_URL}/stage/nws_lid/all/?returnNewestForecast=true\\u0026minForecastStatus=action\\n\\n#v 2.0\\nWRDS_RFC_FORECAST_STREAMFLOW_ACTION_URL = ${FCST_API_BASE_URL}/streamflow/nws_lid/all/?returnNewestForecast=true\\u0026minForecastStatus=action\\n\\n# v2.0\\nWRDS_RFC_FORECAST_STREAMFLOW_BASE_URL = ${FCST_API_BASE_URL}/streamflow/nws_lid\\n\\nWRDS_LOCATION_BASE_URL = ${WRDS_API_HOST_URL}${WRDS_LOCATION_API}\\n\\nWRDS_LOCATION_ACTION_FLOW_URL = ${WRDS_LOCATION_BASE_URL}/threshold/flow/action/all\\nWRDS_LOCATION_RATING_BASE_URL = ${WRDS_LOCATION_BASE_URL}/rating_curve\\n\\n\\n# Location and name of the Resource file.  If not prefaced with'/',\\n# the path is relative to the current working directory\\nRESOURCES_PATH = RESOURCES\\n\\n# the host root share directory\\nSHARE_PATH = /rnr/share\\n\\n# Location to place the log file.  If not prefaced with '/', the path is\\n# relative to the current working directory.  If specifying the file name,\\n# end the name with .log\\nLOG_PATH =  ${SHARE_PATH}/log/replace_and_route-dynamic-run-NWMv2.1.log\\n\\n# Run directory, where the watermodel will be run\\nRUN_PATH = ${SHARE_PATH}/Run\\n\\n# Archive directory.  Base directory for archiving.  wrf_hydro run instances\\n# will be archived at ARCHIVES/Run and processed output will be archived at\\n# ARCHIVES/processed_output\\nARCHIVES_PATH = ${SHARE_PATH}/.archive\\n\\n# location of the timeslice generator config file.  It is unlikely it\\n# will need to be changed.\\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\\n\\n# Suffix for processed output files.  Processed output files are\\n# named by:\\n# ${SHARE_PATH}/nwc.YYYYMMDD/medium_range/wrf_hydro_tHH.medium_range.channel_rt.fXXX.${OUTPUT_SET_ID}.nc\\n# OUTPUT_SET_ID may be any combination of lower or uppercase letters, numbers,\\n# underscores, or dashes\\nOUTPUT_SET_ID = conus\\n\\n[DURATIONS]\\n# How long to archive run instances in the directory specified by ARCHIVES.\\n# This value is in days.\\nARCHIVE_INSTANCES_FOR = 1\\n\\n# How long to archive processed NWM data for  in the directory specified by\\n# ARCHIVES.  This value is in days.\\nARCHIVE_OUTPUT_FOR = 0\\n\\n# How many hours to look back in time to find a reference time with the required\\n# files.  This affects how execution instances are named and can cause a failure\\n# if a reference time that has already been processed is used.  Value is in hours.\\nREFERENCE_TIME_LOOKBACK = 1\\n\\n[OBJECT_STORE]\\n# These settings are used to configure where the processed files should\\n# be stored and accessible for distribution\\n\\n# host name with protocol \\nHOST=%(OSTORE_HOST)s\\n\\n# port number to connect to\\nPORT=%(OSTORE_PORT)s\\n\\n# bucket where processed files should be uploaded and stored\\nBUCKET=%(OSTORE_BUCKET)s\\n\\n# access and secret object store keys.  Should be set via environment variables\\nACCESS_KEY=%(OSTORE_ACCESSKEY)s\\nSECRET_KEY=%(OSTORE_SECRETKEY)s\\n\\n[REPLACE_AND_ROUTE_RESOURCES]\\n# Files in this section are expected to exist in the\\n# RESOURCES/static/wrf_hydro_support directory\\n\\n# Name of the water body file.  The feature_id order is maintained.\\nWATERBODY_FILE = domain_waterbodies.csv\\n\\n# Master Waterbody file.  This file is subsetted to generate a LAKEPARM.nc\\n# wrf_hydro input file.\\n# MASTER_WATERBODY_FILE = master_lakeparm.nc\\n\\n[WRF_HYDRO_RESOURCES]\\n# The names of files required by wrf_hydro\\n# The files here are found in RESOURCES/static/wrf_hydro\\n\\n# Name of the hydro.namelist file to use\\n# should be placed in each execution directory\\nHYDRO_NAMELIST_FILE = hydro.namelist\\n\\n# Name of the namelist.hrldas file to use\\n# should be placed in each execution directory\\nNAMELIST_HRLDAS_FILE = namelist.hrldas\\n\\n# Path to the pre-compiled wrf_hydro executable to use\\n# This path should be fully specified.\\n# WRF_HYDRO_EXE_PATH = /rnr/wrf_hydro/bin/wrf_hydro_NoahMP.exe\\n\\nWRF_HYDRO_EXE_PATH = /rnr/wrf_hydro_nwm_public/trunk/NDHMS/Run/wrf_hydro_NoahMP.exe\\n\\n# Tells how many days of FORCING files to create.  This must be an integer.\\nDAYS_OF_FORCINGS = 5\\n\\n# Tell how often a HYDRO_RST file should be written by the wrf_hydro\\n# executable.  This must be specified in hours as an integer\\nRESTART_WRITE_FREQUENCY = 24\\n\\n[WRF_HYDRO_DOMAIN]\\n# The files here are placed in the common Run/RESOURCES/DOMAIN directory\\n\\n# land surface model gridded input data file needed by wrf_hydro\\n# should be placed in RESOURCES/static/wrf_hydro\\nGEO_STATIC_FILE = geo_em_CONUS.nc\\n\\n# Name of the full domain file to use\\n# the high-resolution routing terrain input data file\\n# should be placed in RESOURCES/static/wrf_hydro\\nGEO_FINEGRID_FILE = Fulldom_hires_netcdf_250m.nc\\n\\n# Name of the hydro table 2D file to use\\n# the spatial hydro parameters file\\n# should be placed in RESOURCES/static/wrf_hydro\\nSPATIAL_HYDRO_TABLE_FILE = hydro2dtbl_CONUS_FullRouting.nc\\n\\n# Name of the soil properties file to use\\n# spatial terrain properties file used in namelist.hrldas\\n# should be placed in RESOURCES/static/wrf_hydro\\nSPATIAL_PROPERTIES_FILE = soilproperties_CONUS_FullRouting.nc\\n\\n# Name of the spatial weights file to use\\n# user defined mapping file to use\\n# should be placed in RESOURCES/static/wrf_hydro\\nUSER_DEFINED_MAP_FILE = spatialweights_CONUS_FullRouting.nc\\n\\n# Name of the wrf input file to use\\n# should be placed in RESOURCES/static/wrf_hydro\\nHRLDAS_SETUP_FILE = wrfinput_CONUS.nc\\n\\n[WRF_HYDRO_TABLES]\\n# The files here are placed in the common Run/RESOURCES/TABLES directory\\n\\n# CHANPARM.TBL file needed by each wrf_hydro execution\\n# should be placed in RESOURCES/static/wrf_hydro\\nCHANPARM_TABLE = CHANPARM.TBL\\n\\n# GENPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nGENPARM_TABLE = GENPARM.TBL\\n\\n# HYDRO.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nHYDRO_TABLE = HYDRO.TBL\\n\\n# LAKEPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nLAKEPARM_TABLE = LAKEPARM.TBL\\n\\n# MPTABLE.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nMPTABLE_TABLE = MPTABLE.TBL\\n\\n# SOILPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nSOILPARM_TABLE = SOILPARM.TBL\\n\\n# URBPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nURBPARM_TABLE = URBPARM.TBL\\n\\n# VEGPARM.TBL file needed by wrf_hydro model\\n# should be placed in RESOURCES/static/wrf_hydro\\nVEGPARM_TABLE = VEGPARM.TBL\\n\\n[DEFAULT]\\n# Default values for configuration file parameters\\n# Override parameters in the sections above.  Do not alter\\n# the default values.\\nURLS = http://localhost/nwm\\nRESOURCES_PATH = RESOURCES\\nLOG_PATH = LOGS\\nSHARE_PATH = OUTPUT\\nRUN_PATH = RUNS\\nARCHIVES_PATH = ARCHIVES\\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\\nTHRESHOLD_CSV_FILEPATH = RESOURCES/static/wrf_hydro_support/nwm_ahps_thresholds.csv\\nARCHIVE_INSTANCES_FOR = 30\\nARCHIVE_OUTPUT_FOR = 60\\nREFERENCE_TIME_LOOKBACK = 6\\nOUTPUT_SET_ID = DRAFT\\nDAYS_OF_FORCINGS = 5\\nRESTART_WRITE_FREQUENCY = 24\\n# How long to wait on the object store to respond before timing out.\\n# Specified in seconds.\\nCONNECTION_TIMEOUT = 60\\nWATERBODY_FILE = conus2.0/waterbodies.csv\\nMASTER_WATERBODY_FILE = master_lakeparm.nc\\n#AHPS_POINTS_MAPPING_FILE = conus2.0/gages_map.csv\\nHYDRO_NAMELIST_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/hydro.namelist\\nNAMELIST_HRLDAS_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/namelist.hrldas\\nWRF_HYDRO_EXE_PATH =\\nLAKEPARM_FILE = ${RUN_WRF_HYDRO_RESOURCES:MASTER_WATERBODY_FILE}\\nROUTELINK_FILE =\\nGEO_STATIC_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/geo_em.nc\\nGWBUCKPARM_FILE =\\nNUDGING_PARAMS_FILE =\\nGEO_FINEGRID_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/Fulldom.nc\\nSPATIAL_HYDRO_TABLE_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO_TBL_2D.nc\\nSPATIAL_PROPERTIES_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/soil_properties.nc\\nUSER_DEFINED_MAP_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/spatialweights.nc\\nHRLDAS_SETUP_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/wrfinput.nc\\nCHANPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/CHANPARM.TBL\\nGENPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/GENPARM.TBL\\nHYDRO_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO.TBL\\nLAKEPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/LAKEPARM.TBL\\nMPTABLE_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/MPTABLE.TBL\\nSOILPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/SOILPARM.TBL\\nURBPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/URBPARM.TBL\\nVEGPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/VEGPARM.TBL\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/deploy_files/conus.ini\",\"permissions\":\"0400\"},{\"content\":\"##  Object Store Environment Variables\\n# ---------------------------------------------------------\\nOSTORE_HOST=\\nOSTORE_PORT=\\nOSTORE_BUCKET=hydrovis-ti-rnr-us-east-1\\nOSTORE_ACCESSKEY=\\nOSTORE_SECRETKEY=\\nLD_LIBRARY_PATH=/usr/local/lib64\\n\",\"owner\":\"ec2-user:ec2-user\",\"path\":\"/deploy_files/.env.devel\",\"permissions\":\"0400\"}]}\n\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.rnr_ec2",
      "mode": "data",
      "type": "template_file",
      "name": "conus_ini_template",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "03e0035cf3a1dbce6e34059e8747dc730e6e9f006742c2534184b76177c07b9f",
            "rendered": "[PATHS]\n# The list of URLs to use when looking for nwm data.  The list\n# assumes order based precendence.  The object store link should\n# be defined before the nomads link.  These are extended with:\n# nwm.YYYYMMDD/analysis_assim/nwm.tHHz.analysis_assim.type.tm00.conus.nc\n# or /YYYY/YYYYMMDDHHMM.type_DOMAIN1.comp\n\nURLS = https://nwcal-dstore.nwc.nws.noaa.gov/nwm/2.1/\n       https://nomads.ncep.noaa.gov/pub/data/nccf/com/nwm/prod\n\nWRDS_API_HOST_URL = http://10.26.150.90\n\nWRDS_RFC_FORECAST_API = /api/rfc_forecast/v2.0/forecast\nWRDS_LOCATION_API = /api/location/v3.0\n\nFCST_API_BASE_URL = ${WRDS_API_HOST_URL}${WRDS_RFC_FORECAST_API}\n\n#v2.0\nWRDS_RFC_FORECAST_STAGE_ACTION_URL = ${FCST_API_BASE_URL}/stage/nws_lid/all/?returnNewestForecast=true\u0026minForecastStatus=action\n\n#v 2.0\nWRDS_RFC_FORECAST_STREAMFLOW_ACTION_URL = ${FCST_API_BASE_URL}/streamflow/nws_lid/all/?returnNewestForecast=true\u0026minForecastStatus=action\n\n# v2.0\nWRDS_RFC_FORECAST_STREAMFLOW_BASE_URL = ${FCST_API_BASE_URL}/streamflow/nws_lid\n\nWRDS_LOCATION_BASE_URL = ${WRDS_API_HOST_URL}${WRDS_LOCATION_API}\n\nWRDS_LOCATION_ACTION_FLOW_URL = ${WRDS_LOCATION_BASE_URL}/threshold/flow/action/all\nWRDS_LOCATION_RATING_BASE_URL = ${WRDS_LOCATION_BASE_URL}/rating_curve\n\n\n# Location and name of the Resource file.  If not prefaced with'/',\n# the path is relative to the current working directory\nRESOURCES_PATH = RESOURCES\n\n# the host root share directory\nSHARE_PATH = /rnr/share\n\n# Location to place the log file.  If not prefaced with '/', the path is\n# relative to the current working directory.  If specifying the file name,\n# end the name with .log\nLOG_PATH =  ${SHARE_PATH}/log/replace_and_route-dynamic-run-NWMv2.1.log\n\n# Run directory, where the watermodel will be run\nRUN_PATH = ${SHARE_PATH}/Run\n\n# Archive directory.  Base directory for archiving.  wrf_hydro run instances\n# will be archived at ARCHIVES/Run and processed output will be archived at\n# ARCHIVES/processed_output\nARCHIVES_PATH = ${SHARE_PATH}/.archive\n\n# location of the timeslice generator config file.  It is unlikely it\n# will need to be changed.\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\n\n# Suffix for processed output files.  Processed output files are\n# named by:\n# ${SHARE_PATH}/nwc.YYYYMMDD/medium_range/wrf_hydro_tHH.medium_range.channel_rt.fXXX.${OUTPUT_SET_ID}.nc\n# OUTPUT_SET_ID may be any combination of lower or uppercase letters, numbers,\n# underscores, or dashes\nOUTPUT_SET_ID = conus\n\n[DURATIONS]\n# How long to archive run instances in the directory specified by ARCHIVES.\n# This value is in days.\nARCHIVE_INSTANCES_FOR = 1\n\n# How long to archive processed NWM data for  in the directory specified by\n# ARCHIVES.  This value is in days.\nARCHIVE_OUTPUT_FOR = 0\n\n# How many hours to look back in time to find a reference time with the required\n# files.  This affects how execution instances are named and can cause a failure\n# if a reference time that has already been processed is used.  Value is in hours.\nREFERENCE_TIME_LOOKBACK = 1\n\n[OBJECT_STORE]\n# These settings are used to configure where the processed files should\n# be stored and accessible for distribution\n\n# host name with protocol \nHOST=%(OSTORE_HOST)s\n\n# port number to connect to\nPORT=%(OSTORE_PORT)s\n\n# bucket where processed files should be uploaded and stored\nBUCKET=%(OSTORE_BUCKET)s\n\n# access and secret object store keys.  Should be set via environment variables\nACCESS_KEY=%(OSTORE_ACCESSKEY)s\nSECRET_KEY=%(OSTORE_SECRETKEY)s\n\n[REPLACE_AND_ROUTE_RESOURCES]\n# Files in this section are expected to exist in the\n# RESOURCES/static/wrf_hydro_support directory\n\n# Name of the water body file.  The feature_id order is maintained.\nWATERBODY_FILE = domain_waterbodies.csv\n\n# Master Waterbody file.  This file is subsetted to generate a LAKEPARM.nc\n# wrf_hydro input file.\n# MASTER_WATERBODY_FILE = master_lakeparm.nc\n\n[WRF_HYDRO_RESOURCES]\n# The names of files required by wrf_hydro\n# The files here are found in RESOURCES/static/wrf_hydro\n\n# Name of the hydro.namelist file to use\n# should be placed in each execution directory\nHYDRO_NAMELIST_FILE = hydro.namelist\n\n# Name of the namelist.hrldas file to use\n# should be placed in each execution directory\nNAMELIST_HRLDAS_FILE = namelist.hrldas\n\n# Path to the pre-compiled wrf_hydro executable to use\n# This path should be fully specified.\n# WRF_HYDRO_EXE_PATH = /rnr/wrf_hydro/bin/wrf_hydro_NoahMP.exe\n\nWRF_HYDRO_EXE_PATH = /rnr/wrf_hydro_nwm_public/trunk/NDHMS/Run/wrf_hydro_NoahMP.exe\n\n# Tells how many days of FORCING files to create.  This must be an integer.\nDAYS_OF_FORCINGS = 5\n\n# Tell how often a HYDRO_RST file should be written by the wrf_hydro\n# executable.  This must be specified in hours as an integer\nRESTART_WRITE_FREQUENCY = 24\n\n[WRF_HYDRO_DOMAIN]\n# The files here are placed in the common Run/RESOURCES/DOMAIN directory\n\n# land surface model gridded input data file needed by wrf_hydro\n# should be placed in RESOURCES/static/wrf_hydro\nGEO_STATIC_FILE = geo_em_CONUS.nc\n\n# Name of the full domain file to use\n# the high-resolution routing terrain input data file\n# should be placed in RESOURCES/static/wrf_hydro\nGEO_FINEGRID_FILE = Fulldom_hires_netcdf_250m.nc\n\n# Name of the hydro table 2D file to use\n# the spatial hydro parameters file\n# should be placed in RESOURCES/static/wrf_hydro\nSPATIAL_HYDRO_TABLE_FILE = hydro2dtbl_CONUS_FullRouting.nc\n\n# Name of the soil properties file to use\n# spatial terrain properties file used in namelist.hrldas\n# should be placed in RESOURCES/static/wrf_hydro\nSPATIAL_PROPERTIES_FILE = soilproperties_CONUS_FullRouting.nc\n\n# Name of the spatial weights file to use\n# user defined mapping file to use\n# should be placed in RESOURCES/static/wrf_hydro\nUSER_DEFINED_MAP_FILE = spatialweights_CONUS_FullRouting.nc\n\n# Name of the wrf input file to use\n# should be placed in RESOURCES/static/wrf_hydro\nHRLDAS_SETUP_FILE = wrfinput_CONUS.nc\n\n[WRF_HYDRO_TABLES]\n# The files here are placed in the common Run/RESOURCES/TABLES directory\n\n# CHANPARM.TBL file needed by each wrf_hydro execution\n# should be placed in RESOURCES/static/wrf_hydro\nCHANPARM_TABLE = CHANPARM.TBL\n\n# GENPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nGENPARM_TABLE = GENPARM.TBL\n\n# HYDRO.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nHYDRO_TABLE = HYDRO.TBL\n\n# LAKEPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nLAKEPARM_TABLE = LAKEPARM.TBL\n\n# MPTABLE.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nMPTABLE_TABLE = MPTABLE.TBL\n\n# SOILPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nSOILPARM_TABLE = SOILPARM.TBL\n\n# URBPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nURBPARM_TABLE = URBPARM.TBL\n\n# VEGPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nVEGPARM_TABLE = VEGPARM.TBL\n\n[DEFAULT]\n# Default values for configuration file parameters\n# Override parameters in the sections above.  Do not alter\n# the default values.\nURLS = http://localhost/nwm\nRESOURCES_PATH = RESOURCES\nLOG_PATH = LOGS\nSHARE_PATH = OUTPUT\nRUN_PATH = RUNS\nARCHIVES_PATH = ARCHIVES\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\nTHRESHOLD_CSV_FILEPATH = RESOURCES/static/wrf_hydro_support/nwm_ahps_thresholds.csv\nARCHIVE_INSTANCES_FOR = 30\nARCHIVE_OUTPUT_FOR = 60\nREFERENCE_TIME_LOOKBACK = 6\nOUTPUT_SET_ID = DRAFT\nDAYS_OF_FORCINGS = 5\nRESTART_WRITE_FREQUENCY = 24\n# How long to wait on the object store to respond before timing out.\n# Specified in seconds.\nCONNECTION_TIMEOUT = 60\nWATERBODY_FILE = conus2.0/waterbodies.csv\nMASTER_WATERBODY_FILE = master_lakeparm.nc\n#AHPS_POINTS_MAPPING_FILE = conus2.0/gages_map.csv\nHYDRO_NAMELIST_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/hydro.namelist\nNAMELIST_HRLDAS_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/namelist.hrldas\nWRF_HYDRO_EXE_PATH =\nLAKEPARM_FILE = ${RUN_WRF_HYDRO_RESOURCES:MASTER_WATERBODY_FILE}\nROUTELINK_FILE =\nGEO_STATIC_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/geo_em.nc\nGWBUCKPARM_FILE =\nNUDGING_PARAMS_FILE =\nGEO_FINEGRID_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/Fulldom.nc\nSPATIAL_HYDRO_TABLE_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO_TBL_2D.nc\nSPATIAL_PROPERTIES_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/soil_properties.nc\nUSER_DEFINED_MAP_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/spatialweights.nc\nHRLDAS_SETUP_FILE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/wrfinput.nc\nCHANPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/CHANPARM.TBL\nGENPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/GENPARM.TBL\nHYDRO_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO.TBL\nLAKEPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/LAKEPARM.TBL\nMPTABLE_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/MPTABLE.TBL\nSOILPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/SOILPARM.TBL\nURBPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/URBPARM.TBL\nVEGPARM_TABLE = ${PATHS:RESOURCES_PATH}/static/wrf_hydro/VEGPARM.TBL\n",
            "template": "[PATHS]\n# The list of URLs to use when looking for nwm data.  The list\n# assumes order based precendence.  The object store link should\n# be defined before the nomads link.  These are extended with:\n# nwm.YYYYMMDD/analysis_assim/nwm.tHHz.analysis_assim.type.tm00.conus.nc\n# or /YYYY/YYYYMMDDHHMM.type_DOMAIN1.comp\n\nURLS = ${DSTORE_URL}\n       ${NOMADS_URL}\n\nWRDS_API_HOST_URL = ${WRDS_HOST}\n\nWRDS_RFC_FORECAST_API = /api/rfc_forecast/v2.0/forecast\nWRDS_LOCATION_API = /api/location/v3.0\n\nFCST_API_BASE_URL = $${WRDS_API_HOST_URL}$${WRDS_RFC_FORECAST_API}\n\n#v2.0\nWRDS_RFC_FORECAST_STAGE_ACTION_URL = $${FCST_API_BASE_URL}/stage/nws_lid/all/?returnNewestForecast=true\u0026minForecastStatus=action\n\n#v 2.0\nWRDS_RFC_FORECAST_STREAMFLOW_ACTION_URL = $${FCST_API_BASE_URL}/streamflow/nws_lid/all/?returnNewestForecast=true\u0026minForecastStatus=action\n\n# v2.0\nWRDS_RFC_FORECAST_STREAMFLOW_BASE_URL = $${FCST_API_BASE_URL}/streamflow/nws_lid\n\nWRDS_LOCATION_BASE_URL = $${WRDS_API_HOST_URL}$${WRDS_LOCATION_API}\n\nWRDS_LOCATION_ACTION_FLOW_URL = $${WRDS_LOCATION_BASE_URL}/threshold/flow/action/all\nWRDS_LOCATION_RATING_BASE_URL = $${WRDS_LOCATION_BASE_URL}/rating_curve\n\n\n# Location and name of the Resource file.  If not prefaced with'/',\n# the path is relative to the current working directory\nRESOURCES_PATH = RESOURCES\n\n# the host root share directory\nSHARE_PATH = /rnr/share\n\n# Location to place the log file.  If not prefaced with '/', the path is\n# relative to the current working directory.  If specifying the file name,\n# end the name with .log\nLOG_PATH =  $${SHARE_PATH}/log/replace_and_route-dynamic-run-NWMv2.1.log\n\n# Run directory, where the watermodel will be run\nRUN_PATH = $${SHARE_PATH}/Run\n\n# Archive directory.  Base directory for archiving.  wrf_hydro run instances\n# will be archived at ARCHIVES/Run and processed output will be archived at\n# ARCHIVES/processed_output\nARCHIVES_PATH = $${SHARE_PATH}/.archive\n\n# location of the timeslice generator config file.  It is unlikely it\n# will need to be changed.\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\n\n# Suffix for processed output files.  Processed output files are\n# named by:\n# $${SHARE_PATH}/nwc.YYYYMMDD/medium_range/wrf_hydro_tHH.medium_range.channel_rt.fXXX.$${OUTPUT_SET_ID}.nc\n# OUTPUT_SET_ID may be any combination of lower or uppercase letters, numbers,\n# underscores, or dashes\nOUTPUT_SET_ID = conus\n\n[DURATIONS]\n# How long to archive run instances in the directory specified by ARCHIVES.\n# This value is in days.\nARCHIVE_INSTANCES_FOR = 1\n\n# How long to archive processed NWM data for  in the directory specified by\n# ARCHIVES.  This value is in days.\nARCHIVE_OUTPUT_FOR = 0\n\n# How many hours to look back in time to find a reference time with the required\n# files.  This affects how execution instances are named and can cause a failure\n# if a reference time that has already been processed is used.  Value is in hours.\nREFERENCE_TIME_LOOKBACK = 1\n\n[OBJECT_STORE]\n# These settings are used to configure where the processed files should\n# be stored and accessible for distribution\n\n# host name with protocol \nHOST=%(OSTORE_HOST)s\n\n# port number to connect to\nPORT=%(OSTORE_PORT)s\n\n# bucket where processed files should be uploaded and stored\nBUCKET=%(OSTORE_BUCKET)s\n\n# access and secret object store keys.  Should be set via environment variables\nACCESS_KEY=%(OSTORE_ACCESSKEY)s\nSECRET_KEY=%(OSTORE_SECRETKEY)s\n\n[REPLACE_AND_ROUTE_RESOURCES]\n# Files in this section are expected to exist in the\n# RESOURCES/static/wrf_hydro_support directory\n\n# Name of the water body file.  The feature_id order is maintained.\nWATERBODY_FILE = domain_waterbodies.csv\n\n# Master Waterbody file.  This file is subsetted to generate a LAKEPARM.nc\n# wrf_hydro input file.\n# MASTER_WATERBODY_FILE = master_lakeparm.nc\n\n[WRF_HYDRO_RESOURCES]\n# The names of files required by wrf_hydro\n# The files here are found in RESOURCES/static/wrf_hydro\n\n# Name of the hydro.namelist file to use\n# should be placed in each execution directory\nHYDRO_NAMELIST_FILE = hydro.namelist\n\n# Name of the namelist.hrldas file to use\n# should be placed in each execution directory\nNAMELIST_HRLDAS_FILE = namelist.hrldas\n\n# Path to the pre-compiled wrf_hydro executable to use\n# This path should be fully specified.\n# WRF_HYDRO_EXE_PATH = /rnr/wrf_hydro/bin/wrf_hydro_NoahMP.exe\n\nWRF_HYDRO_EXE_PATH = /rnr/wrf_hydro_nwm_public/trunk/NDHMS/Run/wrf_hydro_NoahMP.exe\n\n# Tells how many days of FORCING files to create.  This must be an integer.\nDAYS_OF_FORCINGS = 5\n\n# Tell how often a HYDRO_RST file should be written by the wrf_hydro\n# executable.  This must be specified in hours as an integer\nRESTART_WRITE_FREQUENCY = 24\n\n[WRF_HYDRO_DOMAIN]\n# The files here are placed in the common Run/RESOURCES/DOMAIN directory\n\n# land surface model gridded input data file needed by wrf_hydro\n# should be placed in RESOURCES/static/wrf_hydro\nGEO_STATIC_FILE = geo_em_CONUS.nc\n\n# Name of the full domain file to use\n# the high-resolution routing terrain input data file\n# should be placed in RESOURCES/static/wrf_hydro\nGEO_FINEGRID_FILE = Fulldom_hires_netcdf_250m.nc\n\n# Name of the hydro table 2D file to use\n# the spatial hydro parameters file\n# should be placed in RESOURCES/static/wrf_hydro\nSPATIAL_HYDRO_TABLE_FILE = hydro2dtbl_CONUS_FullRouting.nc\n\n# Name of the soil properties file to use\n# spatial terrain properties file used in namelist.hrldas\n# should be placed in RESOURCES/static/wrf_hydro\nSPATIAL_PROPERTIES_FILE = soilproperties_CONUS_FullRouting.nc\n\n# Name of the spatial weights file to use\n# user defined mapping file to use\n# should be placed in RESOURCES/static/wrf_hydro\nUSER_DEFINED_MAP_FILE = spatialweights_CONUS_FullRouting.nc\n\n# Name of the wrf input file to use\n# should be placed in RESOURCES/static/wrf_hydro\nHRLDAS_SETUP_FILE = wrfinput_CONUS.nc\n\n[WRF_HYDRO_TABLES]\n# The files here are placed in the common Run/RESOURCES/TABLES directory\n\n# CHANPARM.TBL file needed by each wrf_hydro execution\n# should be placed in RESOURCES/static/wrf_hydro\nCHANPARM_TABLE = CHANPARM.TBL\n\n# GENPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nGENPARM_TABLE = GENPARM.TBL\n\n# HYDRO.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nHYDRO_TABLE = HYDRO.TBL\n\n# LAKEPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nLAKEPARM_TABLE = LAKEPARM.TBL\n\n# MPTABLE.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nMPTABLE_TABLE = MPTABLE.TBL\n\n# SOILPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nSOILPARM_TABLE = SOILPARM.TBL\n\n# URBPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nURBPARM_TABLE = URBPARM.TBL\n\n# VEGPARM.TBL file needed by wrf_hydro model\n# should be placed in RESOURCES/static/wrf_hydro\nVEGPARM_TABLE = VEGPARM.TBL\n\n[DEFAULT]\n# Default values for configuration file parameters\n# Override parameters in the sections above.  Do not alter\n# the default values.\nURLS = http://localhost/nwm\nRESOURCES_PATH = RESOURCES\nLOG_PATH = LOGS\nSHARE_PATH = OUTPUT\nRUN_PATH = RUNS\nARCHIVES_PATH = ARCHIVES\nTIMESLICE_CONFIG = usgs_timeslice_generator/config.ini\nTHRESHOLD_CSV_FILEPATH = RESOURCES/static/wrf_hydro_support/nwm_ahps_thresholds.csv\nARCHIVE_INSTANCES_FOR = 30\nARCHIVE_OUTPUT_FOR = 60\nREFERENCE_TIME_LOOKBACK = 6\nOUTPUT_SET_ID = DRAFT\nDAYS_OF_FORCINGS = 5\nRESTART_WRITE_FREQUENCY = 24\n# How long to wait on the object store to respond before timing out.\n# Specified in seconds.\nCONNECTION_TIMEOUT = 60\nWATERBODY_FILE = conus2.0/waterbodies.csv\nMASTER_WATERBODY_FILE = master_lakeparm.nc\n#AHPS_POINTS_MAPPING_FILE = conus2.0/gages_map.csv\nHYDRO_NAMELIST_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/hydro.namelist\nNAMELIST_HRLDAS_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/namelist.hrldas\nWRF_HYDRO_EXE_PATH =\nLAKEPARM_FILE = $${RUN_WRF_HYDRO_RESOURCES:MASTER_WATERBODY_FILE}\nROUTELINK_FILE =\nGEO_STATIC_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/geo_em.nc\nGWBUCKPARM_FILE =\nNUDGING_PARAMS_FILE =\nGEO_FINEGRID_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/Fulldom.nc\nSPATIAL_HYDRO_TABLE_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO_TBL_2D.nc\nSPATIAL_PROPERTIES_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/soil_properties.nc\nUSER_DEFINED_MAP_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/spatialweights.nc\nHRLDAS_SETUP_FILE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/wrfinput.nc\nCHANPARM_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/CHANPARM.TBL\nGENPARM_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/GENPARM.TBL\nHYDRO_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/HYDRO.TBL\nLAKEPARM_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/LAKEPARM.TBL\nMPTABLE_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/MPTABLE.TBL\nSOILPARM_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/SOILPARM.TBL\nURBPARM_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/URBPARM.TBL\nVEGPARM_TABLE = $${PATHS:RESOURCES_PATH}/static/wrf_hydro/VEGPARM.TBL\n",
            "vars": {
              "DSTORE_URL": "https://nwcal-dstore.nwc.nws.noaa.gov/nwm/2.1/",
              "NOMADS_URL": "https://nomads.ncep.noaa.gov/pub/data/nccf/com/nwm/prod",
              "WRDS_HOST": "http://10.26.150.90"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.rnr_ec2",
      "mode": "data",
      "type": "template_file",
      "name": "env_devel",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f89369f5d7ed2a670fb310c0fe602c3457b6135b6a75138a0841530cadec3f6a",
            "rendered": "##  Object Store Environment Variables\n# ---------------------------------------------------------\nOSTORE_HOST=\nOSTORE_PORT=\nOSTORE_BUCKET=hydrovis-ti-rnr-us-east-1\nOSTORE_ACCESSKEY=\nOSTORE_SECRETKEY=\nLD_LIBRARY_PATH=/usr/local/lib64\n",
            "template": "##  Object Store Environment Variables\n# ---------------------------------------------------------\nOSTORE_HOST=\nOSTORE_PORT=\nOSTORE_BUCKET=${OUTPUT_BUCKET}\nOSTORE_ACCESSKEY=\nOSTORE_SECRETKEY=\nLD_LIBRARY_PATH=/usr/local/lib64\n",
            "vars": {
              "OUTPUT_BUCKET": "hydrovis-ti-rnr-us-east-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.rnr_ec2",
      "mode": "data",
      "type": "template_file",
      "name": "install",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "ed04acd7b0e57261b6ba0bb623fdfe92453b80eaf937072b5bf47f3dc8ff18e0",
            "rendered": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=10.26.150.5\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=replace_route\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\n\necho \"Setting up RNR Mount\"\ncd\nsudo mkdir /rnr\nsudo file -s /dev/sdf\nsudo lsblk -f\nsudo mkfs -t xfs /dev/sdf\nsudo mount /dev/sdf /rnr\n#--------------------------------------------------\n#change the /etc/fstab file to make sure the volume mounts after a reboot\n#extract the UUID to be included in the /etc/fstab line\nblock_output=`sudo blkid | grep xfs | grep -v LABEL`\n# output example from block_output\n#/dev/nvme1n1: UUID=\"bb4ee817-111a-4cb6-b540-a40c1d34a8fa\" TYPE=\"xfs\"\nuuid_part=`echo $block_output | cut -d ' ' -f2 | sed 's/\\\"//g'`\n#Example fstab line to add to the end:\n#UUID=bb4ee817-111a-4cb6-b540-a40c1d34a8fa     /rnr        xfs    defaults,nofail   0   2\nexport line_to_add=\"$uuid_part        /rnr    xfs     defaults,nofail        0       2\"\necho $line_to_add \u003e\u003e \"/etc/fstab\"\n\n#-----------------------------------------------------\n\necho \"Installing System Dependencies\"\nsudo amazon-linux-extras install epel -y\nsudo yum-config-manager --enable epel\nsudo yum -y install git python3-devel openmpi-devel hdf5-devel  gcc-c++ cmake3 curl-devel make\nsudo yum -y install m4\n\necho \"Installing Python Dependencies\"\nsudo git clone https://github.com/Unidata/netcdf-c.git /opt/netcdf-c\ncd /opt/netcdf-c\nsudo cmake3 .\nsudo make install\nsudo git clone https://github.com/Unidata/netcdf-fortran.git /opt/netcdf-fortran\ncd /opt/netcdf-fortran\nsudo cmake3 .\nsudo make install\n\necho \"Updating Permissions\"\ncd\nsudo chown ssm-user: /rnr\n\necho \"Installing WRF-Hydro Files\"\ncd /rnr\naws s3 cp s3://hydrovis-ti-deployment-us-east-1/rnr/wrf_hydro.tgz .\ntar -zxvf wrf_hydro.tgz\n\necho \"Installing Replace and Route\"\ncd /rnr\nsudo aws s3 cp s3://hydrovis-ti-deployment-us-east-1/rnr/owp-viz-replace-route.tgz .\ntar -zxvf owp-viz-replace-route.tgz\n#git clone https://vlab.ncep.noaa.gov/code-review/a/owp-viz-replace-route\n\necho \"Installing RNR Dependencies\"\ncd /rnr/owp-viz-replace-route\n#sudo git checkout python-timeslicegen\nbash install.sh -s\n\necho \"Copying Static Resources\"\ncd /rnr\nsudo aws s3 cp  s3://hydrovis-ti-deployment-us-east-1/rnr/rnr_static.tgz  .\ntar -zxvf rnr_static.tgz\nsudo chown root static\nsudo chgrp root static\nsudo mkdir /rnr/owp-viz-replace-route/RESOURCES\nsudo cp -r static /rnr/owp-viz-replace-route/RESOURCES/\nsudo rm rnr_static.tgz\n\necho \"Updating Libnetcdf Link\"\n#Make sure that libnetcdf.so is available to the wrf_hydro executable, which is expecting libnetcdf.so.18\n#Note: version 18 will point to the generic name which already points to a different specific name, such as libnetcdf.so.19.\ncd /usr/local/lib64\nsudo ln -s libnetcdf.so libnetcdf.so.18\n\necho \"Setting up RNR File Structure\"\nsudo mkdir /rnr/share\nsudo mkdir /rnr/share/log\nsudo mkdir /rnr/share/.archive\nsudo mkdir /rnr/share/Run\n\necho \"Copying Rendered Template File to Replace and Route\"\nsudo cp /deploy_files/conus.ini /rnr/owp-viz-replace-route/configs/conus.ini\nsudo cp /deploy_files/.env.devel /rnr/owp-viz-replace-route/.env.devel\n\necho \"Setting up RNR Crontab\"\nsudo crontab -l -u ec2-user \u003e /tmp/mycrontab\necho '10 * * * * cd /rnr/owp-viz-replace-route \u0026\u0026 sudo ./run.sh' \u003e\u003e /tmp/mycrontab\nsudo crontab -u ec2-user /tmp/mycrontab\n\necho \"Finished Setup\"\n",
            "template": "#!/bin/bash\n\necho \"Setting up Rsyslog Configuration\"\nsudo mkdir -p /etc/systemd/system/rsyslog.service.d/\n{ echo \"[Service]\"; \n  echo \"Environment=\\\"LOGSTASH_IP=${logstash_ip}\\\"\";\n  echo \"Environment=\\\"HYDROVIS_APPLICATION=replace_route\\\"\";\n} | sudo tee /etc/systemd/system/rsyslog.service.d/override.conf\nsudo systemctl daemon-reload\nsudo systemctl restart rsyslog\n\n\necho \"Setting up RNR Mount\"\ncd\nsudo mkdir /rnr\nsudo file -s /dev/sdf\nsudo lsblk -f\nsudo mkfs -t xfs /dev/sdf\nsudo mount /dev/sdf /rnr\n#--------------------------------------------------\n#change the /etc/fstab file to make sure the volume mounts after a reboot\n#extract the UUID to be included in the /etc/fstab line\nblock_output=`sudo blkid | grep xfs | grep -v LABEL`\n# output example from block_output\n#/dev/nvme1n1: UUID=\"bb4ee817-111a-4cb6-b540-a40c1d34a8fa\" TYPE=\"xfs\"\nuuid_part=`echo $block_output | cut -d ' ' -f2 | sed 's/\\\"//g'`\n#Example fstab line to add to the end:\n#UUID=bb4ee817-111a-4cb6-b540-a40c1d34a8fa     /rnr        xfs    defaults,nofail   0   2\nexport line_to_add=\"$uuid_part        /rnr    xfs     defaults,nofail        0       2\"\necho $line_to_add \u003e\u003e \"/etc/fstab\"\n\n#-----------------------------------------------------\n\necho \"Installing System Dependencies\"\nsudo amazon-linux-extras install epel -y\nsudo yum-config-manager --enable epel\nsudo yum -y install git python3-devel openmpi-devel hdf5-devel  gcc-c++ cmake3 curl-devel make\nsudo yum -y install m4\n\necho \"Installing Python Dependencies\"\nsudo git clone https://github.com/Unidata/netcdf-c.git /opt/netcdf-c\ncd /opt/netcdf-c\nsudo cmake3 .\nsudo make install\nsudo git clone https://github.com/Unidata/netcdf-fortran.git /opt/netcdf-fortran\ncd /opt/netcdf-fortran\nsudo cmake3 .\nsudo make install\n\necho \"Updating Permissions\"\ncd\nsudo chown ssm-user: /rnr\n\necho \"Installing WRF-Hydro Files\"\ncd /rnr\naws s3 cp s3://${DEPLOYMENT_DATA_BUCKET}/rnr/wrf_hydro.tgz .\ntar -zxvf wrf_hydro.tgz\n\necho \"Installing Replace and Route\"\ncd /rnr\nsudo aws s3 cp s3://${DEPLOYMENT_DATA_BUCKET}/rnr/owp-viz-replace-route.tgz .\ntar -zxvf owp-viz-replace-route.tgz\n#git clone https://vlab.ncep.noaa.gov/code-review/a/owp-viz-replace-route\n\necho \"Installing RNR Dependencies\"\ncd /rnr/owp-viz-replace-route\n#sudo git checkout python-timeslicegen\nbash install.sh -s\n\necho \"Copying Static Resources\"\ncd /rnr\nsudo aws s3 cp  s3://${DEPLOYMENT_DATA_BUCKET}/rnr/rnr_static.tgz  .\ntar -zxvf rnr_static.tgz\nsudo chown root static\nsudo chgrp root static\nsudo mkdir /rnr/owp-viz-replace-route/RESOURCES\nsudo cp -r static /rnr/owp-viz-replace-route/RESOURCES/\nsudo rm rnr_static.tgz\n\necho \"Updating Libnetcdf Link\"\n#Make sure that libnetcdf.so is available to the wrf_hydro executable, which is expecting libnetcdf.so.18\n#Note: version 18 will point to the generic name which already points to a different specific name, such as libnetcdf.so.19.\ncd /usr/local/lib64\nsudo ln -s libnetcdf.so libnetcdf.so.18\n\necho \"Setting up RNR File Structure\"\nsudo mkdir /rnr/share\nsudo mkdir /rnr/share/log\nsudo mkdir /rnr/share/.archive\nsudo mkdir /rnr/share/Run\n\necho \"Copying Rendered Template File to Replace and Route\"\nsudo cp /deploy_files/conus.ini /rnr/owp-viz-replace-route/configs/conus.ini\nsudo cp /deploy_files/.env.devel /rnr/owp-viz-replace-route/.env.devel\n\necho \"Setting up RNR Crontab\"\nsudo crontab -l -u ec2-user \u003e /tmp/mycrontab\necho '10 * * * * cd /rnr/owp-viz-replace-route \u0026\u0026 sudo ./run.sh' \u003e\u003e /tmp/mycrontab\nsudo crontab -u ec2-user /tmp/mycrontab\n\necho \"Finished Setup\"\n",
            "vars": {
              "DEPLOYMENT_DATA_BUCKET": "hydrovis-ti-deployment-us-east-1",
              "logstash_ip": "10.26.150.5"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.rnr_ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "replace_and_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-025b76b777024295e",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-0cbe2548096ba8784",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 4,
            "cpu_threads_per_core": 2,
            "credit_specification": [],
            "disable_api_termination": false,
            "ebs_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sdf",
                "encrypted": true,
                "iops": 300,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
                "snapshot_id": "",
                "tags": {
                  "Name": "hv-ti-replace-route-drive"
                },
                "throughput": 0,
                "volume_id": "vol-0fcf560a231bece0c",
                "volume_size": 100,
                "volume_type": "gp2"
              }
            ],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "Hydroviz-RnR-EC2-Profile",
            "id": "i-0cbe2548096ba8784",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "c5.2xlarge",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0942422976df5d67c",
            "private_dns": "ip-10-26-150-88.ec2.internal",
            "private_ip": "10.26.150.88",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 100,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/b0ee3bed-2f67-432f-93cf-c9fe3f2f6dfb",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-030147690be831b2d",
                "volume_size": 12,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0712c2c2742111aa1",
            "tags": {
              "Name": "hv-ti-replace-route",
              "OS": "Linux"
            },
            "tags_all": {
              "Name": "hv-ti-replace-route",
              "OS": "Linux",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "b650ae30287a9a0eec10ee1867eb4bf017566682",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0874e1b42d1981b59"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.iam-roles.aws_iam_instance_profile.HydrovisSSMInstanceProfileRole",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.rnr_ec2.data.cloudinit_config.startup",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.data-services.data.aws_ami.linux",
            "module.data-services.data.template_file.forecast_2_0_env",
            "module.monitoring.aws_instance.logstash",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.rnr_ec2.data.aws_ami.linux",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.data-services.data.template_file.docker_compose_location",
            "module.data-services.data.template_file.startup",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.monitoring.data.template_file.parser_templates",
            "module.vpc.aws_route_table.private",
            "module.data-services.aws_instance.data_services",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.data-services.data.template_file.location_env",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.data-services.data.template_file.docker_compose_forecast_1_1",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.secrets-manager.module.secret.random_password.password",
            "module.rnr_ec2.data.template_file.env_devel",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.monitoring.aws_elasticsearch_domain.es",
            "module.rnr_ec2.data.template_file.conus_ini_template",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.data-services.data.template_file.docker_compose_forecast_2_0",
            "module.monitoring.data.cloudinit_config.startup",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.monitoring.data.aws_ami.linux",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_instance_profile.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.monitoring.data.template_file.startup",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.data-services.data.template_file.forecast_1_1_env",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.data-services.data.cloudinit_config.startup",
            "module.data-services.data.template_file.docker_compose_infrastructure",
            "module.security-groups.aws_security_group.es-sg",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.rnr_ec2.data.template_file.install"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_account_public_access_block",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "526904826677",
            "block_public_acls": true,
            "block_public_policy": true,
            "id": "526904826677",
            "ignore_public_acls": false,
            "restrict_public_buckets": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"hml\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-hml-us-east-1-s3",
            "id": "alias/hydrovis-ti-hml-us-east-1-s3",
            "name": "alias/hydrovis-ti-hml-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/7dda7d38-0a7f-48f0-905b-c65a8cc85791",
            "target_key_id": "7dda7d38-0a7f-48f0-905b-c65a8cc85791"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"hml\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/7dda7d38-0a7f-48f0-905b-c65a8cc85791",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-hml-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "7dda7d38-0a7f-48f0-905b-c65a8cc85791",
            "is_enabled": true,
            "key_id": "7dda7d38-0a7f-48f0-905b-c65a8cc85791",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::734632823696:role/hydrovis-prod-hml-incoming-s3st-HMLReplicationRole-1INFV8WNQTTHE\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"hml\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-hml-us-east-1",
            "bucket": "hydrovis-ti-hml-us-east-1",
            "bucket_domain_name": "hydrovis-ti-hml-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-hml-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-hml-us-east-1",
            "lifecycle_rule": [
              {
                "abort_incomplete_multipart_upload_days": 0,
                "enabled": true,
                "expiration": [
                  {
                    "date": "",
                    "days": 30,
                    "expired_object_delete_marker": false
                  }
                ],
                "id": "tf-s3-lifecycle-20211220193217817400000003",
                "noncurrent_version_expiration": [
                  {
                    "days": 1
                  }
                ],
                "noncurrent_version_transition": [],
                "prefix": "",
                "tags": {},
                "transition": []
              }
            ],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/7dda7d38-0a7f-48f0-905b-c65a8cc85791",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"hml\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-hml-us-east-1",
            "id": "hydrovis-ti-hml-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-hml-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Sid\":\"PermissionsOnObjects\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::734632823696:role/hydrovis-prod-hml-incoming-s3st-HMLReplicationRole-1INFV8WNQTTHE\"},\"Action\":[\"s3:ReplicateDelete\",\"s3:ReplicateObject\"],\"Resource\":\"arn:aws:s3:::hydrovis-ti-hml-us-east-1/*\"},{\"Sid\":\"PermissionsOnBucket\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::734632823696:role/hydrovis-prod-hml-incoming-s3st-HMLReplicationRole-1INFV8WNQTTHE\"},\"Action\":[\"s3:List*\",\"s3:GetBucketVersioning\",\"s3:PutBucketVersioning\"],\"Resource\":\"arn:aws:s3:::hydrovis-ti-hml-us-east-1\"},{\"Sid\":\"OverrideBucketOwner\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::734632823696:root\"},\"Action\":\"s3:ObjectOwnerOverrideToBucketOwner\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-hml-us-east-1/*\"},{\"Sid\":\"PermissionsOnObjectsToUsersRoles\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-hml-us-east-1\",\"arn:aws:s3:::hydrovis-ti-hml-us-east-1/*\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"nwm\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-nwm-us-east-1-s3",
            "id": "alias/hydrovis-ti-nwm-us-east-1-s3",
            "name": "alias/hydrovis-ti-nwm-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/8cd85117-6cad-4469-9f1b-d32bb57c1bd8",
            "target_key_id": "8cd85117-6cad-4469-9f1b-d32bb57c1bd8"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"nwm\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/8cd85117-6cad-4469-9f1b-d32bb57c1bd8",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-nwm-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "8cd85117-6cad-4469-9f1b-d32bb57c1bd8",
            "is_enabled": true,
            "key_id": "8cd85117-6cad-4469-9f1b-d32bb57c1bd8",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::734632823696:role/hydrovis-prod-nwm-incoming-s3st-NWMReplicationRole-P9EAA8EI6VNC\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"nwm\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-nwm-us-east-1",
            "bucket": "hydrovis-ti-nwm-us-east-1",
            "bucket_domain_name": "hydrovis-ti-nwm-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-nwm-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-nwm-us-east-1",
            "lifecycle_rule": [
              {
                "abort_incomplete_multipart_upload_days": 0,
                "enabled": true,
                "expiration": [
                  {
                    "date": "",
                    "days": 30,
                    "expired_object_delete_marker": false
                  }
                ],
                "id": "tf-s3-lifecycle-20211220193217321600000002",
                "noncurrent_version_expiration": [
                  {
                    "days": 1
                  }
                ],
                "noncurrent_version_transition": [],
                "prefix": "",
                "tags": {},
                "transition": []
              }
            ],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/8cd85117-6cad-4469-9f1b-d32bb57c1bd8",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3-replication.module.bucket[\"nwm\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-nwm-us-east-1",
            "id": "hydrovis-ti-nwm-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Sid\":\"PermissionsOnObjects\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::734632823696:role/hydrovis-prod-nwm-incoming-s3st-NWMReplicationRole-P9EAA8EI6VNC\"},\"Action\":[\"s3:ReplicateDelete\",\"s3:ReplicateObject\"],\"Resource\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1/*\"},{\"Sid\":\"PermissionsOnBucket\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::734632823696:role/hydrovis-prod-nwm-incoming-s3st-NWMReplicationRole-P9EAA8EI6VNC\"},\"Action\":[\"s3:List*\",\"s3:GetBucketVersioning\",\"s3:PutBucketVersioning\"],\"Resource\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"},{\"Sid\":\"OverrideBucketOwner\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::734632823696:root\"},\"Action\":\"s3:ObjectOwnerOverrideToBucketOwner\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1/*\"},{\"Sid\":\"PermissionsOnObjectsToUsersRoles\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\",\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1/*\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"deployment\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-deployment-us-east-1-s3",
            "id": "alias/hydrovis-ti-deployment-us-east-1-s3",
            "name": "alias/hydrovis-ti-deployment-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/12ff6743-9ad0-45a3-96fa-5c799713e8dc",
            "target_key_id": "12ff6743-9ad0-45a3-96fa-5c799713e8dc"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"deployment\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/12ff6743-9ad0-45a3-96fa-5c799713e8dc",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-deployment-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "12ff6743-9ad0-45a3-96fa-5c799713e8dc",
            "is_enabled": true,
            "key_id": "12ff6743-9ad0-45a3-96fa-5c799713e8dc",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::526904826677:role/HydrovisSSMInstanceProfileRole\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::526904826677:role/Hydroviz-RnR-EC2-Profile\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"deployment\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-deployment-us-east-1",
            "bucket": "hydrovis-ti-deployment-us-east-1",
            "bucket_domain_name": "hydrovis-ti-deployment-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-deployment-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-deployment-us-east-1",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/12ff6743-9ad0-45a3-96fa-5c799713e8dc",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"deployment\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_ownership_controls",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-deployment-us-east-1",
            "id": "hydrovis-ti-deployment-us-east-1",
            "rule": [
              {
                "object_ownership": "BucketOwnerPreferred"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"deployment\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-deployment-us-east-1",
            "id": "hydrovis-ti-deployment-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-deployment-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::526904826677:role/HydrovisSSMInstanceProfileRole\",\"arn:aws:iam::526904826677:role/Hydroviz-RnR-EC2-Profile\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-deployment-us-east-1/*\",\"arn:aws:s3:::hydrovis-ti-deployment-us-east-1\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"fim\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-fim-us-east-1-s3",
            "id": "alias/hydrovis-ti-fim-us-east-1-s3",
            "name": "alias/hydrovis-ti-fim-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/db85db81-4097-4a7f-bdd7-254756336e70",
            "target_key_id": "db85db81-4097-4a7f-bdd7-254756336e70"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"fim\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/db85db81-4097-4a7f-bdd7-254756336e70",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-fim-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "db85db81-4097-4a7f-bdd7-254756336e70",
            "is_enabled": true,
            "key_id": "db85db81-4097-4a7f-bdd7-254756336e70",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"fim\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-fim-us-east-1",
            "bucket": "hydrovis-ti-fim-us-east-1",
            "bucket_domain_name": "hydrovis-ti-fim-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-fim-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-fim-us-east-1",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/db85db81-4097-4a7f-bdd7-254756336e70",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"fim\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_ownership_controls",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-fim-us-east-1",
            "id": "hydrovis-ti-fim-us-east-1",
            "rule": [
              {
                "object_ownership": "BucketOwnerPreferred"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"fim\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-fim-us-east-1",
            "id": "hydrovis-ti-fim-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-fim-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-fim-us-east-1/*\",\"arn:aws:s3:::hydrovis-ti-fim-us-east-1\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"hml-backup\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-hml-backup-us-east-1-s3",
            "id": "alias/hydrovis-ti-hml-backup-us-east-1-s3",
            "name": "alias/hydrovis-ti-hml-backup-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/3a3819e6-898c-4bfa-b520-40f59699ae4b",
            "target_key_id": "3a3819e6-898c-4bfa-b520-40f59699ae4b"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"hml-backup\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/3a3819e6-898c-4bfa-b520-40f59699ae4b",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-hml-backup-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "3a3819e6-898c-4bfa-b520-40f59699ae4b",
            "is_enabled": true,
            "key_id": "3a3819e6-898c-4bfa-b520-40f59699ae4b",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"hml-backup\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-hml-backup-us-east-1",
            "bucket": "hydrovis-ti-hml-backup-us-east-1",
            "bucket_domain_name": "hydrovis-ti-hml-backup-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-hml-backup-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-hml-backup-us-east-1",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/3a3819e6-898c-4bfa-b520-40f59699ae4b",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"hml-backup\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_ownership_controls",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-hml-backup-us-east-1",
            "id": "hydrovis-ti-hml-backup-us-east-1",
            "rule": [
              {
                "object_ownership": "BucketOwnerPreferred"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"hml-backup\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-hml-backup-us-east-1",
            "id": "hydrovis-ti-hml-backup-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-hml-backup-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-hml-backup-us-east-1/*\",\"arn:aws:s3:::hydrovis-ti-hml-backup-us-east-1\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"rnr\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-rnr-us-east-1-s3",
            "id": "alias/hydrovis-ti-rnr-us-east-1-s3",
            "name": "alias/hydrovis-ti-rnr-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/28ebd6f7-ac27-4767-bafa-fe6df2758484",
            "target_key_id": "28ebd6f7-ac27-4767-bafa-fe6df2758484"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"rnr\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/28ebd6f7-ac27-4767-bafa-fe6df2758484",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-rnr-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "28ebd6f7-ac27-4767-bafa-fe6df2758484",
            "is_enabled": true,
            "key_id": "28ebd6f7-ac27-4767-bafa-fe6df2758484",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/Hydroviz-RnR-EC2-Profile\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"rnr\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-rnr-us-east-1",
            "bucket": "hydrovis-ti-rnr-us-east-1",
            "bucket_domain_name": "hydrovis-ti-rnr-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-rnr-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-rnr-us-east-1",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/28ebd6f7-ac27-4767-bafa-fe6df2758484",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"rnr\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_ownership_controls",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-rnr-us-east-1",
            "id": "hydrovis-ti-rnr-us-east-1",
            "rule": [
              {
                "object_ownership": "BucketOwnerPreferred"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"rnr\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-rnr-us-east-1",
            "id": "hydrovis-ti-rnr-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-rnr-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/Hydroviz-RnR-EC2-Profile\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-rnr-us-east-1/*\",\"arn:aws:s3:::hydrovis-ti-rnr-us-east-1\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"session-manager-logs\"]",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:alias/hydrovis-ti-session-manager-logs-us-east-1-s3",
            "id": "alias/hydrovis-ti-session-manager-logs-us-east-1-s3",
            "name": "alias/hydrovis-ti-session-manager-logs-us-east-1-s3",
            "name_prefix": null,
            "target_key_arn": "arn:aws:kms:us-east-1:526904826677:key/5f26438c-9f05-4914-9053-bd9ef9bd294a",
            "target_key_id": "5f26438c-9f05-4914-9053-bd9ef9bd294a"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"session-manager-logs\"]",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "hydrovis-s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:526904826677:key/5f26438c-9f05-4914-9053-bd9ef9bd294a",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "Used for hydrovis-ti-session-manager-logs-us-east-1 bucket encryption",
            "enable_key_rotation": true,
            "id": "5f26438c-9f05-4914-9053-bd9ef9bd294a",
            "is_enabled": true,
            "key_id": "5f26438c-9f05-4914-9053-bd9ef9bd294a",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:root\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow administration of the key\"},{\"Action\":[\"kms:DescribeKey\",\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey\",\"kms:GenerateDataKeyWithoutPlaintext\",\"kms:List*\",\"kms:Get*\",\"kms:Describe*\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\",\"arn:aws:iam::526904826677:role/Hydroviz-RnR-EC2-Profile\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisSSMInstanceProfileRole\",\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"}],\"Version\":\"2012-10-17\"}",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"session-manager-logs\"]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::hydrovis-ti-session-manager-logs-us-east-1",
            "bucket": "hydrovis-ti-session-manager-logs-us-east-1",
            "bucket_domain_name": "hydrovis-ti-session-manager-logs-us-east-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "hydrovis-ti-session-manager-logs-us-east-1.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "hydrovis-ti-session-manager-logs-us-east-1",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "arn:aws:kms:us-east-1:526904826677:key/5f26438c-9f05-4914-9053-bd9ef9bd294a",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"session-manager-logs\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_ownership_controls",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-session-manager-logs-us-east-1",
            "id": "hydrovis-ti-session-manager-logs-us-east-1",
            "rule": [
              {
                "object_ownership": "BucketOwnerPreferred"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        }
      ]
    },
    {
      "module": "module.s3.module.bucket[\"session-manager-logs\"]",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-session-manager-logs-us-east-1",
            "id": "hydrovis-ti-session-manager-logs-us-east-1",
            "policy": "{\"Version\":\"2008-10-17\",\"Statement\":[{\"Sid\":\"DenyUnEncryptedObjectUploads\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::hydrovis-ti-session-manager-logs-us-east-1/*\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption\":\"aws:kms\"}}},{\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda\",\"arn:aws:iam::799732994462:user/zachary.wills@noaa.gov\",\"arn:aws:iam::526904826677:role/HydrovisSSMInstanceProfileRole\",\"arn:aws:iam::526904826677:role/hydrovis-ti-hml-ingest-role\",\"arn:aws:iam::526904826677:role/HydrovisESRISSMDeploy\",\"arn:aws:iam::799732994462:user/noel.perkins@noaa.gov\",\"arn:aws:iam::526904826677:role/Hydroviz-RnR-EC2-Profile\",\"arn:aws:iam::799732994462:user/nick.chadwick@noaa.gov\"]},\"Action\":[\"s3:GetBucketPolicy\",\"s3:GetBucketAcl\",\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Resource\":[\"arn:aws:s3:::hydrovis-ti-session-manager-logs-us-east-1/*\",\"arn:aws:s3:::hydrovis-ti-session-manager-logs-us-east-1\"]}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"data-services-forecast-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-forecast-pg-rdssecret-K6PtV0",
            "description": "hydrovis-ti-data-services-forecast-pg-rdssecret",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-forecast-pg-rdssecret-K6PtV0",
            "kms_key_id": "",
            "name": "hydrovis-ti-data-services-forecast-pg-rdssecret",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"data-services-forecast-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-forecast-pg-rdssecret-K6PtV0",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-forecast-pg-rdssecret-K6PtV0|89C09214-6BC0-4115-9ABB-B508ECA24B81",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-forecast-pg-rdssecret-K6PtV0",
            "secret_string": "{\"password\":\"0EtLa8gbAB6VWyPBiY3yLfyT9\",\"username\":\"rfc_fcst_ro_user\"}",
            "version_id": "89C09214-6BC0-4115-9ABB-B508ECA24B81",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"data-services-forecast-pg-rdssecret\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "0EtLa8gbAB6VWyPBiY3yLfyT9",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"data-services-location-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-location-pg-rdssecret-zkHXvC",
            "description": "hydrovis-ti-data-services-location-pg-rdssecret",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-location-pg-rdssecret-zkHXvC",
            "kms_key_id": "",
            "name": "hydrovis-ti-data-services-location-pg-rdssecret",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"data-services-location-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-location-pg-rdssecret-zkHXvC",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-location-pg-rdssecret-zkHXvC|1977A66F-A9A7-4C2A-BE0F-F50B8C323193",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-data-services-location-pg-rdssecret-zkHXvC",
            "secret_string": "{\"password\":\"1WsSGw8XcGIfqYplZ3K9hd05T\",\"username\":\"location_ro_user\"}",
            "version_id": "1977A66F-A9A7-4C2A-BE0F-F50B8C323193",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"data-services-location-pg-rdssecret\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "1WsSGw8XcGIfqYplZ3K9hd05T",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"egis-pg-rds-secret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-pg-rds-secret-Z2cbOu",
            "description": "hydrovis-ti-egis-pg-rds-secret",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-pg-rds-secret-Z2cbOu",
            "kms_key_id": "",
            "name": "hydrovis-ti-egis-pg-rds-secret",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"egis-pg-rds-secret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-pg-rds-secret-Z2cbOu",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-pg-rds-secret-Z2cbOu|C8FDAC0E-B449-49D9-B4C8-B886C64ECB39",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-pg-rds-secret-Z2cbOu",
            "secret_string": "{\"password\":\"hardwork123donehere\",\"username\":\"hydrovis\"}",
            "version_id": "C8FDAC0E-B449-49D9-B4C8-B886C64ECB39",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"egis-pg-rds-secret\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "m2XlXBGKz0DkWUKeC4loKlAQF",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"egis-service-account\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-service-account-O4fXhv",
            "description": "hydrovis-ti-egis-service-account",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-service-account-O4fXhv",
            "kms_key_id": "",
            "name": "hydrovis-ti-egis-service-account",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"egis-service-account\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-service-account-O4fXhv",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-service-account-O4fXhv|8FDF8A39-148A-44AA-BEFB-9DC21CBE1658",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-egis-service-account-O4fXhv",
            "secret_string": "{\"password\":\"hardwork123donehere!\",\"username\":\"arcgis\"}",
            "version_id": "8FDF8A39-148A-44AA-BEFB-9DC21CBE1658",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"egis-service-account\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "8CUgMgFkwy6dt9gBNkrCs42sR",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"ingest-mqsecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-mqsecret-U2o5aw",
            "description": "hydrovis-ti-ingest-mqsecret",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-mqsecret-U2o5aw",
            "kms_key_id": "",
            "name": "hydrovis-ti-ingest-mqsecret",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"ingest-mqsecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-mqsecret-U2o5aw",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-mqsecret-U2o5aw|0CF345EF-C1E2-4533-AA68-C32E255DC6E5",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-mqsecret-U2o5aw",
            "secret_string": "{\"password\":\"RoepAxEwk93zHWj64EikbuSdM\",\"username\":\"rabbit_admin\"}",
            "version_id": "0CF345EF-C1E2-4533-AA68-C32E255DC6E5",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"ingest-mqsecret\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "RoepAxEwk93zHWj64EikbuSdM",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"ingest-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-pg-rdssecret-sSgszs",
            "description": "hydrovis-ti-ingest-pg-rdssecret",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-pg-rdssecret-sSgszs",
            "kms_key_id": "",
            "name": "hydrovis-ti-ingest-pg-rdssecret",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"ingest-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-pg-rdssecret-sSgszs",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-pg-rdssecret-sSgszs|12855C4F-9DA3-4F91-8397-7B269E6A8FD0",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-ingest-pg-rdssecret-sSgszs",
            "secret_string": "{\"password\":\"V4qCVyLf7UAhIOipBTDNVQ9Er\",\"username\":\"postgres\"}",
            "version_id": "12855C4F-9DA3-4F91-8397-7B269E6A8FD0",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"ingest-pg-rdssecret\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "V4qCVyLf7UAhIOipBTDNVQ9Er",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"mq-aws-monitoring\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-mq-aws-monitoring-m23FUv",
            "description": "hydrovis-ti-mq-aws-monitoring",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-mq-aws-monitoring-m23FUv",
            "kms_key_id": "",
            "name": "hydrovis-ti-mq-aws-monitoring",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"mq-aws-monitoring\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-mq-aws-monitoring-m23FUv",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-mq-aws-monitoring-m23FUv|3168DB0E-5D17-4DFD-9F78-B36847CEECA1",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-mq-aws-monitoring-m23FUv",
            "secret_string": "{\"password\":\"5YI6CJnHQUGvHh1BpoSEollts\",\"username\":\"monitoring-AWS-OWNED-DO-NOT-DELETE\"}",
            "version_id": "3168DB0E-5D17-4DFD-9F78-B36847CEECA1",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"mq-aws-monitoring\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "5YI6CJnHQUGvHh1BpoSEollts",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-nwm_viz_ro\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-nwm_viz_ro-okLKYD",
            "description": "hydrovis-ti-rds-nwm_viz_ro",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-nwm_viz_ro-okLKYD",
            "kms_key_id": "",
            "name": "hydrovis-ti-rds-nwm_viz_ro",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-nwm_viz_ro\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-nwm_viz_ro-okLKYD",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-nwm_viz_ro-okLKYD|A6F3CB39-B173-4AF4-B16A-C2B1D4884F91",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-nwm_viz_ro-okLKYD",
            "secret_string": "{\"password\":\"SCx5stbA6pQs16c80YM7eD09H\",\"username\":\"nwm_viz_ro\"}",
            "version_id": "A6F3CB39-B173-4AF4-B16A-C2B1D4884F91",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.random_password.password",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-nwm_viz_ro\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "SCx5stbA6pQs16c80YM7eD09H",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-rfc_fcst\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst-q69VKu",
            "description": "hydrovis-ti-rds-rfc_fcst",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst-q69VKu",
            "kms_key_id": "",
            "name": "hydrovis-ti-rds-rfc_fcst",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-rfc_fcst\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst-q69VKu",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst-q69VKu|82C124A8-83D4-47BC-B66F-DB0E8741C441",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst-q69VKu",
            "secret_string": "{\"password\":\"U5m9XQRB6emGUdAThpsVEf8FV\",\"username\":\"rfc_fcst\"}",
            "version_id": "82C124A8-83D4-47BC-B66F-DB0E8741C441",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-rfc_fcst\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "U5m9XQRB6emGUdAThpsVEf8FV",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-rfc_fcst_user\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst_user-0Q37fq",
            "description": "hydrovis-ti-rds-rfc_fcst_user",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst_user-0Q37fq",
            "kms_key_id": "",
            "name": "hydrovis-ti-rds-rfc_fcst_user",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-rfc_fcst_user\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst_user-0Q37fq",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst_user-0Q37fq|79598453-B458-4C3D-8610-6B19B85ED5E5",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-rds-rfc_fcst_user-0Q37fq",
            "secret_string": "{\"password\":\"urkZ6DiRqC4jRPjX6sbAnx8Nq\",\"username\":\"rfc_fcst_user\"}",
            "version_id": "79598453-B458-4C3D-8610-6B19B85ED5E5",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"rds-rfc_fcst_user\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "urkZ6DiRqC4jRPjX6sbAnx8Nq",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"viz-processing-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz-processing-pg-rdssecret-j8I7Sy",
            "description": "hydrovis-ti-viz-processing-pg-rdssecret",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz-processing-pg-rdssecret-j8I7Sy",
            "kms_key_id": "",
            "name": "hydrovis-ti-viz-processing-pg-rdssecret",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"viz-processing-pg-rdssecret\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz-processing-pg-rdssecret-j8I7Sy",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz-processing-pg-rdssecret-j8I7Sy|75C0E5E0-E5C6-414A-AF35-EA8890AF7B3B",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz-processing-pg-rdssecret-j8I7Sy",
            "secret_string": "{\"password\":\"Qno8ZJOzpLvP439BmckSwBipr\",\"username\":\"postgres\"}",
            "version_id": "75C0E5E0-E5C6-414A-AF35-EA8890AF7B3B",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"viz-processing-pg-rdssecret\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "Qno8ZJOzpLvP439BmckSwBipr",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"viz_proc_admin_rw_user\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz_proc_admin_rw_user-1NRgRp",
            "description": "hydrovis-ti-viz_proc_admin_rw_user",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz_proc_admin_rw_user-1NRgRp",
            "kms_key_id": "",
            "name": "hydrovis-ti-viz_proc_admin_rw_user",
            "name_prefix": null,
            "policy": null,
            "recovery_window_in_days": 0,
            "replica": [],
            "rotation_enabled": false,
            "rotation_lambda_arn": "",
            "rotation_rules": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"viz_proc_admin_rw_user\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "hydrovis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz_proc_admin_rw_user-1NRgRp",
            "id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz_proc_admin_rw_user-1NRgRp|1B9FB924-9C1E-4064-B6CB-2811D865CD39",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:us-east-1:526904826677:secret:hydrovis-ti-viz_proc_admin_rw_user-1NRgRp",
            "secret_string": "{\"password\":\"QLQW31ZxL0CuE78Rm1lvjYTWg\",\"username\":\"viz_proc_admin_rw_user\"}",
            "version_id": "1B9FB924-9C1E-4064-B6CB-2811D865CD39",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.random_password.password",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.secrets-manager.module.secret[\"viz_proc_admin_rw_user\"]",
      "mode": "managed",
      "type": "random_password",
      "name": "password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 25,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "QLQW31ZxL0CuE78Rm1lvjYTWg",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "egis-overlord",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-042d66db0eac63f5b",
            "description": "Allow inbound traffic to eGIS environment",
            "egress": [],
            "id": "sg-042d66db0eac63f5b",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "ArcGIS DataStore Private Access",
                "from_port": 2443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 2443
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "ArcGIS Server Private Access gis, img, gp",
                "from_port": 6443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 6443
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "Data Sharing",
                "from_port": 139,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 139
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "Data Sharing",
                "from_port": 445,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 445
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "Portal Private Access",
                "from_port": 7443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 7443
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "PostGres Private Access",
                "from_port": 5432,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5432
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "RDP Access",
                "from_port": 3389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3389
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "Session Manager Access",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "Web Tier Access",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [],
                "description": "ArcGIS Server External Machine Access",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [
                  "sg-02ff99dd1fd104fe0",
                  "sg-0571c23b99cb381d0",
                  "sg-0f9dd658942c096b8"
                ],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "hv-ti-egis-ptl-gis-img-gp",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "hv-ti-egis-ptl-gis-img-gp"
            },
            "tags_all": {
              "Name": "hv-ti-egis-ptl-gis-img-gp",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "es-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-0819bb099e848af6d",
            "description": "Allow inbound traffic to ElasticSearch from VPC CIDR",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0819bb099e848af6d",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              }
            ],
            "name": "es-sg",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "es-sg"
            },
            "tags_all": {
              "Name": "es-sg",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "hv-allow-NWC-access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-0f761728cb1eb259c",
            "description": "Allow NWC vpn users access to Portal",
            "egress": [],
            "id": "sg-0f761728cb1eb259c",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0",
                  "137.75.81.52/32"
                ],
                "description": "",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              }
            ],
            "name": "hv-ti-allow-NWC-access",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "hv-ti-internet-443-from-NWC"
            },
            "tags_all": {
              "Name": "hv-ti-internet-443-from-NWC",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "hv-rabbitmq",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-0b710d40b356de030",
            "description": "Allows rabbit MQ connection and dashboard",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0b710d40b356de030",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "",
                "from_port": 5671,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5671
              },
              {
                "cidr_blocks": [
                  "10.26.150.160/27"
                ],
                "description": "Access from subnet hydrovis-sn-prv-ti-data1b",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [
                  "10.26.150.160/27"
                ],
                "description": "Access from subnet hydrovis-sn-prv-ti-data1b",
                "from_port": 5671,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5671
              },
              {
                "cidr_blocks": [
                  "10.26.150.64/27"
                ],
                "description": "Access from subnet hydrovis-sn-prv-ti-data1a",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [
                  "10.26.150.64/27"
                ],
                "description": "Access from subnet hydrovis-sn-prv-ti-data1a",
                "from_port": 5671,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5671
              }
            ],
            "name": "hv-ti-rabbitmq",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "hv-ti-rabbitmq",
              "vpc": "ti"
            },
            "tags_all": {
              "Name": "hv-ti-rabbitmq",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677",
              "vpc": "ti"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b"
          ]
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "hv-test-loadbalancer-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-0f0f01d85fd5e20dc",
            "description": "Security group for testing ALB access from internet",
            "egress": [],
            "id": "sg-0f0f01d85fd5e20dc",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 443,
                "ipv6_cidr_blocks": [
                  "::/0"
                ],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              }
            ],
            "name": "hv-ti-test-loadbalancer-sg",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "hv-ti-test-loadbalancer-sg"
            },
            "tags_all": {
              "Name": "hv-ti-test-loadbalancer-sg",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "hydrovis-RDS",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-0890e0d212253e91c",
            "description": "TI RDS access",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0890e0d212253e91c",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "",
                "from_port": 5432,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5432
              }
            ],
            "name": "hydrovis-TI-RDS",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "hydrovis-TI-RDS",
              "vpc": "ti"
            },
            "tags_all": {
              "Name": "hydrovis-TI-RDS",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677",
              "vpc": "ti"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "hydrovis-nat-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-0bd65ccbb2ce82848",
            "description": "Security group for NAT instance for hydrovis TI VPC",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0bd65ccbb2ce82848",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.26.150.0/23"
                ],
                "description": "Allow all inbound traffic from private subnets",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "hydrovis-ti-nat-sg",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "hydrovis-ti-nat-sg"
            },
            "tags_all": {
              "Name": "hydrovis-ti-nat-sg",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.security-groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "ssm-session-manager-sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:security-group/sg-0874e1b42d1981b59",
            "description": "allow access to VPC endpoints",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0874e1b42d1981b59",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.26.150.0/23",
                  "137.75.95.0/26"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "ssm-session-manager-sg",
            "name_prefix": "",
            "owner_id": "526904826677",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "ssm-session-manager-sg"
            },
            "tags_all": {
              "Name": "ssm-session-manager-sg",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "526904826677",
            "arn": "arn:aws:iam::526904826677:user/nick.chadwick@noaa.gov",
            "id": "526904826677",
            "user_id": "AIDAXVLPZTM2356AQ2PXL"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "sns_topic_policies",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "id": "530395659",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_ana_hi",
          "schema_version": 0,
          "attributes": {
            "id": "3325284128",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_ana_prvi",
          "schema_version": 0,
          "attributes": {
            "id": "3538257293",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_mrf_10day",
          "schema_version": 0,
          "attributes": {
            "id": "526623484",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_mrf_3day",
          "schema_version": 0,
          "attributes": {
            "id": "3258162831",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_mrf_5day",
          "schema_version": 0,
          "attributes": {
            "id": "81559270",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_srf",
          "schema_version": 0,
          "attributes": {
            "id": "2917822207",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_srf_hi",
          "schema_version": 0,
          "attributes": {
            "id": "1244498181",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_ingest_srf_prvi",
          "schema_version": 0,
          "attributes": {
            "id": "3163596587",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "nwm_max_flows",
          "schema_version": 0,
          "attributes": {
            "id": "1144674522",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-fim-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-fim-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "rnr_max_flows",
          "schema_version": 0,
          "attributes": {
            "id": "3816604019",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-rnr-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-rnr-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "viz_db_postprocess",
          "schema_version": 0,
          "attributes": {
            "id": "3202590599",
            "json": "{\n  \"Version\": \"2008-10-17\",\n  \"Id\": \"__default_policy_ID\",\n  \"Statement\": [\n    {\n      \"Sid\": \"__default_statement_ID\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:SetTopicAttributes\",\n        \"SNS:RemovePermission\",\n        \"SNS:Receive\",\n        \"SNS:Publish\",\n        \"SNS:ListSubscriptionsByTopic\",\n        \"SNS:GetTopicAttributes\",\n        \"SNS:DeleteTopic\",\n        \"SNS:AddPermission\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"aws:SourceArn\": [\n            \"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"\n          ]\n        },\n        \"StringEquals\": {\n          \"AWS:SourceAccount\": [\n            \"526904826677\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"__console_pub_0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"SNS:Subscribe\",\n        \"SNS:Receive\",\n        \"SNS:Publish\"\n      ],\n      \"Resource\": \"arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::526904826677:root\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": "__default_policy_ID",
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "SNS:AddPermission",
                  "SNS:DeleteTopic",
                  "SNS:GetTopicAttributes",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:RemovePermission",
                  "SNS:SetTopicAttributes",
                  "SNS:Subscribe"
                ],
                "condition": [
                  {
                    "test": "ArnLike",
                    "values": [
                      "arn:aws:s3:::hydrovis-ti-nwm-us-east-1"
                    ],
                    "variable": "aws:SourceArn"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "526904826677"
                    ],
                    "variable": "AWS:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess"
                ],
                "sid": "__default_statement_ID"
              },
              {
                "actions": [
                  "SNS:Publish",
                  "SNS:Receive",
                  "SNS:Subscribe"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::526904826677:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess"
                ],
                "sid": "__console_pub_0"
              }
            ],
            "version": "2008-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (N. Virginia)",
            "endpoint": "ec2.us-east-1.amazonaws.com",
            "id": "us-east-1",
            "name": "us-east-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "nwm_bucket_notification",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-nwm-us-east-1",
            "id": "hydrovis-ti-nwm-us-east-1",
            "lambda_function": [],
            "queue": [],
            "topic": [
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "analysis_assim.channel_rt.tm00.conus.nc",
                "id": "tf-s3-topic-20211220205214705400000003",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "analysis_assim.channel_rt.tm0000.hawaii.nc",
                "id": "tf-s3-topic-20211220205214705400000004",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "analysis_assim.channel_rt.tm00.puertorico.nc",
                "id": "tf-s3-topic-20211220205214705400000005",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "short_range.channel_rt.f018.conus.nc",
                "id": "tf-s3-topic-20211220205214705400000006",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "short_range.channel_rt.f04800.hawaii.nc",
                "id": "tf-s3-topic-20211220205214705400000007",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "short_range.channel_rt.f048.puertorico.nc",
                "id": "tf-s3-topic-20211220205214705400000008",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "medium_range.channel_rt_1.f072.conus.nc",
                "id": "tf-s3-topic-20211220205214705400000009",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "medium_range.channel_rt_1.f120.conus.nc",
                "id": "tf-s3-topic-2021122020521470540000000a",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day"
              },
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "common/data/model/com/nwm/prod/",
                "filter_suffix": "medium_range.channel_rt_1.f240.conus.nc",
                "id": "tf-s3-topic-2021122020521470540000000b",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.sns.aws_sns_topic.sns_topics",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "nwm_max_flows_bucket_notification",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-fim-us-east-1",
            "id": "hydrovis-ti-fim-us-east-1",
            "lambda_function": [],
            "queue": [],
            "topic": [
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "max_flows/",
                "filter_suffix": "max_flows.nc",
                "id": "tf-s3-topic-20211220205214703900000002",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "rnr_max_flows_bucket_notification",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "hydrovis-ti-rnr-us-east-1",
            "id": "hydrovis-ti-rnr-us-east-1",
            "lambda_function": [],
            "queue": [],
            "topic": [
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "max_flows/",
                "filter_suffix": "max_flows.csv",
                "id": "tf-s3-topic-20211220205214703900000001",
                "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics"
          ]
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "sns_topics",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_ana",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_ana",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_ana"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_ana",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_hi",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_ana_hi",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_ana_hi",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_ana_hi"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_ana_hi",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_prvi",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_ana_prvi",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_ana_prvi",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_ana_prvi"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_ana_prvi",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_10day",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_mrf_10day",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_mrf_10day",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_mrf_10day"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_mrf_10day",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_3day",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_mrf_3day",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_mrf_3day",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_mrf_3day"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_mrf_3day",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_5day",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_mrf_5day",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_mrf_5day",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_mrf_5day"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_mrf_5day",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_srf",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_srf",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_srf",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_srf"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_srf",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_hi",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_srf_hi",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_srf_hi",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_srf_hi"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_srf_hi",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_prvi",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_ingest_srf_prvi",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_ingest_srf_prvi",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_ingest_srf_prvi"
            },
            "tags_all": {
              "Name": "ti_nwm_ingest_srf_prvi",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        },
        {
          "index_key": "nwm_max_flows",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_nwm_max_flows",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_nwm_max_flows",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-fim-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_nwm_max_flows"
            },
            "tags_all": {
              "Name": "ti_nwm_max_flows",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "rnr_max_flows",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_rnr_max_flows",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_rnr_max_flows",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-rnr-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_rnr_max_flows"
            },
            "tags_all": {
              "Name": "ti_rnr_max_flows",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "viz_db_postprocess",
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "ti_viz_db_postprocess",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": null,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "ti_viz_db_postprocess",
            "name_prefix": "",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess\"}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": {
              "Name": "ti_viz_db_postprocess"
            },
            "tags_all": {
              "Name": "ti_viz_db_postprocess",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.sns",
      "mode": "managed",
      "type": "aws_sns_topic_policy",
      "name": "sns_topics",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.data.aws_caller_identity.current",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_hi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.data.aws_caller_identity.current",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_prvi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.data.aws_caller_identity.current",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_10day",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.sns.data.aws_caller_identity.current",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_3day",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.data.aws_caller_identity.current",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_5day",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.data.aws_caller_identity.current"
          ]
        },
        {
          "index_key": "nwm_ingest_srf",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.sns.data.aws_caller_identity.current",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_hi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.sns.data.aws_caller_identity.current",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_prvi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.sns.aws_sns_topic.sns_topics",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.data.aws_caller_identity.current",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile"
          ]
        },
        {
          "index_key": "nwm_max_flows",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-fim-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.data.aws_caller_identity.current",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics"
          ]
        },
        {
          "index_key": "rnr_max_flows",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-rnr-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.sns.data.aws_caller_identity.current"
          ]
        },
        {
          "index_key": "viz_db_postprocess",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess",
            "owner": "526904826677",
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:Subscribe\",\"SNS:SetTopicAttributes\",\"SNS:RemovePermission\",\"SNS:Receive\",\"SNS:Publish\",\"SNS:ListSubscriptionsByTopic\",\"SNS:GetTopicAttributes\",\"SNS:DeleteTopic\",\"SNS:AddPermission\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess\",\"Condition\":{\"StringEquals\":{\"AWS:SourceAccount\":\"526904826677\"},\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::hydrovis-ti-nwm-us-east-1\"}}},{\"Sid\":\"__console_pub_0\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::526904826677:root\"},\"Action\":[\"SNS:Subscribe\",\"SNS:Receive\",\"SNS:Publish\"],\"Resource\":\"arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess\"}]}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.data.aws_caller_identity.current",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.data.aws_iam_policy_document.sns_topic_policies",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics"
          ]
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "data",
      "type": "aws_ami",
      "name": "windows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-0b266e75d54048c9f",
            "block_device_mappings": [
              {
                "device_name": "/dev/sda1",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-04a06950e6c42a4b1",
                  "throughput": "0",
                  "volume_size": "150",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "creation_date": "2021-12-06T21:39:40.000Z",
            "description": "STIG image no encryption for sharing between accounts",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "hydrovis-win2019-STIG*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-0b266e75d54048c9f",
            "image_id": "ami-0b266e75d54048c9f",
            "image_location": "526904826677/hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z",
            "name_regex": null,
            "owner_id": "526904826677",
            "owners": [
              "526904826677"
            ],
            "platform": "windows",
            "platform_details": "Windows",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/sda1",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-04a06950e6c42a4b1",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {
              "CreatedBy": "EC2 Image Builder",
              "Ec2ImageBuilderArn": "arn:aws:imagebuilder:us-east-1:526904826677:image/hydrovis-win2019-stig-no-encryption/1.0.5/1",
              "Name": "hydrovis-win2019-STIG-no-encryption 2021-12-06T21-08-07.275Z"
            },
            "usage_operation": "RunInstances:0002",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "526904826677",
            "arn": "arn:aws:iam::526904826677:user/nick.chadwick@noaa.gov",
            "id": "526904826677",
            "user_id": "AIDAXVLPZTM2356AQ2PXL"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "data",
      "type": "template_cloudinit_config",
      "name": "fileshare_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "gzip": false,
            "id": "2178524007",
            "part": [
              {
                "content": "\u003cpowershell\u003e\n$PIPELINE_USER = 'arcgis'\n\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nNew-Item -ItemType Directory -Force -Path D:\\viz | Out-Null\nNew-Item -ItemType Directory -Force -Path D:\\viz\\published | Out-Null\n\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n\nNew-SmbShare -Name \"viz\" -Path \"D:\\viz\" -FullAccess $PIPELINE_USER\n\n\u003c/powershell\u003e\n",
                "content_type": "text/x-shellscript",
                "filename": "fs_setup.ps1",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"fs_setup.ps1\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n\u003cpowershell\u003e\n$PIPELINE_USER = 'arcgis'\n\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nNew-Item -ItemType Directory -Force -Path D:\\viz | Out-Null\nNew-Item -ItemType Directory -Force -Path D:\\viz\\published | Out-Null\n\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n\nNew-SmbShare -Name \"viz\" -Path \"D:\\viz\" -FullAccess $PIPELINE_USER\n\n\u003c/powershell\u003e\n\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "data",
      "type": "template_cloudinit_config",
      "name": "pipeline_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": false,
            "gzip": false,
            "id": "1976849451",
            "part": [
              {
                "content": "\u003cpowershell\u003e\n$Fileshare = '\\\\10.26.150.11'\n$EGIS_HOST = 'maps-testing.water.noaa.gov'\n$VIZ_ENVIRONMENT = 'testing'\n$FIM_VERSION = '3.0.23.3'\n$SSH_KEY_CONTENT = '-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEA4BR4+o+atEvTxc2k0n+4lhN4jpJSDRg9sUNseJm6fpXUX72ml7M+\nTDCiicpjU4ja7fX/tMY5do3X/ggy9wHFYjYbzAlRD0//gzKkr7Azo9Sl+4rArENNFaoEmT\nge/ZW5q9g9NukOKESZXQETbVWIFFDlVTO9dUj8w23OhE4NMio/zre4EOPgeuC4I+sqfPSp\nkEY14Udq6xh9YNkq9ouT6BeEvl2R1O0asS4WwZNpYLLErxwK7nNyqXZiXlglE89lArovEI\n43+MVphc2SeEdU1Sela9ShsK6ZWqmE9V1HgdSKIQUYRNurnNSyM5mMAM5ByiEkN27Xsczv\npdgGqXkNub3o3cloriiP70nGIefj+XH6sx/pBFOum+zzbPrrb5b0iYUz0c9KgWxypmeesW\nVFnw1Gs+K6wOlkqz1ejDjNNQiBLzkiZtaz4gcLeoBp0lsFJG5IXCvtoHlEC/oiXPoqpcxy\nThDBedX5mikJJvdK/9tOewdaQmm5ZAiWxTEoCnknAAAFmKQ3sJKkN7CSAAAAB3NzaC1yc2\nEAAAGBAOAUePqPmrRL08XNpNJ/uJYTeI6SUg0YPbFDbHiZun6V1F+9ppezPkwwoonKY1OI\n2u31/7TGOXaN1/4IMvcBxWI2G8wJUQ9P/4MypK+wM6PUpfuKwKxDTRWqBJk4Hv2VuavYPT\nbpDihEmV0BE21ViBRQ5VUzvXVI/MNtzoRODTIqP863uBDj4HrguCPrKnz0qZBGNeFHausY\nfWDZKvaLk+gXhL5dkdTtGrEuFsGTaWCyxK8cCu5zcql2Yl5YJRPPZQK6LxCON/jFaYXNkn\nhHVNUnpWvUobCumVqphPVdR4HUiiEFGETbq5zUsjOZjADOQcohJDdu17HM76XYBql5Dbm9\n6N3JaK4oj+9JxiHn4/lx+rMf6QRTrpvs82z662+W9ImFM9HPSoFscqZnnrFlRZ8NRrPius\nDpZKs9Xow4zTUIgS85ImbWs+IHC3qAadJbBSRuSFwr7aB5RAv6Ilz6KqXMck4QwXnV+Zop\nCSb3Sv/bTnsHWkJpuWQIlsUxKAp5JwAAAAMBAAEAAAGAON+5XQ852u0sERaC8RKNzTmf7b\n/hp4Uxk15jl7CdDygEQVCnifVqqHfnqUV/NGKV/rPjdQSi7R5PZiC6nssKSEUnhQAQXOyX\nE7u05Qq58Kk2f8PV52Mlm4wNor4Fz6NC/wThdKBugXX33w042xVMdquZqah6O9yMmyWxtw\n8Adm0WyOcEhvTvswB6fFNh81k9+Gp5nnY8AvOyTvSP3QfMQKpHfPHO49ZSYgoqqHM72dlF\n5pQdiiwvPCfaC8wfjQmkRhkPu5D6IO2aY/zuFX+2sJ0Ha2aQLc/wEyDinu5SlPReh7sD2Z\nxpbidqMhVyRIZZ+oIsAbuCR0rhxHP0a/vTBX6PGHMhi7VxUXtRjudbkL+SSLNe6eOofBv+\nny+Z6IHgh/pv7zYSxWw+2KpK8Bx6FPzEgae+VFW2D9MUSOhdWXLZHtsPK7TMukCpsuuaO9\nAtRlMRvsWMLi5ObVqGstozkjH+7/W1ZRHoxD9p/gCVvY7vWpJmDOlQNGSJkWYts2JRAAAA\nwQCXnexIjVhU/+wCDwQmkzPIdVRHbSwiXINMUo8BJwpYE8ac9T81fqEcGf9Kdsj8Y9IRdh\nD5WydNVaryiGNAmyQV3DdPVMPNw9SfD5yArx8ZXlq4cbqBiQJaL89FfrnPIDmT8D4zF/eX\nS8PbFg9EKKqFwHNpT+pKVxJJdeqSWJBX4ZfhYfy5n7vYLjd1XAOm924o2V2v6SgOhS6qZE\ntAJvM1E3xQjHdFCNRmFTFtw/mbaPo3mIi4tUPWaS5cL0avVd8AAADBAPFkdwLug7OLuTaB\n0Pzwm+HshxF978yS08PJAUeKn9k3+SOCGbWW1AGnnTpJjzPaZAu209Qkge7aVVLA/kawEb\ntJr5jWq1VqSQE+LRShUZv9NxTwUA4aXO/37hLW02Q0ImHTWfK4ZHK93vPz5CjhrFjM5mwc\nztCopRypxg1Frx8lMC+iWfz8EoS5odCusmNOa6abNX1PDxIvxBrAgfhyiPnRpWJ3rcE8sq\nnpv/V4ulwhT9lDt9ZlFji73Qkr7GXB1QAAAMEA7aPPrs871BS7ZZ9C/7KBqeK/a3PpcZqW\nqepObo4FtCO7EMGjiFbdC6pKelF9hj2brQ2Iv4QEZZK0rsnyAnBaMTebsHXdKRxjM+gnWI\nzd5frrcYdrcvfATL8FXV6XKmKW57fipjUQS7Qk37ZfyWCRV2IOvJyFtz9Dw/5e97jBChiW\noMhmfU7CAZYd25oMRftgasQk6Qf6Wsi8fg+sEWi4uFwsCD6Xwbht52kU99V+G4tBjlCZSn\nJSQI64GqSgnBELAAAAIW53Y1xjb3JleS5rcmV3c29uQE5XQ0FMLUwtNDMzOTMzMwE=\n-----END OPENSSH PRIVATE KEY-----\n'\n$LICENSE_REG_CONTENT = 'Windows Registry Editor Version 5.00\n\n[HKEY_USERS\\arcgis\\Software\\ESRI\\ArcGISPro\\Licensing]\n\"ARCPROWORKOFFLINE\"=\"FALSE\"\n\"DESKTOP_CONFIG\"=\"TRUE\"\n\"FlexNetService\"=\"False\"\n\"LICENSE_FILE_PATH\"=\"\"\n\"RENEWAL_CHECK\"=\"\"\n\"SEAT_PREFERENCE\"=\"Float\"\n\"SingleUse_Installed\"=\"Professional\"\n\"SOFTWARE_CLASS\"=\"Professional\"\n\"SOFTWARE_TYPE\"=\"CLASSIC\"\n\"TIMEOUTWARNING\"=\"TRUE\"\n\"LICENSE_SERVER_PRO_ON_PREMISE\"=\"none\"\n\"ARCPRO_AUTH_TYPE\"=\"\"\n\"LICENSE_SERVER\"=\"@10.26.150.153\"\n\"SOFTWARE_CLASS_FN\"=\"Professional\"\n\n[HKEY_USERS\\arcgis\\\\Software\\ESRI\\ArcGISPro\\Licensing\\Extensions]\n\"Spatial Analyst Pro\"=dword:00000001\n'\n$WRDS_HOST = '10.26.150.90'\n$S3_STATIC_DATA_BUCKET = 'hydrovis-ti-deployment-us-east-1'\n$DEPLOY_FILES_PREFIX = 'viz/'\n$NWM_DATA_BUCKET = 'hydrovis-ti-nwm-us-east-1'\n$FIM_DATA_BUCKET = 'hydrovis-ti-deployment-us-east-1'\n$FIM_OUTPUT_BUCKET = 'hydrovis-ti-fim-us-east-1'\n$NWM_MAX_FLOWS_DATA_BUCKET = 'hydrovis-ti-fim-us-east-1'\n$RNR_MAX_FLOWS_DATA_BUCKET = 'hydrovis-ti-rnr-us-east-1'\n$WINDOWS_SERVICE_STATUS = 'start'\n$WINDOWS_SERVICE_STARTUP = 'SERVICE_AUTO_START'\n$PIPELINE_USER = 'arcgis'\n$PIPELINE_USER_ACCOUNT_PASSWORD = 'hardwork123donehere!'\n\n$HYDROVIS_EGIS_USER = \"hydrovis.proc\"\n$HYDROVIS_EGIS_PASS = 'WaterIsFun1@'\n\n$LOGSTASH_IP = '10.26.150.5'\n$VLAB_REPO_PREFIX   = 'ssh://corey.krewson@vlab.noaa.gov:29418'\n$VLAB_HOST   = 'vlab.noaa.gov'\n\nWrite-Host \"Setting up $PIPELINE_USER profile\"\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n# This command will fail but that is on purpose. It will initialize the profile which is what we want\n$securePassword = ConvertTo-SecureString $PIPELINE_USER_ACCOUNT_PASSWORD -AsPlainText -Force\n$credential = New-Object System.Management.Automation.PSCredential $PIPELINE_USER, $securePassword\nStart-Process program.exe -Credential $credential\n\n$Logfile = \"C:\\Users\\$PIPELINE_USER\\Desktop\\pipeline_setup.log\"\n\nfunction LogWrite\n{\nParam ([string]$logstring)\nWrite-Host $logstring\n$currentdate = Get-Date -Format \"MM/dd/yyyy HH:mm K\"\n$logstring =  $currentdate + \": \" +  $logstring\nAdd-content $Logfile -value $logstring\n}\n\nfunction CreateUTF8File\n{\n  Param ([string]$file_content, [string]$file_dir, [string]$file_name)\n\n  Set-Location -Path $file_dir\n  $file_path = $file_dir + \"\\\" + $file_name\n  $file_content | Out-File -Encoding ascii -FilePath $file_path\n  Get-ChildItem $file_name | ForEach-Object {\n    # get the contents and replace line breaks by U+000A\n    $contents = [IO.File]::ReadAllText($_) -replace \"`r`n?\", \"`n\"\n    # create UTF-8 encoding without signature\n    $utf8 = New-Object System.Text.UTF8Encoding $false\n    # write the text back\n    [IO.File]::WriteAllText($_, $contents, $utf8)\n  }\n}\n\nLogWrite \"Setting up file variables\"\n$StaticDir = \"D:\\static\"\n$DynamicDir = \"D:\\dynamic\"\n\n$AUTHORITATIVE_ROOT = \"$StaticDir\\authoritative\"\n$CACHE_ROOT = \"$DynamicDir\\cache\"\n$FLAGS_ROOT = \"s3://$FIM_OUTPUT_BUCKET/published_flags\"\n$PRISTINE_ROOT = \"$StaticDir\\pristine\"\n$PRO_PROJECT_ROOT = \"$StaticDir\\pro_project\"\n$PUBLISHED_ROOT = \"$Fileshare\\viz\\published\"\n$WORKSPACE_ROOT = \"$DynamicDir\\authoritative\"\n$PIPELINE_WORKSPACE = \"D:\\pipeline_workspace\"\n\nLogWrite \"Setting up D drive\"\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nLogWrite \"ADDING SSH Files\"\n$HV_SSH_DIR = \"C:\\Users\\$PIPELINE_USER\\.ssh\"\n$UD_SSH_DIR = \"$HOME\\.ssh\"\n\nLogWrite \"Opening Firewall for ArcgisPro License Connection\"\nNew-NetFirewallRule -DisplayName \"ArcGISPro License Manager Connection\" -Direction \"Outbound\" -Program \"$env:ProgramFiles\\ArcGIS\\Pro\\bin\\ArcGISPro.exe\" -Action \"Allow\"\n\nLogWrite \"ADDING ArcGIS Pro License Registry\"\n$HV_LICENSE = \"C:\\Users\\$PIPELINE_USER\\Documents\\licensed_pro.reg\"\n$LICENSE_REG_CONTENT | Out-File  $HV_LICENSE\n\n$UD_LICENSE_REG_CONTENT = $LICENSE_REG_CONTENT.Replace(\"[HKEY_USERS\\$PIPELINE_USER\\\", \"[HKEY_CURRENT_USER\\\")\n$UD_LICENSE = \"$env:TEMP\\ud_pro_license.reg\"\n$UD_LICENSE_REG_CONTENT | Out-File $UD_LICENSE\n\nGet-Command reg\nreg load \"HKU\\$PIPELINE_USER\" \"C:\\Users\\$PIPELINE_USER\\ntuser.dat\"\nreg import $HV_LICENSE\nreg import $UD_LICENSE\n[gc]::Collect()\nreg unload \"HKU\\$PIPELINE_USER\"\n\nNew-Item -ItemType Directory -Force -Path $HV_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $HV_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e C:\\Users\\$PIPELINE_USER\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\nNew-Item -ItemType Directory -Force -Path $UD_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $UD_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e $HOME\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\nLogWrite \"Setting up file structure of static and dynamic data\"\nNew-Item -ItemType Directory -Force -Path $AUTHORITATIVE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"AUTHORITATIVE_ROOT\", $AUTHORITATIVE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $CACHE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"CACHE_ROOT\", $CACHE_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"FLAGS_ROOT\", $FLAGS_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRISTINE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRISTINE_ROOT\", $PRISTINE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRO_PROJECT_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRO_PROJECT_ROOT\", $PRO_PROJECT_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"PUBLISHED_ROOT\", $PUBLISHED_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $WORKSPACE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"WORKSPACE_ROOT\", $WORKSPACE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PIPELINE_WORKSPACE | Out-Null\n[Environment]::SetEnvironmentVariable(\"PIPELINE_WORKSPACE\", $PIPELINE_WORKSPACE, \"2\")\n\nLogWrite \"Setting up environment variables\"\n[Environment]::SetEnvironmentVariable(\"CACHE_DAYS\", \"3\", \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_HOST\", $EGIS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_USERNAME\", $HYDROVIS_EGIS_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_PASSWORD\", $HYDROVIS_EGIS_PASS, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_VERSION\", $FIM_VERSION, \"2\")\n[Environment]::SetEnvironmentVariable(\"IMAGE_SERVER\", \"image\", \"2\")\n[Environment]::SetEnvironmentVariable(\"PRIMARY_SERVER\", \"server\", \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_ENVIRONMENT\", $VIZ_ENVIRONMENT, \"2\")\n[Environment]::SetEnvironmentVariable(\"WRDS_HOST\", $WRDS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_USER\", $PIPELINE_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_MAX_FLOWS_DATA_BUCKET\", $NWM_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"RNR_MAX_FLOWS_DATA_BUCKET\", $RNR_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_DATA_BUCKET\", $NWM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_DATA_BUCKET\", $FIM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_OUTPUT_BUCKET\", $FIM_OUTPUT_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"LOGSTASH_SOCKET\", \"$LOGSTASH_IP`:5000\", \"2\")\n\nfunction GetRepo\n{\n   Param ([string]$branch, [string]$repo)\n\n   if (Test-Path -Path $repo) {\n       Remove-Item $repo -Recurse\n       Get-ChildItem $repo -Hidden -Recurse | Remove-Item -Force -Recurse\n   }\n   git clone -b $branch $VLAB_REPO_PREFIX/$repo\n\n   if ($LASTEXITCODE -gt 0) { throw \"Error occurred getting \" + $repo }\n}\n\nfunction Retry([Action]$action)\n{\n    $attempts=3\n    $sleepInSeconds=10\n    do\n    {\n        try\n        {\n            $action.Invoke();\n            $message = \"Successfully cloned \" + $repo\n            LogWrite $message\n            break;\n        }\n        catch [Exception]\n        {\n            LogWrite $_.Exception.Message\n        }\n        $attempts--\n        if ($attempts -gt 0) {\n            $message = \"Error: \" + $attempts + \" attempts left for getting \" + $repo\n            LogWrite $message\n            Start-Sleep $sleepInSeconds\n        } else {\n            $message = \"Error: Attempt limit reached while cloning \" + $repo\n            throw $message\n        }\n    } while ($attempts -gt 0)\n}\n\nLogWrite \"Setting up viz pipeline\"\n\nLogWrite \"Creating viz file structure\"\n$VIZ_DIR = \"C:\\Users\\$PIPELINE_USER\\NWC\\viz\"\nNew-Item -ItemType Directory -Force -Path $VIZ_DIR | Out-Null\n\nSet-Location -Path $VIZ_DIR\nLogWrite \"CLONING PIPELINE REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo master owp-viz-proc-pipeline})\n\nLogWrite \"CLONING VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\n$AWS_VIZ_ENVIRONMENT = \"aws-\" + $VIZ_ENVIRONMENT\nRetry({GetRepo $AWS_VIZ_ENVIRONMENT owp-viz-services})\n\nLogWrite \"CLONING AWS VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo $VIZ_ENVIRONMENT owp-viz-services-aws})\n\nLogWrite \"CREATING FRESH viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" create -y --name viz --clone arcgispro-py3\n\nLogWrite \"ACTIVATING viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\activate.bat\" viz\n\n$window_python_exe = \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\"\n$user_python_exe = \"C:\\Users\\$PIPELINE_USER\\AppData\\Local\\ESRI\\conda\\envs\\viz\\python.exe\"\nif (Test-Path -Path $window_python_exe -PathType Leaf) {\n    $python_exe = $window_python_exe\n} else {\n    $python_exe = $user_python_exe\n}\n\nLogWrite \"INSTALLING PROCESSING PIPELINE REPO\"\n$PIPELINE_REPO = $VIZ_DIR + \"\\owp-viz-proc-pipeline\"\nSet-Location -Path $PIPELINE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"INSTALLING SERVICE REPO\"\n$SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services\"\nSet-Location -Path $SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" install -y -n viz -c esri arcgis\n\nLogWrite \"INSTALLING AWS SERVICE REPO\"\n$AWS_SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services-aws\"\nSet-Location -Path $AWS_SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"--\u003eTRANFERRING AUTHORITATIVE DATA\"\n$s3_authoritative = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"authoritative_data/\"\naws s3 cp $s3_authoritative $AUTHORITATIVE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRISTINE DATA\"\n$s3_pristine = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pristine_data/\"\naws s3 cp $s3_pristine $PRISTINE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRO PROJECT DATA\"\n$s3_pro_projects = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pro_project_data/\"\naws s3 cp $s3_pro_projects $PRO_PROJECT_ROOT --recursive\n\nLogWrite \"CREATING CONNECTION FILES FOR $FIM_DATA_BUCKET\"\nSet-Location -Path $VIZ_DIR\n$env:AUTHORITATIVE_ROOT = $AUTHORITATIVE_ROOT\n$env:FIM_OUTPUT_BUCKET = $FIM_OUTPUT_BUCKET\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_s3_connection_files.py\n\nSet-Location HKCU:\\Software\\ESRI\\ArcGISPro\nRemove-Item -Recurse -Force -Confirm:$false Licensing\n\nLogWrite \"UPDATING PYTHON PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n\nLogWrite \"UPDATING WORKSPACE PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"D:\\\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"D:\\\"\n\nLogWrite \"ADDING $PUBLISHED_ROOT TO $EGIS_HOST\"\nSet-Location -Path $VIZ_DIR\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\update_data_stores.py $EGIS_HOST $PUBLISHED_ROOT $HYDROVIS_EGIS_USER $HYDROVIS_EGIS_PASS\n\nLogWrite \"DELETING PUBLISHED FLAGS IF THEY EXIST\"\n$EXISTING_PUBLISHED_FLAGS = aws s3 ls $FLAGS_ROOT\nif ($EXISTING_PUBLISHED_FLAGS) {\n    LogWrite \"DELETING PUBLISHED FLAGS\"\n    aws s3 rm $FLAGS_ROOT --recursive\n}\n\nLogWrite \"GETTING NSSM\"\nNew-Item -ItemType Directory -Force -Path 'C:\\Programs' | Out-Null\nSet-Location -Path 'C:\\Programs'\nInvoke-WebRequest https://nssm.cc/release/nssm-2.24.zip -OutFile nssm-2.24.zip\nExpand-Archive -LiteralPath 'nssm-2.24.zip' -DestinationPath nssm-2.24\nCopy-Item .\\nssm-2.24\\nssm-2.24\\win64\\nssm.exe 'C:\\Programs\\nssm.exe'\nRemove-Item nssm-2.24.zip\nRemove-Item nssm-2.24 -Force -Recurse\n$PATH = [Environment]::GetEnvironmentVariable(\"PATH\")\n$PATH += \";C:\\Programs\"\n[Environment]::SetEnvironmentVariable(\"PATH\", $PATH, \"2\")\n\nLogWrite \"SETTING UP WINDOWS SERVICES\"\nSet-Location -Path $VIZ_DIR\n\u0026 .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_windows_services.ps1 $WINDOWS_SERVICE_STARTUP $WINDOWS_SERVICE_STATUS $PIPELINE_USER $PIPELINE_USER_ACCOUNT_PASSWORD\n\nLogWrite \"DONE SETTING UP PIPELINE\"\n\u003c/powershell\u003e\n\u003cpersist\u003efalse\u003c/persist\u003e\n",
                "content_type": "text/x-shellscript",
                "filename": "prc_setup.ps1",
                "merge_type": ""
              }
            ],
            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"prc_setup.ps1\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/x-shellscript\r\nMime-Version: 1.0\r\n\r\n\u003cpowershell\u003e\n$Fileshare = '\\\\10.26.150.11'\n$EGIS_HOST = 'maps-testing.water.noaa.gov'\n$VIZ_ENVIRONMENT = 'testing'\n$FIM_VERSION = '3.0.23.3'\n$SSH_KEY_CONTENT = '-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEA4BR4+o+atEvTxc2k0n+4lhN4jpJSDRg9sUNseJm6fpXUX72ml7M+\nTDCiicpjU4ja7fX/tMY5do3X/ggy9wHFYjYbzAlRD0//gzKkr7Azo9Sl+4rArENNFaoEmT\nge/ZW5q9g9NukOKESZXQETbVWIFFDlVTO9dUj8w23OhE4NMio/zre4EOPgeuC4I+sqfPSp\nkEY14Udq6xh9YNkq9ouT6BeEvl2R1O0asS4WwZNpYLLErxwK7nNyqXZiXlglE89lArovEI\n43+MVphc2SeEdU1Sela9ShsK6ZWqmE9V1HgdSKIQUYRNurnNSyM5mMAM5ByiEkN27Xsczv\npdgGqXkNub3o3cloriiP70nGIefj+XH6sx/pBFOum+zzbPrrb5b0iYUz0c9KgWxypmeesW\nVFnw1Gs+K6wOlkqz1ejDjNNQiBLzkiZtaz4gcLeoBp0lsFJG5IXCvtoHlEC/oiXPoqpcxy\nThDBedX5mikJJvdK/9tOewdaQmm5ZAiWxTEoCnknAAAFmKQ3sJKkN7CSAAAAB3NzaC1yc2\nEAAAGBAOAUePqPmrRL08XNpNJ/uJYTeI6SUg0YPbFDbHiZun6V1F+9ppezPkwwoonKY1OI\n2u31/7TGOXaN1/4IMvcBxWI2G8wJUQ9P/4MypK+wM6PUpfuKwKxDTRWqBJk4Hv2VuavYPT\nbpDihEmV0BE21ViBRQ5VUzvXVI/MNtzoRODTIqP863uBDj4HrguCPrKnz0qZBGNeFHausY\nfWDZKvaLk+gXhL5dkdTtGrEuFsGTaWCyxK8cCu5zcql2Yl5YJRPPZQK6LxCON/jFaYXNkn\nhHVNUnpWvUobCumVqphPVdR4HUiiEFGETbq5zUsjOZjADOQcohJDdu17HM76XYBql5Dbm9\n6N3JaK4oj+9JxiHn4/lx+rMf6QRTrpvs82z662+W9ImFM9HPSoFscqZnnrFlRZ8NRrPius\nDpZKs9Xow4zTUIgS85ImbWs+IHC3qAadJbBSRuSFwr7aB5RAv6Ilz6KqXMck4QwXnV+Zop\nCSb3Sv/bTnsHWkJpuWQIlsUxKAp5JwAAAAMBAAEAAAGAON+5XQ852u0sERaC8RKNzTmf7b\n/hp4Uxk15jl7CdDygEQVCnifVqqHfnqUV/NGKV/rPjdQSi7R5PZiC6nssKSEUnhQAQXOyX\nE7u05Qq58Kk2f8PV52Mlm4wNor4Fz6NC/wThdKBugXX33w042xVMdquZqah6O9yMmyWxtw\n8Adm0WyOcEhvTvswB6fFNh81k9+Gp5nnY8AvOyTvSP3QfMQKpHfPHO49ZSYgoqqHM72dlF\n5pQdiiwvPCfaC8wfjQmkRhkPu5D6IO2aY/zuFX+2sJ0Ha2aQLc/wEyDinu5SlPReh7sD2Z\nxpbidqMhVyRIZZ+oIsAbuCR0rhxHP0a/vTBX6PGHMhi7VxUXtRjudbkL+SSLNe6eOofBv+\nny+Z6IHgh/pv7zYSxWw+2KpK8Bx6FPzEgae+VFW2D9MUSOhdWXLZHtsPK7TMukCpsuuaO9\nAtRlMRvsWMLi5ObVqGstozkjH+7/W1ZRHoxD9p/gCVvY7vWpJmDOlQNGSJkWYts2JRAAAA\nwQCXnexIjVhU/+wCDwQmkzPIdVRHbSwiXINMUo8BJwpYE8ac9T81fqEcGf9Kdsj8Y9IRdh\nD5WydNVaryiGNAmyQV3DdPVMPNw9SfD5yArx8ZXlq4cbqBiQJaL89FfrnPIDmT8D4zF/eX\nS8PbFg9EKKqFwHNpT+pKVxJJdeqSWJBX4ZfhYfy5n7vYLjd1XAOm924o2V2v6SgOhS6qZE\ntAJvM1E3xQjHdFCNRmFTFtw/mbaPo3mIi4tUPWaS5cL0avVd8AAADBAPFkdwLug7OLuTaB\n0Pzwm+HshxF978yS08PJAUeKn9k3+SOCGbWW1AGnnTpJjzPaZAu209Qkge7aVVLA/kawEb\ntJr5jWq1VqSQE+LRShUZv9NxTwUA4aXO/37hLW02Q0ImHTWfK4ZHK93vPz5CjhrFjM5mwc\nztCopRypxg1Frx8lMC+iWfz8EoS5odCusmNOa6abNX1PDxIvxBrAgfhyiPnRpWJ3rcE8sq\nnpv/V4ulwhT9lDt9ZlFji73Qkr7GXB1QAAAMEA7aPPrs871BS7ZZ9C/7KBqeK/a3PpcZqW\nqepObo4FtCO7EMGjiFbdC6pKelF9hj2brQ2Iv4QEZZK0rsnyAnBaMTebsHXdKRxjM+gnWI\nzd5frrcYdrcvfATL8FXV6XKmKW57fipjUQS7Qk37ZfyWCRV2IOvJyFtz9Dw/5e97jBChiW\noMhmfU7CAZYd25oMRftgasQk6Qf6Wsi8fg+sEWi4uFwsCD6Xwbht52kU99V+G4tBjlCZSn\nJSQI64GqSgnBELAAAAIW53Y1xjb3JleS5rcmV3c29uQE5XQ0FMLUwtNDMzOTMzMwE=\n-----END OPENSSH PRIVATE KEY-----\n'\n$LICENSE_REG_CONTENT = 'Windows Registry Editor Version 5.00\n\n[HKEY_USERS\\arcgis\\Software\\ESRI\\ArcGISPro\\Licensing]\n\"ARCPROWORKOFFLINE\"=\"FALSE\"\n\"DESKTOP_CONFIG\"=\"TRUE\"\n\"FlexNetService\"=\"False\"\n\"LICENSE_FILE_PATH\"=\"\"\n\"RENEWAL_CHECK\"=\"\"\n\"SEAT_PREFERENCE\"=\"Float\"\n\"SingleUse_Installed\"=\"Professional\"\n\"SOFTWARE_CLASS\"=\"Professional\"\n\"SOFTWARE_TYPE\"=\"CLASSIC\"\n\"TIMEOUTWARNING\"=\"TRUE\"\n\"LICENSE_SERVER_PRO_ON_PREMISE\"=\"none\"\n\"ARCPRO_AUTH_TYPE\"=\"\"\n\"LICENSE_SERVER\"=\"@10.26.150.153\"\n\"SOFTWARE_CLASS_FN\"=\"Professional\"\n\n[HKEY_USERS\\arcgis\\\\Software\\ESRI\\ArcGISPro\\Licensing\\Extensions]\n\"Spatial Analyst Pro\"=dword:00000001\n'\n$WRDS_HOST = '10.26.150.90'\n$S3_STATIC_DATA_BUCKET = 'hydrovis-ti-deployment-us-east-1'\n$DEPLOY_FILES_PREFIX = 'viz/'\n$NWM_DATA_BUCKET = 'hydrovis-ti-nwm-us-east-1'\n$FIM_DATA_BUCKET = 'hydrovis-ti-deployment-us-east-1'\n$FIM_OUTPUT_BUCKET = 'hydrovis-ti-fim-us-east-1'\n$NWM_MAX_FLOWS_DATA_BUCKET = 'hydrovis-ti-fim-us-east-1'\n$RNR_MAX_FLOWS_DATA_BUCKET = 'hydrovis-ti-rnr-us-east-1'\n$WINDOWS_SERVICE_STATUS = 'start'\n$WINDOWS_SERVICE_STARTUP = 'SERVICE_AUTO_START'\n$PIPELINE_USER = 'arcgis'\n$PIPELINE_USER_ACCOUNT_PASSWORD = 'hardwork123donehere!'\n\n$HYDROVIS_EGIS_USER = \"hydrovis.proc\"\n$HYDROVIS_EGIS_PASS = 'WaterIsFun1@'\n\n$LOGSTASH_IP = '10.26.150.5'\n$VLAB_REPO_PREFIX   = 'ssh://corey.krewson@vlab.noaa.gov:29418'\n$VLAB_HOST   = 'vlab.noaa.gov'\n\nWrite-Host \"Setting up $PIPELINE_USER profile\"\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n# This command will fail but that is on purpose. It will initialize the profile which is what we want\n$securePassword = ConvertTo-SecureString $PIPELINE_USER_ACCOUNT_PASSWORD -AsPlainText -Force\n$credential = New-Object System.Management.Automation.PSCredential $PIPELINE_USER, $securePassword\nStart-Process program.exe -Credential $credential\n\n$Logfile = \"C:\\Users\\$PIPELINE_USER\\Desktop\\pipeline_setup.log\"\n\nfunction LogWrite\n{\nParam ([string]$logstring)\nWrite-Host $logstring\n$currentdate = Get-Date -Format \"MM/dd/yyyy HH:mm K\"\n$logstring =  $currentdate + \": \" +  $logstring\nAdd-content $Logfile -value $logstring\n}\n\nfunction CreateUTF8File\n{\n  Param ([string]$file_content, [string]$file_dir, [string]$file_name)\n\n  Set-Location -Path $file_dir\n  $file_path = $file_dir + \"\\\" + $file_name\n  $file_content | Out-File -Encoding ascii -FilePath $file_path\n  Get-ChildItem $file_name | ForEach-Object {\n    # get the contents and replace line breaks by U+000A\n    $contents = [IO.File]::ReadAllText($_) -replace \"`r`n?\", \"`n\"\n    # create UTF-8 encoding without signature\n    $utf8 = New-Object System.Text.UTF8Encoding $false\n    # write the text back\n    [IO.File]::WriteAllText($_, $contents, $utf8)\n  }\n}\n\nLogWrite \"Setting up file variables\"\n$StaticDir = \"D:\\static\"\n$DynamicDir = \"D:\\dynamic\"\n\n$AUTHORITATIVE_ROOT = \"$StaticDir\\authoritative\"\n$CACHE_ROOT = \"$DynamicDir\\cache\"\n$FLAGS_ROOT = \"s3://$FIM_OUTPUT_BUCKET/published_flags\"\n$PRISTINE_ROOT = \"$StaticDir\\pristine\"\n$PRO_PROJECT_ROOT = \"$StaticDir\\pro_project\"\n$PUBLISHED_ROOT = \"$Fileshare\\viz\\published\"\n$WORKSPACE_ROOT = \"$DynamicDir\\authoritative\"\n$PIPELINE_WORKSPACE = \"D:\\pipeline_workspace\"\n\nLogWrite \"Setting up D drive\"\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nLogWrite \"ADDING SSH Files\"\n$HV_SSH_DIR = \"C:\\Users\\$PIPELINE_USER\\.ssh\"\n$UD_SSH_DIR = \"$HOME\\.ssh\"\n\nLogWrite \"Opening Firewall for ArcgisPro License Connection\"\nNew-NetFirewallRule -DisplayName \"ArcGISPro License Manager Connection\" -Direction \"Outbound\" -Program \"$env:ProgramFiles\\ArcGIS\\Pro\\bin\\ArcGISPro.exe\" -Action \"Allow\"\n\nLogWrite \"ADDING ArcGIS Pro License Registry\"\n$HV_LICENSE = \"C:\\Users\\$PIPELINE_USER\\Documents\\licensed_pro.reg\"\n$LICENSE_REG_CONTENT | Out-File  $HV_LICENSE\n\n$UD_LICENSE_REG_CONTENT = $LICENSE_REG_CONTENT.Replace(\"[HKEY_USERS\\$PIPELINE_USER\\\", \"[HKEY_CURRENT_USER\\\")\n$UD_LICENSE = \"$env:TEMP\\ud_pro_license.reg\"\n$UD_LICENSE_REG_CONTENT | Out-File $UD_LICENSE\n\nGet-Command reg\nreg load \"HKU\\$PIPELINE_USER\" \"C:\\Users\\$PIPELINE_USER\\ntuser.dat\"\nreg import $HV_LICENSE\nreg import $UD_LICENSE\n[gc]::Collect()\nreg unload \"HKU\\$PIPELINE_USER\"\n\nNew-Item -ItemType Directory -Force -Path $HV_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $HV_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e C:\\Users\\$PIPELINE_USER\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\nNew-Item -ItemType Directory -Force -Path $UD_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $UD_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e $HOME\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\nLogWrite \"Setting up file structure of static and dynamic data\"\nNew-Item -ItemType Directory -Force -Path $AUTHORITATIVE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"AUTHORITATIVE_ROOT\", $AUTHORITATIVE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $CACHE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"CACHE_ROOT\", $CACHE_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"FLAGS_ROOT\", $FLAGS_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRISTINE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRISTINE_ROOT\", $PRISTINE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRO_PROJECT_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRO_PROJECT_ROOT\", $PRO_PROJECT_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"PUBLISHED_ROOT\", $PUBLISHED_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $WORKSPACE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"WORKSPACE_ROOT\", $WORKSPACE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PIPELINE_WORKSPACE | Out-Null\n[Environment]::SetEnvironmentVariable(\"PIPELINE_WORKSPACE\", $PIPELINE_WORKSPACE, \"2\")\n\nLogWrite \"Setting up environment variables\"\n[Environment]::SetEnvironmentVariable(\"CACHE_DAYS\", \"3\", \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_HOST\", $EGIS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_USERNAME\", $HYDROVIS_EGIS_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_PASSWORD\", $HYDROVIS_EGIS_PASS, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_VERSION\", $FIM_VERSION, \"2\")\n[Environment]::SetEnvironmentVariable(\"IMAGE_SERVER\", \"image\", \"2\")\n[Environment]::SetEnvironmentVariable(\"PRIMARY_SERVER\", \"server\", \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_ENVIRONMENT\", $VIZ_ENVIRONMENT, \"2\")\n[Environment]::SetEnvironmentVariable(\"WRDS_HOST\", $WRDS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_USER\", $PIPELINE_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_MAX_FLOWS_DATA_BUCKET\", $NWM_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"RNR_MAX_FLOWS_DATA_BUCKET\", $RNR_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_DATA_BUCKET\", $NWM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_DATA_BUCKET\", $FIM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_OUTPUT_BUCKET\", $FIM_OUTPUT_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"LOGSTASH_SOCKET\", \"$LOGSTASH_IP`:5000\", \"2\")\n\nfunction GetRepo\n{\n   Param ([string]$branch, [string]$repo)\n\n   if (Test-Path -Path $repo) {\n       Remove-Item $repo -Recurse\n       Get-ChildItem $repo -Hidden -Recurse | Remove-Item -Force -Recurse\n   }\n   git clone -b $branch $VLAB_REPO_PREFIX/$repo\n\n   if ($LASTEXITCODE -gt 0) { throw \"Error occurred getting \" + $repo }\n}\n\nfunction Retry([Action]$action)\n{\n    $attempts=3\n    $sleepInSeconds=10\n    do\n    {\n        try\n        {\n            $action.Invoke();\n            $message = \"Successfully cloned \" + $repo\n            LogWrite $message\n            break;\n        }\n        catch [Exception]\n        {\n            LogWrite $_.Exception.Message\n        }\n        $attempts--\n        if ($attempts -gt 0) {\n            $message = \"Error: \" + $attempts + \" attempts left for getting \" + $repo\n            LogWrite $message\n            Start-Sleep $sleepInSeconds\n        } else {\n            $message = \"Error: Attempt limit reached while cloning \" + $repo\n            throw $message\n        }\n    } while ($attempts -gt 0)\n}\n\nLogWrite \"Setting up viz pipeline\"\n\nLogWrite \"Creating viz file structure\"\n$VIZ_DIR = \"C:\\Users\\$PIPELINE_USER\\NWC\\viz\"\nNew-Item -ItemType Directory -Force -Path $VIZ_DIR | Out-Null\n\nSet-Location -Path $VIZ_DIR\nLogWrite \"CLONING PIPELINE REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo master owp-viz-proc-pipeline})\n\nLogWrite \"CLONING VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\n$AWS_VIZ_ENVIRONMENT = \"aws-\" + $VIZ_ENVIRONMENT\nRetry({GetRepo $AWS_VIZ_ENVIRONMENT owp-viz-services})\n\nLogWrite \"CLONING AWS VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo $VIZ_ENVIRONMENT owp-viz-services-aws})\n\nLogWrite \"CREATING FRESH viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" create -y --name viz --clone arcgispro-py3\n\nLogWrite \"ACTIVATING viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\activate.bat\" viz\n\n$window_python_exe = \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\"\n$user_python_exe = \"C:\\Users\\$PIPELINE_USER\\AppData\\Local\\ESRI\\conda\\envs\\viz\\python.exe\"\nif (Test-Path -Path $window_python_exe -PathType Leaf) {\n    $python_exe = $window_python_exe\n} else {\n    $python_exe = $user_python_exe\n}\n\nLogWrite \"INSTALLING PROCESSING PIPELINE REPO\"\n$PIPELINE_REPO = $VIZ_DIR + \"\\owp-viz-proc-pipeline\"\nSet-Location -Path $PIPELINE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"INSTALLING SERVICE REPO\"\n$SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services\"\nSet-Location -Path $SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" install -y -n viz -c esri arcgis\n\nLogWrite \"INSTALLING AWS SERVICE REPO\"\n$AWS_SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services-aws\"\nSet-Location -Path $AWS_SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"--\u003eTRANFERRING AUTHORITATIVE DATA\"\n$s3_authoritative = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"authoritative_data/\"\naws s3 cp $s3_authoritative $AUTHORITATIVE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRISTINE DATA\"\n$s3_pristine = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pristine_data/\"\naws s3 cp $s3_pristine $PRISTINE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRO PROJECT DATA\"\n$s3_pro_projects = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pro_project_data/\"\naws s3 cp $s3_pro_projects $PRO_PROJECT_ROOT --recursive\n\nLogWrite \"CREATING CONNECTION FILES FOR $FIM_DATA_BUCKET\"\nSet-Location -Path $VIZ_DIR\n$env:AUTHORITATIVE_ROOT = $AUTHORITATIVE_ROOT\n$env:FIM_OUTPUT_BUCKET = $FIM_OUTPUT_BUCKET\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_s3_connection_files.py\n\nSet-Location HKCU:\\Software\\ESRI\\ArcGISPro\nRemove-Item -Recurse -Force -Confirm:$false Licensing\n\nLogWrite \"UPDATING PYTHON PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n\nLogWrite \"UPDATING WORKSPACE PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"D:\\\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"D:\\\"\n\nLogWrite \"ADDING $PUBLISHED_ROOT TO $EGIS_HOST\"\nSet-Location -Path $VIZ_DIR\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\update_data_stores.py $EGIS_HOST $PUBLISHED_ROOT $HYDROVIS_EGIS_USER $HYDROVIS_EGIS_PASS\n\nLogWrite \"DELETING PUBLISHED FLAGS IF THEY EXIST\"\n$EXISTING_PUBLISHED_FLAGS = aws s3 ls $FLAGS_ROOT\nif ($EXISTING_PUBLISHED_FLAGS) {\n    LogWrite \"DELETING PUBLISHED FLAGS\"\n    aws s3 rm $FLAGS_ROOT --recursive\n}\n\nLogWrite \"GETTING NSSM\"\nNew-Item -ItemType Directory -Force -Path 'C:\\Programs' | Out-Null\nSet-Location -Path 'C:\\Programs'\nInvoke-WebRequest https://nssm.cc/release/nssm-2.24.zip -OutFile nssm-2.24.zip\nExpand-Archive -LiteralPath 'nssm-2.24.zip' -DestinationPath nssm-2.24\nCopy-Item .\\nssm-2.24\\nssm-2.24\\win64\\nssm.exe 'C:\\Programs\\nssm.exe'\nRemove-Item nssm-2.24.zip\nRemove-Item nssm-2.24 -Force -Recurse\n$PATH = [Environment]::GetEnvironmentVariable(\"PATH\")\n$PATH += \";C:\\Programs\"\n[Environment]::SetEnvironmentVariable(\"PATH\", $PATH, \"2\")\n\nLogWrite \"SETTING UP WINDOWS SERVICES\"\nSet-Location -Path $VIZ_DIR\n\u0026 .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_windows_services.ps1 $WINDOWS_SERVICE_STARTUP $WINDOWS_SERVICE_STATUS $PIPELINE_USER $PIPELINE_USER_ACCOUNT_PASSWORD\n\nLogWrite \"DONE SETTING UP PIPELINE\"\n\u003c/powershell\u003e\n\u003cpersist\u003efalse\u003c/persist\u003e\n\r\n--MIMEBOUNDARY--\r\n"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "data",
      "type": "template_file",
      "name": "arcgispro_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "6482c2c23ebe6b639d6b7b700ad7e46c98d79c45012c464ff3229e717a72afe4",
            "rendered": "Windows Registry Editor Version 5.00\n\n[HKEY_USERS\\arcgis\\Software\\ESRI\\ArcGISPro\\Licensing]\n\"ARCPROWORKOFFLINE\"=\"FALSE\"\n\"DESKTOP_CONFIG\"=\"TRUE\"\n\"FlexNetService\"=\"False\"\n\"LICENSE_FILE_PATH\"=\"\"\n\"RENEWAL_CHECK\"=\"\"\n\"SEAT_PREFERENCE\"=\"Float\"\n\"SingleUse_Installed\"=\"Professional\"\n\"SOFTWARE_CLASS\"=\"Professional\"\n\"SOFTWARE_TYPE\"=\"CLASSIC\"\n\"TIMEOUTWARNING\"=\"TRUE\"\n\"LICENSE_SERVER_PRO_ON_PREMISE\"=\"none\"\n\"ARCPRO_AUTH_TYPE\"=\"\"\n\"LICENSE_SERVER\"=\"@10.26.150.153\"\n\"SOFTWARE_CLASS_FN\"=\"Professional\"\n\n[HKEY_USERS\\arcgis\\\\Software\\ESRI\\ArcGISPro\\Licensing\\Extensions]\n\"Spatial Analyst Pro\"=dword:00000001\n",
            "template": "Windows Registry Editor Version 5.00\n\n[HKEY_USERS\\${PIPELINE_USER}\\Software\\ESRI\\ArcGISPro\\Licensing]\n\"ARCPROWORKOFFLINE\"=\"FALSE\"\n\"DESKTOP_CONFIG\"=\"TRUE\"\n\"FlexNetService\"=\"False\"\n\"LICENSE_FILE_PATH\"=\"\"\n\"RENEWAL_CHECK\"=\"\"\n\"SEAT_PREFERENCE\"=\"Float\"\n\"SingleUse_Installed\"=\"Professional\"\n\"SOFTWARE_CLASS\"=\"Professional\"\n\"SOFTWARE_TYPE\"=\"CLASSIC\"\n\"TIMEOUTWARNING\"=\"TRUE\"\n\"LICENSE_SERVER_PRO_ON_PREMISE\"=\"none\"\n\"ARCPRO_AUTH_TYPE\"=\"\"\n\"LICENSE_SERVER\"=\"@${LICENSE_SERVER}\"\n\"SOFTWARE_CLASS_FN\"=\"Professional\"\n\n[HKEY_USERS\\${PIPELINE_USER}\\\\Software\\ESRI\\ArcGISPro\\Licensing\\Extensions]\n\"Spatial Analyst Pro\"=dword:00000001\n",
            "vars": {
              "LICENSE_SERVER": "10.26.150.153",
              "PIPELINE_USER": "arcgis"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "PIPELINE_USER",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "data",
      "type": "template_file",
      "name": "fileshare_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "fb49dc08c06519cad5c605068a88b3cce9b11c3622f0383c20dcbf46a08d7ed3",
            "rendered": "\u003cpowershell\u003e\n$PIPELINE_USER = 'arcgis'\n\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nNew-Item -ItemType Directory -Force -Path D:\\viz | Out-Null\nNew-Item -ItemType Directory -Force -Path D:\\viz\\published | Out-Null\n\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n\nNew-SmbShare -Name \"viz\" -Path \"D:\\viz\" -FullAccess $PIPELINE_USER\n\n\u003c/powershell\u003e\n",
            "template": "\u003cpowershell\u003e\n$PIPELINE_USER = '${PIPELINE_USER}'\n\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nNew-Item -ItemType Directory -Force -Path D:\\viz | Out-Null\nNew-Item -ItemType Directory -Force -Path D:\\viz\\published | Out-Null\n\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n\nNew-SmbShare -Name \"viz\" -Path \"D:\\viz\" -FullAccess $PIPELINE_USER\n\n\u003c/powershell\u003e\n",
            "vars": {
              "PIPELINE_USER": "arcgis"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "PIPELINE_USER",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "data",
      "type": "template_file",
      "name": "pipeline_setup",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "41b8848c8b1afac06770af8d11c1187eed7e760608017b256015dd670877b2a7",
            "rendered": "\u003cpowershell\u003e\n$Fileshare = '\\\\10.26.150.11'\n$EGIS_HOST = 'maps-testing.water.noaa.gov'\n$VIZ_ENVIRONMENT = 'testing'\n$FIM_VERSION = '3.0.23.3'\n$SSH_KEY_CONTENT = '-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEA4BR4+o+atEvTxc2k0n+4lhN4jpJSDRg9sUNseJm6fpXUX72ml7M+\nTDCiicpjU4ja7fX/tMY5do3X/ggy9wHFYjYbzAlRD0//gzKkr7Azo9Sl+4rArENNFaoEmT\nge/ZW5q9g9NukOKESZXQETbVWIFFDlVTO9dUj8w23OhE4NMio/zre4EOPgeuC4I+sqfPSp\nkEY14Udq6xh9YNkq9ouT6BeEvl2R1O0asS4WwZNpYLLErxwK7nNyqXZiXlglE89lArovEI\n43+MVphc2SeEdU1Sela9ShsK6ZWqmE9V1HgdSKIQUYRNurnNSyM5mMAM5ByiEkN27Xsczv\npdgGqXkNub3o3cloriiP70nGIefj+XH6sx/pBFOum+zzbPrrb5b0iYUz0c9KgWxypmeesW\nVFnw1Gs+K6wOlkqz1ejDjNNQiBLzkiZtaz4gcLeoBp0lsFJG5IXCvtoHlEC/oiXPoqpcxy\nThDBedX5mikJJvdK/9tOewdaQmm5ZAiWxTEoCnknAAAFmKQ3sJKkN7CSAAAAB3NzaC1yc2\nEAAAGBAOAUePqPmrRL08XNpNJ/uJYTeI6SUg0YPbFDbHiZun6V1F+9ppezPkwwoonKY1OI\n2u31/7TGOXaN1/4IMvcBxWI2G8wJUQ9P/4MypK+wM6PUpfuKwKxDTRWqBJk4Hv2VuavYPT\nbpDihEmV0BE21ViBRQ5VUzvXVI/MNtzoRODTIqP863uBDj4HrguCPrKnz0qZBGNeFHausY\nfWDZKvaLk+gXhL5dkdTtGrEuFsGTaWCyxK8cCu5zcql2Yl5YJRPPZQK6LxCON/jFaYXNkn\nhHVNUnpWvUobCumVqphPVdR4HUiiEFGETbq5zUsjOZjADOQcohJDdu17HM76XYBql5Dbm9\n6N3JaK4oj+9JxiHn4/lx+rMf6QRTrpvs82z662+W9ImFM9HPSoFscqZnnrFlRZ8NRrPius\nDpZKs9Xow4zTUIgS85ImbWs+IHC3qAadJbBSRuSFwr7aB5RAv6Ilz6KqXMck4QwXnV+Zop\nCSb3Sv/bTnsHWkJpuWQIlsUxKAp5JwAAAAMBAAEAAAGAON+5XQ852u0sERaC8RKNzTmf7b\n/hp4Uxk15jl7CdDygEQVCnifVqqHfnqUV/NGKV/rPjdQSi7R5PZiC6nssKSEUnhQAQXOyX\nE7u05Qq58Kk2f8PV52Mlm4wNor4Fz6NC/wThdKBugXX33w042xVMdquZqah6O9yMmyWxtw\n8Adm0WyOcEhvTvswB6fFNh81k9+Gp5nnY8AvOyTvSP3QfMQKpHfPHO49ZSYgoqqHM72dlF\n5pQdiiwvPCfaC8wfjQmkRhkPu5D6IO2aY/zuFX+2sJ0Ha2aQLc/wEyDinu5SlPReh7sD2Z\nxpbidqMhVyRIZZ+oIsAbuCR0rhxHP0a/vTBX6PGHMhi7VxUXtRjudbkL+SSLNe6eOofBv+\nny+Z6IHgh/pv7zYSxWw+2KpK8Bx6FPzEgae+VFW2D9MUSOhdWXLZHtsPK7TMukCpsuuaO9\nAtRlMRvsWMLi5ObVqGstozkjH+7/W1ZRHoxD9p/gCVvY7vWpJmDOlQNGSJkWYts2JRAAAA\nwQCXnexIjVhU/+wCDwQmkzPIdVRHbSwiXINMUo8BJwpYE8ac9T81fqEcGf9Kdsj8Y9IRdh\nD5WydNVaryiGNAmyQV3DdPVMPNw9SfD5yArx8ZXlq4cbqBiQJaL89FfrnPIDmT8D4zF/eX\nS8PbFg9EKKqFwHNpT+pKVxJJdeqSWJBX4ZfhYfy5n7vYLjd1XAOm924o2V2v6SgOhS6qZE\ntAJvM1E3xQjHdFCNRmFTFtw/mbaPo3mIi4tUPWaS5cL0avVd8AAADBAPFkdwLug7OLuTaB\n0Pzwm+HshxF978yS08PJAUeKn9k3+SOCGbWW1AGnnTpJjzPaZAu209Qkge7aVVLA/kawEb\ntJr5jWq1VqSQE+LRShUZv9NxTwUA4aXO/37hLW02Q0ImHTWfK4ZHK93vPz5CjhrFjM5mwc\nztCopRypxg1Frx8lMC+iWfz8EoS5odCusmNOa6abNX1PDxIvxBrAgfhyiPnRpWJ3rcE8sq\nnpv/V4ulwhT9lDt9ZlFji73Qkr7GXB1QAAAMEA7aPPrs871BS7ZZ9C/7KBqeK/a3PpcZqW\nqepObo4FtCO7EMGjiFbdC6pKelF9hj2brQ2Iv4QEZZK0rsnyAnBaMTebsHXdKRxjM+gnWI\nzd5frrcYdrcvfATL8FXV6XKmKW57fipjUQS7Qk37ZfyWCRV2IOvJyFtz9Dw/5e97jBChiW\noMhmfU7CAZYd25oMRftgasQk6Qf6Wsi8fg+sEWi4uFwsCD6Xwbht52kU99V+G4tBjlCZSn\nJSQI64GqSgnBELAAAAIW53Y1xjb3JleS5rcmV3c29uQE5XQ0FMLUwtNDMzOTMzMwE=\n-----END OPENSSH PRIVATE KEY-----\n'\n$LICENSE_REG_CONTENT = 'Windows Registry Editor Version 5.00\n\n[HKEY_USERS\\arcgis\\Software\\ESRI\\ArcGISPro\\Licensing]\n\"ARCPROWORKOFFLINE\"=\"FALSE\"\n\"DESKTOP_CONFIG\"=\"TRUE\"\n\"FlexNetService\"=\"False\"\n\"LICENSE_FILE_PATH\"=\"\"\n\"RENEWAL_CHECK\"=\"\"\n\"SEAT_PREFERENCE\"=\"Float\"\n\"SingleUse_Installed\"=\"Professional\"\n\"SOFTWARE_CLASS\"=\"Professional\"\n\"SOFTWARE_TYPE\"=\"CLASSIC\"\n\"TIMEOUTWARNING\"=\"TRUE\"\n\"LICENSE_SERVER_PRO_ON_PREMISE\"=\"none\"\n\"ARCPRO_AUTH_TYPE\"=\"\"\n\"LICENSE_SERVER\"=\"@10.26.150.153\"\n\"SOFTWARE_CLASS_FN\"=\"Professional\"\n\n[HKEY_USERS\\arcgis\\\\Software\\ESRI\\ArcGISPro\\Licensing\\Extensions]\n\"Spatial Analyst Pro\"=dword:00000001\n'\n$WRDS_HOST = '10.26.150.90'\n$S3_STATIC_DATA_BUCKET = 'hydrovis-ti-deployment-us-east-1'\n$DEPLOY_FILES_PREFIX = 'viz/'\n$NWM_DATA_BUCKET = 'hydrovis-ti-nwm-us-east-1'\n$FIM_DATA_BUCKET = 'hydrovis-ti-deployment-us-east-1'\n$FIM_OUTPUT_BUCKET = 'hydrovis-ti-fim-us-east-1'\n$NWM_MAX_FLOWS_DATA_BUCKET = 'hydrovis-ti-fim-us-east-1'\n$RNR_MAX_FLOWS_DATA_BUCKET = 'hydrovis-ti-rnr-us-east-1'\n$WINDOWS_SERVICE_STATUS = 'start'\n$WINDOWS_SERVICE_STARTUP = 'SERVICE_AUTO_START'\n$PIPELINE_USER = 'arcgis'\n$PIPELINE_USER_ACCOUNT_PASSWORD = 'hardwork123donehere!'\n\n$HYDROVIS_EGIS_USER = \"hydrovis.proc\"\n$HYDROVIS_EGIS_PASS = 'WaterIsFun1@'\n\n$LOGSTASH_IP = '10.26.150.5'\n$VLAB_REPO_PREFIX   = 'ssh://corey.krewson@vlab.noaa.gov:29418'\n$VLAB_HOST   = 'vlab.noaa.gov'\n\nWrite-Host \"Setting up $PIPELINE_USER profile\"\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n# This command will fail but that is on purpose. It will initialize the profile which is what we want\n$securePassword = ConvertTo-SecureString $PIPELINE_USER_ACCOUNT_PASSWORD -AsPlainText -Force\n$credential = New-Object System.Management.Automation.PSCredential $PIPELINE_USER, $securePassword\nStart-Process program.exe -Credential $credential\n\n$Logfile = \"C:\\Users\\$PIPELINE_USER\\Desktop\\pipeline_setup.log\"\n\nfunction LogWrite\n{\nParam ([string]$logstring)\nWrite-Host $logstring\n$currentdate = Get-Date -Format \"MM/dd/yyyy HH:mm K\"\n$logstring =  $currentdate + \": \" +  $logstring\nAdd-content $Logfile -value $logstring\n}\n\nfunction CreateUTF8File\n{\n  Param ([string]$file_content, [string]$file_dir, [string]$file_name)\n\n  Set-Location -Path $file_dir\n  $file_path = $file_dir + \"\\\" + $file_name\n  $file_content | Out-File -Encoding ascii -FilePath $file_path\n  Get-ChildItem $file_name | ForEach-Object {\n    # get the contents and replace line breaks by U+000A\n    $contents = [IO.File]::ReadAllText($_) -replace \"`r`n?\", \"`n\"\n    # create UTF-8 encoding without signature\n    $utf8 = New-Object System.Text.UTF8Encoding $false\n    # write the text back\n    [IO.File]::WriteAllText($_, $contents, $utf8)\n  }\n}\n\nLogWrite \"Setting up file variables\"\n$StaticDir = \"D:\\static\"\n$DynamicDir = \"D:\\dynamic\"\n\n$AUTHORITATIVE_ROOT = \"$StaticDir\\authoritative\"\n$CACHE_ROOT = \"$DynamicDir\\cache\"\n$FLAGS_ROOT = \"s3://$FIM_OUTPUT_BUCKET/published_flags\"\n$PRISTINE_ROOT = \"$StaticDir\\pristine\"\n$PRO_PROJECT_ROOT = \"$StaticDir\\pro_project\"\n$PUBLISHED_ROOT = \"$Fileshare\\viz\\published\"\n$WORKSPACE_ROOT = \"$DynamicDir\\authoritative\"\n$PIPELINE_WORKSPACE = \"D:\\pipeline_workspace\"\n\nLogWrite \"Setting up D drive\"\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nLogWrite \"ADDING SSH Files\"\n$HV_SSH_DIR = \"C:\\Users\\$PIPELINE_USER\\.ssh\"\n$UD_SSH_DIR = \"$HOME\\.ssh\"\n\nLogWrite \"Opening Firewall for ArcgisPro License Connection\"\nNew-NetFirewallRule -DisplayName \"ArcGISPro License Manager Connection\" -Direction \"Outbound\" -Program \"$env:ProgramFiles\\ArcGIS\\Pro\\bin\\ArcGISPro.exe\" -Action \"Allow\"\n\nLogWrite \"ADDING ArcGIS Pro License Registry\"\n$HV_LICENSE = \"C:\\Users\\$PIPELINE_USER\\Documents\\licensed_pro.reg\"\n$LICENSE_REG_CONTENT | Out-File  $HV_LICENSE\n\n$UD_LICENSE_REG_CONTENT = $LICENSE_REG_CONTENT.Replace(\"[HKEY_USERS\\$PIPELINE_USER\\\", \"[HKEY_CURRENT_USER\\\")\n$UD_LICENSE = \"$env:TEMP\\ud_pro_license.reg\"\n$UD_LICENSE_REG_CONTENT | Out-File $UD_LICENSE\n\nGet-Command reg\nreg load \"HKU\\$PIPELINE_USER\" \"C:\\Users\\$PIPELINE_USER\\ntuser.dat\"\nreg import $HV_LICENSE\nreg import $UD_LICENSE\n[gc]::Collect()\nreg unload \"HKU\\$PIPELINE_USER\"\n\nNew-Item -ItemType Directory -Force -Path $HV_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $HV_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e C:\\Users\\$PIPELINE_USER\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\nNew-Item -ItemType Directory -Force -Path $UD_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $UD_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e $HOME\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\nLogWrite \"Setting up file structure of static and dynamic data\"\nNew-Item -ItemType Directory -Force -Path $AUTHORITATIVE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"AUTHORITATIVE_ROOT\", $AUTHORITATIVE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $CACHE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"CACHE_ROOT\", $CACHE_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"FLAGS_ROOT\", $FLAGS_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRISTINE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRISTINE_ROOT\", $PRISTINE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRO_PROJECT_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRO_PROJECT_ROOT\", $PRO_PROJECT_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"PUBLISHED_ROOT\", $PUBLISHED_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $WORKSPACE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"WORKSPACE_ROOT\", $WORKSPACE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PIPELINE_WORKSPACE | Out-Null\n[Environment]::SetEnvironmentVariable(\"PIPELINE_WORKSPACE\", $PIPELINE_WORKSPACE, \"2\")\n\nLogWrite \"Setting up environment variables\"\n[Environment]::SetEnvironmentVariable(\"CACHE_DAYS\", \"3\", \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_HOST\", $EGIS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_USERNAME\", $HYDROVIS_EGIS_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_PASSWORD\", $HYDROVIS_EGIS_PASS, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_VERSION\", $FIM_VERSION, \"2\")\n[Environment]::SetEnvironmentVariable(\"IMAGE_SERVER\", \"image\", \"2\")\n[Environment]::SetEnvironmentVariable(\"PRIMARY_SERVER\", \"server\", \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_ENVIRONMENT\", $VIZ_ENVIRONMENT, \"2\")\n[Environment]::SetEnvironmentVariable(\"WRDS_HOST\", $WRDS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_USER\", $PIPELINE_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_MAX_FLOWS_DATA_BUCKET\", $NWM_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"RNR_MAX_FLOWS_DATA_BUCKET\", $RNR_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_DATA_BUCKET\", $NWM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_DATA_BUCKET\", $FIM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_OUTPUT_BUCKET\", $FIM_OUTPUT_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"LOGSTASH_SOCKET\", \"$LOGSTASH_IP`:5000\", \"2\")\n\nfunction GetRepo\n{\n   Param ([string]$branch, [string]$repo)\n\n   if (Test-Path -Path $repo) {\n       Remove-Item $repo -Recurse\n       Get-ChildItem $repo -Hidden -Recurse | Remove-Item -Force -Recurse\n   }\n   git clone -b $branch $VLAB_REPO_PREFIX/$repo\n\n   if ($LASTEXITCODE -gt 0) { throw \"Error occurred getting \" + $repo }\n}\n\nfunction Retry([Action]$action)\n{\n    $attempts=3\n    $sleepInSeconds=10\n    do\n    {\n        try\n        {\n            $action.Invoke();\n            $message = \"Successfully cloned \" + $repo\n            LogWrite $message\n            break;\n        }\n        catch [Exception]\n        {\n            LogWrite $_.Exception.Message\n        }\n        $attempts--\n        if ($attempts -gt 0) {\n            $message = \"Error: \" + $attempts + \" attempts left for getting \" + $repo\n            LogWrite $message\n            Start-Sleep $sleepInSeconds\n        } else {\n            $message = \"Error: Attempt limit reached while cloning \" + $repo\n            throw $message\n        }\n    } while ($attempts -gt 0)\n}\n\nLogWrite \"Setting up viz pipeline\"\n\nLogWrite \"Creating viz file structure\"\n$VIZ_DIR = \"C:\\Users\\$PIPELINE_USER\\NWC\\viz\"\nNew-Item -ItemType Directory -Force -Path $VIZ_DIR | Out-Null\n\nSet-Location -Path $VIZ_DIR\nLogWrite \"CLONING PIPELINE REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo master owp-viz-proc-pipeline})\n\nLogWrite \"CLONING VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\n$AWS_VIZ_ENVIRONMENT = \"aws-\" + $VIZ_ENVIRONMENT\nRetry({GetRepo $AWS_VIZ_ENVIRONMENT owp-viz-services})\n\nLogWrite \"CLONING AWS VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo $VIZ_ENVIRONMENT owp-viz-services-aws})\n\nLogWrite \"CREATING FRESH viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" create -y --name viz --clone arcgispro-py3\n\nLogWrite \"ACTIVATING viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\activate.bat\" viz\n\n$window_python_exe = \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\"\n$user_python_exe = \"C:\\Users\\$PIPELINE_USER\\AppData\\Local\\ESRI\\conda\\envs\\viz\\python.exe\"\nif (Test-Path -Path $window_python_exe -PathType Leaf) {\n    $python_exe = $window_python_exe\n} else {\n    $python_exe = $user_python_exe\n}\n\nLogWrite \"INSTALLING PROCESSING PIPELINE REPO\"\n$PIPELINE_REPO = $VIZ_DIR + \"\\owp-viz-proc-pipeline\"\nSet-Location -Path $PIPELINE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"INSTALLING SERVICE REPO\"\n$SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services\"\nSet-Location -Path $SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" install -y -n viz -c esri arcgis\n\nLogWrite \"INSTALLING AWS SERVICE REPO\"\n$AWS_SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services-aws\"\nSet-Location -Path $AWS_SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"--\u003eTRANFERRING AUTHORITATIVE DATA\"\n$s3_authoritative = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"authoritative_data/\"\naws s3 cp $s3_authoritative $AUTHORITATIVE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRISTINE DATA\"\n$s3_pristine = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pristine_data/\"\naws s3 cp $s3_pristine $PRISTINE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRO PROJECT DATA\"\n$s3_pro_projects = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pro_project_data/\"\naws s3 cp $s3_pro_projects $PRO_PROJECT_ROOT --recursive\n\nLogWrite \"CREATING CONNECTION FILES FOR $FIM_DATA_BUCKET\"\nSet-Location -Path $VIZ_DIR\n$env:AUTHORITATIVE_ROOT = $AUTHORITATIVE_ROOT\n$env:FIM_OUTPUT_BUCKET = $FIM_OUTPUT_BUCKET\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_s3_connection_files.py\n\nSet-Location HKCU:\\Software\\ESRI\\ArcGISPro\nRemove-Item -Recurse -Force -Confirm:$false Licensing\n\nLogWrite \"UPDATING PYTHON PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n\nLogWrite \"UPDATING WORKSPACE PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"D:\\\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"D:\\\"\n\nLogWrite \"ADDING $PUBLISHED_ROOT TO $EGIS_HOST\"\nSet-Location -Path $VIZ_DIR\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\update_data_stores.py $EGIS_HOST $PUBLISHED_ROOT $HYDROVIS_EGIS_USER $HYDROVIS_EGIS_PASS\n\nLogWrite \"DELETING PUBLISHED FLAGS IF THEY EXIST\"\n$EXISTING_PUBLISHED_FLAGS = aws s3 ls $FLAGS_ROOT\nif ($EXISTING_PUBLISHED_FLAGS) {\n    LogWrite \"DELETING PUBLISHED FLAGS\"\n    aws s3 rm $FLAGS_ROOT --recursive\n}\n\nLogWrite \"GETTING NSSM\"\nNew-Item -ItemType Directory -Force -Path 'C:\\Programs' | Out-Null\nSet-Location -Path 'C:\\Programs'\nInvoke-WebRequest https://nssm.cc/release/nssm-2.24.zip -OutFile nssm-2.24.zip\nExpand-Archive -LiteralPath 'nssm-2.24.zip' -DestinationPath nssm-2.24\nCopy-Item .\\nssm-2.24\\nssm-2.24\\win64\\nssm.exe 'C:\\Programs\\nssm.exe'\nRemove-Item nssm-2.24.zip\nRemove-Item nssm-2.24 -Force -Recurse\n$PATH = [Environment]::GetEnvironmentVariable(\"PATH\")\n$PATH += \";C:\\Programs\"\n[Environment]::SetEnvironmentVariable(\"PATH\", $PATH, \"2\")\n\nLogWrite \"SETTING UP WINDOWS SERVICES\"\nSet-Location -Path $VIZ_DIR\n\u0026 .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_windows_services.ps1 $WINDOWS_SERVICE_STARTUP $WINDOWS_SERVICE_STATUS $PIPELINE_USER $PIPELINE_USER_ACCOUNT_PASSWORD\n\nLogWrite \"DONE SETTING UP PIPELINE\"\n\u003c/powershell\u003e\n\u003cpersist\u003efalse\u003c/persist\u003e\n",
            "template": "\u003cpowershell\u003e\n$Fileshare = '${Fileshare_IP}'\n$EGIS_HOST = '${EGIS_HOST}'\n$VIZ_ENVIRONMENT = '${VIZ_ENVIRONMENT}'\n$FIM_VERSION = '${FIM_VERSION}'\n$SSH_KEY_CONTENT = '${SSH_KEY_CONTENT}'\n$LICENSE_REG_CONTENT = '${LICENSE_REG_CONTENT}'\n$WRDS_HOST = '${WRDS_HOST}'\n$S3_STATIC_DATA_BUCKET = '${S3_STATIC_DATA_BUCKET}'\n$DEPLOY_FILES_PREFIX = '${DEPLOY_FILES_PREFIX}'\n$NWM_DATA_BUCKET = '${NWM_DATA_BUCKET}'\n$FIM_DATA_BUCKET = '${FIM_DATA_BUCKET}'\n$FIM_OUTPUT_BUCKET = '${FIM_OUTPUT_BUCKET}'\n$NWM_MAX_FLOWS_DATA_BUCKET = '${NWM_MAX_FLOWS_DATA_BUCKET}'\n$RNR_MAX_FLOWS_DATA_BUCKET = '${RNR_MAX_FLOWS_DATA_BUCKET}'\n$WINDOWS_SERVICE_STATUS = '${WINDOWS_SERVICE_STATUS}'\n$WINDOWS_SERVICE_STARTUP = '${WINDOWS_SERVICE_STARTUP}'\n$PIPELINE_USER = '${PIPELINE_USER}'\n$PIPELINE_USER_ACCOUNT_PASSWORD = '${PIPELINE_USER_ACCOUNT_PASSWORD}'\n\n$HYDROVIS_EGIS_USER = \"hydrovis.proc\"\n$HYDROVIS_EGIS_PASS = '${HYDROVIS_EGIS_PASS}'\n\n$LOGSTASH_IP = '${LOGSTASH_IP}'\n$VLAB_REPO_PREFIX   = '${VLAB_REPO_PREFIX}'\n$VLAB_HOST   = '${VLAB_HOST}'\n\nWrite-Host \"Setting up $PIPELINE_USER profile\"\nAdd-LocalGroupMember -Group \"Administrators\" -Member $PIPELINE_USER\n# This command will fail but that is on purpose. It will initialize the profile which is what we want\n$securePassword = ConvertTo-SecureString $PIPELINE_USER_ACCOUNT_PASSWORD -AsPlainText -Force\n$credential = New-Object System.Management.Automation.PSCredential $PIPELINE_USER, $securePassword\nStart-Process program.exe -Credential $credential\n\n$Logfile = \"C:\\Users\\$PIPELINE_USER\\Desktop\\pipeline_setup.log\"\n\nfunction LogWrite\n{\nParam ([string]$logstring)\nWrite-Host $logstring\n$currentdate = Get-Date -Format \"MM/dd/yyyy HH:mm K\"\n$logstring =  $currentdate + \": \" +  $logstring\nAdd-content $Logfile -value $logstring\n}\n\nfunction CreateUTF8File\n{\n  Param ([string]$file_content, [string]$file_dir, [string]$file_name)\n\n  Set-Location -Path $file_dir\n  $file_path = $file_dir + \"\\\" + $file_name\n  $file_content | Out-File -Encoding ascii -FilePath $file_path\n  Get-ChildItem $file_name | ForEach-Object {\n    # get the contents and replace line breaks by U+000A\n    $contents = [IO.File]::ReadAllText($_) -replace \"`r`n?\", \"`n\"\n    # create UTF-8 encoding without signature\n    $utf8 = New-Object System.Text.UTF8Encoding $false\n    # write the text back\n    [IO.File]::WriteAllText($_, $contents, $utf8)\n  }\n}\n\nLogWrite \"Setting up file variables\"\n$StaticDir = \"D:\\static\"\n$DynamicDir = \"D:\\dynamic\"\n\n$AUTHORITATIVE_ROOT = \"$StaticDir\\authoritative\"\n$CACHE_ROOT = \"$DynamicDir\\cache\"\n$FLAGS_ROOT = \"s3://$FIM_OUTPUT_BUCKET/published_flags\"\n$PRISTINE_ROOT = \"$StaticDir\\pristine\"\n$PRO_PROJECT_ROOT = \"$StaticDir\\pro_project\"\n$PUBLISHED_ROOT = \"$Fileshare\\viz\\published\"\n$WORKSPACE_ROOT = \"$DynamicDir\\authoritative\"\n$PIPELINE_WORKSPACE = \"D:\\pipeline_workspace\"\n\nLogWrite \"Setting up D drive\"\nInitialize-Disk -Number 1 -PartitionStyle MBR\nNew-Partition -DiskNumber 1 -UseMaximumSize -IsActive -DriveLetter D\nFormat-Volume -DriveLetter D -FileSystem NTFS -Confirm:$False\n\nLogWrite \"ADDING SSH Files\"\n$HV_SSH_DIR = \"C:\\Users\\$PIPELINE_USER\\.ssh\"\n$UD_SSH_DIR = \"$HOME\\.ssh\"\n\nLogWrite \"Opening Firewall for ArcgisPro License Connection\"\nNew-NetFirewallRule -DisplayName \"ArcGISPro License Manager Connection\" -Direction \"Outbound\" -Program \"$env:ProgramFiles\\ArcGIS\\Pro\\bin\\ArcGISPro.exe\" -Action \"Allow\"\n\nLogWrite \"ADDING ArcGIS Pro License Registry\"\n$HV_LICENSE = \"C:\\Users\\$PIPELINE_USER\\Documents\\licensed_pro.reg\"\n$LICENSE_REG_CONTENT | Out-File  $HV_LICENSE\n\n$UD_LICENSE_REG_CONTENT = $LICENSE_REG_CONTENT.Replace(\"[HKEY_USERS\\$PIPELINE_USER\\\", \"[HKEY_CURRENT_USER\\\")\n$UD_LICENSE = \"$env:TEMP\\ud_pro_license.reg\"\n$UD_LICENSE_REG_CONTENT | Out-File $UD_LICENSE\n\nGet-Command reg\nreg load \"HKU\\$PIPELINE_USER\" \"C:\\Users\\$PIPELINE_USER\\ntuser.dat\"\nreg import $HV_LICENSE\nreg import $UD_LICENSE\n[gc]::Collect()\nreg unload \"HKU\\$PIPELINE_USER\"\n\nNew-Item -ItemType Directory -Force -Path $HV_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $HV_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e C:\\Users\\$PIPELINE_USER\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\hv_keyscan.bat\"\n\nNew-Item -ItemType Directory -Force -Path $UD_SSH_DIR | Out-Null\nCreateUTF8File $SSH_KEY_CONTENT $UD_SSH_DIR id_rsa\n\"call ssh-keyscan -p 29418 -H $VLAB_HOST \u003e\u003e $HOME\\.ssh\\known_hosts\" | Out-File -Encoding ascii -FilePath \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\u0026 \"C:\\Users\\$PIPELINE_USER\\Desktop\\ud_keyscan.bat\"\n\nLogWrite \"Setting up file structure of static and dynamic data\"\nNew-Item -ItemType Directory -Force -Path $AUTHORITATIVE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"AUTHORITATIVE_ROOT\", $AUTHORITATIVE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $CACHE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"CACHE_ROOT\", $CACHE_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"FLAGS_ROOT\", $FLAGS_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRISTINE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRISTINE_ROOT\", $PRISTINE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PRO_PROJECT_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"PRO_PROJECT_ROOT\", $PRO_PROJECT_ROOT, \"2\")\n\n[Environment]::SetEnvironmentVariable(\"PUBLISHED_ROOT\", $PUBLISHED_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $WORKSPACE_ROOT | Out-Null\n[Environment]::SetEnvironmentVariable(\"WORKSPACE_ROOT\", $WORKSPACE_ROOT, \"2\")\n\nNew-Item -ItemType Directory -Force -Path $PIPELINE_WORKSPACE | Out-Null\n[Environment]::SetEnvironmentVariable(\"PIPELINE_WORKSPACE\", $PIPELINE_WORKSPACE, \"2\")\n\nLogWrite \"Setting up environment variables\"\n[Environment]::SetEnvironmentVariable(\"CACHE_DAYS\", \"3\", \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_HOST\", $EGIS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_USERNAME\", $HYDROVIS_EGIS_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"EGIS_PASSWORD\", $HYDROVIS_EGIS_PASS, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_VERSION\", $FIM_VERSION, \"2\")\n[Environment]::SetEnvironmentVariable(\"IMAGE_SERVER\", \"image\", \"2\")\n[Environment]::SetEnvironmentVariable(\"PRIMARY_SERVER\", \"server\", \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_ENVIRONMENT\", $VIZ_ENVIRONMENT, \"2\")\n[Environment]::SetEnvironmentVariable(\"WRDS_HOST\", $WRDS_HOST, \"2\")\n[Environment]::SetEnvironmentVariable(\"VIZ_USER\", $PIPELINE_USER, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_MAX_FLOWS_DATA_BUCKET\", $NWM_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"RNR_MAX_FLOWS_DATA_BUCKET\", $RNR_MAX_FLOWS_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"NWM_DATA_BUCKET\", $NWM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_DATA_BUCKET\", $FIM_DATA_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"FIM_OUTPUT_BUCKET\", $FIM_OUTPUT_BUCKET, \"2\")\n[Environment]::SetEnvironmentVariable(\"LOGSTASH_SOCKET\", \"$LOGSTASH_IP`:5000\", \"2\")\n\nfunction GetRepo\n{\n   Param ([string]$branch, [string]$repo)\n\n   if (Test-Path -Path $repo) {\n       Remove-Item $repo -Recurse\n       Get-ChildItem $repo -Hidden -Recurse | Remove-Item -Force -Recurse\n   }\n   git clone -b $branch $VLAB_REPO_PREFIX/$repo\n\n   if ($LASTEXITCODE -gt 0) { throw \"Error occurred getting \" + $repo }\n}\n\nfunction Retry([Action]$action)\n{\n    $attempts=3\n    $sleepInSeconds=10\n    do\n    {\n        try\n        {\n            $action.Invoke();\n            $message = \"Successfully cloned \" + $repo\n            LogWrite $message\n            break;\n        }\n        catch [Exception]\n        {\n            LogWrite $_.Exception.Message\n        }\n        $attempts--\n        if ($attempts -gt 0) {\n            $message = \"Error: \" + $attempts + \" attempts left for getting \" + $repo\n            LogWrite $message\n            Start-Sleep $sleepInSeconds\n        } else {\n            $message = \"Error: Attempt limit reached while cloning \" + $repo\n            throw $message\n        }\n    } while ($attempts -gt 0)\n}\n\nLogWrite \"Setting up viz pipeline\"\n\nLogWrite \"Creating viz file structure\"\n$VIZ_DIR = \"C:\\Users\\$PIPELINE_USER\\NWC\\viz\"\nNew-Item -ItemType Directory -Force -Path $VIZ_DIR | Out-Null\n\nSet-Location -Path $VIZ_DIR\nLogWrite \"CLONING PIPELINE REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo master owp-viz-proc-pipeline})\n\nLogWrite \"CLONING VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\n$AWS_VIZ_ENVIRONMENT = \"aws-\" + $VIZ_ENVIRONMENT\nRetry({GetRepo $AWS_VIZ_ENVIRONMENT owp-viz-services})\n\nLogWrite \"CLONING AWS VIZ SERVICES REPOSITORY INTO viz DIRECTORY\"\nRetry({GetRepo $VIZ_ENVIRONMENT owp-viz-services-aws})\n\nLogWrite \"CREATING FRESH viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" create -y --name viz --clone arcgispro-py3\n\nLogWrite \"ACTIVATING viz VIRTUAL ENVIRONMENT\"\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\activate.bat\" viz\n\n$window_python_exe = \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\"\n$user_python_exe = \"C:\\Users\\$PIPELINE_USER\\AppData\\Local\\ESRI\\conda\\envs\\viz\\python.exe\"\nif (Test-Path -Path $window_python_exe -PathType Leaf) {\n    $python_exe = $window_python_exe\n} else {\n    $python_exe = $user_python_exe\n}\n\nLogWrite \"INSTALLING PROCESSING PIPELINE REPO\"\n$PIPELINE_REPO = $VIZ_DIR + \"\\owp-viz-proc-pipeline\"\nSet-Location -Path $PIPELINE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"INSTALLING SERVICE REPO\"\n$SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services\"\nSet-Location -Path $SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\Scripts\\conda.exe\" install -y -n viz -c esri arcgis\n\nLogWrite \"INSTALLING AWS SERVICE REPO\"\n$AWS_SERVICE_REPO = $VIZ_DIR + \"\\owp-viz-services-aws\"\nSet-Location -Path $AWS_SERVICE_REPO\n\u0026 $python_exe setup.py develop\n\nLogWrite \"--\u003eTRANFERRING AUTHORITATIVE DATA\"\n$s3_authoritative = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"authoritative_data/\"\naws s3 cp $s3_authoritative $AUTHORITATIVE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRISTINE DATA\"\n$s3_pristine = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pristine_data/\"\naws s3 cp $s3_pristine $PRISTINE_ROOT --recursive\n\nLogWrite \"--\u003eTRANFERRING PRO PROJECT DATA\"\n$s3_pro_projects = \"s3://\" + $S3_STATIC_DATA_BUCKET + \"/\" + $DEPLOY_FILES_PREFIX + \"pro_project_data/\"\naws s3 cp $s3_pro_projects $PRO_PROJECT_ROOT --recursive\n\nLogWrite \"CREATING CONNECTION FILES FOR $FIM_DATA_BUCKET\"\nSet-Location -Path $VIZ_DIR\n$env:AUTHORITATIVE_ROOT = $AUTHORITATIVE_ROOT\n$env:FIM_OUTPUT_BUCKET = $FIM_OUTPUT_BUCKET\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_s3_connection_files.py\n\nSet-Location HKCU:\\Software\\ESRI\\ArcGISPro\nRemove-Item -Recurse -Force -Confirm:$false Licensing\n\nLogWrite \"UPDATING PYTHON PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\"\n\nLogWrite \"UPDATING WORKSPACE PERMISSIONS FOR $PIPELINE_USER\"\n$ACL = Get-ACL -Path \"D:\\\"\n$AccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"everyone\",\"FullControl\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")\n$ACL.SetAccessRule($AccessRule)\n$ACL | Set-Acl -Path \"D:\\\"\n\nLogWrite \"ADDING $PUBLISHED_ROOT TO $EGIS_HOST\"\nSet-Location -Path $VIZ_DIR\n\u0026 \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\viz\\python.exe\" .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\update_data_stores.py $EGIS_HOST $PUBLISHED_ROOT $HYDROVIS_EGIS_USER $HYDROVIS_EGIS_PASS\n\nLogWrite \"DELETING PUBLISHED FLAGS IF THEY EXIST\"\n$EXISTING_PUBLISHED_FLAGS = aws s3 ls $FLAGS_ROOT\nif ($EXISTING_PUBLISHED_FLAGS) {\n    LogWrite \"DELETING PUBLISHED FLAGS\"\n    aws s3 rm $FLAGS_ROOT --recursive\n}\n\nLogWrite \"GETTING NSSM\"\nNew-Item -ItemType Directory -Force -Path 'C:\\Programs' | Out-Null\nSet-Location -Path 'C:\\Programs'\nInvoke-WebRequest https://nssm.cc/release/nssm-2.24.zip -OutFile nssm-2.24.zip\nExpand-Archive -LiteralPath 'nssm-2.24.zip' -DestinationPath nssm-2.24\nCopy-Item .\\nssm-2.24\\nssm-2.24\\win64\\nssm.exe 'C:\\Programs\\nssm.exe'\nRemove-Item nssm-2.24.zip\nRemove-Item nssm-2.24 -Force -Recurse\n$PATH = [Environment]::GetEnvironmentVariable(\"PATH\")\n$PATH += \";C:\\Programs\"\n[Environment]::SetEnvironmentVariable(\"PATH\", $PATH, \"2\")\n\nLogWrite \"SETTING UP WINDOWS SERVICES\"\nSet-Location -Path $VIZ_DIR\n\u0026 .\\owp-viz-services-aws\\aws_loosa\\ec2\\deploy\\create_windows_services.ps1 $WINDOWS_SERVICE_STARTUP $WINDOWS_SERVICE_STATUS $PIPELINE_USER $PIPELINE_USER_ACCOUNT_PASSWORD\n\nLogWrite \"DONE SETTING UP PIPELINE\"\n\u003c/powershell\u003e\n\u003cpersist\u003efalse\u003c/persist\u003e\n",
            "vars": {
              "DEPLOY_FILES_PREFIX": "viz/",
              "EGIS_HOST": "maps-testing.water.noaa.gov",
              "FIM_DATA_BUCKET": "hydrovis-ti-deployment-us-east-1",
              "FIM_OUTPUT_BUCKET": "hydrovis-ti-fim-us-east-1",
              "FIM_VERSION": "3.0.23.3",
              "Fileshare_IP": "\\\\10.26.150.11",
              "HYDROVIS_EGIS_PASS": "WaterIsFun1@",
              "LICENSE_REG_CONTENT": "Windows Registry Editor Version 5.00\n\n[HKEY_USERS\\arcgis\\Software\\ESRI\\ArcGISPro\\Licensing]\n\"ARCPROWORKOFFLINE\"=\"FALSE\"\n\"DESKTOP_CONFIG\"=\"TRUE\"\n\"FlexNetService\"=\"False\"\n\"LICENSE_FILE_PATH\"=\"\"\n\"RENEWAL_CHECK\"=\"\"\n\"SEAT_PREFERENCE\"=\"Float\"\n\"SingleUse_Installed\"=\"Professional\"\n\"SOFTWARE_CLASS\"=\"Professional\"\n\"SOFTWARE_TYPE\"=\"CLASSIC\"\n\"TIMEOUTWARNING\"=\"TRUE\"\n\"LICENSE_SERVER_PRO_ON_PREMISE\"=\"none\"\n\"ARCPRO_AUTH_TYPE\"=\"\"\n\"LICENSE_SERVER\"=\"@10.26.150.153\"\n\"SOFTWARE_CLASS_FN\"=\"Professional\"\n\n[HKEY_USERS\\arcgis\\\\Software\\ESRI\\ArcGISPro\\Licensing\\Extensions]\n\"Spatial Analyst Pro\"=dword:00000001\n",
              "LOGSTASH_IP": "10.26.150.5",
              "NWM_DATA_BUCKET": "hydrovis-ti-nwm-us-east-1",
              "NWM_MAX_FLOWS_DATA_BUCKET": "hydrovis-ti-fim-us-east-1",
              "PIPELINE_USER": "arcgis",
              "PIPELINE_USER_ACCOUNT_PASSWORD": "hardwork123donehere!",
              "RNR_MAX_FLOWS_DATA_BUCKET": "hydrovis-ti-rnr-us-east-1",
              "S3_STATIC_DATA_BUCKET": "hydrovis-ti-deployment-us-east-1",
              "SSH_KEY_CONTENT": "-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEA4BR4+o+atEvTxc2k0n+4lhN4jpJSDRg9sUNseJm6fpXUX72ml7M+\nTDCiicpjU4ja7fX/tMY5do3X/ggy9wHFYjYbzAlRD0//gzKkr7Azo9Sl+4rArENNFaoEmT\nge/ZW5q9g9NukOKESZXQETbVWIFFDlVTO9dUj8w23OhE4NMio/zre4EOPgeuC4I+sqfPSp\nkEY14Udq6xh9YNkq9ouT6BeEvl2R1O0asS4WwZNpYLLErxwK7nNyqXZiXlglE89lArovEI\n43+MVphc2SeEdU1Sela9ShsK6ZWqmE9V1HgdSKIQUYRNurnNSyM5mMAM5ByiEkN27Xsczv\npdgGqXkNub3o3cloriiP70nGIefj+XH6sx/pBFOum+zzbPrrb5b0iYUz0c9KgWxypmeesW\nVFnw1Gs+K6wOlkqz1ejDjNNQiBLzkiZtaz4gcLeoBp0lsFJG5IXCvtoHlEC/oiXPoqpcxy\nThDBedX5mikJJvdK/9tOewdaQmm5ZAiWxTEoCnknAAAFmKQ3sJKkN7CSAAAAB3NzaC1yc2\nEAAAGBAOAUePqPmrRL08XNpNJ/uJYTeI6SUg0YPbFDbHiZun6V1F+9ppezPkwwoonKY1OI\n2u31/7TGOXaN1/4IMvcBxWI2G8wJUQ9P/4MypK+wM6PUpfuKwKxDTRWqBJk4Hv2VuavYPT\nbpDihEmV0BE21ViBRQ5VUzvXVI/MNtzoRODTIqP863uBDj4HrguCPrKnz0qZBGNeFHausY\nfWDZKvaLk+gXhL5dkdTtGrEuFsGTaWCyxK8cCu5zcql2Yl5YJRPPZQK6LxCON/jFaYXNkn\nhHVNUnpWvUobCumVqphPVdR4HUiiEFGETbq5zUsjOZjADOQcohJDdu17HM76XYBql5Dbm9\n6N3JaK4oj+9JxiHn4/lx+rMf6QRTrpvs82z662+W9ImFM9HPSoFscqZnnrFlRZ8NRrPius\nDpZKs9Xow4zTUIgS85ImbWs+IHC3qAadJbBSRuSFwr7aB5RAv6Ilz6KqXMck4QwXnV+Zop\nCSb3Sv/bTnsHWkJpuWQIlsUxKAp5JwAAAAMBAAEAAAGAON+5XQ852u0sERaC8RKNzTmf7b\n/hp4Uxk15jl7CdDygEQVCnifVqqHfnqUV/NGKV/rPjdQSi7R5PZiC6nssKSEUnhQAQXOyX\nE7u05Qq58Kk2f8PV52Mlm4wNor4Fz6NC/wThdKBugXX33w042xVMdquZqah6O9yMmyWxtw\n8Adm0WyOcEhvTvswB6fFNh81k9+Gp5nnY8AvOyTvSP3QfMQKpHfPHO49ZSYgoqqHM72dlF\n5pQdiiwvPCfaC8wfjQmkRhkPu5D6IO2aY/zuFX+2sJ0Ha2aQLc/wEyDinu5SlPReh7sD2Z\nxpbidqMhVyRIZZ+oIsAbuCR0rhxHP0a/vTBX6PGHMhi7VxUXtRjudbkL+SSLNe6eOofBv+\nny+Z6IHgh/pv7zYSxWw+2KpK8Bx6FPzEgae+VFW2D9MUSOhdWXLZHtsPK7TMukCpsuuaO9\nAtRlMRvsWMLi5ObVqGstozkjH+7/W1ZRHoxD9p/gCVvY7vWpJmDOlQNGSJkWYts2JRAAAA\nwQCXnexIjVhU/+wCDwQmkzPIdVRHbSwiXINMUo8BJwpYE8ac9T81fqEcGf9Kdsj8Y9IRdh\nD5WydNVaryiGNAmyQV3DdPVMPNw9SfD5yArx8ZXlq4cbqBiQJaL89FfrnPIDmT8D4zF/eX\nS8PbFg9EKKqFwHNpT+pKVxJJdeqSWJBX4ZfhYfy5n7vYLjd1XAOm924o2V2v6SgOhS6qZE\ntAJvM1E3xQjHdFCNRmFTFtw/mbaPo3mIi4tUPWaS5cL0avVd8AAADBAPFkdwLug7OLuTaB\n0Pzwm+HshxF978yS08PJAUeKn9k3+SOCGbWW1AGnnTpJjzPaZAu209Qkge7aVVLA/kawEb\ntJr5jWq1VqSQE+LRShUZv9NxTwUA4aXO/37hLW02Q0ImHTWfK4ZHK93vPz5CjhrFjM5mwc\nztCopRypxg1Frx8lMC+iWfz8EoS5odCusmNOa6abNX1PDxIvxBrAgfhyiPnRpWJ3rcE8sq\nnpv/V4ulwhT9lDt9ZlFji73Qkr7GXB1QAAAMEA7aPPrs871BS7ZZ9C/7KBqeK/a3PpcZqW\nqepObo4FtCO7EMGjiFbdC6pKelF9hj2brQ2Iv4QEZZK0rsnyAnBaMTebsHXdKRxjM+gnWI\nzd5frrcYdrcvfATL8FXV6XKmKW57fipjUQS7Qk37ZfyWCRV2IOvJyFtz9Dw/5e97jBChiW\noMhmfU7CAZYd25oMRftgasQk6Qf6Wsi8fg+sEWi4uFwsCD6Xwbht52kU99V+G4tBjlCZSn\nJSQI64GqSgnBELAAAAIW53Y1xjb3JleS5rcmV3c29uQE5XQ0FMLUwtNDMzOTMzMwE=\n-----END OPENSSH PRIVATE KEY-----\n",
              "VIZ_ENVIRONMENT": "testing",
              "VLAB_HOST": "vlab.noaa.gov",
              "VLAB_REPO_PREFIX": "ssh://corey.krewson@vlab.noaa.gov:29418",
              "WINDOWS_SERVICE_STARTUP": "SERVICE_AUTO_START",
              "WINDOWS_SERVICE_STATUS": "start",
              "WRDS_HOST": "10.26.150.90"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "PIPELINE_USER",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "PIPELINE_USER_ACCOUNT_PASSWORD",
                  "type": "string"
                }
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "viz_fileshare",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0b266e75d54048c9f",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-027237a32e2f56de1",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 2,
            "credit_specification": [],
            "disable_api_termination": false,
            "ebs_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "xvdf",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
                "snapshot_id": "",
                "tags": {
                  "Name": "hv-ti-viz-fs-drive"
                },
                "throughput": 0,
                "volume_id": "vol-021f1eaa67018574e",
                "volume_size": 1000,
                "volume_type": "gp2"
              }
            ],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "HydrovisESRISSMDeploy",
            "id": "i-027237a32e2f56de1",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "m5.large",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "hv-ti-ec2-key-pair",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0b89b97251b7e315a",
            "private_dns": "ip-10-26-150-11.ec2.internal",
            "private_ip": "10.26.150.11",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 450,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0862f50ff93ccd6a2",
                "volume_size": 150,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0bce7b6e5f96548cf",
            "tags": {
              "Name": "hv-ti-viz-fileshare",
              "OS": "Windows",
              "Patch Group": "ESRI Group 1"
            },
            "tags_all": {
              "Name": "hv-ti-viz-fileshare",
              "OS": "Windows",
              "Patch Group": "ESRI Group 1",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "7e49052bc0b2fd70061fe4dd52e9df41635a1548",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-042d66db0eac63f5b",
              "sg-0874e1b42d1981b59"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.viz_ec2.data.template_file.fileshare_setup",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_instance_profile.HydrovisESRISSMDeploy",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.viz_ec2.data.aws_ami.windows",
            "module.viz_ec2.data.template_cloudinit_config.fileshare_setup",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.viz_ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "viz_pipeline",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0b266e75d54048c9f",
            "arn": "arn:aws:ec2:us-east-1:526904826677:instance/i-0a95b4d2d5994de80",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 2,
            "cpu_threads_per_core": 2,
            "credit_specification": [],
            "disable_api_termination": false,
            "ebs_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "xvdf",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
                "snapshot_id": "",
                "tags": {
                  "Name": "hv-ti-viz-prc-drive"
                },
                "throughput": 0,
                "volume_id": "vol-0e13edcaa309ce825",
                "volume_size": 1000,
                "volume_type": "gp2"
              }
            ],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "HydrovisESRISSMDeploy",
            "id": "i-0a95b4d2d5994de80",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "m5.xlarge",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "hv-ti-ec2-key-pair",
            "launch_template": [],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0430535b7c483ea86",
            "private_dns": "ip-10-26-150-14.ec2.internal",
            "private_ip": "10.26.150.14",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 450,
                "kms_key_id": "arn:aws:kms:us-east-1:526904826677:key/9b69fe62-4a69-4692-a9c0-5a977c0dc104",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0e1aa19dfe62075c6",
                "volume_size": 150,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0bce7b6e5f96548cf",
            "tags": {
              "Name": "hv-ti-viz-prc-1",
              "OS": "Windows"
            },
            "tags_all": {
              "Name": "hv-ti-viz-prc-1",
              "OS": "Windows",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "b53c5e0240fa679a8b81727feef015a8d4a9e73a",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-042d66db0eac63f5b",
              "sg-0874e1b42d1981b59"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.data-services.data.cloudinit_config.startup",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.vpc.aws_subnet.hydrovis-sn-prv-web1a",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.data-services.data.template_file.location_env",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.monitoring.data.aws_ami.linux",
            "module.rds-ingest.aws_db_instance.ingest",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.security-groups.aws_security_group.es-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.egis_license_manager.data.template_cloudinit_config.licensemanager",
            "module.egis_license_manager.data.template_file.licensemanager",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_route_table.private",
            "module.viz_ec2.aws_instance.viz_fileshare",
            "module.data-services.data.aws_ami.linux",
            "module.data-services.data.template_file.docker_compose_forecast_2_0",
            "module.data-services.data.template_file.docker_compose_infrastructure",
            "module.monitoring.data.cloudinit_config.startup",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-nat-sg",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.data-services.data.template_file.docker_compose_location",
            "module.iam-roles.aws_iam_instance_profile.HydrovisSSMInstanceProfileRole",
            "module.monitoring.aws_iam_service_linked_role.es",
            "module.monitoring.data.template_file.parser_templates",
            "module.viz_ec2.data.aws_ami.windows",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.monitoring.data.template_file.startup",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_vpc.main",
            "module.viz_ec2.data.template_file.pipeline_setup",
            "module.data-services.aws_instance.data_services",
            "module.data-services.data.template_file.docker_compose_forecast_1_1",
            "module.egis_license_manager.aws_instance.license_manager",
            "module.rds-ingest.aws_db_subnet_group.ingest",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_ec2.data.template_file.arcgispro_setup",
            "module.egis_license_manager.data.aws_ami.windows",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.viz_ec2.data.template_cloudinit_config.fileshare_setup",
            "module.viz_ec2.data.template_file.fileshare_setup",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_instance_profile.HydrovisESRISSMDeploy",
            "module.monitoring.aws_elasticsearch_domain.es",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.data-services.data.template_file.forecast_2_0_env",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.monitoring.aws_cloudwatch_log_group.es_loggroup",
            "module.data-services.data.template_file.forecast_1_1_env",
            "module.data-services.data.template_file.startup",
            "module.monitoring.aws_instance.logstash",
            "module.viz_ec2.data.template_cloudinit_config.pipeline_setup"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "526904826677",
            "arn": "arn:aws:iam::526904826677:user/nick.chadwick@noaa.gov",
            "id": "526904826677",
            "user_id": "AIDAXVLPZTM2356AQ2PXL"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "data",
      "type": "aws_db_instance",
      "name": "egis_rds",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": "hv-ti-egis-rds-pg-egdb.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
            "allocated_storage": 500,
            "auto_minor_version_upgrade": true,
            "availability_zone": "us-east-1a",
            "backup_retention_period": 30,
            "ca_cert_identifier": "rds-ca-2019",
            "db_cluster_identifier": "",
            "db_instance_arn": "arn:aws:rds:us-east-1:526904826677:db:hv-ti-egis-rds-pg-egdb",
            "db_instance_class": "db.r5.xlarge",
            "db_instance_identifier": "hv-ti-egis-rds-pg-egdb",
            "db_instance_port": 0,
            "db_name": "egdb",
            "db_parameter_groups": [
              "default.postgres12"
            ],
            "db_security_groups": [],
            "db_subnet_group": "hv-ti-egis-rds-gdb-subnetgroup",
            "enabled_cloudwatch_logs_exports": [],
            "endpoint": "hv-ti-egis-rds-pg-egdb.c4vzypepnkx3.us-east-1.rds.amazonaws.com:5432",
            "engine": "postgres",
            "engine_version": "12.7",
            "hosted_zone_id": "Z2R2ITUGPM61AM",
            "id": "hv-ti-egis-rds-pg-egdb",
            "iops": 0,
            "kms_key_id": "",
            "license_model": "postgresql-license",
            "master_username": "master",
            "monitoring_interval": 0,
            "monitoring_role_arn": "",
            "multi_az": false,
            "option_group_memberships": [
              "default:postgres-12"
            ],
            "port": 5432,
            "preferred_backup_window": "09:00-10:00",
            "preferred_maintenance_window": "sat:07:00-sat:07:30",
            "publicly_accessible": false,
            "replicate_source_db": "",
            "resource_id": "db-7GOQ44QL7JMMOZWHS6AXFYGPWI",
            "storage_encrypted": false,
            "storage_type": "gp2",
            "tags": {
              "Name": "hv-ti-egis-RDS"
            },
            "timezone": "",
            "vpc_security_groups": [
              "sg-018c1e370470f6543"
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "viz_db_ingest",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Lambda function to manage the loading of datasets into the Viz Processing database. Requires db_ingest_worker to delegate files to.",
            "environment": [
              {
                "variables": {
                  "DB_DATABASE": "vizprocessing",
                  "DB_HOST": "hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
                  "DB_PASSWORD": "QLQW31ZxL0CuE78Rm1lvjYTWg",
                  "DB_USERNAME": "viz_proc_admin_rw_user",
                  "MAX_WORKERS": "500",
                  "MRF_TIMESTEP": "3",
                  "WORKER_LAMBDA_NAME": "viz_db_ingest_worker_ti"
                }
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "viz_db_ingest_ti",
            "handler": "lambda_function.lambda_handler",
            "id": "viz_db_ingest_ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T20:48:24.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:psycopg2_sqlalchemy_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7"
            ],
            "memory_size": 256,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "runtime": "python3.7",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "viz/lambda_functions/viz_db_ingest.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "6rlTf+PVpzVgtichCE2SJj7ZMh9ejglvlxydkUxSDxE=",
            "source_code_size": 3452,
            "tags": {
              "Name": "viz_db_ingest_ti"
            },
            "tags_all": {
              "Name": "viz_db_ingest_ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": [
              {
                "security_group_ids": [
                  "sg-042d66db0eac63f5b",
                  "sg-0890e0d212253e91c"
                ],
                "subnet_ids": [
                  "subnet-0712c2c2742111aa1",
                  "subnet-0d1ea9ca66f139cfc"
                ],
                "vpc_id": "vpc-07a4518f4ecda4131"
              }
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DB_PASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DB_USERNAME",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "viz_db_ingest_worker",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_worker_ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Worker function to load individual files into the Viz Processing database.",
            "environment": [
              {
                "variables": {
                  "DB_DATABASE": "vizprocessing",
                  "DB_HOST": "hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
                  "DB_PASSWORD": "QLQW31ZxL0CuE78Rm1lvjYTWg",
                  "DB_USERNAME": "viz_proc_admin_rw_user"
                }
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "viz_db_ingest_worker_ti",
            "handler": "lambda_function.lambda_handler",
            "id": "viz_db_ingest_worker_ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_worker_ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T21:03:23.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:xarray_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:psycopg2_sqlalchemy_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7"
            ],
            "memory_size": 1280,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_worker_ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "runtime": "python3.7",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "viz/lambda_functions/viz_db_ingest_worker.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "zCu7exzSWp7jO06gyytYwtBFgMmPbW4gnKBYdHeh1MQ=",
            "source_code_size": 1269,
            "tags": {
              "Name": "viz_db_ingest_worker_ti"
            },
            "tags_all": {
              "Name": "viz_db_ingest_worker_ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": [
              {
                "security_group_ids": [
                  "sg-042d66db0eac63f5b",
                  "sg-0890e0d212253e91c"
                ],
                "subnet_ids": [
                  "subnet-0712c2c2742111aa1",
                  "subnet-0d1ea9ca66f139cfc"
                ],
                "vpc_id": "vpc-07a4518f4ecda4131"
              }
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DB_PASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DB_USERNAME",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.vpc.aws_route_table.private",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "viz_db_postprocess",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_postprocess_ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Lambda function to run viz postprocessing on already-ingested data sources, copy publish tables to egis rds, and publish services.",
            "environment": [
              {
                "variables": {
                  "DB_DATABASE": "vizprocessing",
                  "DB_HOST": "hydrovis-ti-viz-processing.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
                  "DB_PASSWORD": "QLQW31ZxL0CuE78Rm1lvjYTWg",
                  "DB_USERNAME": "viz_proc_admin_rw_user",
                  "EGIS_DB_HOST": "hv-ti-egis-rds-pg-egdb.c4vzypepnkx3.us-east-1.rds.amazonaws.com",
                  "EGIS_DB_PASSWORD": "hardwork123donehere",
                  "EGIS_DB_SECRET_NAME": "",
                  "EGIS_DB_USERNAME": "hydrovis",
                  "EGIS_PASSWORD": "WaterIsFun1@",
                  "GIS_HOST": "https://maps-testing.water.noaa.gov/portal",
                  "GIS_SECRET_NAME": "",
                  "GIS_USERNAME": "hydrovis.proc",
                  "RDS_SECRET_NAME": "",
                  "S3_BUCKET": "hydrovis-ti-deployment-us-east-1",
                  "SD_S3_PATH": "viz/db_pipeline/pro_project_data/sd_files/",
                  "SERVICE_TAG": "_beta"
                }
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "viz_db_postprocess_ti",
            "handler": "lambda_function.lambda_handler",
            "id": "viz_db_postprocess_ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:viz_db_postprocess_ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T22:25:10.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:arcgis_python_api_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:psycopg2_sqlalchemy_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:xarray_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7"
            ],
            "memory_size": 1024,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_postprocess_ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "runtime": "python3.7",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "viz/lambda_functions/viz_db_postprocess.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "8BIToMxYdTAsH6eousID9erdjUGiZbeIa22F5ooM5q8=",
            "source_code_size": 17609,
            "tags": {
              "Name": "viz_db_postprocess_ti"
            },
            "tags_all": {
              "Name": "viz_db_postprocess_ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": [
              {
                "security_group_ids": [
                  "sg-042d66db0eac63f5b",
                  "sg-0890e0d212253e91c"
                ],
                "subnet_ids": [
                  "subnet-0712c2c2742111aa1",
                  "subnet-0d1ea9ca66f139cfc"
                ],
                "vpc_id": "vpc-07a4518f4ecda4131"
              }
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DB_PASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "DB_USERNAME",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "EGIS_DB_PASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "environment"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "EGIS_DB_USERNAME",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_route_table.private",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.secrets-manager.module.secret.random_password.password",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "viz_huc_inundation_processing",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_huc_inundation_processing_ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Lambda function to calcuate FIM depths for each HUC",
            "environment": [
              {
                "variables": {
                  "EMPTY_RASTER_BUCKET": "hydrovis-ti-deployment-us-east-1",
                  "EMPTY_RASTER_MRF_PREFIX": "empty_rasters/mrf",
                  "FR_FIM_BUCKET": "hydrovis-ti-deployment-us-east-1",
                  "FR_FIM_PREFIX": "fim_3_0_23_3_fr_c",
                  "MS_FIM_BUCKET": "hydrovis-ti-deployment-us-east-1",
                  "MS_FIM_PREFIX": "fim_3_0_23_3_ms_c",
                  "PROCESSED_OUTPUT_BUCKET": "hydrovis-ti-fim-us-east-1",
                  "PROCESSED_OUTPUT_PREFIX": "processing_outputs",
                  "viz_optimize_raster_function": "arn:aws:lambda:us-east-1:526904826677:function:viz_optimize_rasters_ti"
                }
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "viz_huc_inundation_processing_ti",
            "handler": "lambda_function.lambda_handler",
            "id": "viz_huc_inundation_processing_ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:viz_huc_inundation_processing_ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T20:45:31.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:rasterio_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:pandas_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7"
            ],
            "memory_size": 3072,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_huc_inundation_processing_ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "runtime": "python3.6",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "viz/lambda_functions/viz_huc_inundation_processing.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "uEfoq3hNj0T6z0xsybFzvliGK1GOvRDwRTHOE1o7UrA=",
            "source_code_size": 8468,
            "tags": {
              "Name": "viz_huc_inundation_processing_ti"
            },
            "tags_all": {
              "Name": "viz_huc_inundation_processing_ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "viz_inundation_parent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Lambda function to process NWM data and kick off HUC inundation lambdas for each HUC with streams above bankfull threshold",
            "environment": [
              {
                "variables": {
                  "EMPTY_RASTER_BUCKET": "hydrovis-ti-deployment-us-east-1",
                  "EMPTY_RASTER_MRF_PREFIX": "empty_rasters/mrf",
                  "FIM_DATA_BUCKET": "hydrovis-ti-deployment-us-east-1",
                  "FIM_VERSION": "3.0.23.3",
                  "NWM_DATA_BUCKET": "hydrovis-ti-nwm-us-east-1",
                  "PROCESSED_OUTPUT_BUCKET": "hydrovis-ti-fim-us-east-1",
                  "PROCESSED_OUTPUT_PREFIX": "processing_outputs",
                  "RECURRENCE_BANKFULL": "1_5_year_recurrence_flow",
                  "RECURRENCE_FILENAME": "viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v20_recurrence_flows_slim.nc",
                  "RECURRENCE_HAWAII_BANKFULL": "2_0_year_recurrence_flow",
                  "RECURRENCE_HAWAII_FILENAME": "viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v20_recurrence_flows_hawaii.nc",
                  "RECURRENCE_PRVI_BANKFULL": "2_0_year_recurrence_flow",
                  "RECURRENCE_PRVI_FILENAME": "viz/authoritative_data/derived_data/nwm_v21_recurrence_flows/nwm_v21_recurrence_flows_prvi.nc",
                  "VIZ_AUTHORITATIVE_BUCKET": "hydrovis-ti-deployment-us-east-1",
                  "max_flows_function": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
                  "viz_huc_inundation_function": "arn:aws:lambda:us-east-1:526904826677:function:viz_huc_inundation_processing_ti"
                }
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "viz_inundation_parent_ti",
            "handler": "lambda_function.lambda_handler",
            "id": "viz_inundation_parent_ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T20:45:47.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:multiprocessing_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:xarray_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7"
            ],
            "memory_size": 1024,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "runtime": "python3.7",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "viz/lambda_functions/viz_inundation_parent.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "2ORzqw1X6R9B/CBbHZvcXpH5QxrO/gPqtHANcihaznA=",
            "source_code_size": 4341,
            "tags": {
              "Name": "viz_inundation_parent_ti"
            },
            "tags_all": {
              "Name": "viz_inundation_parent_ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "viz_max_flows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Lambda function to create max streamflow files for NWM data",
            "environment": [
              {
                "variables": {
                  "CACHE_DAYS": "1",
                  "MAX_FLOWS_BUCKET": "hydrovis-ti-fim-us-east-1"
                }
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "viz_max_flows_ti",
            "handler": "lambda_function.lambda_handler",
            "id": "viz_max_flows_ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T20:45:18.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:xarray_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7"
            ],
            "memory_size": 512,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "runtime": "python3.7",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "viz/lambda_functions/viz_max_flows.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "kYFK5HDPeDAH6JM9V9E7XHFrR+dzEKc9NPrrN/Kok9c=",
            "source_code_size": 3074,
            "tags": {
              "Name": "viz_max_flows_ti"
            },
            "tags_all": {
              "Name": "viz_max_flows_ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "viz_optimize_rasters",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_optimize_rasters_ti",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Lambda function to optimize tifs to mrfs",
            "environment": [],
            "file_system_config": [],
            "filename": null,
            "function_name": "viz_optimize_rasters_ti",
            "handler": "lambda_function.lambda_handler",
            "id": "viz_optimize_rasters_ti",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:526904826677:function:viz_optimize_rasters_ti/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-01-19T20:45:18.000+0000",
            "layers": [
              "arn:aws:lambda:us-east-1:526904826677:layer:mrf_rasterio_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:es_logging_ti:1",
              "arn:aws:lambda:us-east-1:526904826677:layer:viz_lambda_shared_funcs_ti:7"
            ],
            "memory_size": 1024,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:526904826677:function:viz_optimize_rasters_ti:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::526904826677:role/hydrovis-viz-proc-pipeline-lambda",
            "runtime": "python3.6",
            "s3_bucket": "hydrovis-ti-deployment-us-east-1",
            "s3_key": "viz/lambda_functions/viz_optimize_rasters.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "source_code_hash": "EM4dVlGfCYxOjOPp69ReMpQT4jh7xZDi3rxTvpiYxj8=",
            "source_code_size": 66713,
            "tags": {
              "Name": "viz_optimize_rasters_ti"
            },
            "tags_all": {
              "Name": "viz_optimize_rasters_ti",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "viz_db_ingest_destinations",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [
              {
                "on_failure": [],
                "on_success": [
                  {
                    "destination": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess"
                  }
                ]
              }
            ],
            "function_name": "viz_db_ingest_ti",
            "id": "viz_db_ingest_ti",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 0,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_function_event_invoke_config",
      "name": "viz_db_ingest_worker_destinations",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_config": [],
            "function_name": "viz_db_ingest_worker_ti",
            "id": "viz_db_ingest_worker_ti",
            "maximum_event_age_in_seconds": 0,
            "maximum_retry_attempts": 0,
            "qualifier": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.secrets-manager.module.secret.random_password.password",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "inundation_parent_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_inundation_parent_ti",
            "id": "terraform-20211220203817986900000015",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana",
            "statement_id": "terraform-20211220203817986900000015",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.xarray"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_hi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_inundation_parent_ti",
            "id": "terraform-20211220203817994900000017",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi",
            "statement_id": "terraform-20211220203817994900000017",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.sns.aws_sns_topic.sns_topics",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_prvi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_inundation_parent_ti",
            "id": "terraform-20211220203817987400000016",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi",
            "statement_id": "terraform-20211220203817987400000016",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows"
          ]
        },
        {
          "index_key": "nwm_max_flows",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_inundation_parent_ti",
            "id": "terraform-20211220203819027400000019",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows",
            "statement_id": "terraform-20211220203819027400000019",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent"
          ]
        },
        {
          "index_key": "rnr_max_flows",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_inundation_parent_ti",
            "id": "terraform-20211220203817996700000018",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows",
            "statement_id": "terraform-20211220203817996700000018",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "max_flows_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_max_flows_ti",
            "id": "terraform-20211220203753427000000010",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana",
            "statement_id": "terraform-20211220203753427000000010",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_10day",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_max_flows_ti",
            "id": "terraform-2021122020375340660000000e",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day",
            "statement_id": "terraform-2021122020375340660000000e",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_3day",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_max_flows_ti",
            "id": "terraform-20211220203754741200000013",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day",
            "statement_id": "terraform-20211220203754741200000013",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_5day",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_max_flows_ti",
            "id": "terraform-20211220203754745300000014",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day",
            "statement_id": "terraform-20211220203754745300000014",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_srf",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_max_flows_ti",
            "id": "terraform-20211220203754729300000012",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf",
            "statement_id": "terraform-20211220203754729300000012",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_hi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_max_flows_ti",
            "id": "terraform-20211220203753798600000011",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi",
            "statement_id": "terraform-20211220203753798600000011",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_prvi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_max_flows_ti",
            "id": "terraform-2021122020375342670000000f",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi",
            "statement_id": "terraform-2021122020375342670000000f",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "viz_db_ingest_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202627725800000004",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana",
            "statement_id": "terraform-20220119202627725800000004",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_hi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202627713000000002",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi",
            "statement_id": "terraform-20220119202627713000000002",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_prvi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202627759400000007",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi",
            "statement_id": "terraform-20220119202627759400000007",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.kms.module.key.aws_kms_alias.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_10day",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202629528500000009",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day",
            "statement_id": "terraform-20220119202629528500000009",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_route_table.private",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest"
          ]
        },
        {
          "index_key": "nwm_ingest_srf",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202627723100000003",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf",
            "statement_id": "terraform-20220119202627723100000003",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_hi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202628896000000008",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi",
            "statement_id": "terraform-20220119202628896000000008",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_prvi",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202627726200000005",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi",
            "statement_id": "terraform-20220119202627726200000005",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.sns.aws_sns_topic.sns_topics",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis"
          ]
        },
        {
          "index_key": "rnr_max_flows",
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_ingest_ti",
            "id": "terraform-20220119202627733000000006",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows",
            "statement_id": "terraform-20220119202627733000000006",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.sns.aws_sns_topic.sns_topics",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_route_table.private"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "viz_db_postprocess_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "viz_db_postprocess_ti",
            "id": "terraform-20220119202552844800000001",
            "principal": "sns.amazonaws.com",
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess",
            "statement_id": "terraform-20220119202552844800000001",
            "statement_id_prefix": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_sns_topic_subscription",
      "name": "inundation_parent_subscriptions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana:5aa52080-fb5a-459a-8e19-778ec93013f3",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana:5aa52080-fb5a-459a-8e19-778ec93013f3",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.aws_sns_topic.sns_topics"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_hi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi:93634291-0f7b-478c-a5aa-e025fb6d96d8",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi:93634291-0f7b-478c-a5aa-e025fb6d96d8",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_prvi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi:5c3c0002-d2ea-4b72-9eae-f15f8c165358",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi:5c3c0002-d2ea-4b72-9eae-f15f8c165358",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role"
          ]
        },
        {
          "index_key": "nwm_max_flows",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows:92ee6499-6db5-4012-86bb-6fe7d5b115dc",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows:92ee6499-6db5-4012-86bb-6fe7d5b115dc",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_max_flows"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing"
          ]
        },
        {
          "index_key": "rnr_max_flows",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows:e341f19a-9a8f-4194-b3c0-77999e75d04b",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_inundation_parent_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows:e341f19a-9a8f-4194-b3c0-77999e75d04b",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.mrf_rasterio",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.multiprocessing",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_huc_inundation_processing",
            "module.viz_lambda_functions.aws_lambda_function.viz_inundation_parent",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.rasterio",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.pandas",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_optimize_rasters"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_sns_topic_subscription",
      "name": "max_flows_subscriptions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana:ceb0a261-3a65-4c5b-8cda-6dc2649e9971",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana:ceb0a261-3a65-4c5b-8cda-6dc2649e9971",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_10day",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day:baf85ca1-a4b8-4302-81fd-ee9ddf149ad1",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day:baf85ca1-a4b8-4302-81fd-ee9ddf149ad1",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.xarray"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_3day",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day:c8dc6767-486e-4e4d-a748-11c1f300aff7",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day:c8dc6767-486e-4e4d-a748-11c1f300aff7",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_3day"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_5day",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day:7f90e582-40a7-4ed4-8c5c-ddcba616c3d0",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day:7f90e582-40a7-4ed4-8c5c-ddcba616c3d0",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_5day"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3"
          ]
        },
        {
          "index_key": "nwm_ingest_srf",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf:a3a8e8ba-031a-46dd-877a-2ec6af78cf42",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf:a3a8e8ba-031a-46dd-877a-2ec6af78cf42",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_hi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi:6b456ad1-b3d7-4efd-9be7-67c1c9193e6e",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi:6b456ad1-b3d7-4efd-9be7-67c1c9193e6e",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_prvi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi:9cf8ab07-c59e-43c9-957e-025fa9643720",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_max_flows_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi:9cf8ab07-c59e-43c9-957e-025fa9643720",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_max_flows"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_sns_topic_subscription",
      "name": "viz_db_ingest_subscriptions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "nwm_ingest_ana",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana:bf0fc1fe-8b6a-4b98-a3aa-9c1debf5e922",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana:bf0fc1fe-8b6a-4b98-a3aa-9c1debf5e922",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.secrets-manager.module.secret.random_password.password",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_hi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi:71af03d7-6554-4f3c-adbf-d968e15f684a",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi:71af03d7-6554-4f3c-adbf-d968e15f684a",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_hi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a"
          ]
        },
        {
          "index_key": "nwm_ingest_ana_prvi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi:baf84258-db00-4d8d-929e-f695a91b3543",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi:baf84258-db00-4d8d-929e-f695a91b3543",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_ana_prvi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.sns.aws_sns_topic.sns_topics"
          ]
        },
        {
          "index_key": "nwm_ingest_mrf_10day",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day:645357d2-b132-400e-a9cb-0552816bf5af",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day:645357d2-b132-400e-a9cb-0552816bf5af",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_mrf_10day"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_vpc.main",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.vpc.aws_route_table.private",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a"
          ]
        },
        {
          "index_key": "nwm_ingest_srf",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf:efc7ec6b-9af4-4b55-8617-77a55cd3b8e5",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf:efc7ec6b-9af4-4b55-8617-77a55cd3b8e5",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_hi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi:7893bb06-8434-493f-b8ab-b48d4a686e9b",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi:7893bb06-8434-493f-b8ab-b48d4a686e9b",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_hi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_route_table.private"
          ]
        },
        {
          "index_key": "nwm_ingest_srf_prvi",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi:8bfd7f38-6994-4a9a-ab63-25a9e4be541a",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi:8bfd7f38-6994-4a9a-ab63-25a9e4be541a",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_nwm_ingest_srf_prvi"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_route_table.private",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.security-groups.aws_security_group.hydrovis-RDS"
          ]
        },
        {
          "index_key": "rnr_max_flows",
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows:1b938b90-0698-4736-9273-d94387da0e3f",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_ingest_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows:1b938b90-0698-4736-9273-d94387da0e3f",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_rnr_max_flows"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.sns.aws_sns_topic.sns_topics",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_ingest_worker",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.kms.module.key.aws_kms_alias.hydrovis",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.random_password.password",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.vpc.aws_vpc.main",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.viz_lambda_functions",
      "mode": "managed",
      "type": "aws_sns_topic_subscription",
      "name": "viz_db_postprocess_subscription",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess:495f2666-8d5e-4b86-b5cb-7bfc6c7b9240",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": true,
            "delivery_policy": "",
            "endpoint": "arn:aws:lambda:us-east-1:526904826677:function:viz_db_postprocess_ti",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "id": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess:495f2666-8d5e-4b86-b5cb-7bfc6c7b9240",
            "owner_id": "526904826677",
            "pending_confirmation": false,
            "protocol": "lambda",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:us-east-1:526904826677:ti_viz_db_postprocess"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.lambda_layers.aws_lambda_layer_version.viz_lambda_shared_funcs",
            "module.rds-viz.aws_db_subnet_group.viz-processing",
            "module.secrets-manager.module.secret.random_password.password",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.iam-roles.aws_iam_role.HydrovisSSMInstanceProfileRole",
            "module.iam-roles.aws_iam_role.hydrovis-viz-proc-pipeline-lambda",
            "module.security-groups.aws_security_group.hydrovis-RDS",
            "module.iam-roles.aws_iam_role.hydrovis-hml-ingest-role",
            "module.lambda_layers.aws_lambda_layer_version.xarray",
            "module.s3-replication.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.s3.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret_version.hydrovis",
            "module.viz_lambda_functions.aws_lambda_function.viz_db_postprocess",
            "module.iam-roles.aws_iam_service_linked_role.autoscaling",
            "module.lambda_layers.aws_lambda_layer_version.es_logging",
            "module.vpc.aws_vpc.main",
            "module.security-groups.aws_security_group.egis-overlord",
            "module.vpc.aws_route_table.private",
            "module.s3-replication.module.bucket.aws_s3_bucket.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.kms.module.key.aws_kms_key.hydrovis",
            "module.rds-viz.aws_db_instance.viz-processing",
            "module.sns.aws_sns_topic.sns_topics",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.iam-roles.aws_iam_role.HydrovisESRISSMDeploy",
            "module.s3.module.bucket.aws_s3_bucket_ownership_controls.hydrovis",
            "module.s3.module.bucket.aws_kms_key.hydrovis-s3",
            "module.s3.module.bucket.aws_s3_bucket.hydrovis",
            "module.viz_lambda_functions.data.aws_db_instance.egis_rds",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.s3-replication.module.bucket.aws_kms_alias.hydrovis-s3",
            "module.s3-replication.module.bucket.aws_kms_key.hydrovis-s3",
            "module.lambda_layers.aws_lambda_layer_version.arcgis_python_api",
            "module.lambda_layers.aws_lambda_layer_version.psycopg2_sqlalchemy",
            "module.s3.module.bucket.aws_s3_bucket_policy.hydrovis",
            "module.secrets-manager.module.secret.aws_secretsmanager_secret.hydrovis",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.iam-roles.aws_iam_role.Hydroviz-RnR-EC2-Profile",
            "module.kms.module.key.aws_kms_alias.hydrovis"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "data",
      "type": "aws_vpn_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "amazon_side_asn": "64512",
            "arn": "arn:aws:ec2:us-east-1:526904826677:vpn-gateway/vgw-09a557dd4e78938dc",
            "attached_vpc_id": "vpc-07a4518f4ecda4131",
            "availability_zone": "",
            "filter": null,
            "id": "vgw-09a557dd4e78938dc",
            "state": "available",
            "tags": {
              "Name": "hydrovis-ti-vgw"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_main_route_table_association",
      "name": "main_private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rtbassoc-02ced06ca1ace2d17",
            "original_route_table_id": "rtb-0a94f33b6b5a18f12",
            "route_table_id": "rtb-06c6856c525311911",
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "hv-pub-nat-gw-a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "",
            "connectivity_type": "private",
            "id": "nat-07d1450b92b112bbb",
            "network_interface_id": "eni-0cd8768ef81f5a717",
            "private_ip": "137.75.95.4",
            "public_ip": "",
            "subnet_id": "subnet-068fba14806315498",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "hv-pub-nat-gw-b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "",
            "connectivity_type": "private",
            "id": "nat-04152aec04ae8c2df",
            "network_interface_id": "eni-0ed4bdc8396679a98",
            "private_ip": "137.75.95.55",
            "public_ip": "",
            "subnet_id": "subnet-004216d326b62be9c",
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-pub-1b",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_network_acl",
      "name": "hydrovis-acl-default",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:network-acl/acl-0660987f4432b4e87",
            "egress": [
              {
                "action": "allow",
                "cidr_block": "0.0.0.0/0",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 100,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "135.148.143.217/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 14,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "159.223.5.30/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 15,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "185.224.139.151/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 10,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "195.54.160.149/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 13,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "31.131.16.127/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 12,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "45.83.193.150/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 11,
                "to_port": 0
              }
            ],
            "id": "acl-0660987f4432b4e87",
            "ingress": [
              {
                "action": "allow",
                "cidr_block": "0.0.0.0/0",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 100,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "135.148.143.217/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 14,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "159.223.5.30/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 15,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "185.224.139.151/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 10,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "195.54.160.149/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 13,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "31.131.16.127/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 12,
                "to_port": 0
              },
              {
                "action": "deny",
                "cidr_block": "45.83.193.150/32",
                "from_port": 0,
                "icmp_code": 0,
                "icmp_type": 0,
                "ipv6_cidr_block": "",
                "protocol": "-1",
                "rule_no": 11,
                "to_port": 0
              }
            ],
            "owner_id": "526904826677",
            "subnet_ids": [
              "subnet-004216d326b62be9c",
              "subnet-01225cab59721c507",
              "subnet-068fba14806315498",
              "subnet-0712c2c2742111aa1",
              "subnet-07217d8e421d392d7",
              "subnet-0bce7b6e5f96548cf",
              "subnet-0d1ea9ca66f139cfc",
              "subnet-0d87b732011535520"
            ],
            "tags": {
              "Name": "hydrovis-ti-acl-default"
            },
            "tags_all": {
              "Name": "hydrovis-ti-acl-default",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-app1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1a",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-web1a",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1b",
            "module.vpc.aws_subnet.hydrovis-sn-prv-web1b",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:route-table/rtb-06c6856c525311911",
            "id": "rtb-06c6856c525311911",
            "owner_id": "526904826677",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "nat-07d1450b92b112bbb",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:route-table/rtb-062876adaca93bf91",
            "id": "rtb-062876adaca93bf91",
            "owner_id": "526904826677",
            "propagating_vgws": [
              "vgw-09a557dd4e78938dc"
            ],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "vgw-09a557dd4e78938dc",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.data.aws_vpn_gateway.main",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "hydrovis-sn-pub-1a_public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0fd801b66ab417465",
            "route_table_id": "rtb-062876adaca93bf91",
            "subnet_id": "subnet-068fba14806315498"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.vpc.data.aws_vpn_gateway.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-prv-app1a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-0bce7b6e5f96548cf",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az1",
            "cidr_block": "10.26.150.0/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-0bce7b6e5f96548cf",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-prv-ti-app1a"
            },
            "tags_all": {
              "Name": "hydrovis-sn-prv-ti-app1a",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-prv-app1b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-01225cab59721c507",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1b",
            "availability_zone_id": "use1-az2",
            "cidr_block": "10.26.150.32/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-01225cab59721c507",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-prv-ti-app1b"
            },
            "tags_all": {
              "Name": "hydrovis-sn-prv-ti-app1b",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-prv-data1a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-0712c2c2742111aa1",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az1",
            "cidr_block": "10.26.150.64/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-0712c2c2742111aa1",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-prv-ti-data1a"
            },
            "tags_all": {
              "Name": "hydrovis-sn-prv-ti-data1a",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-prv-data1b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-0d1ea9ca66f139cfc",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1b",
            "availability_zone_id": "use1-az2",
            "cidr_block": "10.26.150.160/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-0d1ea9ca66f139cfc",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-prv-ti-data1b"
            },
            "tags_all": {
              "Name": "hydrovis-sn-prv-ti-data1b",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-prv-web1a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-0d87b732011535520",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az1",
            "cidr_block": "10.26.150.128/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-0d87b732011535520",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-prv-ti-web1a"
            },
            "tags_all": {
              "Name": "hydrovis-sn-prv-ti-web1a",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-prv-web1b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-07217d8e421d392d7",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1b",
            "availability_zone_id": "use1-az2",
            "cidr_block": "10.26.150.96/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-07217d8e421d392d7",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-prv-ti-web1b"
            },
            "tags_all": {
              "Name": "hydrovis-sn-prv-ti-web1b",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.vpc.aws_main_route_table_association.main_private"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-pub-1a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-068fba14806315498",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az1",
            "cidr_block": "137.75.95.0/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-068fba14806315498",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-pub-ti-1a"
            },
            "tags_all": {
              "Name": "hydrovis-sn-pub-ti-1a",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "hydrovis-sn-pub-1b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:subnet/subnet-004216d326b62be9c",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1b",
            "availability_zone_id": "use1-az2",
            "cidr_block": "137.75.95.32/27",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-004216d326b62be9c",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-sn-pub-ti-1b"
            },
            "tags_all": {
              "Name": "hydrovis-sn-pub-ti-1b",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:vpc/vpc-07a4518f4ecda4131",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.26.150.0/23",
            "default_network_acl_id": "acl-01c978502fe13480c",
            "default_route_table_id": "rtb-06c6856c525311911",
            "default_security_group_id": "sg-0210d56d96ef3ecac",
            "dhcp_options_id": "dopt-b9fd9dc3",
            "enable_classiclink": false,
            "enable_classiclink_dns_support": false,
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "id": "vpc-07a4518f4ecda4131",
            "instance_tenancy": "default",
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "main_route_table_id": "rtb-06c6856c525311911",
            "owner_id": "526904826677",
            "tags": {
              "Name": "hydrovis-ti-vpc"
            },
            "tags_all": {
              "Name": "hydrovis-ti-vpc",
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc_ipv4_cidr_block_association",
      "name": "public_cidr",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "cidr_block": "137.75.95.0/26",
            "id": "vpc-cidr-assoc-0d78055f696d608d4",
            "timeouts": {
              "create": null,
              "delete": null
            },
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIwIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpn_gateway_attachment",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "vpn-attachment-86426ed",
            "vpc_id": "vpc-07a4518f4ecda4131",
            "vpn_gateway_id": "vgw-09a557dd4e78938dc"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main",
            "module.vpc.data.aws_vpn_gateway.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpces",
      "mode": "managed",
      "type": "aws_vpc_endpoint",
      "name": "ec2messages",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:vpc-endpoint/vpce-0da9c7fda3c1b7397",
            "auto_accept": null,
            "cidr_blocks": [],
            "dns_entry": [
              {
                "dns_name": "vpce-0da9c7fda3c1b7397-en3lw9gz.ec2messages.us-east-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z7HUB22UULQXV"
              },
              {
                "dns_name": "vpce-0da9c7fda3c1b7397-en3lw9gz-us-east-1b.ec2messages.us-east-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z7HUB22UULQXV"
              },
              {
                "dns_name": "ec2messages.us-east-1.amazonaws.com",
                "hosted_zone_id": "Z06519062JDICX2RN9ILR"
              }
            ],
            "id": "vpce-0da9c7fda3c1b7397",
            "network_interface_ids": [
              "eni-0ecb7f674ea5a85d9"
            ],
            "owner_id": "526904826677",
            "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}]}",
            "prefix_list_id": null,
            "private_dns_enabled": true,
            "requester_managed": false,
            "route_table_ids": [],
            "security_group_ids": [
              "sg-0874e1b42d1981b59"
            ],
            "service_name": "com.amazonaws.us-east-1.ec2messages",
            "state": "available",
            "subnet_ids": [
              "subnet-0d1ea9ca66f139cfc"
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_endpoint_type": "Interface",
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpces",
      "mode": "managed",
      "type": "aws_vpc_endpoint",
      "name": "s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:vpc-endpoint/vpce-0f07f60d19b0abec1",
            "auto_accept": null,
            "cidr_blocks": [
              "52.216.0.0/15",
              "54.231.0.0/16",
              "3.5.0.0/19"
            ],
            "dns_entry": [],
            "id": "vpce-0f07f60d19b0abec1",
            "network_interface_ids": [],
            "owner_id": "526904826677",
            "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2008-10-17\"}",
            "prefix_list_id": "pl-63a5400a",
            "private_dns_enabled": false,
            "requester_managed": false,
            "route_table_ids": [
              "rtb-06c6856c525311911"
            ],
            "security_group_ids": [],
            "service_name": "com.amazonaws.us-east-1.s3",
            "state": "available",
            "subnet_ids": [],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_endpoint_type": "Gateway",
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpces",
      "mode": "managed",
      "type": "aws_vpc_endpoint",
      "name": "ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:vpc-endpoint/vpce-03d1f6dfa6e8819cc",
            "auto_accept": null,
            "cidr_blocks": [],
            "dns_entry": [
              {
                "dns_name": "vpce-03d1f6dfa6e8819cc-p9w2n50m.ssm.us-east-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z7HUB22UULQXV"
              },
              {
                "dns_name": "vpce-03d1f6dfa6e8819cc-p9w2n50m-us-east-1b.ssm.us-east-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z7HUB22UULQXV"
              },
              {
                "dns_name": "ssm.us-east-1.amazonaws.com",
                "hosted_zone_id": "Z09627243IF82MQEJNRBQ"
              }
            ],
            "id": "vpce-03d1f6dfa6e8819cc",
            "network_interface_ids": [
              "eni-0b7917fd9ef6acd50"
            ],
            "owner_id": "526904826677",
            "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}]}",
            "prefix_list_id": null,
            "private_dns_enabled": true,
            "requester_managed": false,
            "route_table_ids": [],
            "security_group_ids": [
              "sg-0874e1b42d1981b59"
            ],
            "service_name": "com.amazonaws.us-east-1.ssm",
            "state": "available",
            "subnet_ids": [
              "subnet-0d1ea9ca66f139cfc"
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_endpoint_type": "Interface",
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b"
          ]
        }
      ]
    },
    {
      "module": "module.vpces",
      "mode": "managed",
      "type": "aws_vpc_endpoint",
      "name": "ssmmessages",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:526904826677:vpc-endpoint/vpce-05f40429853e3462f",
            "auto_accept": null,
            "cidr_blocks": [],
            "dns_entry": [
              {
                "dns_name": "vpce-05f40429853e3462f-gycef8l8.ssmmessages.us-east-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z7HUB22UULQXV"
              },
              {
                "dns_name": "vpce-05f40429853e3462f-gycef8l8-us-east-1b.ssmmessages.us-east-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z7HUB22UULQXV"
              },
              {
                "dns_name": "ssmmessages.us-east-1.amazonaws.com",
                "hosted_zone_id": "Z0650272ZZ6RKPJ5CLDD"
              }
            ],
            "id": "vpce-05f40429853e3462f",
            "network_interface_ids": [
              "eni-0d93ef84be281dd08"
            ],
            "owner_id": "526904826677",
            "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}]}",
            "prefix_list_id": null,
            "private_dns_enabled": true,
            "requester_managed": false,
            "route_table_ids": [],
            "security_group_ids": [
              "sg-0874e1b42d1981b59"
            ],
            "service_name": "com.amazonaws.us-east-1.ssmmessages",
            "state": "available",
            "subnet_ids": [
              "subnet-0d1ea9ca66f139cfc"
            ],
            "tags": {},
            "tags_all": {
              "TaskOrderID": "1305L420QNWWJ0057",
              "VPC": "ti",
              "hydrovis-env": "ti",
              "noaa:fismaid": "noaa8501",
              "noaa:lineoffice": "nws",
              "noaa:programoffice": "owp",
              "noaa:project": "hydrovis",
              "noaa:projectid": "526904826677"
            },
            "timeouts": null,
            "vpc_endpoint_type": "Interface",
            "vpc_id": "vpc-07a4518f4ecda4131"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_subnet.hydrovis-sn-pub-1a",
            "module.vpc.aws_vpc.main",
            "module.security-groups.aws_security_group.ssm-session-manager-sg",
            "module.vpc.aws_main_route_table_association.main_private",
            "module.vpc.aws_nat_gateway.hv-pub-nat-gw-a",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.hydrovis-sn-prv-data1b"
          ]
        }
      ]
    }
  ]
}
