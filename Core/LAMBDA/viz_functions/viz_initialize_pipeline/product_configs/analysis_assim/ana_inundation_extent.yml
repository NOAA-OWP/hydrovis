product: ana_inundation_extent
configuration: analysis_assim
product_type: "fim"
run: true

ingest_files:
    - file_format: common/data/model/com/nwm/prod/nwm.{{datetime:%Y%m%d}}/analysis_assim/nwm.t{{datetime:%H}}z.analysis_assim.channel_rt.tm00.conus.nc
      file_step: None
      file_window: None
      target_table: ingest.nwm_channel_rt_ana
      target_keys: (feature_id, streamflow)

db_max_flows:
  - name: ana_max_flows
    target_table: cache.max_flows_ana
    target_keys: (feature_id, streamflow)
    method: database
    max_flows_sql_file: ana_max_flows

fim_configs:
  - name: ana_inundation_extent
    target_table: ingest.ana_inundation_extent
    fim_type: hand
    postprocess:
      sql_file: ana_inundation_extent
      target_table: publish.ana_inundation_extent
  
product_summaries:
  - sql_file:  src_skill
    target_table:
      - publish.ana_inundation_src_skill
  - sql_file:  building_footprints_fimpact
    target_table:
      - publish.ana_inundation_building_footprints
      - publish.ana_inundation_counties
      - publish.ana_inundation_hucs

services:
  - ana_inundation_extent_noaa